webpackJsonp([22],{1313:function(e,t,s){var i=s(1314);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);s(590)("5cb7592d",i,!0,{})},1314:function(e,t,s){(e.exports=s(589)()).push([e.i,".edit-salesClerk .title[data-v-3bb73b86]{font-size:16px;width:100%;height:50px;line-height:50px;padding-left:30px}.edit-salesClerk .salesClerk-base-info[data-v-3bb73b86],.edit-salesClerk .salesClerk-detail-info[data-v-3bb73b86]{background-color:#F5F5F7}.salesClerk-base-info-content[data-v-3bb73b86],.salesClerk-detail-info-content[data-v-3bb73b86]{width:50%;margin:30px auto}.salesClerk-base-info-content .edit-password[data-v-3bb73b86]{cursor:pointer;color:#0098cc}.edit-salesClerk .store-manage[data-v-3bb73b86]{width:100%;height:90px;overflow:auto;border:1px solid #C8C8C8;padding:10px 20px}.salesClerk-detail-info-content .edit-clerk-icon[data-v-3bb73b86]{overflow:hidden;margin-bottom:30px}.salesClerk-detail-info-content .edit-clerk-icon-fl[data-v-3bb73b86]{float:left;margin-left:27px}.salesClerk-detail-info-content .edit-clerk-icon-content[data-v-3bb73b86],.salesClerk-detail-info-content .edit-clerk-icon-img[data-v-3bb73b86]{margin-left:40px}.salesClerk-detail-info-content .edit-clerk-icon-content .ivu-btn.ivu-btn-primary[data-v-3bb73b86]{font-size:12px;color:#fff;margin-top:10px}.salesClerk-detail-info-content .edit-clerk-icon-content .ivu-btn.ivu-btn-primary[data-v-3bb73b86]:last-child{margin-top:20px;margin-bottom:20px}.salesClerk-detail-info-content .submitEdit[data-v-3bb73b86]{margin-left:36%}.salesClerk-detail-info-content .cancelEdit[data-v-3bb73b86]{margin-left:30px}label.ivu-checkbox-wrapper-disabled[data-v-3bb73b86]{pointer-events:none!important}",""])},1315:function(e,p,m){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),function(r){var e=m(305),a=m.n(e),t=m(306),s=m.n(t),i=m(769),n=m.n(i),d=m(307),l=m(83),o=m(803),c=m(834);p.default={mixins:[o.a,c.a],data:function(){var i=this;return{storeManagerExclusivePermissions:[21,22,23,24],allStoresIdListSelected:[],allStoresFromAreaSelected:{},allPositionsInDepartmentSelected:[],ifEditPassword:!1,positionModal:!1,firstAreaList:[],ifselected:!0,allInitPermissions:[],uploadData:{type:"retailwell",cate:"employee"},storeValue:"",storeAddressTree:[],openAddStoresModal:!1,openAddStorePermissionsModal:!1,staticURI:"",uploadAvatar:"",allDepartments:[],allPositions:[],options:{disabledDate:function(e){return e&&e.valueOf()>Date.now()}},employeeOperationType:"",employeeEdited:{department_id:"",position_id:"",username:"",sex:"1",password:"",rePassword:"",phone:"",stores:[],address:"",identity:"",email:"",employed_time:new Date,director:"",store_permissions:[],position_permissions:[],storesOfPermissionsAdded:[],storesManaged:[],avatar:""},employeeOriginalDepartmentId:null,employeeOriginalPositionId:null,ruleValidate:{username:[{required:!0,message:"姓名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:6,message:"密码长度最小为6位",trigger:"blur"}],rePassword:[{required:!0,validator:function(e,t,s){""===t?s(new Error("请再次输入密码")):t!==i.employeeEdited.password?s(new Error("两次密码不一致")):s()},trigger:"blur"}],phone:[{required:!0,validator:function(e,t,s){""===t?s(new Error("请输入手机号")):/^1[3|4|5|7|8][0-9]{9}$/.test(t)?s():s(new Error("手机号格式不正确"))},trigger:"blur"}]},storeGroupIds:[],allInitStores:[],allOriginalStoresData:[],storeSelected:{},storeIdSelected:void 0,storesAddedIsSaved:!1,showEditPasswordTip:!1,activeDepartment:{},activeDepartmentId:0}},mounted:function(){"creatEmployee"===this.$route.params.type&&this.receiveCreateEmployee(),"editEmployee"===this.$route.params.type&&this.receiveEditEmployee()},computed:{allStoresSelected:function(){var e=this,s=[];return this.allStoresIdListSelected.forEach(function(t){e.allOriginalStoresData.forEach(function(e){t===e.store_id&&s.push(e)})}),s}},methods:{receiveEditEmployee:function(){var t=this;this.employeeOperationType="编辑员工",this.showEditPasswordTip=!0,this.ifEditPassword=!1,this.$route.params.allDepartments&&(this.allDepartments=this.$route.params.allDepartments),this.allPositions=this.$route.params.allPositions,this.storeAddressTree=this.$route.params.storeAddressTree,this.staticURI=l.a.ImgSrc,this.uploadAvatar=l.a.ImgHttp+"/upload",this.allInitStores=this.$route.params.allInitStores,this.allOriginalStoresData=this.$route.params.allOriginalStoresData,this.allInitPermissions=this.$route.params.allInitPermissions,this.firstAreaList=this.$route.params.firstAreaList;var s=r.cloneDeep(this.$route.params.employee);s.password="",s.rePassword="",this.allStoresIdListSelected=n()(s.permissions.stores),this.allStoresIdListSelected=r.map(this.allStoresIdListSelected,function(e){return Number(e)}),s.employed_time&&(s.employed_time=new Date(1e3*s.employed_time)),s.storesManaged=s.stores;var i=this.allPositions.find(function(e){return e.id===s.position_id});r.each(s.storesManaged,function(e){e.store_permissions=i.store_permissions}),this.employeeOriginalDepartmentId=r.cloneDeep(s.department_id),this.employeeOriginalPositionId=r.cloneDeep(s.position_id),n()(s.permissions.stores).forEach(function(t){s.storesManaged.forEach(function(e){Number(t)===e.store_id&&(e.permissionsSelected=s.permissions.stores[t])})}),s.storesOfPermissionsAdded=[],this.employeeEdited=r.cloneDeep(s);var e=this.allDepartments.find(function(e){return e.id===t.employeeEdited.department_id});this.selectDepartment(e);var o=this.allPositions.find(function(e){return e.id===t.employeeEdited.position_id});this.selectPosition(o)},receiveCreateEmployee:function(){this.employeeOperationType="添加员工",this.$route.params.allDepartments&&(this.allDepartments=this.$route.params.allDepartments),this.ifEditPassword=!0,0<this.allDepartments.length&&(this.employeeEdited.department_id=this.allDepartments[0].id),this.storeAddressTree=this.$route.params.storeAddressTree,this.staticURI=l.a.ImgSrc,this.uploadAvatar=l.a.ImgHttp+"/upload",this.allInitStores=this.$route.params.allInitStores,this.allOriginalStoresData=this.$route.params.allOriginalStoresData,this.allInitPermissions=this.$route.params.allInitPermissions,this.allPositions=this.$route.params.allPositions,this.firstAreaList=this.$route.params.firstAreaList,this.activeDepartment=this.$route.params.activeDepartment,this.activeDepartmentId=this.$route.params.activeDepartmentId,this.allDepartments.length?this.activeDepartmentId?this.selectDepartment(this.activeDepartment):this.selectDepartment(this.allDepartments[0]):this.$Message.error("请先添加部门！")},addStore:function(t){if(t.position_id){var e=this.allPositions.find(function(e){return e.id===t.position_id});t.position_permissions.length||this.addPositionPermissionsToNewEmployee(e),this.openAddStoresModal=!0,this.selectArea(this.firstAreaList)}else this.$Message.error({content:"请先选择岗位",duration:3})},selectArea:function(e){this.ifselected=!1,this.getAllStoresFromAreaSelected(e),this.updateStoresSelectedCheckboxState(),this.ifselected=!0},selectDepartment:function(e){var t=this;this.$nextTick(function(){t.employeeEdited.department_id=e.id}),this.formatAllInitPermissions(),this.allInitPermissions.forEach(function(e){e.disabled=!0,e.functions.forEach(function(e){e.selected=!1,e.disabled=!0})}),this.extendPermissionsOfDepartmentSelected(e),this.getCheckboxAbledCounts(),this.renderCheckboxState(),this.getAllPositionsInDepartmentSelected(e.id),"添加员工"===this.employeeOperationType&&this.selectPosition(this.allPositionsInDepartmentSelected[0]),this.$nextTick(function(){t.employeeOriginalDepartmentId!==t.employeeEdited.department_id&&t.selectPosition(t.allPositionsInDepartmentSelected[0])})},selectPosition:function(t){var e=this;t&&(this.employeeEdited.position_id=t.id,this.$nextTick(function(){e.employeeOriginalPositionId!==e.employeeEdited.position_id?e.employeeEdited.storesManaged.length&&(r.each(e.employeeEdited.storesManaged,function(e){e.permissionsSelected=t.store_permissions,e.store_permissions=t.store_permissions}),e.employeeEdited.store_permissions=t.store_permissions,e.employeeEdited.position_permissions=t.permissions):e.addPositionPermissionsToNewEmployee(t)}))},addPositionPermissionsToNewEmployee:function(e){this.employeeEdited.storesManaged.length?(this.employeeEdited.position_permissions=e.permissions,this.employeeEdited.store_permissions=e.store_permissions):e.store_permissions.length&&(this.employeeEdited.position_permissions=e.permissions,this.employeeEdited.store_permissions=e.store_permissions)},getAllPositionsInDepartmentSelected:function(t){var s=[];this.allPositions.forEach(function(e){t===e.departmentAttached.id&&s.push(e)}),this.allPositionsInDepartmentSelected=s,r.isEmpty(this.allPositionsInDepartmentSelected)||this.employeeOriginalPositionId?r.isEmpty(this.allPositionsInDepartmentSelected)&&(this.positionModal=!0):this.showFirstPositionInDepartmentSelected()},showFirstPositionInDepartmentSelected:function(){this.employeeEdited.position_id=this.allPositionsInDepartmentSelected[0].id},editPassword:function(){this.ifEditPassword=!0,this.showEditPasswordTip=!1},confirmPositionModal:function(){this.positionModal=!1,this.$router.push("/salesclerkManage/clerkManage/department")},cancelPositionModal:function(){this.positionModal=!1},handleCheckAll:function(e){var i=this;this.ifselected=!1,e.checkAll=!e.checkAll,e.indeterminate=!1,e.disabled||(e.checkAll?(e.permissionIds=[],e.functions.forEach(function(t){t.disabled||(t.selected=!0,e.permissionIds.push(t.id),i.employeeEdited.storesOfPermissionsAdded.forEach(function(e){e.store_id===i.storeIdSelected&&(e.permissionsSelected.includes(t.id)||e.permissionsSelected.push(t.id))}))})):(e.permissionIds=[],e.functions.forEach(function(s){s.disabled||(s.selected=!1,i.employeeEdited.storesOfPermissionsAdded.forEach(function(e){if(e.store_id===i.storeIdSelected){var t=e.permissionsSelected.indexOf(s.id);-1!==t&&e.permissionsSelected.splice(t,1)}}))}))),this.renderCheckboxState(),this.updatePermissionsSelectedFromStoreSelected(this.storeIdSelected),this.ifselected=!0},handleCheckSingle:function(e,s){var i=this;this.ifselected=!1;var t=e.permissionIds.indexOf(s.id);-1!==t?(s.selected=!1,e.permissionIds.splice(t,1),this.employeeEdited.storesOfPermissionsAdded.forEach(function(e){if(e.store_id===i.storeIdSelected){var t=e.permissionsSelected.indexOf(s.id);-1!==t&&e.permissionsSelected.splice(t,1)}})):(s.selected=!0,e.permissionIds.push(s.id),this.employeeEdited.storesOfPermissionsAdded.forEach(function(e){e.store_id===i.storeIdSelected&&e.permissionsSelected.push(s.id)})),e.permissionIds.length===e.checkboxAbledCount?e.checkAll=!0:e.checkAll=!1,0<e.permissionIds.length&&e.permissionIds.length<e.checkboxAbledCount?e.indeterminate=!0:e.indeterminate=!1,this.renderCheckboxState(),this.updatePermissionsSelectedFromStoreSelected(this.storeIdSelected),this.ifselected=!0},deleteStoreSelected:function(t){var e=this.allStoresIdListSelected.findIndex(function(e){return e===t});this.allStoresIdListSelected.splice(e,1),this.allStoresFromAreaSelected.storeGroupIds.length||(this.allStoresFromAreaSelected.indeterminate=!1),this.updateStoresSelectedCheckboxState()},handleCheckAllStore:function(t){var s=this;this.ifselected=!1,t.checkAll=!t.checkAll,t.indeterminate=!1,t.checkAll?(t.storeGroupIds=[],t.stores.forEach(function(e){e.selected=!0,t.storeGroupIds.push(e.store_id),s.allStoresIdListSelected.includes(e.store_id)||s.allStoresIdListSelected.push(e.store_id)})):(t.storeGroupIds=[],t.stores.forEach(function(e){e.selected=!1;var t=s.allStoresIdListSelected.indexOf(e.store_id);-1!==t&&s.allStoresIdListSelected.splice(t,1)})),this.renderStoreCheckboxState(t),this.ifselected=!0},handleCheckSingleStore:function(e,t){this.ifselected=!1;var s=e.storeGroupIds.indexOf(t.store_id);if(-1!==s){t.selected=!1,e.storeGroupIds.splice(s,1);var i=this.allStoresIdListSelected.indexOf(t.store_id);-1!==i&&this.allStoresIdListSelected.splice(i,1)}else t.selected=!0,e.storeGroupIds.push(t.store_id),this.allStoresIdListSelected.includes(t.store_id)||this.allStoresIdListSelected.push(t.store_id);e.storeGroupIds.length===e.stores.length?(e.checkAll=!0,e.indeterminate=!1):0<e.storeGroupIds.length&&e.storeGroupIds.length<e.stores.length?(e.checkAll=!1,e.indeterminate=!0):e.indeterminate=!1,e.storeGroupIds.length||(e.indeterminate=!1),this.renderStoreCheckboxState(e),this.ifselected=!0},renderStoreCheckboxState:function(e){e.storeGroupIds.length===e.stores.length?(e.checkAll=!0,e.indeterminate=!1):0<e.storeGroupIds.length&&e.storeGroupIds.length<e.stores.length?(e.checkAll=!1,e.indeterminate=!0):(e.checkAll=!1,e.indeterminate=!1)},uploadAvatarSuccess:function(e,t){e&&"success"===e.error?(this.$Message.success("头像上传成功！"),this.employeeEdited.avatar=e.uri):this.$Message.error("头像上传失败！")},handleFormatError:function(e){this.$Notice.warning({title:"图片格式不正确",desc:'图片"'+e.name+'"格式不正确，请重新上传jpeg/jpg/png等格式图片!'})},deleteStore:function(t){var e=r.findIndex(this.employeeEdited.storesManaged,function(e){return e.store_id===t});this.employeeEdited.storesManaged.splice(e,1);var s=r.findIndex(this.allStoresIdListSelected,function(e){return e===t});this.allStoresIdListSelected.splice(s,1)},submit:function(){var t,n=this;this.$refs.employeeEdited.validate((t=s()(a.a.mark(function e(t){var s,i,o,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=17;break}if(s=[],n.employeeEdited.storesManaged.length?n.employeeEdited.storesManaged.forEach(function(e){s.push({id:e.store_id,name:e.store_name,permissions:e.permissionsSelected})}):n.$Message.error({content:"未添加店铺",duration:3}),i=void 0,i=n.employeeEdited.employed_time?parseInt(Number(n.employeeEdited.employed_time.getTime())/1e3):parseInt((new Date).getTime()/1e3),"添加员工"!==n.employeeOperationType){e.next=10;break}return e.next=8,d.m(n.employeeEdited.position_id,n.employeeEdited.department_id,n.employeeEdited.username,n.employeeEdited.password,n.employeeEdited.sex,n.employeeEdited.phone,s,n.employeeEdited.avatar,n.employeeEdited.address,n.employeeEdited.identity,n.employeeEdited.email,i,n.employeeEdited.director);case 8:(o=e.sent)&&200===o.code&&(n.$Message.success("添加员工成功!"),n.$router.push({name:"department"}));case 10:if("编辑员工"!==n.employeeOperationType){e.next=15;break}return e.next=13,d._54(n.employeeEdited.id,n.employeeEdited.position_id,n.employeeEdited.department_id,n.employeeEdited.username,n.employeeEdited.password,n.employeeEdited.sex,n.employeeEdited.phone,s,n.employeeEdited.avatar,n.employeeEdited.address,n.employeeEdited.identity,n.employeeEdited.email,i,n.employeeEdited.director);case 13:(r=e.sent)&&200===r.code&&(n.$Message.success("编辑员工成功!"),n.$router.push({name:"department"}));case 15:e.next=18;break;case 17:n.$Message.error("表单验证失败!");case 18:case"end":return e.stop()}},e,n)})),function(e){return t.apply(this,arguments)}))},cancelEdit:function(){this.$router.push({name:"department"})},updatePermissionsSelectedFromStoreSelected:function(t){var s=this.employeeEdited.storesOfPermissionsAdded.find(function(e){return e.store_id===t});this.allInitPermissions.forEach(function(e){e.checkAll?e.functions.forEach(function(e){s.permissionsSelected.includes(e.id)||s.permissionsSelected.push(e.id)}):e.functions.forEach(function(e){if(s.permissionsSelected.includes(e.id)){var t=s.permissionsSelected.indexOf(e.id);s.permissionsSelected.splice(t,1)}}),e.functions.forEach(function(e){if(e.selected&&!s.permissionsSelected.includes(e.id)&&s.permissionsSelected.push(e.id),!e.selected&&s.permissionsSelected.includes(e.id)){var t=s.permissionsSelected.indexOf(e.id);s.permissionsSelected.splice(t,1)}})})},cancelSaveEditStore:function(){this.employeeEdited.storesManaged.length||(this.allStoresFromAreaSelected={},this.allStoresIdListSelected=[],this.employeeEdited.storesManaged=[]),this.openAddStorePermissionsModal=!1},cancelEditStore:function(){this.storesAddedIsSaved||(this.allStoresFromAreaSelected={},this.allStoresIdListSelected=[]),this.openAddStoresModal=!1},save:function(){this.employeeEdited.storesManaged=r.cloneDeep(this.employeeEdited.storesOfPermissionsAdded),this.employeeEdited.storesOfPermissionsAdded.length=0,this.storesAddedIsSaved=!0,this.$Message.success("保存成功"),this.openAddStorePermissionsModal=!1}}}}.call(p,m(123))},1316:function(e,t,s){e.exports={render:function(){var i=this,e=i.$createElement,o=i._self._c||e;return o("div",{staticClass:"edit-salesClerk"},[o("div",{staticClass:"edit-salesClerk-content"},[o("p",{staticClass:"salesClerk-base-info title PingFangSC-Medium-font"},[i._v(i._s(i.employeeOperationType)+"基础信息")]),i._v(" "),o("Form",{ref:"employeeEdited",attrs:{model:i.employeeEdited,rules:i.ruleValidate,"label-width":100}},[o("div",{staticClass:"salesClerk-base-info-content"},[o("FormItem",{attrs:{label:"部门：",prop:"departmentId"}},[o("Select",{attrs:{placeholder:"请选择部门"},model:{value:i.employeeEdited.department_id,callback:function(e){i.$set(i.employeeEdited,"department_id",e)},expression:"employeeEdited.department_id"}},i._l(i.allDepartments,function(t,e){return o("Option",{key:e,attrs:{value:t.id},nativeOn:{click:function(e){e.preventDefault(),i.selectDepartment(t)}}},[i._v("\n                            "+i._s(t.name)+"\n                        ")])}))],1),i._v(" "),o("FormItem",{attrs:{label:"选择岗位：",prop:"position_id"}},[o("Select",{attrs:{placeholder:"请选择岗位"},model:{value:i.employeeEdited.position_id,callback:function(e){i.$set(i.employeeEdited,"position_id",e)},expression:"employeeEdited.position_id"}},i._l(i.allPositionsInDepartmentSelected,function(t,e){return o("Option",{key:e+"-"+new Date,attrs:{value:t.id},nativeOn:{click:function(e){e.preventDefault(),i.selectPosition(t)}}},[i._v("\n                            "+i._s(t.name)+"\n                        ")])}))],1),i._v(" "),o("FormItem",{attrs:{label:"姓名：",prop:"username"}},[o("Input",{attrs:{placeholder:"请填写姓名"},model:{value:i.employeeEdited.username,callback:function(e){i.$set(i.employeeEdited,"username",e)},expression:"employeeEdited.username"}})],1),i._v(" "),o("FormItem",{attrs:{label:"性别：",prop:"sex"}},[o("RadioGroup",{model:{value:i.employeeEdited.sex,callback:function(e){i.$set(i.employeeEdited,"sex",e)},expression:"employeeEdited.sex"}},[o("Radio",{attrs:{label:"1"}},[i._v("男")]),i._v(" "),o("Radio",{attrs:{label:"0"}},[i._v("女")])],1)],1),i._v(" "),o("FormItem",{directives:[{name:"show",rawName:"v-show",value:i.showEditPasswordTip,expression:"showEditPasswordTip"}],attrs:{label:"密码："}},[o("p",{staticClass:"edit-password",on:{click:i.editPassword}},[i._v("编辑密码")])]),i._v(" "),"添加员工"===i.employeeOperationType&&i.ifEditPassword?o("FormItem",{attrs:{label:"密码：",prop:"password"}},[o("Input",{attrs:{type:"password",placeholder:"请填写密码"},model:{value:i.employeeEdited.password,callback:function(e){i.$set(i.employeeEdited,"password",e)},expression:"employeeEdited.password"}})],1):i._e(),i._v(" "),"编辑员工"===i.employeeOperationType&&i.ifEditPassword?o("FormItem",{attrs:{label:"新密码：",prop:"password"}},[o("Input",{attrs:{type:"password",placeholder:"请填写密码"},model:{value:i.employeeEdited.password,callback:function(e){i.$set(i.employeeEdited,"password",e)},expression:"employeeEdited.password"}})],1):i._e(),i._v(" "),i.ifEditPassword?o("FormItem",{attrs:{label:"确认密码：",prop:"rePassword"}},[o("Input",{attrs:{type:"password",placeholder:"请确认密码"},model:{value:i.employeeEdited.rePassword,callback:function(e){i.$set(i.employeeEdited,"rePassword",e)},expression:"employeeEdited.rePassword"}})],1):i._e(),i._v(" "),o("FormItem",{attrs:{label:"手机号码：",prop:"phone"}},[o("Input",{attrs:{placeholder:"请填写手机号码"},model:{value:i.employeeEdited.phone,callback:function(e){i.$set(i.employeeEdited,"phone",e)},expression:"employeeEdited.phone"}})],1),i._v(" "),o("FormItem",{attrs:{label:"管理店铺：",prop:"store"}},[o("div",{staticClass:"store-manage"},[i._l(i.employeeEdited.storesManaged,function(t,e){return i.employeeEdited.storesManaged.length?o("Tag",{key:e,attrs:{closable:""},on:{"on-close":function(e){i.deleteStore(t.store_id)}}},[i._v(i._s(t.store_name)+"\n                        ")]):i._e()}),i._v(" "),o("Button",{attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:function(e){i.addStore(i.employeeEdited)}}},[i._v("\n                            添加店铺\n                        ")])],2)])],1),i._v(" "),o("p",{staticClass:"salesClerk-detail-info title PingFangSC-Medium-font"},[i._v(i._s(i.employeeOperationType)+"详细信息")]),i._v(" "),o("div",{staticClass:"salesClerk-detail-info-content"},[o("div",{staticClass:"edit-clerk-icon"},[o("span",{staticClass:"edit-clerk-icon-fl edit-clerk-icon-title"},[i._v("修改照片：")]),i._v(" "),i.employeeEdited.avatar?o("img",{staticClass:"edit-clerk-icon-fl edit-clerk-icon-img",attrs:{src:i.staticURI+i.employeeEdited.avatar,width:"100px"}}):o("img",{staticClass:"edit-clerk-icon-fl edit-clerk-icon-img",attrs:{src:s(783),width:"100px"}}),i._v(" "),o("div",{staticClass:"edit-clerk-icon-content edit-clerk-icon-fl"},[o("Button",{attrs:{type:"primary"}},[i._v("拍照上传")]),i._v(" "),o("Upload",{ref:"upload",attrs:{"on-success":i.uploadAvatarSuccess,action:i.uploadAvatar,format:["jpg","jpeg","png"],"on-format-error":i.handleFormatError,name:"image",data:i.uploadData,"show-upload-list":!1}},[o("Button",{attrs:{type:"primary"}},[i._v("本地上传")])],1),i._v(" "),o("p",[i._v("(上传格式如：jpg、jpeg、png、pdf)")])],1)]),i._v(" "),o("FormItem",{attrs:{label:"地址：",prop:"address"}},[o("Input",{attrs:{placeholder:"请填写地址"},model:{value:i.employeeEdited.address,callback:function(e){i.$set(i.employeeEdited,"address",e)},expression:"employeeEdited.address"}})],1),i._v(" "),o("FormItem",{attrs:{label:"身份证号：",prop:"identity"}},[o("Input",{attrs:{placeholder:"请填写身份证号"},model:{value:i.employeeEdited.identity,callback:function(e){i.$set(i.employeeEdited,"identity",e)},expression:"employeeEdited.identity"}})],1),i._v(" "),o("FormItem",{attrs:{label:"邮箱：",prop:"email"}},[o("Input",{attrs:{placeholder:"请填写邮箱"},model:{value:i.employeeEdited.email,callback:function(e){i.$set(i.employeeEdited,"email",e)},expression:"employeeEdited.email"}})],1),i._v(" "),o("FormItem",{attrs:{label:"入职时间：",prop:"time"}},[o("DatePicker",{attrs:{type:"date",placeholder:"选择日期",options:i.options},model:{value:i.employeeEdited.employed_time,callback:function(e){i.$set(i.employeeEdited,"employed_time",e)},expression:"employeeEdited.employed_time"}})],1),i._v(" "),o("FormItem",{attrs:{label:"主管：",prop:"supervisor"}},[o("Input",{attrs:{placeholder:"请填写主管"},model:{value:i.employeeEdited.director,callback:function(e){i.$set(i.employeeEdited,"director",e)},expression:"employeeEdited.director"}})],1),i._v(" "),o("FormItem",[o("Button",{staticClass:"submitEdit",attrs:{type:"primary"},on:{click:i.submit}},[i._v("保存")]),i._v(" "),o("Button",{staticClass:"cancelEdit",attrs:{type:"ghost"},on:{click:i.cancelEdit}},[i._v("取消")])],1)],1)])],1),i._v(" "),o("Modal",{staticClass:"edit-store-modal",attrs:{title:"添加店铺",width:"800"},model:{value:i.openAddStoresModal,callback:function(e){i.openAddStoresModal=e},expression:"openAddStoresModal"}},[o("div",{staticClass:"edit-store-modal-content"},[o("div",{staticClass:"edit-store-modal-content-tree"},[o("p",{staticClass:"edit-store-modal-content-tree-title PingFangSC-Medium-font"},[i._v("区域")]),i._v(" "),o("Tree",{attrs:{data:i.storeAddressTree},on:{"on-select-change":i.selectArea}})],1),i._v(" "),o("div",{staticClass:"edit-store-modal-content-info"},[o("div",{staticClass:"edit-store-modal-content-info-store"},[o("Input",{attrs:{placeholder:"请输入..."},model:{value:i.storeValue,callback:function(e){i.storeValue=e},expression:"storeValue"}}),i._v(" "),o("Checkbox",{attrs:{value:i.allStoresFromAreaSelected.checkAll,indeterminate:i.allStoresFromAreaSelected.indeterminate},nativeOn:{click:function(e){e.preventDefault(),i.handleCheckAllStore(i.allStoresFromAreaSelected)}}},[i._v("\n                        全选\n                    ")]),i._v(" "),i._l(i.allStoresFromAreaSelected.stores,function(t,e){return o("div",{directives:[{name:"show",rawName:"v-show",value:i.ifselected,expression:"ifselected"}],key:e},[o("CheckboxGroup",{staticStyle:{float:"left"},model:{value:i.allStoresFromAreaSelected.storeGroupIds,callback:function(e){i.$set(i.allStoresFromAreaSelected,"storeGroupIds",e)},expression:"allStoresFromAreaSelected.storeGroupIds"}},[o("Checkbox",{key:Math.random(),attrs:{value:t.selected,label:t.store_id},nativeOn:{click:function(e){e.preventDefault(),i.handleCheckSingleStore(i.allStoresFromAreaSelected,t)}}},[i._v("\n                                "+i._s(t.sotre_name)+"\n                            ")])],1)],1)})],2),i._v(" "),o("div",{staticClass:"edit-store-modal-content-info-store-selected"},[o("p",{staticClass:"edit-store-modal-content-info-store-selected-title PingFangSC-Medium-font"},[i._v("已添加店铺")]),i._v(" "),o("div",{staticClass:"edit-store-modal-content-info-store-selected-content"},i._l(i.allStoresSelected,function(t,e){return t.sotre_name?o("div",{key:e,staticClass:"store-button-content"},[o("span",{staticClass:"store-button"},[i._v(i._s(t.sotre_name))]),i._v(" "),o("i",{staticClass:"deletelabel",on:{click:function(e){i.deleteStoreSelected(t.store_id)}}})]):i._e()}))])])]),i._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"primary"},on:{click:i.next}},[i._v("下一步")]),i._v(" "),o("Button",{staticStyle:{"margin-left":"30px","margin-right":"40%"},attrs:{type:"ghost"},on:{click:i.cancelEditStore}},[i._v("取消")])],1)]),i._v(" "),o("Modal",{staticClass:"edit-store-modal",attrs:{title:"添加店铺权限",width:"800"},model:{value:i.openAddStorePermissionsModal,callback:function(e){i.openAddStorePermissionsModal=e},expression:"openAddStorePermissionsModal"}},[o("div",{staticClass:"edit-store-modal-content"},[o("div",{staticClass:"edit-store-modal-content-save"},[o("p",{staticClass:"edit-store-modal-content-save-title PingFangSC-Medium-font"},[i._v("已添加店铺")]),i._v(" "),i.employeeEdited.storesOfPermissionsAdded.length?o("Menu",{attrs:{"active-name":i.employeeEdited.storesOfPermissionsAdded[0].store_id,theme:"light",width:"auto"},on:{"on-select":i.selectStore}},i._l(i.employeeEdited.storesOfPermissionsAdded,function(e,t){return o("MenuItem",{key:t,attrs:{name:e.store_id}},[i._v("\n                        "+i._s(e.store_name)+"\n                    ")])})):i._e()],1),i._v(" "),o("div",{staticClass:"edit-store-modal-content-save-permission"},[o("div",{staticClass:"store-permission"},[o("p",{staticClass:"title"},[i._v("店铺权限")]),i._v(" "),i._l(i.allInitPermissions,function(s,e){return"0"===s.type?o("div",{key:e,staticClass:"data-center"},[o("div",{directives:[{name:"show",rawName:"v-show",value:i.ifselected,expression:"ifselected"}]},[o("Checkbox",{attrs:{indeterminate:s.indeterminate,value:s.checkAll,disabled:s.disabled},nativeOn:{click:function(e){e.preventDefault(),i.handleCheckAll(s)}}},[i._v("\n                                "+i._s(s.func_group_name)+"\n                            ")]),i._v(" "),o("p",{staticClass:"severed"}),i._v(" "),o("CheckboxGroup",{model:{value:s.permissionIds,callback:function(e){i.$set(s,"permissionIds",e)},expression:"permissionGroup.permissionIds"}},i._l(s.functions,function(t,e){return o("Checkbox",{key:e,attrs:{disabled:t.disabled,value:t.selected,label:t.id},nativeOn:{click:function(e){e.preventDefault(),i.handleCheckSingle(s,t)}}},[i._v("\n                                    "+i._s(t.func_name)+"\n                                ")])}))],1)]):i._e()})],2)])]),i._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"primary"},on:{click:i.save}},[i._v("保存")]),i._v(" "),o("Button",{staticStyle:{"margin-left":"30px","margin-right":"40%"},attrs:{type:"ghost"},on:{click:i.cancelSaveEditStore}},[i._v("取消\n            ")])],1)]),i._v(" "),o("Modal",{staticClass:"edit-store-modal",attrs:{title:"岗位提示",width:"400"},model:{value:i.positionModal,callback:function(e){i.positionModal=e},expression:"positionModal"}},[o("p",{staticClass:"clerk-departing-modal-info"},[i._v("当前部门下没有添加任何岗位，是否返回添加？")]),i._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"primary"},on:{click:i.confirmPositionModal}},[i._v("确定")]),i._v(" "),o("Button",{staticStyle:{"margin-left":"30px","margin-right":"108px"},attrs:{type:"ghost"},on:{click:i.cancelPositionModal}},[i._v("取消\n            ")])],1)])],1)},staticRenderFns:[]}},1406:function(e,t,s){var i=s(304)(s(1315),s(1316),function(e){s(1313)},"data-v-3bb73b86",null);e.exports=i.exports},769:function(e,t,s){e.exports={default:s(775),__esModule:!0}},775:function(e,t,s){s(776),e.exports=s(26).Object.keys},776:function(e,t,s){var i=s(125),o=s(124);s(777)("keys",function(){return function(e){return o(i(e))}})},777:function(e,t,s){var o=s(49),r=s(26),n=s(85);e.exports=function(e,t){var s=(r.Object||{})[e]||Object[e],i={};i[e]=t(s),o(o.S+o.F*n(function(){s(1)}),"Object",i)}},783:function(e,t){e.exports="data:image/png;base64,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"},803:function(e,t,s){"use strict";s.d(t,"a",function(){return f});var i=s(311),o=s.n(i),r=s(84),n=s.n(r),a=s(305),d=s.n(a),l=s(306),c=s.n(l),p=s(307),m=s(83),u=s(122),h=s(82),f={data:function(){return{}},methods:{getUserInfoByTokenAction:function(){var s=this;return c()(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p._32();case 2:(t=e.sent)&&200===t.code?s.setSession(t):(clearInterval(m.a.clearSetInterval),window.sessionStorage.clear(),u.a.clearAllCookie(h.a.COOKIE_NAME),s.$router.push({path:"/login"}));case 4:case"end":return e.stop()}},e,s)}))()},setSession:function(e){m.a.authToken=e.data.auth_token.toString(),e.data.position&&window.sessionStorage.setItem("position",e.data.position),window.sessionStorage.setItem("token",e.data.auth_token.toString()),0<e.data.stores.length&&window.sessionStorage.setItem("storeToken",e.data.stores[0].store_token),window.sessionStorage.setItem("managementPermissions",e.data.permissions.management.toString()),null!==e.data.permissions.stores?window.sessionStorage.setItem("storesPermissions",n()(e.data.permissions.stores)):m.a.TabMenuShow=!1,e.data.stores&&(window.sessionStorage.setItem("storesList",n()(e.data.stores)),1===e.data.stores.length&&0<e.data.stores.length&&window.sessionStorage.setItem("storeId",e.data.stores[0].store_id)),window.sessionStorage.setItem("userName",e.data.username),this.$store.state.sessionStorageInfo=o()({},window.sessionStorage)}}}},834:function(e,t,s){"use strict";(function(r){t.a={methods:{getCheckboxAbledCounts:function(){this.allInitPermissions.forEach(function(t){t.functions.forEach(function(e){e.disabled||(t.checkboxAbledCount+=1)})})},formatAllInitPermissions:function(){this.allInitPermissions.forEach(function(e){e.checkAll=!1,e.disabled=!1,e.indeterminate=!1,e.permissionIds=[],e.checkboxAbledCount=0,e.functions.forEach(function(e){e.selected=!1,e.disabled=!1})})},getAllStoresFromAreaSelected:function(t){this.allStoresFromAreaSelected=this.allInitStores.find(function(e){return e.title===t[0].title})},updateStoresSelectedCheckboxState:function(){var t=this;this.allStoresFromAreaSelected.storeGroupIds=[],this.allStoresIdListSelected.length?this.allStoresFromAreaSelected.stores.forEach(function(e){t.allStoresIdListSelected.includes(e.store_id)?(e.selected=!0,t.allStoresFromAreaSelected.storeGroupIds.push(e.store_id),t.allStoresFromAreaSelected.stores.every(function(e){return t.allStoresIdListSelected.includes(e.store_id)})&&t.allStoresFromAreaSelected.stores.length===t.allStoresFromAreaSelected.storeGroupIds.length?(t.allStoresFromAreaSelected.checkAll=!0,t.allStoresFromAreaSelected.indeterminate=!1):(t.allStoresFromAreaSelected.checkAll=!1,t.allStoresFromAreaSelected.indeterminate=!0)):(e.selected=!1,t.allStoresFromAreaSelected.checkAll=!1)}):(this.allStoresFromAreaSelected.checkAll=!1,this.allStoresFromAreaSelected.indeterminate=!1)},next:function(){var i=this;this.allStoresSelected.length?(this.openAddStoresModal=!1,this.openAddStorePermissionsModal=!0,this.employeeEdited.storesOfPermissionsAdded=[],this.allStoresSelected.forEach(function(t){var e=[];if(i.employeeEdited.storesManaged.length){var s=r.find(i.employeeEdited.storesManaged,function(e){return e.store_id===t.store_id});e=void 0!==s?s.permissionsSelected:i.employeeEdited.store_permissions}i.employeeEdited.storesOfPermissionsAdded.push({store_name:t.sotre_name,store_id:t.store_id,store_permissions:i.employeeEdited.store_permissions,permissionsSelected:r.cloneDeep(e)})}),this.selectStore(this.employeeEdited.storesOfPermissionsAdded[0].store_id)):this.$Notice.warning({title:"添加店铺",desc:"请先添加店铺"})},selectStore:function(t){this.ifselected=!1,this.storeIdSelected=t;var e=this.employeeEdited.storesOfPermissionsAdded.find(function(e){return e.store_id===t});this.resetAllInitPermissions(),this.allInitPermissions.forEach(function(e){e.disabled=!0,e.functions.forEach(function(e){e.disabled=!0})}),this.extendPermissionsOfPositionSelected(e),this.getCheckboxAbledCounts(),this.renderCheckboxState(),this.ifselected=!0},resetAllInitPermissions:function(){r.each(this.allInitPermissions,function(e){e.checkAll=!1,e.disabled=!1,e.indeterminate=!1,e.permissionIds=[],e.checkboxAbledCount=0,r.each(e.functions,function(e){e.selected=!1,e.disabled=!1})})},extendPermissionsOfPositionSelected:function(e){r.each(this.allInitPermissions,function(s){r.each(s.functions,function(t){r.each(e.store_permissions,function(e){t.id===e&&(t.disabled=!1)}),r.each(e.permissionsSelected,function(e){t.id===e&&(t.selected=!0,s.permissionIds.push(t.id))})})})},renderCheckboxState:function(){this.allInitPermissions.forEach(function(e){0!==e.checkboxAbledCount?e.permissionIds.length===e.checkboxAbledCount?(e.indeterminate=!1,e.disabled=!1,e.checkAll=!0):0<e.permissionIds.length&&e.permissionIds.length<e.checkboxAbledCount?(e.indeterminate=!0,e.disabled=!1):(e.disabled=!1,e.indeterminate=!1):(e.disabled=!0,e.checkAll=!1)})},extendPermissionsOfDepartmentSelected:function(i){var o=this;this.allInitPermissions.forEach(function(s){s.functions.forEach(function(e){if(i.totalPermissions.length){var t=[];r.isEmpty(o.positionEdited)?(t=i.totalPermissions).includes(e.id)&&(e.disabled=!1,e.selected=!0,s.permissionIds.push(e.id)):(t=r.intersection(i.totalPermissions,o.positionEdited.permissions),i.totalPermissions.includes(e.id)&&(e.disabled=!1),t.includes(e.id)&&(e.selected=!0,s.permissionIds.push(e.id)))}})})}}}}).call(t,s(123))}});