webpackJsonp([0],Array(598).concat([function(t,e){var s={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},l={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},h=Object.prototype.toString,i=Array.prototype,a=i.forEach,c=i.filter,n=i.slice,u=i.map,f=i.reduce,r={};function d(t){if(null==t||"object"!=typeof t)return t;var e=t,i=h.call(t);if("[object Array]"===i){e=[];for(var n=0,r=t.length;n<r;n++)e[n]=d(t[n])}else if(l[i]){var o=t.constructor;if(t.constructor.from)e=o.from(t);else{e=new o(t.length);for(n=0,r=t.length;n<r;n++)e[n]=d(t[n])}}else if(!s[i]&&!S(t)&&!w(t))for(var a in e={},t)t.hasOwnProperty(a)&&(e[a]=d(t[a]));return e}function p(t,e,i){if(!x(e)||!x(t))return i?d(e):t;for(var n in e)if(e.hasOwnProperty(n)){var r=t[n],o=e[n];!x(o)||!x(r)||_(o)||_(r)||w(o)||w(r)||b(o)||b(r)||S(o)||S(r)?!i&&n in t||(t[n]=d(e[n])):p(r,o,i)}return t}function o(t,e,i){for(var n in e)e.hasOwnProperty(n)&&(i?null!=e[n]:null==t[n])&&(t[n]=e[n]);return t}var g,v=function(){return r.createCanvas()};function m(t,e,i){if(t&&e)if(t.forEach&&t.forEach===a)t.forEach(e,i);else if(t.length===+t.length)for(var n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t)}function y(t,e){var i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}function _(t){return"[object Array]"===h.call(t)}function x(t){var e=typeof t;return"function"===e||!!t&&"object"==e}function b(t){return!!s[h.call(t)]}function w(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}r.createCanvas=function(){return document.createElement("canvas")};var C="__ec_primitive__";function S(t){return t[C]}function T(t){t&&m(t,function(t,e){this.set(e,t)},this)}var O="_ec_";T.prototype={constructor:T,get:function(t){return this[O+t]},set:function(t,e){return this[O+t]=e},each:function(t,e){for(var i in void 0!==e&&(t=y(t,e)),this)this.hasOwnProperty(i)&&t(this[i],i.slice(4))},removeKey:function(t){delete this[O+t]}},e.$override=function(t,e){r[t]=e},e.clone=d,e.merge=p,e.mergeAll=function(t,e){for(var i=t[0],n=1,r=t.length;n<r;n++)i=p(i,t[n],e);return i},e.extend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},e.defaults=o,e.createCanvas=v,e.getContext=function(){return g||(g=v().getContext("2d")),g},e.indexOf=function(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i}return-1},e.inherits=function(t,e){var i=t.prototype;function n(){}for(var r in n.prototype=e.prototype,t.prototype=new n,i)t.prototype[r]=i[r];(t.prototype.constructor=t).superClass=e},e.mixin=function(t,e,i){o(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,i)},e.isArrayLike=function(t){if(t)return"string"!=typeof t&&"number"==typeof t.length},e.each=m,e.map=function(t,e,i){if(t&&e){if(t.map&&t.map===u)return t.map(e,i);for(var n=[],r=0,o=t.length;r<o;r++)n.push(e.call(i,t[r],r,t));return n}},e.reduce=function(t,e,i,n){if(t&&e){if(t.reduce&&t.reduce===f)return t.reduce(e,i,n);for(var r=0,o=t.length;r<o;r++)i=e.call(n,i,t[r],r,t);return i}},e.filter=function(t,e,i){if(t&&e){if(t.filter&&t.filter===c)return t.filter(e,i);for(var n=[],r=0,o=t.length;r<o;r++)e.call(i,t[r],r,t)&&n.push(t[r]);return n}},e.find=function(t,e,i){if(t&&e)for(var n=0,r=t.length;n<r;n++)if(e.call(i,t[n],n,t))return t[n]},e.bind=y,e.curry=function(t){var e=n.call(arguments,1);return function(){return t.apply(this,e.concat(n.call(arguments)))}},e.isArray=_,e.isFunction=function(t){return"function"==typeof t},e.isString=function(t){return"[object String]"===h.call(t)},e.isObject=x,e.isBuiltInObject=b,e.isDom=w,e.eqNaN=function(t){return t!=t},e.retrieve=function(t){for(var e=0,i=arguments.length;e<i;e++)if(null!=arguments[e])return arguments[e]},e.retrieve2=function(t,e){return null!=t?t:e},e.retrieve3=function(t,e,i){return null!=t?t:null!=e?e:i},e.slice=function(){return Function.call.apply(n,arguments)},e.normalizeCssArray=function(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t},e.assert=function(t,e){if(!t)throw new Error(e)},e.setAsPrimitive=function(t){t[C]=!0},e.isPrimitive=S,e.createHashMap=function(t){return new T(t)},e.noop=function(){}},function(t,e,i){var g=i(598),a=i(696),n=i(618),r=i(615),s=i(602),o=i(604),l=i(646),h=i(653);e.Image=h;var c=i(621);e.Group=c;var u=i(703);e.Text=u;var f=i(704);e.Circle=f;var d=i(705);e.Sector=d;var p=i(706);e.Ring=p;var v=i(707);e.Polygon=v;var m=i(710);e.Polyline=m;var y=i(711);e.Rect=y;var _=i(712);e.Line=_;var x=i(713);e.BezierCurve=x;var b=i(714);e.Arc=b;var w=i(715);e.CompoundPath=w;var C=i(716);e.LinearGradient=C;var S=i(717);e.RadialGradient=S;var T=i(608);e.BoundingRect=T;var O=Math.round,k=Math.max,A=Math.min,M={};function D(t,e,i,n){var r=a.createFromString(t,e),o=r.getBoundingRect();return i&&("center"===n&&(i=I(i,o)),E(r,i)),r}function I(t,e){var i,n=e.width/e.height,r=t.height*n;return i=r<=t.width?t.height:(r=t.width)/n,{x:t.x+t.width/2-r/2,y:t.y+t.height/2-i/2,width:r,height:i}}var P=a.mergePath;function E(t,e){if(t.applyTransform){var i=t.getBoundingRect().calculateTransform(e);t.applyTransform(i)}}function L(t,e,i){var n=O(2*t);return(n+O(e))%2==0?n/2:(n+(i?1:-1))/2}function j(t){return null!=t&&"none"!=t}function R(t){return"string"==typeof t?n.lift(t,-.1):t}function B(t){if(t.__hoverStlDirty){var e=t.style.stroke,i=t.style.fill,n=t.__hoverStl;n.fill=n.fill||(j(i)?R(i):null),n.stroke=n.stroke||(j(e)?R(e):null);var r={};for(var o in n)null!=n[o]&&(r[o]=t.style[o]);t.__normalStl=r,t.__hoverStlDirty=!1}}function F(t){if(!t.__isHover){if(B(t),t.useHoverLayer)t.__zr&&t.__zr.addHover(t,t.__hoverStl);else{var e=t.style,i=e.insideRollbackOpt;i&&((r=(n=e).insideRollback)&&(n.textFill=r.textFill,n.textStroke=r.textStroke,n.textStrokeWidth=r.textStrokeWidth)),e.extendFrom(t.__hoverStl),i&&(Z(e,e.insideOriginalTextPosition,i),null==e.textFill&&(e.textFill=i.autoColor)),t.dirty(!1),t.z2+=1}var n,r;t.__isHover=!0}}function N(t){if(t.__isHover){var e=t.__normalStl;t.useHoverLayer?t.__zr&&t.__zr.removeHover(t):(e&&t.setStyle(e),t.z2-=1),t.__isHover=!1}}function z(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&F(t)}):F(t)}function H(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&N(t)}):N(t)}function W(t,e){t.__hoverStl=t.hoverStyle||e||{},t.__hoverStlDirty=!0,t.__isHover&&B(t)}function G(t){this.__hoverSilentOnTouch&&t.zrByTouch||!this.__isEmphasis&&z(this)}function X(t){this.__hoverSilentOnTouch&&t.zrByTouch||!this.__isEmphasis&&H(this)}function Y(){this.__isEmphasis=!0,z(this)}function U(){this.__isEmphasis=!1,H(this)}function V(t,e,i,n,r){return q(t,e,n,r),i&&g.extend(t,i),t.host&&t.host.dirty&&t.host.dirty(!1),t}function q(t,e,i,n){if((i=i||M).isRectText){var r=e.getShallow("position")||(n?null:"inside");"outside"===r&&(r="top"),t.textPosition=r,t.textOffset=e.getShallow("offset");var o=e.getShallow("rotate");null!=o&&(o*=Math.PI/180),t.textRotation=o,t.textDistance=g.retrieve2(e.getShallow("distance"),n?null:5)}var a,s=e.ecModel,l=s&&s.option.textStyle,h=function(t){var e;for(;t&&t!==t.ecModel;){var i=(t.option||M).rich;if(i)for(var n in e=e||{},i)i.hasOwnProperty(n)&&(e[n]=1);t=t.parentModel}return e}(e);if(h)for(var c in a={},h)if(h.hasOwnProperty(c)){var u=e.getModel(["rich",c]);$(a[c]={},u,l,i,n)}return t.rich=a,$(t,e,l,i,n,!0),i.forceRich&&!i.textStyle&&(i.textStyle={}),t}function $(t,e,i,n,r,o){if(i=!r&&i||M,t.textFill=K(e.getShallow("color"),n)||i.color,t.textStroke=K(e.getShallow("textBorderColor"),n)||i.textBorderColor,t.textStrokeWidth=g.retrieve2(e.getShallow("textBorderWidth"),i.textBorderWidth),!r){if(o){var a=t.textPosition;t.insideRollback=Z(t,a,n),t.insideOriginalTextPosition=a,t.insideRollbackOpt=n}null==t.textFill&&(t.textFill=n.autoColor)}t.fontStyle=e.getShallow("fontStyle")||i.fontStyle,t.fontWeight=e.getShallow("fontWeight")||i.fontWeight,t.fontSize=e.getShallow("fontSize")||i.fontSize,t.fontFamily=e.getShallow("fontFamily")||i.fontFamily,t.textAlign=e.getShallow("align"),t.textVerticalAlign=e.getShallow("verticalAlign")||e.getShallow("baseline"),t.textLineHeight=e.getShallow("lineHeight"),t.textWidth=e.getShallow("width"),t.textHeight=e.getShallow("height"),t.textTag=e.getShallow("tag"),o&&n.disableBox||(t.textBackgroundColor=K(e.getShallow("backgroundColor"),n),t.textPadding=e.getShallow("padding"),t.textBorderColor=K(e.getShallow("borderColor"),n),t.textBorderWidth=e.getShallow("borderWidth"),t.textBorderRadius=e.getShallow("borderRadius"),t.textBoxShadowColor=e.getShallow("shadowColor"),t.textBoxShadowBlur=e.getShallow("shadowBlur"),t.textBoxShadowOffsetX=e.getShallow("shadowOffsetX"),t.textBoxShadowOffsetY=e.getShallow("shadowOffsetY")),t.textShadowColor=e.getShallow("textShadowColor")||i.textShadowColor,t.textShadowBlur=e.getShallow("textShadowBlur")||i.textShadowBlur,t.textShadowOffsetX=e.getShallow("textShadowOffsetX")||i.textShadowOffsetX,t.textShadowOffsetY=e.getShallow("textShadowOffsetY")||i.textShadowOffsetY}function K(t,e){return"auto"!==t?t:e&&e.autoColor?e.autoColor:null}function Z(t,e,i){var n,r=i.useInsideStyle;return null==t.textFill&&!1!==r&&(!0===r||i.isRectText&&e&&"string"==typeof e&&0<=e.indexOf("inside"))&&(n={textFill:null,textStroke:t.textStroke,textStrokeWidth:t.textStrokeWidth},t.textFill="#fff",null==t.textStroke&&(t.textStroke=i.autoColor,null==t.textStrokeWidth&&(t.textStrokeWidth=2))),n}function J(t,e,i,n,r,o){if("function"==typeof r&&(o=r,r=null),n&&n.isAnimationEnabled()){var a=t?"Update":"",s=n.getShallow("animationDuration"+a),l=n.getShallow("animationEasing"+a),h=n.getShallow("animationDelay"+a);"function"==typeof h&&(h=h(r,n.getAnimationDelayParams?n.getAnimationDelayParams(e,r):null)),"function"==typeof s&&(s=s(r)),0<s?e.animateTo(i,s,h||0,l,o,!!o):(e.stopAnimation(),e.attr(i),o&&o())}else e.stopAnimation(),e.attr(i),o&&o()}function Q(t,e,i,n,r){J(!0,t,e,i,n,r)}function tt(t,e,i){return e&&!g.isArrayLike(e)&&(e=l.getLocalTransform(e)),i&&(e=r.invert([],e)),s.applyTransform([],t,e)}e.extendShape=function(t){return o.extend(t)},e.extendPath=function(t,e){return a.extendFromString(t,e)},e.makePath=D,e.makeImage=function(t,i,n){var r=new h({style:{image:t,x:i.x,y:i.y,width:i.width,height:i.height},onload:function(t){if("center"===n){var e={width:t.width,height:t.height};r.setStyle(I(i,e))}}});return r},e.mergePath=P,e.resizePath=E,e.subPixelOptimizeLine=function(t){var e=t.shape,i=t.style.lineWidth;return O(2*e.x1)===O(2*e.x2)&&(e.x1=e.x2=L(e.x1,i,!0)),O(2*e.y1)===O(2*e.y2)&&(e.y1=e.y2=L(e.y1,i,!0)),t},e.subPixelOptimizeRect=function(t){var e=t.shape,i=t.style.lineWidth,n=e.x,r=e.y,o=e.width,a=e.height;return e.x=L(e.x,i,!0),e.y=L(e.y,i,!0),e.width=Math.max(L(n+o,i,!1)-e.x,0===o?0:1),e.height=Math.max(L(r+a,i,!1)-e.y,0===a?0:1),t},e.subPixelOptimize=L,e.setHoverStyle=function(t,e,i){t.__hoverSilentOnTouch=i&&i.hoverSilentOnTouch,"group"===t.type?t.traverse(function(t){"group"!==t.type&&W(t,e)}):W(t,e),t.on("mouseover",G).on("mouseout",X),t.on("emphasis",Y).on("normal",U)},e.setLabelStyle=function(t,e,i,n,r,o,a){var s=(r=r||M).labelFetcher,l=r.labelDataIndex,h=r.labelDimIndex,c=i.getShallow("show"),u=n.getShallow("show"),f=c||u?g.retrieve2(s?s.getFormattedLabel(l,"normal",null,h):null,r.defaultText):null,d=c?f:null,p=u?g.retrieve2(s?s.getFormattedLabel(l,"emphasis",null,h):null,f):null;null==d&&null==p||(V(t,i,o,r),V(e,n,a,r,!0)),t.text=d,e.text=p},e.setTextStyle=V,e.setText=function(t,e,i){var n,r={isRectText:!0};!1===i?n=!0:r.autoColor=i,q(t,e,r,n),t.host&&t.host.dirty&&t.host.dirty(!1)},e.getFont=function(t,e){var i=e||e.getModel("textStyle");return[t.fontStyle||i&&i.getShallow("fontStyle")||"",t.fontWeight||i&&i.getShallow("fontWeight")||"",(t.fontSize||i&&i.getShallow("fontSize")||12)+"px",t.fontFamily||i&&i.getShallow("fontFamily")||"sans-serif"].join(" ")},e.updateProps=Q,e.initProps=function(t,e,i,n,r){J(!1,t,e,i,n,r)},e.getTransform=function(t,e){for(var i=r.identity([]);t&&t!==e;)r.mul(i,t.getLocalTransform(),i),t=t.parent;return i},e.applyTransform=tt,e.transformDirection=function(t,e,i){var n=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),o=["left"===t?-n:"right"===t?n:0,"top"===t?-r:"bottom"===t?r:0];return o=tt(o,e,i),Math.abs(o[0])>Math.abs(o[1])?0<o[0]?"right":"left":0<o[1]?"bottom":"top"},e.groupTransition=function(t,e,n,i){if(t&&e){var r,o=(r={},t.traverse(function(t){!t.isGroup&&t.anid&&(r[t.anid]=t)}),r);e.traverse(function(t){if(!t.isGroup&&t.anid){var e=o[t.anid];if(e){var i=a(t);t.attr(a(e)),Q(t,i,n,t.dataIndex)}}})}function a(t){var e={position:s.clone(t.position),rotation:t.rotation};return t.shape&&(e.shape=g.extend({},t.shape)),e}},e.clipPointsByRect=function(t,n){return g.map(t,function(t){var e=t[0];e=k(e,n.x),e=A(e,n.x+n.width);var i=t[1];return i=k(i,n.y),[e,i=A(i,n.y+n.height)]})},e.clipRectByRect=function(t,e){var i=k(t.x,e.x),n=A(t.x+t.width,e.x+e.width),r=k(t.y,e.y),o=A(t.y+t.height,e.y+e.height);if(i<=n&&r<=o)return{x:i,y:r,width:n-i,height:o-r}},e.createIcon=function(t,e,i){var n=(e=g.extend({rectHover:!0},e)).style={strokeNoScale:!0};if(i=i||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(n.image=t.slice(8),g.defaults(n,i),new h(e)):D(t.replace("path://",""),e,i,"center")}},function(t,e,i){i(605).__DEV__;var p=i(643),g=i(598),l=i(618),v=i(606),s=i(629),h=i(617),a=i(692),c=i(721),u=i(627),f=i(722),d=i(723),n=i(611),r=i(635),m=i(725),y=i(639),_=i(599),x=i(601),b=i(634).throttle,o=i(726),w=i(727),C=g.each,S=n.parseClassType,T={PROCESSOR:{FILTER:1e3,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,GLOBAL:2e3,CHART:3e3,COMPONENT:4e3,BRUSH:5e3}},O="__flagInMainProcess",k="__hasGradientOrPatternBg",A="__optionUpdated",M=/^[a-zA-Z0-9_]+$/;function D(n){return function(t,e,i){t=t&&t.toLowerCase(),h.prototype[n].call(this,t,e,i)}}function I(){h.call(this)}function P(t,e,i){i=i||{},"string"==typeof e&&(e=Q[e]),this.id,this.group,this._dom=t;var n,r,o=this._zr=p.init(t,{renderer:i.renderer||"canvas",devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height});function a(t,e){return t.prio-e.prio}this._throttledZrFlush=b(g.bind(o.flush,o),17),(e=g.clone(e))&&d(e,!0),this._theme=e,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new u,this._api=(r=(n=this)._coordSysMgr,g.extend(new c(n),{getCoordinateSystems:g.bind(r.getCoordinateSystems,r),getComponentByElement:function(t){for(;t;){var e=t.__ecComponentInfo;if(null!=e)return n._model.getComponent(e.mainType,e.index);t=t.parent}}})),h.call(this),this._messageCenter=new I,this._initEvents(),this.resize=g.bind(this.resize,this),this._pendingActions=[],s(J,a),s($,a),o.animation.on("frame",this._onframe,this),g.setAsPrimitive(this)}I.prototype.on=D("on"),I.prototype.off=D("off"),I.prototype.one=D("one"),g.mixin(I,h);var E=P.prototype;function L(t,e,i){var n,r=this._model,o=this._coordSysMgr.getCoordinateSystems();e=x.parseFinder(r,e);for(var a=0;a<o.length;a++){var s=o[a];if(s[t]&&null!=(n=s[t](r,e,i)))return n}}E._onframe=function(){if(this[A]){var t=this[A].silent;this[O]=!0,j.prepareAndUpdate.call(this),this[O]=!1,this[A]=!1,F.call(this,t),N.call(this,t)}},E.getDom=function(){return this._dom},E.getZr=function(){return this._zr},E.setOption=function(t,e,i){var n;if(g.isObject(e)&&(i=e.lazyUpdate,n=e.silent,e=e.notMerge),this[O]=!0,!this._model||e){var r=new f(this._api),o=this._theme;(this._model=new a(null,null,o,r)).init(null,null,o,r)}this._model.setOption(t,K),i?(this[A]={silent:n},this[O]=!1):(j.prepareAndUpdate.call(this),this._zr.flush(),this[A]=!1,this[O]=!1,F.call(this,n),N.call(this,n))},E.setTheme=function(){console.log("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},E.getModel=function(){return this._model},E.getOption=function(){return this._model&&this._model.getOption()},E.getWidth=function(){return this._zr.getWidth()},E.getHeight=function(){return this._zr.getHeight()},E.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},E.getRenderedCanvas=function(t){if(v.canvasSupported){(t=t||{}).pixelRatio=t.pixelRatio||1,t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor");var e=this._zr,i=e.storage.getDisplayList();return g.each(i,function(t){t.stopAnimation(!0)}),e.painter.getRenderedCanvas(t)}},E.getSvgDataUrl=function(){if(v.svgSupported){var t=this._zr,e=t.storage.getDisplayList();return g.each(e,function(t){t.stopAnimation(!0)}),t.painter.pathToSvg()}},E.getDataURL=function(t){var e=(t=t||{}).excludeComponents,i=this._model,n=[],r=this;C(e,function(t){i.eachComponent({mainType:t},function(t){var e=r._componentsMap[t.__viewId];e.group.ignore||(n.push(e),e.group.ignore=!0)})});var o="svg"===this._zr.painter.getType()?this.getSvgDataUrl():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return C(n,function(t){t.group.ignore=!1}),o},E.getConnectedDataURL=function(r){if(v.canvasSupported){var o=this.group,a=Math.min,s=Math.max;if(it[o]){var l=1/0,h=1/0,c=-1/0,u=-1/0,f=[],i=r&&r.pixelRatio||1;g.each(et,function(t,e){if(t.group===o){var i=t.getRenderedCanvas(g.clone(r)),n=t.getDom().getBoundingClientRect();l=a(n.left,l),h=a(n.top,h),c=s(n.right,c),u=s(n.bottom,u),f.push({dom:i,left:n.left,top:n.top})}});var t=(c*=i)-(l*=i),e=(u*=i)-(h*=i),n=g.createCanvas();n.width=t,n.height=e;var d=p.init(n);return C(f,function(t){var e=new _.Image({style:{x:t.left*i-l,y:t.top*i-h,image:t.dom}});d.add(e)}),d.refreshImmediately(),n.toDataURL("image/"+(r&&r.type||"png"))}return this.getDataURL(r)}},E.convertToPixel=g.curry(L,"convertToPixel"),E.convertFromPixel=g.curry(L,"convertFromPixel"),E.containPixel=function(t,r){var o,e=this._model;return t=x.parseFinder(e,t),g.each(t,function(t,n){0<=n.indexOf("Models")&&g.each(t,function(t){var e=t.coordinateSystem;if(e&&e.containPoint)o|=!!e.containPoint(r);else if("seriesModels"===n){var i=this._chartsMap[t.__viewId];i&&i.containPoint&&(o|=i.containPoint(r,t))}},this)},this),!!o},E.getVisual=function(t,e){var i=this._model,n=(t=x.parseFinder(i,t,{defaultMainType:"series"})).seriesModel.getData(),r=t.hasOwnProperty("dataIndexInside")?t.dataIndexInside:t.hasOwnProperty("dataIndex")?n.indexOfRawIndex(t.dataIndex):null;return null!=r?n.getItemVisual(r,e):n.getVisual(e)},E.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},E.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var j={update:function(t){var e=this._model,i=this._api,n=this._coordSysMgr,r=this._zr;if(e){e.restoreData(),n.create(this._model,this._api),function(e,i){C($,function(t){t.func(e,i)})}.call(this,e,i),function(t){var r={};t.eachSeries(function(t){var e=t.get("stack"),i=t.getData();if(e&&"list"===i.type){var n=r[e];r.hasOwnProperty(e)&&n&&(i.stackedOn=n),r[e]=i}})}.call(this,e),n.update(e,i),W.call(this,e,t),function(n,r){var o=this._api;C(this._componentsViews,function(t){var e=t.__model;t.render(e,n,o,r),U(e,t)},this),C(this._chartsViews,function(t){t.__alive=!1},this),n.eachSeries(function(t,e){var i=this._chartsMap[t.__viewId];i.__alive=!0,i.render(t,n,o,r),i.group.silent=!!t.get("silent"),U(t,i),Y(t,i)},this),X(this._zr,n),C(this._chartsViews,function(t){t.__alive||t.remove(n,o)},this)}.call(this,e,t);var o=e.get("backgroundColor")||"transparent",a=r.painter;if(a.isSingleCanvas&&a.isSingleCanvas())r.configLayer(0,{clearColor:o});else{if(!v.canvasSupported){var s=l.parse(o);o=l.stringify(s,"rgb"),0===s[3]&&(o="transparent")}o.colorStops||o.image?(r.configLayer(0,{clearColor:o}),this[k]=!0,this._dom.style.background="transparent"):(this[k]&&r.configLayer(0,{clearColor:null}),this[k]=!1,this._dom.style.background=o)}C(Z,function(t){t(e,i)})}},updateView:function(t){var e=this._model;e&&(e.eachSeries(function(t){t.getData().clearAllVisual()}),W.call(this,e,t),z.call(this,"updateView",e,t))},updateVisual:function(t){var e=this._model;e&&(e.eachSeries(function(t){t.getData().clearAllVisual()}),W.call(this,e,t,!0),z.call(this,"updateVisual",e,t))},updateLayout:function(t){var e=this._model;e&&(function(e,i){var n=this._api;C(J,function(t){t.isLayout&&t.func(e,n,i)})}.call(this,e,t),z.call(this,"updateLayout",e,t))},prepareAndUpdate:function(t){var e=this._model;H.call(this,"component",e),H.call(this,"chart",e),j.update.call(this,t)}};function R(i,e,n,r,t){var o=i._model;if(r){var a={};a[r+"Id"]=n[r+"Id"],a[r+"Index"]=n[r+"Index"],a[r+"Name"]=n[r+"Name"];var s={mainType:r,query:a};t&&(s.subType=t),o&&o.eachComponent(s,function(t,e){l(i["series"===r?"_chartsMap":"_componentsMap"][t.__viewId])},i)}else C(i._componentsViews.concat(i._chartsViews),l);function l(t){t&&t.__alive&&t[e]&&t[e](t.__model,o,i._api,n)}}function B(e,t){var i=e.type,n=e.escapeConnect,r=V[i],o=r.actionInfo,a=(o.update||"update").split(":"),s=a.pop();a=null!=a[0]&&S(a[0]),this[O]=!0;var l=[e],h=!1;e.batch&&(h=!0,l=g.map(e.batch,function(t){return(t=g.defaults(g.extend({},t),e)).batch=null,t}));var c,u=[],f="highlight"===i||"downplay"===i;C(l,function(t){(c=(c=r.action(t,this._model,this._api))||g.extend({},t)).type=o.event||c.type,u.push(c),f?R(this,s,t,"series"):a&&R(this,s,t,a.main,a.sub)},this),"none"===s||f||a||(this[A]?(j.prepareAndUpdate.call(this,e),this[A]=!1):j[s].call(this,e)),c=h?{type:o.event||i,escapeConnect:n,batch:u}:u[0],this[O]=!1,!t&&this._messageCenter.trigger(c.type,c)}function F(t){for(var e=this._pendingActions;e.length;){var i=e.shift();B.call(this,i,t)}}function N(t){!t&&this.trigger("updated")}function z(n,r,o){var a=this._api;C(this._componentsViews,function(t){var e=t.__model;t[n](e,r,a,o),U(e,t)},this),r.eachSeries(function(t,e){var i=this._chartsMap[t.__viewId];i[n](t,r,a,o),U(t,i),Y(t,i)},this),X(this._zr,r),C(Z,function(t){t(r,a)})}function H(t,a){for(var s="component"===t,l=s?this._componentsViews:this._chartsViews,h=s?this._componentsMap:this._chartsMap,c=this._zr,e=0;e<l.length;e++)l[e].__alive=!1;a[s?"eachComponent":"eachSeries"](function(t,e){if(s){if("series"===t)return}else e=t;var i="_ec_"+e.id+"_"+e.type,n=h[i];if(!n){var r=S(e.type),o=s?m.getClass(r.main,r.sub):y.getClass(r.sub);if(!o)return;(n=new o).init(a,this._api),h[i]=n,l.push(n),c.add(n.group)}e.__viewId=n.__id=i,n.__alive=!0,n.__model=e,n.group.__ecComponentInfo={mainType:e.mainType,index:e.componentIndex}},this);for(e=0;e<l.length;){var i=l[e];i.__alive?e++:(c.remove(i.group),i.dispose(a,this._api),l.splice(e,1),delete h[i.__id],i.__id=i.group.__ecComponentInfo=null)}}function W(e,i,n){var r=this._api;e.clearColorPalette(),e.eachSeries(function(t){t.clearColorPalette()}),C(J,function(t){(!n||!t.isLayout)&&t.func(e,r,i)})}E.resize=function(t){this[O]=!0,this._zr.resize(t);var e=this._model&&this._model.resetOption("media");j[e?"prepareAndUpdate":"update"].call(this),this._loadingFX&&this._loadingFX.resize(),this[O]=!1;var i=t&&t.silent;F.call(this,i),N.call(this,i)},E.showLoading=function(t,e){if(g.isObject(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),tt[t]){var i=tt[t](this._api,e),n=this._zr;this._loadingFX=i,n.add(i)}},E.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},E.makeActionFromEvent=function(t){var e=g.extend({},t);return e.type=q[t.type],e},E.dispatchAction=function(t,e){g.isObject(e)||(e={silent:!!e}),V[t.type]&&this._model&&(this[O]?this._pendingActions.push(t):(B.call(this,t,e.silent),e.flush?this._zr.flush(!0):!1!==e.flush&&v.browser.weChat&&this._throttledZrFlush(),F.call(this,e.silent),N.call(this,e.silent)))},E.on=D("on"),E.off=D("off"),E.one=D("one");var G=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function X(t,e){var i=t.storage,n=0;i.traverse(function(t){t.isGroup||n++}),n>e.get("hoverLayerThreshold")&&!v.node&&i.traverse(function(t){t.isGroup||(t.useHoverLayer=!0)})}function Y(t,e){var i=0;e.group.traverse(function(t){"group"===t.type||t.ignore||i++});var n=+t.get("progressive"),r=i>t.get("progressiveThreshold")&&n&&!v.node;r&&e.group.traverse(function(t){t.isGroup||(t.progressive=r?Math.floor(i++/n):-1,r&&t.stopAnimation(!0))});var o=t.get("blendMode")||null;e.group.traverse(function(t){t.isGroup||t.setStyle("blend",o)})}function U(t,e){var i=t.get("z"),n=t.get("zlevel");e.group.traverse(function(t){"group"!==t.type&&(null!=i&&(t.z=i),null!=n&&(t.zlevel=n))})}E._initEvents=function(){C(G,function(o){this._zr.on(o,function(t){var e,i=this.getModel(),n=t.target;if("globalout"===o)e={};else if(n&&null!=n.dataIndex){var r=n.dataModel||i.getSeriesByIndex(n.seriesIndex);e=r&&r.getDataParams(n.dataIndex,n.dataType)||{}}else n&&n.eventData&&(e=g.extend({},n.eventData));e&&(e.event=t,e.type=o,this.trigger(o,e))},this)},this),C(q,function(t,e){this._messageCenter.on(e,function(t){this.trigger(e,t)},this)},this)},E.isDisposed=function(){return this._disposed},E.clear=function(){this.setOption({series:[]},!0)},E.dispose=function(){if(!this._disposed){this._disposed=!0;var e=this._api,i=this._model;C(this._componentsViews,function(t){t.dispose(i,e)}),C(this._chartsViews,function(t){t.dispose(i,e)}),this._zr.dispose(),delete et[this.id]}},g.mixin(P,h);var V={},q={},$=[],K=[],Z=[],J=[],Q={},tt={},et={},it={},nt=new Date-0,rt=new Date-0,ot="_echarts_instance_",at={};function st(t){it[t]=!1}var lt=st;function ht(t){var e;return e=t.getAttribute?t.getAttribute(ot):t[ot],et[e]}function ct(t){K.push(t)}function ut(t,e,i){"function"==typeof e&&(i=e,e="");var n=g.isObject(t)?t.type:[t,t={event:e}][0];t.event=(t.event||n).toLowerCase(),e=t.event,g.assert(M.test(n)&&M.test(e)),V[n]||(V[n]={action:i,actionInfo:t}),q[e]=n}function ft(t,e){"function"==typeof t&&(e=t,t=3e3),J.push({prio:t,func:e})}function dt(t,e){tt[t]=e}ft(2e3,o),ct(d),dt("default",w),ut({type:"highlight",event:"highlight",update:"highlight"},g.noop),ut({type:"downplay",event:"downplay",update:"downplay"},g.noop);e.version="3.8.5",e.dependencies={zrender:"3.7.4"},e.PRIORITY=T,e.init=function(t,e,i){var n=ht(t);if(n)return n;var r=new P(t,e,i);return r.id="ec_"+nt++,et[r.id]=r,t.setAttribute?t.setAttribute(ot,r.id):t[ot]=r.id,function(n){var r="__connectUpdateStatus";function o(t,e){for(var i=0;i<t.length;i++)t[i][r]=e}g.each(q,function(t,e){n._messageCenter.on(e,function(t){if(it[n.group]&&0!==n[r]){if(t&&t.escapeConnect)return;var e=n.makeActionFromEvent(t),i=[];g.each(et,function(t){t!==n&&t.group===n.group&&i.push(t)}),o(i,0),C(i,function(t){1!==t[r]&&t.dispatchAction(e)}),o(i,2)}})})}(r),r},e.connect=function(e){if(g.isArray(e)){var t=e;e=null,g.each(t,function(t){null!=t.group&&(e=t.group)}),e=e||"g_"+rt++,g.each(t,function(t){t.group=e})}return it[e]=!0,e},e.disConnect=st,e.disconnect=lt,e.dispose=function(t){"string"==typeof t?t=et[t]:t instanceof P||(t=ht(t)),t instanceof P&&!t.isDisposed()&&t.dispose()},e.getInstanceByDom=ht,e.getInstanceById=function(t){return et[t]},e.registerTheme=function(t,e){Q[t]=e},e.registerPreprocessor=ct,e.registerProcessor=function(t,e){"function"==typeof t&&(e=t,t=1e3),$.push({prio:t,func:e})},e.registerPostUpdate=function(t){Z.push(t)},e.registerAction=ut,e.registerCoordinateSystem=function(t,e){u.register(t,e)},e.getCoordinateSystemDimensions=function(t){var e=u.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()},e.registerLayout=function(t,e){"function"==typeof t&&(e=t,t=1e3),J.push({prio:t,func:e,isLayout:!0})},e.registerVisual=ft,e.registerLoading=dt,e.extendComponentModel=function(t){return n.extend(t)},e.extendComponentView=function(t){return m.extend(t)},e.extendSeriesModel=function(t){return r.extend(t)},e.extendChartView=function(t){return y.extend(t)},e.setCanvasCreator=function(t){g.$override("createCanvas",t)},e.registerMap=function(t,e,i){e.geoJson&&!e.features&&(i=e.specialAreas,e=e.geoJson),"string"==typeof e&&(e="undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")()),at[t]={geoJson:e,specialAreas:i}},e.getMap=function(t){return at[t]},e.dataTool={};var pt=i(728);!function(){for(var t in pt)pt.hasOwnProperty(t)&&(e[t]=pt[t])}()},function(t,e,i){var u=i(598),l=i(607),n=i(603),r=i(609),f=u.each,s=u.isObject;function d(t){return t instanceof Array?t:null==t?[]:[t]}var o={getDataParams:function(t,e){var i=this.getData(e),n=this.getRawValue(t,e),r=i.getRawIndex(t),o=i.getName(t,!0),a=i.getRawDataItem(t),s=i.getItemVisual(t,"color");return{componentType:this.mainType,componentSubType:this.subType,seriesType:"series"===this.mainType?this.subType:null,seriesIndex:this.seriesIndex,seriesId:this.id,seriesName:this.name,name:o,dataIndex:r,data:a,dataType:e,value:n,color:s,marker:l.getTooltipMarker(s),$vars:["seriesName","name","value"]}},getFormattedLabel:function(t,e,i,n,r){e=e||"normal";var o=this.getData(i).getItemModel(t),a=this.getDataParams(t,i);null!=n&&a.value instanceof Array&&(a.value=a.value[n]);var s=o.get([r||"label",e,"formatter"]);return"function"==typeof s?(a.status=e,s(a)):"string"==typeof s?l.formatTpl(s,a):void 0},getRawValue:function(t,e){var i=this.getData(e).getRawDataItem(t);if(null!=i)return!s(i)||i instanceof Array?i:i.value},formatTooltip:u.noop};function a(t){return s(t)&&t.id&&0===(t.id+"").indexOf("\0_ec_\0")}var h,c=(h=0,function(){var e="\0__ec_prop_getter_"+h++;return function(t){return t[e]||(t[e]={})}});function p(t,e){return t&&t.hasOwnProperty(e)}e.normalizeToArray=d,e.defaultEmphasis=function(t,e){if(t)for(var i=t.emphasis=t.emphasis||{},n=t.normal=t.normal||{},r=0,o=e.length;r<o;r++){var a=e[r];!i.hasOwnProperty(a)&&n.hasOwnProperty(a)&&(i[a]=n[a])}},e.TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"],e.getDataItemValue=function(t){return t&&(null==t.value?t:t.value)},e.isDataItemOption=function(t){return s(t)&&!(t instanceof Array)},e.converDataValue=function(t,e){var i=e&&e.type;return"ordinal"===i?t:("time"===i&&"number"!=typeof t&&null!=t&&"-"!==t&&(t=+n.parseDate(t)),null==t||""===t?NaN:+t)},e.createDataFormatModel=function(t,e){var i=new r;return u.mixin(i,o),i.seriesIndex=e.seriesIndex,i.name=e.name||"",i.mainType=e.mainType,i.subType=e.subType,i.getData=function(){return t},i},e.dataFormatMixin=o,e.mappingToExists=function(t,r){r=(r||[]).slice();var o=u.map(t||[],function(t,e){return{exist:t}});return f(r,function(t,e){if(s(t)){for(var i=0;i<o.length;i++)if(!o[i].option&&null!=t.id&&o[i].exist.id===t.id+"")return o[i].option=t,void(r[e]=null);for(i=0;i<o.length;i++){var n=o[i].exist;if(!(o[i].option||null!=n.id&&null!=t.id||null==t.name||a(t)||a(n)||n.name!==t.name+""))return o[i].option=t,void(r[e]=null)}}}),f(r,function(t,e){if(s(t)){for(var i=0;i<o.length;i++){var n=o[i].exist;if(!o[i].option&&!a(n)&&null==t.id){o[i].option=t;break}}i>=o.length&&o.push({option:t})}}),o},e.makeIdAndName=function(t){var a=u.createHashMap();f(t,function(t,e){var i=t.exist;i&&a.set(i.id,t)}),f(t,function(t,e){var i=t.option;u.assert(!i||null==i.id||!a.get(i.id)||a.get(i.id)===t,"id duplicates: "+(i&&i.id)),i&&null!=i.id&&a.set(i.id,t),!t.keyInfo&&(t.keyInfo={})}),f(t,function(t,e){var i=t.exist,n=t.option,r=t.keyInfo;if(s(n)){if(r.name=null!=n.name?n.name+"":i?i.name:"\0-",i)r.id=i.id;else if(null!=n.id)r.id=n.id+"";else for(var o=0;r.id="\0"+r.name+"\0"+o++,a.get(r.id););a.set(r.id,t)}})},e.isIdInner=a,e.compressBatches=function(t,e){var i={},n={};return r(t||[],i),r(e||[],n,i),[o(i),o(n)];function r(t,e,i){for(var n=0,r=t.length;n<r;n++)for(var o=t[n].seriesId,a=d(t[n].dataIndex),s=i&&i[o],l=0,h=a.length;l<h;l++){var c=a[l];s&&s[c]?s[c]=null:(e[o]||(e[o]={}))[c]=1}}function o(t,e){var i=[];for(var n in t)if(t.hasOwnProperty(n)&&null!=t[n])if(e)i.push(+n);else{var r=o(t[n],!0);r.length&&i.push({seriesId:n,dataIndex:r})}return i}},e.queryDataIndex=function(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?u.isArray(t.dataIndex)?u.map(t.dataIndex,function(t){return e.indexOfRawIndex(t)}):e.indexOfRawIndex(t.dataIndex):null!=t.name?u.isArray(t.name)?u.map(t.name,function(t){return e.indexOfName(t)}):e.indexOfName(t.name):void 0},e.makeGetter=c,e.parseFinder=function(s,l,h){if(u.isString(l)){var t={};t[l+"Index"]=0,l=t}var e=h&&h.defaultMainType;!e||p(l,e+"Index")||p(l,e+"Id")||p(l,e+"Name")||(l[e+"Index"]=0);var c={};return f(l,function(t,e){if(t=l[e],"dataIndex"!==e&&"dataIndexInside"!==e){var i=e.match(/^(\w+)(Index|Id|Name)$/)||[],n=i[1],r=(i[2]||"").toLowerCase();if(!(!n||!r||null==t||"index"===r&&"none"===t||h&&h.includeMainTypes&&u.indexOf(h.includeMainTypes,n)<0)){var o={mainType:n};"index"===r&&"all"===t||(o[r]=t);var a=s.queryComponents(o);c[n+"Models"]=a,c[n+"Model"]=a[0]}}else c[e]=t}),c},e.dataDimToCoordDim=function(t,e){var i=t.dimensions;e=t.getDimension(e);for(var n=0;n<i.length;n++){var r=t.getDimensionInfo(i[n]);if(r.name===e)return r.coordDim}},e.coordDimToDataDim=function(i,n){var r=[];return f(i.dimensions,function(t){var e=i.getDimensionInfo(t);e.coordDim===n&&(r[e.coordDimIndex]=e.name)}),r},e.otherDimToDataDim=function(n,r){var o=[];return f(n.dimensions,function(t){var e=n.getDimensionInfo(t),i=e.otherDims[r];null!=i&&!1!==i&&(o[i]=e.name)}),o}},function(t,e){var n="undefined"==typeof Float32Array?Array:Float32Array;function r(t){return Math.sqrt(o(t))}var i=r;function o(t){return t[0]*t[0]+t[1]*t[1]}var a=o;function s(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var l=s;function h(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var c=h;e.create=function(t,e){var i=new n(2);return null==t&&(t=0),null==e&&(e=0),i[0]=t,i[1]=e,i},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.clone=function(t){var e=new n(2);return e[0]=t[0],e[1]=t[1],e},e.set=function(t,e,i){return t[0]=e,t[1]=i,t},e.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},e.scaleAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t},e.sub=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},e.len=r,e.length=i,e.lenSquare=o,e.lengthSquare=a,e.mul=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},e.div=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},e.normalize=function(t,e){var i=r(e);return 0===i?(t[0]=0,t[1]=0):(t[0]=e[0]/i,t[1]=e[1]/i),t},e.distance=s,e.dist=l,e.distanceSquare=h,e.distSquare=c,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.lerp=function(t,e,i,n){return t[0]=e[0]+n*(i[0]-e[0]),t[1]=e[1]+n*(i[1]-e[1]),t},e.applyTransform=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t},e.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},e.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}},function(t,e,i){var p=i(598);var n=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function o(t){return Math.floor(Math.log(t)/Math.LN10)}e.linearMap=function(t,e,i,n){var r=e[1]-e[0],o=i[1]-i[0];if(0===r)return 0===o?i[0]:(i[0]+i[1])/2;if(n)if(0<r){if(t<=e[0])return i[0];if(t>=e[1])return i[1]}else{if(t>=e[0])return i[0];if(t<=e[1])return i[1]}else{if(t===e[0])return i[0];if(t===e[1])return i[1]}return(t-e[0])/r*o+i[0]},e.parsePercent=function(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?(i=t,i.replace(/^\s+/,"").replace(/\s+$/,"")).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t;var i},e.round=function(t,e,i){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),i?t:+t},e.asc=function(t){return t.sort(function(t,e){return t-e}),t},e.getPrecision=function(t){if(t=+t,isNaN(t))return 0;for(var e=1,i=0;Math.round(t*e)/e!==t;)e*=10,i++;return i},e.getPrecisionSafe=function(t){var e=t.toString(),i=e.indexOf("e");if(0<i){var n=+e.slice(i+1);return n<0?-n:0}var r=e.indexOf(".");return r<0?0:e.length-1-r},e.getPixelPrecision=function(t,e){var i=Math.log,n=Math.LN10,r=Math.floor(i(t[1]-t[0])/n),o=Math.round(i(Math.abs(e[1]-e[0]))/n),a=Math.min(Math.max(-r+o,0),20);return isFinite(a)?a:20},e.getPercentWithPrecision=function(t,e,i){if(!t[e])return 0;var n=p.reduce(t,function(t,e){return t+(isNaN(e)?0:e)},0);if(0===n)return 0;for(var r=Math.pow(10,i),o=p.map(t,function(t){return(isNaN(t)?0:t)/n*r*100}),a=100*r,s=p.map(o,function(t){return Math.floor(t)}),l=p.reduce(s,function(t,e){return t+e},0),h=p.map(o,function(t,e){return t-s[e]});l<a;){for(var c=Number.NEGATIVE_INFINITY,u=null,f=0,d=h.length;f<d;++f)h[f]>c&&(c=h[f],u=f);++s[u],h[u]=0,++l}return s[e]/r},e.MAX_SAFE_INTEGER=9007199254740991,e.remRadian=function(t){var e=2*Math.PI;return(t%e+e)%e},e.isRadianAroundZero=function(t){return-1e-4<t&&t<1e-4},e.parseDate=function(t){if(t instanceof Date)return t;if("string"==typeof t){var e=n.exec(t);if(!e)return new Date(NaN);if(e[8]){var i=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(i-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,i,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}return null==t?new Date(NaN):new Date(Math.round(t))},e.quantity=function(t){return Math.pow(10,o(t))},e.nice=function(t,e){var i=o(t),n=Math.pow(10,i),r=t/n;return t=(e?r<1.5?1:r<2.5?2:r<4?3:r<7?5:10:r<1?1:r<2?2:r<3?3:r<5?5:10)*n,-20<=i?+t.toFixed(i<0?-i:0):t},e.reformIntervals=function(t){t.sort(function(t,e){return function t(e,i,n){return e.interval[n]<i.interval[n]||e.interval[n]===i.interval[n]&&(e.close[n]-i.close[n]==(n?-1:1)||!n&&t(e,i,1))}(t,e,0)?-1:1});for(var e=-1/0,i=1,n=0;n<t.length;){for(var r=t[n].interval,o=t[n].close,a=0;a<2;a++)r[a]<=e&&(r[a]=e,o[a]=a?1:1-i),e=r[a],i=o[a];r[0]===r[1]&&o[0]*o[1]!=1?t.splice(n,1):n++}return t},e.isNumeric=function(t){return 0<=t-parseFloat(t)}},function(t,e,i){var n=i(630),o=i(598),s=i(623),l=i(697),m=i(651).prototype.getCanvasPattern,r=Math.abs,y=new s(!0);function a(t){n.call(this,t),this.path=null}a.prototype={constructor:a,type:"path",__dirtyPath:!0,strokeContainThreshold:5,brush:function(t,e){var i,n=this.style,r=this.path||y,o=n.hasStroke(),a=n.hasFill(),s=n.fill,l=n.stroke,h=a&&!!s.colorStops,c=o&&!!l.colorStops,u=a&&!!s.image,f=o&&!!l.image;(n.bind(t,this,e),this.setTransform(t),this.__dirty)&&(h&&(i=i||this.getBoundingRect(),this._fillGradient=n.getGradient(t,s,i)),c&&(i=i||this.getBoundingRect(),this._strokeGradient=n.getGradient(t,l,i)));h?t.fillStyle=this._fillGradient:u&&(t.fillStyle=m.call(s,t)),c?t.strokeStyle=this._strokeGradient:f&&(t.strokeStyle=m.call(l,t));var d=n.lineDash,p=n.lineDashOffset,g=!!t.setLineDash,v=this.getGlobalScale();r.setScale(v[0],v[1]),this.__dirtyPath||d&&!g&&o?(r.beginPath(t),d&&!g&&(r.setLineDash(d),r.setLineDashOffset(p)),this.buildPath(r,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),a&&r.fill(t),d&&g&&(t.setLineDash(d),t.lineDashOffset=p),o&&r.stroke(t),d&&g&&t.setLineDash([]),this.restoreTransform(t),null!=n.text&&this.drawRectText(t,this.getBoundingRect())},buildPath:function(t,e,i){},createPathProxy:function(){this.path=new s},getBoundingRect:function(){var t=this._rect,e=this.style,i=!t;if(i){var n=this.path;n||(n=this.path=new s),this.__dirtyPath&&(n.beginPath(),this.buildPath(n,this.shape,!1)),t=n.getBoundingRect()}if(this._rect=t,e.hasStroke()){var r=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||i){r.copy(t);var o=e.lineWidth,a=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(o=Math.max(o,this.strokeContainThreshold||4)),1e-10<a&&(r.width+=o/a,r.height+=o/a,r.x-=o/a/2,r.y-=o/a/2)}return r}return t},contain:function(t,e){var i=this.transformCoordToLocal(t,e),n=this.getBoundingRect(),r=this.style;if(t=i[0],e=i[1],n.contain(t,e)){var o=this.path.data;if(r.hasStroke()){var a=r.lineWidth,s=r.strokeNoScale?this.getLineScale():1;if(1e-10<s&&(r.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),l.containStroke(o,a/s,t,e)))return!0}if(r.hasFill())return l.contain(o,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):n.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var i=this.shape;if(i){if(o.isObject(t))for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);else i[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&1e-10<r(t[0]-1)&&1e-10<r(t[3]-1)?Math.sqrt(r(t[0]*t[3]-t[2]*t[1])):1}},a.extend=function(r){var t=function(t){a.call(this,t),r.style&&this.style.extendFrom(r.style,!1);var e=r.shape;if(e){this.shape=this.shape||{};var i=this.shape;for(var n in e)!i.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(i[n]=e[n])}r.init&&r.init.call(this,t)};for(var e in o.inherits(t,a),r)"style"!==e&&"shape"!==e&&(t.prototype[e]=r[e]);return t},o.inherits(a,n);var h=a;t.exports=h},function(t,n,e){(function(t){var e;"undefined"!=typeof window?e=window.__DEV__:void 0!==t&&(e=t.__DEV__),void 0===e&&(e=!0);var i=e;n.__DEV__=i}).call(n,e(48))},function(t,e){var i="undefined"==typeof navigator?{browser:{},os:{},node:!0,canvasSupported:!0,svgSupported:!0}:function(t){var e={},i=t.match(/Firefox\/([\d.]+)/),n=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),r=t.match(/Edge\/([\d.]+)/),o=/micromessenger/i.test(t);i&&(e.firefox=!0,e.version=i[1]);n&&(e.ie=!0,e.version=n[1]);r&&(e.edge=!0,e.version=r[1]);o&&(e.weChat=!0);return{browser:e,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!e.ie&&!e.edge,pointerEventsSupported:"onpointerdown"in window&&(e.edge||e.ie&&11<=e.version)}}(navigator.userAgent);t.exports=i},function(t,e,i){var c=i(598),n=i(613),u=i(603);var r=c.normalizeCssArray;function f(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var d=["a","b","c","d","e","f","g"],p=function(t,e){return"{"+t+(null==e?"":e)+"}"};var g=function(t){return t<10?"0"+t:t};var o=n.truncateText,a=n.getBoundingRect;e.addCommas=function(t){return isNaN(t)?"-":(t=(t+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<t.length?"."+t[1]:"")},e.toCamelCase=function(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t},e.normalizeCssArray=r,e.encodeHTML=f,e.formatTpl=function(t,e,i){c.isArray(e)||(e=[e]);var n=e.length;if(!n)return"";for(var r=e[0].$vars||[],o=0;o<r.length;o++){var a=d[o],s=p(a,0);t=t.replace(p(a),i?f(s):s)}for(var l=0;l<n;l++)for(var h=0;h<r.length;h++)s=e[l][r[h]],t=t.replace(p(d[h],l),i?f(s):s);return t},e.formatTplSimple=function(i,t,n){return c.each(t,function(t,e){i=i.replace("{"+e+"}",n?f(t):t)}),i},e.getTooltipMarker=function(t,e){return t?'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+f(t)+";"+(e||"")+'"></span>':""},e.formatTime=function(t,e,i){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var n=u.parseDate(e),r=i?"UTC":"",o=n["get"+r+"FullYear"](),a=n["get"+r+"Month"]()+1,s=n["get"+r+"Date"](),l=n["get"+r+"Hours"](),h=n["get"+r+"Minutes"](),c=n["get"+r+"Seconds"]();return t=t.replace("MM",g(a)).replace("M",a).replace("yyyy",o).replace("yy",o%100).replace("dd",g(s)).replace("d",s).replace("hh",g(l)).replace("h",l).replace("mm",g(h)).replace("m",h).replace("ss",g(c)).replace("s",c)},e.capitalFirst=function(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t},e.truncateText=o,e.getTextRect=a},function(t,e,i){var n,r,o,a,s=i(602),l=i(615),h=s.applyTransform,c=Math.min,u=Math.max;function f(t,e,i,n){i<0&&(t+=i,i=-i),n<0&&(e+=n,n=-n),this.x=t,this.y=e,this.width=i,this.height=n}f.prototype={constructor:f,union:function(t){var e=c(t.x,this.x),i=c(t.y,this.y);this.width=u(t.x+t.width,this.x+this.width)-e,this.height=u(t.y+t.height,this.y+this.height)-i,this.x=e,this.y=i},applyTransform:(n=[],r=[],o=[],a=[],function(t){if(t){n[0]=o[0]=this.x,n[1]=a[1]=this.y,r[0]=a[0]=this.x+this.width,r[1]=o[1]=this.y+this.height,h(n,n,t),h(r,r,t),h(o,o,t),h(a,a,t),this.x=c(n[0],r[0],o[0],a[0]),this.y=c(n[1],r[1],o[1],a[1]);var e=u(n[0],r[0],o[0],a[0]),i=u(n[1],r[1],o[1],a[1]);this.width=e-this.x,this.height=i-this.y}}),calculateTransform:function(t){var e=t.width/this.width,i=t.height/this.height,n=l.create();return l.translate(n,n,[-this.x,-this.y]),l.scale(n,n,[e,i]),l.translate(n,n,[t.x,t.y]),n},intersect:function(t){if(!t)return!1;t instanceof f||(t=f.create(t));var e=this,i=e.x,n=e.x+e.width,r=e.y,o=e.y+e.height,a=t.x,s=t.x+t.width,l=t.y,h=t.y+t.height;return!(n<a||s<i||o<l||h<r)},contain:function(t,e){var i=this;return t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height},clone:function(){return new f(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},f.create=function(t){return new f(t.x,t.y,t.width,t.height)};var d=f;t.exports=d},function(t,e,i){var n=i(598),r=i(606),o=i(610),a=i(693),s=i(694),l=i(695),h=i(718),c=n.mixin;function u(t,e,i){this.parentModel=e,this.ecModel=i,this.option=t}function f(t,e,i){for(var n=0;n<e.length&&(!e[n]||null!=(t=t&&"object"==typeof t?t[e[n]]:null));n++);return null==t&&i&&(t=i.get(e)),t}function d(t,e){var i=o.get(t,"getParent");return i?i.call(t,e):t.parentModel}u.prototype={constructor:u,init:null,mergeOption:function(t){n.merge(this.option,t,!0)},get:function(t,e){return null==t?this.option:f(this.option,this.parsePath(t),!e&&d(this,t))},getShallow:function(t,e){var i=this.option,n=null==i?i:i[t],r=!e&&d(this,t);return null==n&&r&&(n=r.getShallow(t)),n},getModel:function(t,e){var i;return new u(null==t?this.option:f(this.option,t=this.parsePath(t)),e=e||(i=d(this,t))&&i.getModel(t),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(n.clone(this.option))},setReadOnly:function(t){o.setReadOnly(this,t)},parsePath:function(t){return"string"==typeof t&&(t=t.split(".")),t},customizeGetParent:function(t){o.set(this,"getParent",t)},isAnimationEnabled:function(){if(!r.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},o.enableClassExtend(u),c(u,a),c(u,s),c(u,l),c(u,h);var p=u;t.exports=p},function(t,e,i){i(605).__DEV__;var a=i(598),n=".",s="___EC__COMPONENT__CONTAINER___",r="\0ec_\0";function l(t){var e={main:"",sub:""};return t&&(t=t.split(n),e.main=t[0]||"",e.sub=t[1]||""),e}function o(t,e){var i=a.slice(arguments,2);return this.superClass.prototype[e].apply(t,i)}function h(t,e,i){return this.superClass.prototype[e].apply(t,i)}e.set=function(t,e,i){return t[r+e]=i},e.get=function(t,e){return t[r+e]},e.hasOwn=function(t,e){return t.hasOwnProperty(r+e)},e.parseClassType=l,e.enableClassExtend=function(t,e){(t.$constructor=t).extend=function(t){var e=this,i=function(){t.$constructor?t.$constructor.apply(this,arguments):e.apply(this,arguments)};return a.extend(i.prototype,t),i.extend=this.extend,i.superCall=o,i.superApply=h,a.inherits(i,this),i.superClass=e,i}},e.enableClassManagement=function(i,t){t=t||{};var o={};if(i.registerClass=function(t,e){var i,n,r;return e&&(r=e,a.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r),'componentType "'+r+'" illegal'),(e=l(e)).sub?e.sub!==s&&((i=e,n=o[i.main],n&&n[s]||((n=o[i.main]={})[s]=!0),n)[e.sub]=t):o[e.main]=t),t},i.getClass=function(t,e,i){var n=o[t];if(n&&n[s]&&(n=e?n[e]:null),i&&!n)throw new Error(e?"Component "+t+"."+(e||"")+" not exists. Load it first.":t+".type should be specified.");return n},i.getClassesByMainType=function(t){t=l(t);var i=[],e=o[t.main];return e&&e[s]?a.each(e,function(t,e){e!==s&&i.push(t)}):i.push(e),i},i.hasClass=function(t){return t=l(t),!!o[t.main]},i.getAllClassMainTypes=function(){var i=[];return a.each(o,function(t,e){i.push(e)}),i},i.hasSubTypes=function(t){t=l(t);var e=o[t.main];return e&&e[s]},i.parseClassType=l,t.registerWhenExtend){var n=i.extend;n&&(i.extend=function(t){var e=n.call(this,t);return i.registerClass(e,t.type)})}return i},e.setReadOnly=function(t,e){}},function(t,e,i){var o=i(598),r=i(609),a=i(633),s=i(610),l=i(612),n=i(719),h=Array.prototype.push,c=r.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,i,n){r.call(this,t,e,i,n),this.uid=a.getUID("componentModel")},init:function(t,e,i,n){this.mergeDefaultAndTheme(t,i)},mergeDefaultAndTheme:function(t,e){var i=this.layoutMode,n=i?l.getLayoutParams(t):{},r=e.getTheme();o.merge(t,r.get(this.mainType)),o.merge(t,this.getDefaultOption()),i&&l.mergeLayoutParam(t,n,i)},mergeOption:function(t,e){o.merge(this.option,t,!0);var i=this.layoutMode;i&&l.mergeLayoutParam(this.option,t,i)},optionUpdated:function(t,e){},getDefaultOption:function(){if(!s.hasOwn(this,"__defaultOption")){for(var t=[],e=this.constructor;e;){var i=e.prototype.defaultOption;i&&t.push(i),e=e.superClass}for(var n={},r=t.length-1;0<=r;r--)n=o.merge(n,t[r],!0);s.set(this,"__defaultOption",n)}return s.get(this,"__defaultOption")},getReferringComponents:function(t){return this.ecModel.queryComponents({mainType:t,index:this.get(t+"Index",!0),id:this.get(t+"Id",!0)})}});s.enableClassManagement(c,{registerWhenExtend:!0}),a.enableSubTypeDefaulter(c),a.enableTopologicalTravel(c,function(t){var e=[];return o.each(c.getClassesByMainType(t),function(t){h.apply(e,t.prototype.dependencies||[])}),o.map(e,function(t){return s.parseClassType(t).main})}),o.mixin(c,n);var u=c;t.exports=u},function(t,e,i){var d=i(598),g=i(608),v=i(603).parsePercent,m=i(607),p=d.each,n=["left","right","top","bottom","width","height"],o=[["width","left","right"],["height","top","bottom"]];function r(c,u,f,d,p){var g=0,v=0;null==d&&(d=1/0),null==p&&(p=1/0);var m=0;u.eachChild(function(t,e){var i,n,r=t.position,o=t.getBoundingRect(),a=u.childAt(e+1),s=a&&a.getBoundingRect();if("horizontal"===c){var l=o.width+(s?-s.x+o.x:0);d<(i=g+l)||t.newline?(g=0,i=l,v+=m+f,m=o.height):m=Math.max(m,o.height)}else{var h=o.height+(s?-s.y+o.y:0);p<(n=v+h)||t.newline?(g+=m+f,v=0,n=h,m=o.width):m=Math.max(m,o.width)}t.newline||(r[0]=g,r[1]=v,"horizontal"===c?g=i+f:v=n+f)})}var a=r,s=d.curry(r,"vertical"),l=d.curry(r,"horizontal");function y(t,e,i){i=m.normalizeCssArray(i||0);var n=e.width,r=e.height,o=v(t.left,n),a=v(t.top,r),s=v(t.right,n),l=v(t.bottom,r),h=v(t.width,n),c=v(t.height,r),u=i[2]+i[0],f=i[1]+i[3],d=t.aspect;switch(isNaN(h)&&(h=n-s-f-o),isNaN(c)&&(c=r-l-u-a),null!=d&&(isNaN(h)&&isNaN(c)&&(n/r<d?h=.8*n:c=.8*r),isNaN(h)&&(h=d*c),isNaN(c)&&(c=h/d)),isNaN(o)&&(o=n-s-h-f),isNaN(a)&&(a=r-l-c-u),t.left||t.right){case"center":o=n/2-h/2-i[3];break;case"right":o=n-h-f}switch(t.top||t.bottom){case"middle":case"center":a=r/2-c/2-i[0];break;case"bottom":a=r-c-u}o=o||0,a=a||0,isNaN(h)&&(h=n-f-o-(s||0)),isNaN(c)&&(c=r-u-a-(l||0));var p=new g(o+i[3],a+i[0],h,c);return p.margin=i,p}function h(e,i){return i&&e&&p(n,function(t){i.hasOwnProperty(t)&&(e[t]=i[t])}),e}e.LOCATION_PARAMS=n,e.HV_NAMES=o,e.box=a,e.vbox=s,e.hbox=l,e.getAvailableSize=function(t,e,i){var n=e.width,r=e.height,o=v(t.x,n),a=v(t.y,r),s=v(t.x2,n),l=v(t.y2,r);return(isNaN(o)||isNaN(parseFloat(t.x)))&&(o=0),(isNaN(s)||isNaN(parseFloat(t.x2)))&&(s=n),(isNaN(a)||isNaN(parseFloat(t.y)))&&(a=0),(isNaN(l)||isNaN(parseFloat(t.y2)))&&(l=r),i=m.normalizeCssArray(i||0),{width:Math.max(s-o-i[1]-i[3],0),height:Math.max(l-a-i[0]-i[2],0)}},e.getLayoutRect=y,e.positionElement=function(t,e,i,n,r){var o=!r||!r.hv||r.hv[0],a=!r||!r.hv||r.hv[1],s=r&&r.boundingMode||"all";if(o||a){var l;if("raw"===s)l="group"===t.type?new g(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(l=t.getBoundingRect(),t.needLocalTransform()){var h=t.getLocalTransform();(l=l.clone()).applyTransform(h)}e=y(d.defaults({width:l.width,height:l.height},e),i,n);var c=t.position,u=o?e.x-l.x:0,f=a?e.y-l.y:0;t.attr("position","raw"===s?[u,f]:[c[0]+u,c[1]+f])}},e.sizeCalculable=function(t,e){return null!=t[o[e][0]]||null!=t[o[e][1]]&&null!=t[o[e][2]]},e.mergeLayoutParam=function(l,h,t){!d.isObject(t)&&(t={});var c=t.ignoreSize;!d.isArray(c)&&(c=[c,c]);var e=n(o[0],0),i=n(o[1],1);function n(t,e){var i={},n=0,r={},o=0;if(p(t,function(t){r[t]=l[t]}),p(t,function(t){u(h,t)&&(i[t]=r[t]=h[t]),f(i,t)&&n++,f(r,t)&&o++}),c[e])return f(h,t[1])?r[t[2]]=null:f(h,t[2])&&(r[t[1]]=null),r;if(2!==o&&n){if(2<=n)return i;for(var a=0;a<t.length;a++){var s=t[a];if(!u(i,s)&&u(l,s)){i[s]=l[s];break}}return i}return r}function u(t,e){return t.hasOwnProperty(e)}function f(t,e){return null!=t[e]&&"auto"!==t[e]}function r(t,e,i){p(t,function(t){e[t]=i[t]})}r(o[0],l,e),r(o[1],l,i)},e.getLayoutParams=function(t){return h({},t)},e.copyLayoutParams=h},function(t,e,i){var p=i(608),I=i(631),n=i(598),r=n.getContext,h=n.extend,P=n.retrieve2,E=n.retrieve3,s={},l=0,c=5e3,L=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,u="12px sans-serif",o={};function j(t,e){var i=t+":"+(e=e||u);if(s[i])return s[i];for(var n=(t+"").split("\n"),r=0,o=0,a=n.length;o<a;o++)r=Math.max(y(n[o],e).width,r);return c<l&&(l=0,s={}),l++,s[i]=r}function g(t,e,i){return"right"===i?t-=e:"center"===i&&(t-=e/2),t}function v(t,e,i){return"middle"===i?t-=e/2:"bottom"===i&&(t-=e),t}function R(t,e,i,n,r){if(!e)return"";var o=(t+"").split("\n");r=d(e,i,n,r);for(var a=0,s=o.length;a<s;a++)o[a]=m(o[a],r);return o.join("\n")}function d(t,e,i,n){(n=h({},n)).font=e;i=P(i,"...");n.maxIterations=P(n.maxIterations,2);var r=n.minChar=P(n.minChar,0);n.cnCharWidth=j("国",e);var o=n.ascCharWidth=j("a",e);n.placeholder=P(n.placeholder,"");for(var a=t=Math.max(0,t-1),s=0;s<r&&o<=a;s++)a-=o;var l=j(i);return a<l&&(i="",l=0),a=t-l,n.ellipsis=i,n.ellipsisWidth=l,n.contentWidth=a,n.containerWidth=t,n}function m(t,e){var i=e.containerWidth,n=e.font,r=e.contentWidth;if(!i)return"";var o=j(t,n);if(o<=i)return t;for(var a=0;;a++){if(o<=r||a>=e.maxIterations){t+=e.ellipsis;break}var s=0===a?f(t,r,e.ascCharWidth,e.cnCharWidth):0<o?Math.floor(t.length*r/o):0;o=j(t=t.substr(0,s),n)}return""===t&&(t=e.placeholder),t}function f(t,e,i,n){for(var r=0,o=0,a=t.length;o<a&&r<e;o++){var s=t.charCodeAt(o);r+=0<=s&&s<=127?i:n}return o}function B(t){return j("国",t)}function y(t,e){return o.measureText(t,e)}function _(t,e,i,n){null!=t&&(t+="");var r=B(e),o=t?t.split("\n"):[],a=o.length*r,s=a;if(i&&(s+=i[0]+i[2]),t&&n){var l=n.outerHeight,h=n.outerWidth;if(null!=l&&l<s)t="",o=[];else if(null!=h)for(var c=d(h-(i?i[1]+i[3]:0),e,n.ellipsis,{minChar:n.minChar,placeholder:n.placeholder}),u=0,f=o.length;u<f;u++)o[u]=m(o[u],c)}return{lines:o,height:a,outerHeight:s,lineHeight:r}}function x(t,e){var i={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return i;for(var n,r=L.lastIndex=0;null!=(n=L.exec(t));){var o=n.index;r<o&&F(i,t.substring(r,o)),F(i,n[2],n[1]),r=L.lastIndex}r<t.length&&F(i,t.substring(r,t.length));var a=i.lines,s=0,l=0,h=[],c=e.textPadding,u=e.truncate,f=u&&u.outerWidth,d=u&&u.outerHeight;c&&(null!=f&&(f-=c[1]+c[3]),null!=d&&(d-=c[0]+c[2]));for(var p=0;p<a.length;p++){for(var g=a[p],v=0,m=0,y=0;y<g.tokens.length;y++){var _=(M=g.tokens[y]).styleName&&e.rich[M.styleName]||{},x=M.textPadding=_.textPadding,b=M.font=_.font||e.font,w=M.textHeight=P(_.textHeight,B(b));if(x&&(w+=x[0]+x[2]),M.height=w,M.lineHeight=E(_.textLineHeight,e.textLineHeight,w),M.textAlign=_&&_.textAlign||e.textAlign,M.textVerticalAlign=_&&_.textVerticalAlign||"middle",null!=d&&s+M.lineHeight>d)return{lines:[],width:0,height:0};M.textWidth=j(M.text,b);var C=_.textWidth,S=null==C||"auto"===C;if("string"==typeof C&&"%"===C.charAt(C.length-1))M.percentWidth=C,h.push(M),C=0;else{if(S){C=M.textWidth;var T=_.textBackgroundColor,O=T&&T.image;O&&(O=I.findExistImage(O),I.isImageReady(O)&&(C=Math.max(C,O.width*w/O.height)))}var k=x?x[1]+x[3]:0;C+=k;var A=null!=f?f-m:null;null!=A&&A<C&&(!S||A<k?(M.text="",M.textWidth=C=0):(M.text=R(M.text,A-k,b,u.ellipsis,{minChar:u.minChar}),M.textWidth=j(M.text,b),C=M.textWidth+k))}m+=M.width=C,_&&(v=Math.max(v,M.lineHeight))}g.width=m,s+=g.lineHeight=v,l=Math.max(l,m)}i.outerWidth=i.width=P(e.textWidth,l),i.outerHeight=i.height=P(e.textHeight,s),c&&(i.outerWidth+=c[1]+c[3],i.outerHeight+=c[0]+c[2]);for(p=0;p<h.length;p++){var M,D=(M=h[p]).percentWidth;M.width=parseInt(D,10)/100*l}return i}function F(t,e,i){for(var n=""===e,r=e.split("\n"),o=t.lines,a=0;a<r.length;a++){var s=r[a],l={styleName:i,text:s,isLineHolder:!s&&!n};if(a)o.push({tokens:[l]});else{var h=(o[o.length-1]||(o[0]={tokens:[]})).tokens,c=h.length;1===c&&h[0].isLineHolder?h[0]=l:(s||!c||n)&&h.push(l)}}}o.measureText=function(t,e){var i=r();return i.font=e||u,i.measureText(t)},e.DEFAULT_FONT=u,e.$override=function(t,e){o[t]=e},e.getWidth=j,e.getBoundingRect=function(t,e,i,n,r,o,a){return o?(l=n,h=x(t,{rich:o,truncate:a,font:e,textAlign:s=i,textPadding:r}),c=h.outerWidth,u=h.outerHeight,f=g(0,c,s),d=v(0,u,l),new p(f,d,c,u)):function(t,e,i,n,r,o){var a=_(t,e,r,o),s=j(t,e);r&&(s+=r[1]+r[3]);var l=a.outerHeight,h=g(0,s,i),c=v(0,l,n),u=new p(h,c,s,l);return u.lineHeight=a.lineHeight,u}(t,e,i,n,r,a);var s,l,h,c,u,f,d},e.adjustTextX=g,e.adjustTextY=v,e.adjustTextPositionOnRect=function(t,e,i){var n=e.x,r=e.y,o=e.height,a=e.width,s=o/2,l="left",h="top";switch(t){case"left":n-=i,r+=s,l="right",h="middle";break;case"right":n+=i+a,r+=s,h="middle";break;case"top":n+=a/2,r-=i,l="center",h="bottom";break;case"bottom":n+=a/2,r+=o+i,l="center";break;case"inside":n+=a/2,r+=s,l="center",h="middle";break;case"insideLeft":n+=i,r+=s,h="middle";break;case"insideRight":n+=a-i,r+=s,l="right",h="middle";break;case"insideTop":n+=a/2,r+=i,l="center";break;case"insideBottom":n+=a/2,r+=o-i,l="center",h="bottom";break;case"insideTopLeft":n+=i,r+=i;break;case"insideTopRight":n+=a-i,r+=i,l="right";break;case"insideBottomLeft":n+=i,r+=o-i,h="bottom";break;case"insideBottomRight":n+=a-i,r+=o-i,l="right",h="bottom"}return{x:n,y:r,textAlign:l,textVerticalAlign:h}},e.truncateText=R,e.getLineHeight=B,e.measureText=y,e.parsePlainText=_,e.parseRichText=x,e.makeFont=function(t){return(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ")||t.textFont||t.font}},function(t,e,i){i(605).__DEV__;var u=i(598),d=i(613),n=i(731),r=i(628),o=i(624),f=i(603);function l(t,e){var i,n,r,o=t.type,a=e.getMin(),s=e.getMax(),l=null!=a,h=null!=s,c=t.getExtent();return"ordinal"===o?i=(e.get("data")||[]).length:(n=e.get("boundaryGap"),u.isArray(n)||(n=[n||0,n||0]),"boolean"==typeof n[0]&&(n=[0,0]),n[0]=f.parsePercent(n[0],1),n[1]=f.parsePercent(n[1],1),r=c[1]-c[0]||Math.abs(c[0])),null==a&&(a="ordinal"===o?i?0:NaN:c[0]-n[0]*r),null==s&&(s="ordinal"===o?i?i-1:NaN:c[1]+n[1]*r),"dataMin"===a?a=c[0]:"function"==typeof a&&(a=a({min:c[0],max:c[1]})),"dataMax"===s?s=c[1]:"function"==typeof s&&(s=s({min:c[0],max:c[1]})),(null==a||!isFinite(a))&&(a=NaN),(null==s||!isFinite(s))&&(s=NaN),t.setBlank(u.eqNaN(a)||u.eqNaN(s)),e.getNeedCrossZero()&&(0<a&&0<s&&!l&&(a=0),a<0&&s<0&&!h&&(s=0)),[a,s]}function a(t,e){return"category"===t.type?t.scale.getLabel(e):e}i(732),i(733),e.getScaleExtent=l,e.niceScaleExtent=function(t,e){var i=l(t,e),n=null!=e.getMin(),r=null!=e.getMax(),o=e.get("splitNumber");"log"===t.type&&(t.base=e.get("logBase"));var a=t.type;t.setExtent(i[0],i[1]),t.niceExtent({splitNumber:o,fixMin:n,fixMax:r,minInterval:"interval"===a||"time"===a?e.get("minInterval"):null,maxInterval:"interval"===a||"time"===a?e.get("maxInterval"):null});var s=e.get("interval");null!=s&&t.setInterval&&t.setInterval(s)},e.createScaleByModel=function(t,e){if(e=e||t.get("type"))switch(e){case"category":return new n(t.getCategories(),[1/0,-1/0]);case"value":return new r;default:return(o.getClass(e)||r).create(t)}},e.ifAxisCrossZero=function(t){var e=t.scale.getExtent(),i=e[0],n=e[1];return!(0<i&&0<n||i<0&&n<0)},e.getAxisLabelInterval=function(t,e,i,n,r){var o,a=0,s=0,l=(n-r)/180*Math.PI,h=1;40<e.length&&(h=Math.floor(e.length/40));for(var c=0;c<t.length;c+=h){var u=t[c],f=d.getBoundingRect(e[c],i,"center","top");f.x+=u*Math.cos(l),f.y+=u*Math.sin(l),f.width*=1.3,f.height*=1.3,o?o.intersect(f)?(s++,a=Math.max(a,s)):(o.union(f),s=0):o=f.clone()}return 0===a&&1<h?h:(a+1)*h-1},e.getFormattedLabels=function(i,n){var e,t=i.scale,r=t.getTicksLabels(),o=t.getTicks();return"string"==typeof n?(e=n,n=function(t){return e.replace("{value}",null!=t?t:"")},u.map(r,n)):"function"==typeof n?u.map(o,function(t,e){return n(a(i,t),e)},this):r},e.getAxisRawValue=a},function(t,e){var i="undefined"==typeof Float32Array?Array:Float32Array;function n(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}e.create=function(){var t=new i(6);return n(t),t},e.identity=n,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.mul=function(t,e,i){var n=e[0]*i[0]+e[2]*i[1],r=e[1]*i[0]+e[3]*i[1],o=e[0]*i[2]+e[2]*i[3],a=e[1]*i[2]+e[3]*i[3],s=e[0]*i[4]+e[2]*i[5]+e[4],l=e[1]*i[4]+e[3]*i[5]+e[5];return t[0]=n,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t},e.translate=function(t,e,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+i[0],t[5]=e[5]+i[1],t},e.rotate=function(t,e,i){var n=e[0],r=e[2],o=e[4],a=e[1],s=e[3],l=e[5],h=Math.sin(i),c=Math.cos(i);return t[0]=n*c+a*h,t[1]=-n*h+a*c,t[2]=r*c+s*h,t[3]=-r*h+c*s,t[4]=c*o+h*l,t[5]=c*l-h*o,t},e.scale=function(t,e,i){var n=i[0],r=i[1];return t[0]=e[0]*n,t[1]=e[1]*r,t[2]=e[2]*n,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*r,t},e.invert=function(t,e){var i=e[0],n=e[2],r=e[4],o=e[1],a=e[3],s=e[5],l=i*a-o*n;return l?(l=1/l,t[0]=a*l,t[1]=-o*l,t[2]=-n*l,t[3]=i*l,t[4]=(n*s-a*r)*l,t[5]=(o*r-i*s)*l,t):null}},function(t,e,i){var n=i(602),r=n.create,x=n.distSquare,O=Math.pow,k=Math.sqrt,o=1e-8,A=k(3),b=r(),w=r(),C=r();function M(t){return-o<t&&t<o}function d(t){return o<t||t<-o}function S(t,e,i,n,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*n+3*o*i)}function y(t,e,i,n){var r=1-n;return r*(r*t+2*n*e)+n*n*i}e.cubicAt=S,e.cubicDerivativeAt=function(t,e,i,n,r){var o=1-r;return 3*(((e-t)*o+2*(i-e)*r)*o+(n-i)*r*r)},e.cubicRootAt=function(t,e,i,n,r,o){var a=n+3*(e-i)-t,s=3*(i-2*e+t),l=3*(e-t),h=t-r,c=s*s-3*a*l,u=s*l-9*a*h,f=l*l-3*s*h,d=0;if(M(c)&&M(u))M(s)?o[0]=0:0<=(S=-l/s)&&S<=1&&(o[d++]=S);else{var p=u*u-4*c*f;if(M(p)){var g=u/c,v=-g/2;0<=(S=-s/a+g)&&S<=1&&(o[d++]=S),0<=v&&v<=1&&(o[d++]=v)}else if(0<p){var m=k(p),y=c*s+1.5*a*(-u+m),_=c*s+1.5*a*(-u-m);0<=(S=(-s-((y=y<0?-O(-y,1/3):O(y,1/3))+(_=_<0?-O(-_,1/3):O(_,1/3))))/(3*a))&&S<=1&&(o[d++]=S)}else{var x=(2*c*s-3*a*u)/(2*k(c*c*c)),b=Math.acos(x)/3,w=k(c),C=Math.cos(b),S=(-s-2*w*C)/(3*a),T=(v=(-s+w*(C+A*Math.sin(b)))/(3*a),(-s+w*(C-A*Math.sin(b)))/(3*a));0<=S&&S<=1&&(o[d++]=S),0<=v&&v<=1&&(o[d++]=v),0<=T&&T<=1&&(o[d++]=T)}}return d},e.cubicExtrema=function(t,e,i,n,r){var o=6*i-12*e+6*t,a=9*e+3*n-3*t-9*i,s=3*e-3*t,l=0;if(M(a))d(o)&&0<=(c=-s/o)&&c<=1&&(r[l++]=c);else{var h=o*o-4*a*s;if(M(h))r[0]=-o/(2*a);else if(0<h){var c,u=k(h),f=(-o-u)/(2*a);0<=(c=(-o+u)/(2*a))&&c<=1&&(r[l++]=c),0<=f&&f<=1&&(r[l++]=f)}}return l},e.cubicSubdivide=function(t,e,i,n,r,o){var a=(e-t)*r+t,s=(i-e)*r+e,l=(n-i)*r+i,h=(s-a)*r+a,c=(l-s)*r+s,u=(c-h)*r+h;o[0]=t,o[1]=a,o[2]=h,o[3]=u,o[4]=u,o[5]=c,o[6]=l,o[7]=n},e.cubicProjectPoint=function(t,e,i,n,r,o,a,s,l,h,c){var u,f,d,p,g,v=.005,m=1/0;b[0]=l,b[1]=h;for(var y=0;y<1;y+=.05)w[0]=S(t,i,r,a,y),w[1]=S(e,n,o,s,y),(p=x(b,w))<m&&(u=y,m=p);m=1/0;for(var _=0;_<32&&!(v<1e-4);_++)f=u-v,d=u+v,w[0]=S(t,i,r,a,f),w[1]=S(e,n,o,s,f),p=x(w,b),0<=f&&p<m?(u=f,m=p):(C[0]=S(t,i,r,a,d),C[1]=S(e,n,o,s,d),g=x(C,b),d<=1&&g<m?(u=d,m=g):v*=.5);return c&&(c[0]=S(t,i,r,a,u),c[1]=S(e,n,o,s,u)),k(m)},e.quadraticAt=y,e.quadraticDerivativeAt=function(t,e,i,n){return 2*((1-n)*(e-t)+n*(i-e))},e.quadraticRootAt=function(t,e,i,n,r){var o=t-2*e+i,a=2*(e-t),s=t-n,l=0;if(M(o))d(a)&&0<=(c=-s/a)&&c<=1&&(r[l++]=c);else{var h=a*a-4*o*s;if(M(h))0<=(c=-a/(2*o))&&c<=1&&(r[l++]=c);else if(0<h){var c,u=k(h),f=(-a-u)/(2*o);0<=(c=(-a+u)/(2*o))&&c<=1&&(r[l++]=c),0<=f&&f<=1&&(r[l++]=f)}}return l},e.quadraticExtremum=function(t,e,i){var n=t+i-2*e;return 0===n?.5:(t-e)/n},e.quadraticSubdivide=function(t,e,i,n,r){var o=(e-t)*n+t,a=(i-e)*n+e,s=(a-o)*n+o;r[0]=t,r[1]=o,r[2]=s,r[3]=s,r[4]=a,r[5]=i},e.quadraticProjectPoint=function(t,e,i,n,r,o,a,s,l){var h,c=.005,u=1/0;b[0]=a,b[1]=s;for(var f=0;f<1;f+=.05)w[0]=y(t,i,r,f),w[1]=y(e,n,o,f),(v=x(b,w))<u&&(h=f,u=v);u=1/0;for(var d=0;d<32&&!(c<1e-4);d++){var p=h-c,g=h+c;w[0]=y(t,i,r,p),w[1]=y(e,n,o,p);var v=x(w,b);if(0<=p&&v<u)h=p,u=v;else{C[0]=y(t,i,r,g),C[1]=y(e,n,o,g);var m=x(C,b);g<=1&&m<u?(h=g,u=m):c*=.5}}return l&&(l[0]=y(t,i,r,h),l[1]=y(e,n,o,h)),k(u)}},function(t,e){var s=Array.prototype.slice,i=function(){this._$handlers={}};i.prototype={constructor:i,one:function(t,e,i){var n=this._$handlers;if(!e||!t)return this;n[t]||(n[t]=[]);for(var r=0;r<n[t].length;r++)if(n[t][r].h===e)return this;return n[t].push({h:e,one:!0,ctx:i||this}),this},on:function(t,e,i){var n=this._$handlers;if(!e||!t)return this;n[t]||(n[t]=[]);for(var r=0;r<n[t].length;r++)if(n[t][r].h===e)return this;return n[t].push({h:e,one:!1,ctx:i||this}),this},isSilent:function(t){var e=this._$handlers;return e[t]&&e[t].length},off:function(t,e){var i=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(i[t]){for(var n=[],r=0,o=i[t].length;r<o;r++)i[t][r].h!=e&&n.push(i[t][r]);i[t]=n}i[t]&&0===i[t].length&&delete i[t]}else delete i[t];return this},trigger:function(t){if(this._$handlers[t]){var e=arguments,i=e.length;3<i&&(e=s.call(e,1));for(var n=this._$handlers[t],r=n.length,o=0;o<r;){switch(i){case 1:n[o].h.call(n[o].ctx);break;case 2:n[o].h.call(n[o].ctx,e[1]);break;case 3:n[o].h.call(n[o].ctx,e[1],e[2]);break;default:n[o].h.apply(n[o].ctx,e)}n[o].one?(n.splice(o,1),r--):o++}}return this},triggerWithContext:function(t){if(this._$handlers[t]){var e=arguments,i=e.length;4<i&&(e=s.call(e,1,e.length-1));for(var n=e[e.length-1],r=this._$handlers[t],o=r.length,a=0;a<o;){switch(i){case 1:r[a].h.call(n);break;case 2:r[a].h.call(n,e[1]);break;case 3:r[a].h.call(n,e[1],e[2]);break;default:r[a].h.apply(n,e)}r[a].one?(r.splice(a,1),o--):a++}}return this}};var n=i;t.exports=n},function(t,e,i){var n=i(648),c={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function u(t){return(t=Math.round(t))<0?0:255<t?255:t}function f(t){return t<0?0:1<t?1:t}function d(t){return t.length&&"%"===t.charAt(t.length-1)?u(parseFloat(t)/100*255):u(parseInt(t,10))}function p(t){return t.length&&"%"===t.charAt(t.length-1)?f(parseFloat(t)/100):f(parseFloat(t))}function s(t,e,i){return i<0?i+=1:1<i&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function g(t,e,i){return t+(e-t)*i}function v(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t}function m(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var y=new n(20),r=null;function _(t,e){r&&m(r,e),r=y.put(t,r||e.slice())}function x(t,e){if(t){e=e||[];var i=y.get(t);if(i)return m(e,i);var n,r=(t+="").replace(/ /g,"").toLowerCase();if(r in c)return m(e,c[r]),_(t,e),e;if("#"===r.charAt(0))return 4===r.length?0<=(n=parseInt(r.substr(1),16))&&n<=4095?(v(e,(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1),_(t,e),e):void v(e,0,0,0,1):7===r.length?0<=(n=parseInt(r.substr(1),16))&&n<=16777215?(v(e,(16711680&n)>>16,(65280&n)>>8,255&n,1),_(t,e),e):void v(e,0,0,0,1):void 0;var o=r.indexOf("("),a=r.indexOf(")");if(-1!==o&&a+1===r.length){var s=r.substr(0,o),l=r.substr(o+1,a-(o+1)).split(","),h=1;switch(s){case"rgba":if(4!==l.length)return void v(e,0,0,0,1);h=p(l.pop());case"rgb":return 3!==l.length?void v(e,0,0,0,1):(v(e,d(l[0]),d(l[1]),d(l[2]),h),_(t,e),e);case"hsla":return 4!==l.length?void v(e,0,0,0,1):(l[3]=p(l[3]),b(l,e),_(t,e),e);case"hsl":return 3!==l.length?void v(e,0,0,0,1):(b(l,e),_(t,e),e);default:return}}v(e,0,0,0,1)}}function b(t,e){var i=(parseFloat(t[0])%360+360)%360/360,n=p(t[1]),r=p(t[2]),o=r<=.5?r*(n+1):r+n-r*n,a=2*r-o;return v(e=e||[],u(255*s(a,o,i+1/3)),u(255*s(a,o,i)),u(255*s(a,o,i-1/3)),1),4===t.length&&(e[3]=t[3]),e}function o(t,e,i){if(e&&e.length&&0<=t&&t<=1){i=i||[];var n=t*(e.length-1),r=Math.floor(n),o=Math.ceil(n),a=e[r],s=e[o],l=n-r;return i[0]=u(g(a[0],s[0],l)),i[1]=u(g(a[1],s[1],l)),i[2]=u(g(a[2],s[2],l)),i[3]=f(g(a[3],s[3],l)),i}}var a=o;function l(t,e,i){if(e&&e.length&&0<=t&&t<=1){var n=t*(e.length-1),r=Math.floor(n),o=Math.ceil(n),a=x(e[r]),s=x(e[o]),l=n-r,h=w([u(g(a[0],s[0],l)),u(g(a[1],s[1],l)),u(g(a[2],s[2],l)),f(g(a[3],s[3],l))],"rgba");return i?{color:h,leftIndex:r,rightIndex:o,value:n}:h}}var h=l;function w(t,e){if(t&&t.length){var i=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(i+=","+t[3]),e+"("+i+")"}}e.parse=x,e.lift=function(t,e){var i=x(t);if(i){for(var n=0;n<3;n++)i[n]=e<0?i[n]*(1-e)|0:(255-i[n])*e+i[n]|0;return w(i,4===i.length?"rgba":"rgb")}},e.toHex=function(t){var e=x(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)},e.fastLerp=o,e.fastMapToColor=a,e.lerp=l,e.mapToColor=h,e.modifyHSL=function(t,e,i,n){if(t=x(t))return t=function(t){if(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,a=Math.min(n,r,o),s=Math.max(n,r,o),l=s-a,h=(s+a)/2;if(0===l)i=e=0;else{i=h<.5?l/(s+a):l/(2-s-a);var c=((s-n)/6+l/2)/l,u=((s-r)/6+l/2)/l,f=((s-o)/6+l/2)/l;n===s?e=f-u:r===s?e=1/3+c-f:o===s&&(e=2/3+u-c),e<0&&(e+=1),1<e&&(e-=1)}var d=[360*e,i,h];return null!=t[3]&&d.push(t[3]),d}}(t),null!=e&&(t[0]=(r=e,(r=Math.round(r))<0?0:360<r?360:r)),null!=i&&(t[1]=p(i)),null!=n&&(t[2]=p(n)),w(b(t),"rgba");var r},e.modifyAlpha=function(t,e){if((t=x(t))&&null!=e)return t[3]=f(e),w(t,"rgba")},e.stringify=w},function(t,e,i){var n=i(617);e.Dispatcher=n;var r=i(606),o="undefined"!=typeof window&&!!window.addEventListener,a=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;function s(t,e,i,n){return i=i||{},n||!r.canvasSupported?l(t,e,i):r.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(i.zrX=e.layerX,i.zrY=e.layerY):null!=e.offsetX?(i.zrX=e.offsetX,i.zrY=e.offsetY):l(t,e,i),i}function l(t,e,i){var n,r=(n=t).getBoundingClientRect?n.getBoundingClientRect():{left:0,top:0};i.zrX=e.clientX-r.left,i.zrY=e.clientY-r.top}var h=o?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};e.clientToLocal=s,e.normalizeEvent=function(t,e,i){if(null!=(e=e||window.event).zrX)return e;var n=e.type;if(n&&0<=n.indexOf("touch")){var r="touchend"!=n?e.targetTouches[0]:e.changedTouches[0];r&&s(t,r,e,i)}else s(t,e,e,i),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var o=e.button;return null==e.which&&void 0!==o&&a.test(e.type)&&(e.which=1&o?1:2&o?3:4&o?2:0),e},e.addEventListener=function(t,e,i){o?t.addEventListener(e,i):t.attachEvent("on"+e,i)},e.removeEventListener=function(t,e,i){o?t.removeEventListener(e,i):t.detachEvent("on"+e,i)},e.stop=h,e.notLeftMouse=function(t){return 1<t.which}},function(t,e,i){var n=i(598),h=i(599),c=i(608),r=h.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=e.width/2,o=e.height/2;t.moveTo(i,n-o),t.lineTo(i+r,n+o),t.lineTo(i-r,n+o),t.closePath()}}),o=h.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=e.width/2,o=e.height/2;t.moveTo(i,n-o),t.lineTo(i+r,n),t.lineTo(i,n+o),t.lineTo(i-r,n),t.closePath()}}),a=h.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.x,n=e.y,r=e.width/5*3,o=Math.max(r,e.height),a=r/2,s=a*a/(o-a),l=n-o+a+s,h=Math.asin(s/a),c=Math.cos(h)*a,u=Math.sin(h),f=Math.cos(h),d=.6*a,p=.7*a;t.moveTo(i-c,l+s),t.arc(i,l,a,Math.PI-h,2*Math.PI+h),t.bezierCurveTo(i+c-u*d,l+s+f*d,i,n-p,i,n),t.bezierCurveTo(i,n-p,i-c+u*d,l+s+f*d,i-c,l+s),t.closePath()}}),s=h.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.height,n=e.width,r=e.x,o=e.y,a=n/3*2;t.moveTo(r,o),t.lineTo(r+a,o+i),t.lineTo(r,o+i/4*3),t.lineTo(r-a,o+i),t.lineTo(r,o),t.closePath()}}),l={line:h.Line,rect:h.Rect,roundRect:h.Rect,square:h.Rect,circle:h.Circle,diamond:o,pin:a,arrow:s,triangle:r},u={line:function(t,e,i,n,r){r.x1=t,r.y1=e+n/2,r.x2=t+i,r.y2=e+n/2},rect:function(t,e,i,n,r){r.x=t,r.y=e,r.width=i,r.height=n},roundRect:function(t,e,i,n,r){r.x=t,r.y=e,r.width=i,r.height=n,r.r=Math.min(i,n)/4},square:function(t,e,i,n,r){var o=Math.min(i,n);r.x=t,r.y=e,r.width=o,r.height=o},circle:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.r=Math.min(i,n)/2},diamond:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.width=i,r.height=n},pin:function(t,e,i,n,r){r.x=t+i/2,r.y=e+n/2,r.width=i,r.height=n},arrow:function(t,e,i,n,r){r.x=t+i/2,r.y=e+n/2,r.width=i,r.height=n},triangle:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.width=i,r.height=n}},f={};n.each(l,function(t,e){f[e]=new t});var d=h.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var t=this.style;"pin"===this.shape.symbolType&&"inside"===t.textPosition&&(t.textPosition=["50%","40%"],t.textAlign="center",t.textVerticalAlign="middle")},buildPath:function(t,e,i){var n=e.symbolType,r=f[n];"none"!==e.symbolType&&(r||(r=f[n="rect"]),u[n](e.x,e.y,e.width,e.height,r.shape),r.buildPath(t,r.shape,i))}});function p(t,e){if("image"!==this.type){var i=this.style,n=this.shape;n&&"line"===n.symbolType?i.stroke=t:this.__isEmptyBrush?(i.stroke=t,i.fill=e||"#fff"):(i.fill&&(i.fill=t),i.stroke&&(i.stroke=t)),this.dirty(!1)}}e.createSymbol=function(t,e,i,n,r,o,a){var s,l=0===t.indexOf("empty");return l&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),(s=0===t.indexOf("image://")?h.makeImage(t.slice(8),new c(e,i,n,r),a?"center":"cover"):0===t.indexOf("path://")?h.makePath(t.slice(7),{},new c(e,i,n,r),a?"center":"cover"):new d({shape:{symbolType:t,x:e,y:i,width:n,height:r}})).__isEmptyBrush=l,s.setColor=p,s.setColor(o),s}},function(t,e,i){var o=i(598),n=i(645),h=i(608),a=function(t){for(var e in t=t||{},n.call(this,t),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};a.prototype={constructor:a,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,i=0;i<e.length;i++)if(e[i].name===t)return e[i]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var i=this._children,n=i.indexOf(e);0<=n&&(i.splice(n,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t);var e=(t.parent=this).__storage,i=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof a&&t.addChildrenToStorage(e)),i&&i.refresh()},remove:function(t){var e=this.__zr,i=this.__storage,n=this._children,r=o.indexOf(n,t);return r<0||(n.splice(r,1),t.parent=null,i&&(i.delFromStorage(t),t instanceof a&&t.delChildrenFromStorage(i)),e&&e.refresh()),this},removeAll:function(){var t,e,i=this._children,n=this.__storage;for(e=0;e<i.length;e++)t=i[e],n&&(n.delFromStorage(t),t instanceof a&&t.delChildrenFromStorage(n)),t.parent=null;return i.length=0,this},eachChild:function(t,e){for(var i=this._children,n=0;n<i.length;n++){var r=i[n];t.call(e,r,n)}return this},traverse:function(t,e){for(var i=0;i<this._children.length;i++){var n=this._children[i];t.call(e,n),"group"===n.type&&n.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.addToStorage(i),i instanceof a&&i.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.delFromStorage(i),i instanceof a&&i.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,i=new h(0,0,0,0),n=t||this._children,r=[],o=0;o<n.length;o++){var a=n[o];if(!a.ignore&&!a.invisible){var s=a.getBoundingRect(),l=a.getLocalTransform(r);l?(i.copy(s),i.applyTransform(l),(e=e||i.clone()).union(i)):(e=e||s.clone()).union(s)}}return e||i}},o.inherits(a,n);var r=a;t.exports=r},function(t,e){var i=1;"undefined"!=typeof window&&(i=Math.max(window.devicePixelRatio||1,1));var n=i;e.debugMode=0,e.devicePixelRatio=n},function(t,e,i){var w=i(616),v=i(602),m=i(656),y=i(608),n=i(622).devicePixelRatio,T={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},_=[],x=[],b=[],C=[],S=Math.min,O=Math.max,k=Math.cos,A=Math.sin,M=Math.sqrt,D=Math.abs,s="undefined"!=typeof Float32Array,r=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};r.prototype={constructor:r,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e){this._ux=D(1/n/t)||0,this._uy=D(1/n/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return(this._ctx=t)&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(T.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var i=D(t-this._xi)>this._ux||D(e-this._yi)>this._uy||this._len<5;return this.addData(T.L,t,e),this._ctx&&i&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),i&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,i,n,r,o){return this.addData(T.C,t,e,i,n,r,o),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,i,n,r,o):this._ctx.bezierCurveTo(t,e,i,n,r,o)),this._xi=r,this._yi=o,this},quadraticCurveTo:function(t,e,i,n){return this.addData(T.Q,t,e,i,n),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,i,n):this._ctx.quadraticCurveTo(t,e,i,n)),this._xi=i,this._yi=n,this},arc:function(t,e,i,n,r,o){return this.addData(T.A,t,e,i,i,n,r-n,0,o?0:1),this._ctx&&this._ctx.arc(t,e,i,n,r,o),this._xi=k(r)*i+t,this._yi=A(r)*i+t,this},arcTo:function(t,e,i,n,r){return this._ctx&&this._ctx.arcTo(t,e,i,n,r),this},rect:function(t,e,i,n){return this._ctx&&this._ctx.rect(t,e,i,n),this.addData(T.R,t,e,i,n),this},closePath:function(){this.addData(T.Z);var t=this._ctx,e=this._x0,i=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,i),t.closePath()),this._xi=e,this._yi=i,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t;for(var e=this._dashIdx=0,i=0;i<t.length;i++)e+=t[i];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length==e||!s||(this.data=new Float32Array(e));for(var i=0;i<e;i++)this.data[i]=t[i];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,i=0,n=this._len,r=0;r<e;r++)i+=t[r].len();s&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(r=0;r<e;r++)for(var o=t[r].data,a=0;a<o.length;a++)this.data[n++]=o[a];this._len=n},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var i=0;i<arguments.length;i++)e[this._len++]=arguments[i];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var i,n,r=this._dashSum,o=this._dashOffset,a=this._lineDash,s=this._ctx,l=this._xi,h=this._yi,c=t-l,u=e-h,f=M(c*c+u*u),d=l,p=h,g=a.length;for(o<0&&(o=r+o),d-=(o%=r)*(c/=f),p-=o*(u/=f);0<c&&d<=t||c<0&&t<=d||0==c&&(0<u&&p<=e||u<0&&e<=p);)d+=c*(i=a[n=this._dashIdx]),p+=u*i,this._dashIdx=(n+1)%g,0<c&&d<l||c<0&&l<d||0<u&&p<h||u<0&&h<p||s[n%2?"moveTo":"lineTo"](0<=c?S(d,t):O(d,t),0<=u?S(p,e):O(p,e));c=d-t,u=p-e,this._dashOffset=-M(c*c+u*u)},_dashedBezierTo:function(t,e,i,n,r,o){var a,s,l,h,c,u=this._dashSum,f=this._dashOffset,d=this._lineDash,p=this._ctx,g=this._xi,v=this._yi,m=w.cubicAt,y=0,_=this._dashIdx,x=d.length,b=0;for(f<0&&(f=u+f),f%=u,a=0;a<1;a+=.1)s=m(g,t,i,r,a+.1)-m(g,t,i,r,a),l=m(v,e,n,o,a+.1)-m(v,e,n,o,a),y+=M(s*s+l*l);for(;_<x&&!(f<(b+=d[_]));_++);for(a=(b-f)/y;a<=1;)h=m(g,t,i,r,a),c=m(v,e,n,o,a),_%2?p.moveTo(h,c):p.lineTo(h,c),a+=d[_]/y,_=(_+1)%x;_%2!=0&&p.lineTo(r,o),s=r-h,l=o-c,this._dashOffset=-M(s*s+l*l)},_dashedQuadraticTo:function(t,e,i,n){var r=i,o=n;i=(i+2*t)/3,n=(n+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,i,n,r,o)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,s&&(this.data=new Float32Array(t)))},getBoundingRect:function(){_[0]=_[1]=b[0]=b[1]=Number.MAX_VALUE,x[0]=x[1]=C[0]=C[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,i=0,n=0,r=0,o=0;o<t.length;){var a=t[o++];switch(1==o&&(n=e=t[o],r=i=t[o+1]),a){case T.M:e=n=t[o++],i=r=t[o++],b[0]=n,b[1]=r,C[0]=n,C[1]=r;break;case T.L:m.fromLine(e,i,t[o],t[o+1],b,C),e=t[o++],i=t[o++];break;case T.C:m.fromCubic(e,i,t[o++],t[o++],t[o++],t[o++],t[o],t[o+1],b,C),e=t[o++],i=t[o++];break;case T.Q:m.fromQuadratic(e,i,t[o++],t[o++],t[o],t[o+1],b,C),e=t[o++],i=t[o++];break;case T.A:var s=t[o++],l=t[o++],h=t[o++],c=t[o++],u=t[o++],f=t[o++]+u,d=(t[o++],1-t[o++]);1==o&&(n=k(u)*h+s,r=A(u)*c+l),m.fromArc(s,l,h,c,u,f,d,b,C),e=k(f)*h+s,i=A(f)*c+l;break;case T.R:n=e=t[o++],r=i=t[o++];var p=t[o++],g=t[o++];m.fromLine(n,r,n+p,r+g,b,C);break;case T.Z:e=n,i=r}v.min(_,_,b),v.max(x,x,C)}return 0===o&&(_[0]=_[1]=x[0]=x[1]=0),new y(_[0],_[1],x[0]-_[0],x[1]-_[1])},rebuildPath:function(t){for(var e,i,n,r,o,a,s=this.data,l=this._ux,h=this._uy,c=this._len,u=0;u<c;){var f=s[u++];switch(1==u&&(e=n=s[u],i=r=s[u+1]),f){case T.M:e=n=s[u++],i=r=s[u++],t.moveTo(n,r);break;case T.L:o=s[u++],a=s[u++],(D(o-n)>l||D(a-r)>h||u===c-1)&&(t.lineTo(o,a),n=o,r=a);break;case T.C:t.bezierCurveTo(s[u++],s[u++],s[u++],s[u++],s[u++],s[u++]),n=s[u-2],r=s[u-1];break;case T.Q:t.quadraticCurveTo(s[u++],s[u++],s[u++],s[u++]),n=s[u-2],r=s[u-1];break;case T.A:var d=s[u++],p=s[u++],g=s[u++],v=s[u++],m=s[u++],y=s[u++],_=s[u++],x=s[u++],b=v<g?g:v,w=v<g?1:g/v,C=v<g?v/g:1,S=m+y;.001<Math.abs(g-v)?(t.translate(d,p),t.rotate(_),t.scale(w,C),t.arc(0,0,b,m,S,1-x),t.scale(1/w,1/C),t.rotate(-_),t.translate(-d,-p)):t.arc(d,p,b,m,S,1-x),1==u&&(e=k(m)*g+d,i=A(m)*v+p),n=k(S)*g+d,r=A(S)*v+p;break;case T.R:e=n=s[u],i=r=s[u+1],t.rect(s[u++],s[u++],s[u++],s[u++]);break;case T.Z:t.closePath(),n=e,r=i}}}},r.CMD=T;var o=r;t.exports=o},function(t,e,i){var n=i(610);function r(t){this._setting=t||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}r.prototype.parse=function(t){return t},r.prototype.getSetting=function(t){return this._setting[t]},r.prototype.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]},r.prototype.normalize=function(t){var e=this._extent;return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])},r.prototype.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]},r.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},r.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getDataExtent(e,!0))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(t,e){var i=this._extent;isNaN(t)||(i[0]=t),isNaN(e)||(i[1]=e)},r.prototype.getTicksLabels=function(){for(var t=[],e=this.getTicks(),i=0;i<e.length;i++)t.push(this.getLabel(e[i]));return t},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(t){this._isBlank=t},n.enableClassExtend(r),n.enableClassManagement(r,{registerWhenExtend:!0});var o=r;t.exports=o},function(t,e,i){var _=i(598),x=i(609),b=_.each,s=_.curry;function w(t,e){return"all"===t||_.isArray(t)&&0<=_.indexOf(t,e)||t===e}function h(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[S(t)]}function C(t){return!!t.get("handle.show")}function S(t){return t.type+"||"+t.id}e.collect=function(t,e){var p,g,i,a,v,m,y,n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return p=n,i=e,a=(g=t).getComponent("tooltip"),v=g.getComponent("axisPointer"),m=v.get("link",!0)||[],y=[],b(i.getCoordinateSystems(),function(u){if(u.axisPointerEnabled){var t=S(u.model),f=p.coordSysAxesInfo[t]={},e=(p.coordSysMap[t]=u).model,d=e.getModel("tooltip",a);if(b(u.getAxes(),s(o,!1,null)),u.getTooltipAxes&&a&&d.get("show")){var i="axis"===d.get("trigger"),n="cross"===d.get("axisPointer.type"),r=u.getTooltipAxes(d.get("axisPointer.axis"));(i||n)&&b(r.baseAxes,s(o,!n||"cross",i)),n&&b(r.otherAxes,s(o,"cross",!1))}}function o(t,e,i){var n=i.model.getModel("axisPointer",v),r=n.get("show");if(r&&("auto"!==r||t||C(n))){null==e&&(e=n.get("triggerTooltip"));var o=(n=t?function(t,e,i,n,r,o){var a=e.getModel("axisPointer"),s={};b(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(t){s[t]=_.clone(a.get(t))}),s.snap="category"!==t.type&&!!o,"cross"===a.get("type")&&(s.type="line");var l=s.label||(s.label={});if(null==l.show&&(l.show=!1),"cross"===r&&(l.show=!0,!o)){var h=s.lineStyle=a.get("crossStyle");h&&_.defaults(l,h.textStyle)}return t.model.getModel("axisPointer",new x(s,i,n))}(i,d,v,g,t,e):n).get("snap"),a=S(i.model),s=e||o||"category"===i.type,l=p.axesInfo[a]={key:a,axis:i,coordSys:u,axisPointerModel:n,triggerTooltip:e,involveSeries:s,snap:o,useHandle:C(n),seriesModels:[]};f[a]=l,p.seriesInvolved|=s;var h=function(t,e){for(var i=e.model,n=e.dim,r=0;r<t.length;r++){var o=t[r]||{};if(w(o[n+"AxisId"],i.id)||w(o[n+"AxisIndex"],i.componentIndex)||w(o[n+"AxisName"],i.name))return r}}(m,i);if(null!=h){var c=y[h]||(y[h]={axesInfo:{}});c.axesInfo[a]=l,c.mapper=m[h].mapper,l.linkGroup=c}}}}),n.seriesInvolved&&function(r,t){t.eachSeries(function(i){var n=i.coordinateSystem,t=i.get("tooltip.trigger",!0),e=i.get("tooltip.show",!0);n&&"none"!==t&&!1!==t&&"item"!==t&&!1!==e&&!1!==i.get("axisPointer.show",!0)&&b(r.coordSysAxesInfo[S(n.model)],function(t){var e=t.axis;n.getAxis(e.dim)===e&&(t.seriesModels.push(i),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=i.getData().count())})},this)}(n,t),n},e.fixValue=function(t){var e=h(t);if(e){var i=e.axisPointerModel,n=e.axis.scale,r=i.option,o=i.get("status"),a=i.get("value");null!=a&&(a=n.parse(a));var s=C(i);null==o&&(r.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==a||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),r.value=a,s&&(r.status=e.axis.scale.isBlank()?"hide":"show")}},e.getAxisInfo=h,e.getAxisPointerModel=function(t){var e=h(t);return e&&e.axisPointerModel},e.makeKey=S},function(t,e,i){var l=i(598);t.exports=function(s){for(var t=0;t<s.length;t++)s[t][1]||(s[t][1]=s[t][0]);return function(t,e,i){for(var n={},r=0;r<s.length;r++){var o=s[r][1];if(!(e&&0<=l.indexOf(e,o)||i&&l.indexOf(i,o)<0)){var a=t.getShallow(o);null!=a&&(n[s[r][0]]=a)}}return n}}},function(t,e,i){var a=i(598),s={};function n(){this._coordinateSystems=[]}n.prototype={constructor:n,create:function(n,r){var o=[];a.each(s,function(t,e){var i=t.create(n,r);o=o.concat(i||[])}),this._coordinateSystems=o},update:function(e,i){a.each(this._coordinateSystems,function(t){t.update&&t.update(e,i)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},n.register=function(t,e){s[t]=e},n.get=function(t){return s[t]};var r=n;t.exports=r},function(t,e,i){var n=i(603),r=i(607),o=i(624),a=i(662),s=n.round,l=o.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(t,e){var i=this._extent;isNaN(t)||(i[0]=parseFloat(t)),isNaN(e)||(i[1]=parseFloat(e))},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),l.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=a.getIntervalPrecision(t)},getTicks:function(){return a.intervalScaleGetTicks(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getTicksLabels:function(){for(var t=[],e=this.getTicks(),i=0;i<e.length;i++)t.push(this.getLabel(e[i]));return t},getLabel:function(t,e){if(null==t)return"";var i=e&&e.precision;return null==i?i=n.getPrecisionSafe(t)||0:"auto"===i&&(i=this._intervalPrecision),t=s(t,i,!0),r.addCommas(t)},niceTicks:function(t,e,i){t=t||5;var n=this._extent,r=n[1]-n[0];if(isFinite(r)){r<0&&(r=-r,n.reverse());var o=a.intervalScaleNiceTicks(n,t,e,i);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},niceExtent:function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var i=e[0];t.fixMax||(e[1]+=i/2),e[0]-=i/2}else e[1]=1;var n=e[1]-e[0];isFinite(n)||(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var r=this._interval;t.fixMin||(e[0]=s(Math.floor(e[0]/r)*r)),t.fixMax||(e[1]=s(Math.ceil(e[1]/r)*r))}});l.create=function(){return new l};var h=l;t.exports=h},function(t,e){var h=32,y=7;function c(t,e,i,n){var r=e+1;if(r===i)return 1;if(n(t[r++],t[e])<0){for(;r<i&&n(t[r],t[r-1])<0;)r++;!function(t,e,i){i--;for(;e<i;){var n=t[e];t[e++]=t[i],t[i--]=n}}(t,e,r)}else for(;r<i&&0<=n(t[r],t[r-1]);)r++;return r-e}function u(t,e,i,n,r){for(n===e&&n++;n<i;n++){for(var o,a=t[n],s=e,l=n;s<l;)r(a,t[o=s+l>>>1])<0?l=o:s=o+1;var h=n-s;switch(h){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;0<h;)t[s+h]=t[s+h-1],h--}t[s]=a}}function _(t,e,i,n,r,o){var a=0,s=0,l=1;if(0<o(t,e[i+r])){for(s=n-r;l<s&&0<o(t,e[i+r+l]);)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s),a+=r,l+=r}else{for(s=r+1;l<s&&o(t,e[i+r-l])<=0;)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s);var h=a;a=r-l,l=r-h}for(a++;a<l;){var c=a+(l-a>>>1);0<o(t,e[i+c])?a=c+1:l=c}return l}function x(t,e,i,n,r,o){var a=0,s=0,l=1;if(o(t,e[i+r])<0){for(s=r+1;l<s&&o(t,e[i+r-l])<0;)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s);var h=a;a=r-l,l=r-h}else{for(s=n-r;l<s&&0<=o(t,e[i+r+l]);)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s),a+=r,l+=r}for(a++;a<l;){var c=a+(l-a>>>1);o(t,e[i+c])<0?l=c:a=c+1}return l}function f(p,g){var t,a,s,v=y,l=0;t=p.length;var m=[];function e(t){var e=a[t],i=s[t],n=a[t+1],r=s[t+1];s[t]=i+r,t===l-3&&(a[t+1]=a[t+2],s[t+1]=s[t+2]),l--;var o=x(p[n],p,e,i,0,g);e+=o,0!==(i-=o)&&0!==(r=_(p[e+i-1],p,n,r,r-1,g))&&(i<=r?function(t,e,i,n){var r=0;for(r=0;r<e;r++)m[r]=p[t+r];var o=0,a=i,s=t;if(p[s++]=p[a++],0==--n){for(r=0;r<e;r++)p[s+r]=m[o+r];return}if(1===e){for(r=0;r<n;r++)p[s+r]=p[a+r];return p[s+n]=m[o]}var l,h,c,u=v;for(;;){h=l=0,c=!1;do{if(g(p[a],m[o])<0){if(p[s++]=p[a++],h++,(l=0)==--n){c=!0;break}}else if(p[s++]=m[o++],l++,h=0,1==--e){c=!0;break}}while((l|h)<u);if(c)break;do{if(0!==(l=x(p[a],m,o,e,0,g))){for(r=0;r<l;r++)p[s+r]=m[o+r];if(s+=l,o+=l,(e-=l)<=1){c=!0;break}}if(p[s++]=p[a++],0==--n){c=!0;break}if(0!==(h=_(m[o],p,a,n,0,g))){for(r=0;r<h;r++)p[s+r]=p[a+r];if(s+=h,a+=h,0===(n-=h)){c=!0;break}}if(p[s++]=m[o++],1==--e){c=!0;break}u--}while(y<=l||y<=h);if(c)break;u<0&&(u=0),u+=2}if((v=u)<1&&(v=1),1===e){for(r=0;r<n;r++)p[s+r]=p[a+r];p[s+n]=m[o]}else{if(0===e)throw new Error;for(r=0;r<e;r++)p[s+r]=m[o+r]}}(e,i,n,r):function(t,e,i,n){var r=0;for(r=0;r<n;r++)m[r]=p[i+r];var o=t+e-1,a=n-1,s=i+n-1,l=0,h=0;if(p[s--]=p[o--],0==--e){for(l=s-(n-1),r=0;r<n;r++)p[l+r]=m[r];return}if(1===n){for(h=(s-=e)+1,l=(o-=e)+1,r=e-1;0<=r;r--)p[h+r]=p[l+r];return p[s]=m[a]}var c=v;for(;;){var u=0,f=0,d=!1;do{if(g(m[a],p[o])<0){if(p[s--]=p[o--],u++,(f=0)==--e){d=!0;break}}else if(p[s--]=m[a--],f++,u=0,1==--n){d=!0;break}}while((u|f)<c);if(d)break;do{if(0!==(u=e-x(m[a],p,t,e,e-1,g))){for(e-=u,h=(s-=u)+1,l=(o-=u)+1,r=u-1;0<=r;r--)p[h+r]=p[l+r];if(0===e){d=!0;break}}if(p[s--]=m[a--],1==--n){d=!0;break}if(0!==(f=n-_(p[o],m,0,n,n-1,g))){for(n-=f,h=(s-=f)+1,l=(a-=f)+1,r=0;r<f;r++)p[h+r]=m[l+r];if(n<=1){d=!0;break}}if(p[s--]=p[o--],0==--e){d=!0;break}c--}while(y<=u||y<=f);if(d)break;c<0&&(c=0),c+=2}(v=c)<1&&(v=1);if(1===n){for(h=(s-=e)+1,l=(o-=e)+1,r=e-1;0<=r;r--)p[h+r]=p[l+r];p[s]=m[a]}else{if(0===n)throw new Error;for(l=s-(n-1),r=0;r<n;r++)p[l+r]=m[r]}}(e,i,n,r))}a=[],s=[],this.mergeRuns=function(){for(;1<l;){var t=l-2;if(1<=t&&s[t-1]<=s[t]+s[t+1]||2<=t&&s[t-2]<=s[t]+s[t-1])s[t-1]<s[t+1]&&t--;else if(s[t]>s[t+1])break;e(t)}},this.forceMergeRuns=function(){for(;1<l;){var t=l-2;0<t&&s[t-1]<s[t+1]&&t--,e(t)}},this.pushRun=function(t,e){a[l]=t,s[l]=e,l+=1}}t.exports=function(t,e,i,n){i||(i=0),n||(n=t.length);var r=n-i;if(!(r<2)){var o=0;if(r<h)u(t,i,n,i+(o=c(t,i,n,e)),e);else{var a=new f(t,e),s=function(t){for(var e=0;h<=t;)e|=1&t,t>>=1;return t+e}(r);do{if((o=c(t,i,n,e))<s){var l=r;s<l&&(l=s),u(t,i,i+l,i+o,e),o=l}a.pushRun(i,o),a.mergeRuns(),r-=o,i+=o}while(0!==r);a.forceMergeRuns()}}}},function(t,e,i){var n=i(598),r=i(650),o=i(645),a=i(688);function s(t){for(var e in t=t||{},o.call(this,t),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new r(t.style,this),this._rect=null,this.__clipPaths=[]}s.prototype={constructor:s,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:-1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var i=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(i[0],i[1])},dirty:function(){this.__dirty=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?o.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new r(t,this),this.dirty(!1),this}},n.inherits(s,o),n.mixin(s,a);var l=s;t.exports=l},function(t,e,i){var s=new(i(648))(50);function l(){var t=this.__cachedImgObj;this.onload=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var i=t.pending[e],n=i.cb;n&&n(this,i.cbPayload),i.hostEl.dirty()}t.pending.length=0}function h(t){return t&&t.width&&t.height}e.findExistImage=function(t){if("string"==typeof t){var e=s.get(t);return e&&e.image}return t},e.createOrUpdateImage=function(t,e,i,n,r){if(t){if("string"==typeof t){if(e&&e.__zrImageSrc===t||!i)return e;var o=s.get(t),a={hostEl:i,cb:n,cbPayload:r};return o?!h(e=o.image)&&o.pending.push(a):(!e&&(e=new Image),e.onload=l,s.put(t,e.__cachedImgObj={image:e,pending:[a]}),e.src=e.__zrImageSrc=t),e}return t}return e},e.isImageReady=h},function(t,e){var i=function(t){this.colorStops=t||[]};i.prototype={constructor:i,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};var n=i;t.exports=n},function(t,e,i){var y=i(598),a=i(610).parseClassType,n=0;e.getUID=function(t){return[t||"",n++,Math.random()].join("_")},e.enableSubTypeDefaulter=function(r){var o={};return r.registerSubTypeDefaulter=function(t,e){t=a(t),o[t.main]=e},r.determineSubType=function(t,e){var i=e.type;if(!i){var n=a(t).main;r.hasSubTypes(t)&&o[n]&&(i=o[n](e))}return i},r},e.enableTopologicalTravel=function(t,v){function m(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}t.topologicalTravel=function(t,e,i,n){if(t.length){var s,l,h,r=(s=e,l={},h=[],y.each(s,function(i){var t,e,n,r=m(l,i),o=r.originalDeps=v(i),a=(t=o,e=s,n=[],y.each(t,function(t){0<=y.indexOf(e,t)&&n.push(t)}),n);r.entryCount=a.length,0===r.entryCount&&h.push(i),y.each(a,function(t){y.indexOf(r.predecessor,t)<0&&r.predecessor.push(t);var e=m(l,t);y.indexOf(e.successor,t)<0&&e.successor.push(i)})}),{graph:l,noEntryList:h}),o=r.graph,a=r.noEntryList,c={};for(y.each(t,function(t){c[t]=!0});a.length;){var u=a.pop(),f=o[u],d=!!c[u];d&&(i.call(n,u,f.originalDeps.slice()),delete c[u]),y.each(f.successor,d?g:p)}y.each(c,function(){throw new Error("Circle dependency may exists")})}function p(t){o[t].entryCount--,0===o[t].entryCount&&a.push(t)}function g(t){c[t]=!0,p(t)}}}},function(t,e){var s="\0__throttleOriginMethod",l="\0__throttleRate",h="\0__throttleType";function c(t,i,n){var r,o,a,s,l,h=0,c=0,u=null;function f(){c=(new Date).getTime(),u=null,t.apply(a,s||[])}i=i||0;var e=function(){r=(new Date).getTime(),a=this,s=arguments;var t=l||i,e=l||n;l=null,o=r-(e?h:c)-t,clearTimeout(u),e?u=setTimeout(f,t):0<=o?f():u=setTimeout(f,-o),h=r};return e.clear=function(){u&&(clearTimeout(u),u=null)},e.debounceNextCall=function(t){l=t},e}e.throttle=c,e.createOrUpdate=function(t,e,i,n){var r=t[e];if(r){var o=r[s]||r,a=r[h];if(r[l]!==i||a!==n){if(null==i||!n)return t[e]=o;(r=t[e]=c(o,i,"debounce"===n))[s]=o,r[h]=n,r[l]=i}return r}},e.clear=function(t,e){var i=t[e];i&&i[s]&&(t[e]=i[s])}},function(t,e,i){i(605).__DEV__;var c=i(598),n=i(606),r=i(607),u=r.formatTime,f=r.encodeHTML,d=r.addCommas,p=r.getTooltipMarker,o=i(610),a=o.set,g=o.get,v=i(601),s=i(611),l=i(661),h=i(612),m=h.getLayoutParams,y=h.mergeLayoutParam,_=s.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.normal.color",layoutMode:null,init:function(t,e,i,n){this.seriesIndex=this.componentIndex,this.mergeDefaultAndTheme(t,i);var r=this.getInitialData(t,i);a(this,"dataBeforeProcessed",r),this.restoreData()},mergeDefaultAndTheme:function(t,e){var i=this.layoutMode,n=i?m(t):{},r=this.subType;s.hasClass(r)&&(r+="Series"),c.merge(t,e.getTheme().get(this.subType)),c.merge(t,this.getDefaultOption()),v.defaultEmphasis(t.label,["show"]),this.fillDataTextStyle(t.data),i&&y(t,n,i)},mergeOption:function(t,e){t=c.merge(this.option,t,!0),this.fillDataTextStyle(t.data);var i=this.layoutMode;i&&y(this.option,t,i);var n=this.getInitialData(t,e);n&&(a(this,"data",n),a(this,"dataBeforeProcessed",n.cloneShallow()))},fillDataTextStyle:function(t){if(t)for(var e=["show"],i=0;i<t.length;i++)t[i]&&t[i].label&&v.defaultEmphasis(t[i].label,e)},getInitialData:function(){},getData:function(t){var e=g(this,"data");return null==t?e:e.getLinkedData(t)},setData:function(t){a(this,"data",t)},getRawData:function(){return g(this,"dataBeforeProcessed")},coordDimToDataDim:function(t){return v.coordDimToDataDim(this.getData(),t)},dataDimToCoordDim:function(t){return v.dataDimToCoordDim(this.getData(),t)},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(n,s,t){var l=g(this,"data"),e=this.getRawValue(n),i=c.isArray(e)?function(t){var o=c.reduce(t,function(t,e,i){var n=l.getDimensionInfo(i);return t|(n&&!1!==n.tooltip&&null!=n.tooltipName)},0),a=[],e=v.otherDimToDataDim(l,"tooltip");function i(t,e){var i=l.getDimensionInfo(e);if(i&&!1!==i.otherDims.tooltip){var n=i.type,r=(o?"- "+(i.tooltipName||i.name)+": ":"")+("ordinal"===n?t+"":"time"===n?s?"":u("yyyy/MM/dd hh:mm:ss",t):d(t));r&&a.push(f(r))}}return e.length?c.each(e,function(t){i(l.get(t,n),t)}):c.each(t,i),(o?"<br/>":"")+a.join(o?"<br/>":", ")}(e):f(d(e)),r=l.getName(n),o=l.getItemVisual(n,"color");c.isObject(o)&&o.colorStops&&(o=(o.colorStops[0]||{}).color);var a=p(o=o||"transparent"),h=this.name;return"\0-"===h&&(h=""),h=h?f(h)+(s?": ":"<br/>"):"",s?a+h+i:h+a+(r?f(r)+": "+i:i)},isAnimationEnabled:function(){if(n.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),t},restoreData:function(){a(this,"data",g(this,"dataBeforeProcessed").cloneShallow())},getColorFromPalette:function(t,e){var i=this.ecModel,n=l.getColorFromPalette.call(this,t,e);return n||(n=i.getColorFromPalette(t,e)),n},getAxisTooltipData:null,getTooltipPosition:null});c.mixin(_,v.dataFormatMixin),c.mixin(_,l);var x=_;t.exports=x},function(t,e,i){i(605).__DEV__;var g=i(598),v=i(637),m=i(638),n=i(601),y=n.getDataItemValue,_=n.converDataValue,x=n.isDataItemOption,b=i(627);function d(t){return"category"!==t&&"time"!==t}function p(t){return"category"===t?"ordinal":"time"===t?"time":"float"}var w={cartesian2d:function(t,e,i,n){var r=g.map(["xAxis","yAxis"],function(t){return i.queryComponents({mainType:t,index:e.get(t+"Index"),id:e.get(t+"Id")})[0]}),o=r[0],a=r[1],s=o.get("type"),l=a.get("type"),h=[{name:"x",type:p(s),stackable:d(s)},{name:"y",type:p(l),stackable:d(l)}],c="category"===s,u="category"===l;h=m(h,t,n);var f={};return c&&(f.x=o),u&&(f.y=a),{dimensions:h,categoryIndex:c?0:u?1:-1,categoryAxesModels:f}},singleAxis:function(t,e,i,n){var r=i.queryComponents({mainType:"singleAxis",index:e.get("singleAxisIndex"),id:e.get("singleAxisId")})[0],o=r.get("type"),a="category"===o,s=[{name:"single",type:p(o),stackable:d(o)}];s=m(s,t,n);var l={};return a&&(l.single=r),{dimensions:s,categoryIndex:a?0:-1,categoryAxesModels:l}},polar:function(t,e,i,n){var r=i.queryComponents({mainType:"polar",index:e.get("polarIndex"),id:e.get("polarId")})[0],o=r.findAxisModel("angleAxis"),a=r.findAxisModel("radiusAxis"),s=a.get("type"),l=o.get("type"),h=[{name:"radius",type:p(s),stackable:d(s)},{name:"angle",type:p(l),stackable:d(l)}],c="category"===l,u="category"===s;h=m(h,t,n);var f={};return u&&(f.radius=a),c&&(f.angle=o),{dimensions:h,categoryIndex:c?1:u?0:-1,categoryAxesModels:f}},geo:function(t,e,i,n){return{dimensions:m([{name:"lng"},{name:"lat"}],t,n)}}};var r=function(t,e,i){t=t||[];var n=e.get("coordinateSystem"),r=w[n],o=b.get(n),a={encodeDef:e.get("encode"),dimsDef:e.get("dimensions")},s=r&&r(t,e,i,a),l=s&&s.dimensions;l||(l=o&&(o.getDimensionsInfo?o.getDimensionsInfo():o.dimensions.slice())||["x","y"],l=m(l,t,a));var h,c=s?s.categoryIndex:-1,u=new v(l,e),f=function(t,e){var i,n=[],r=t&&t.dimensions[t.categoryIndex];if(r&&(i=t.categoryAxesModels[r.name]),i){var o=i.getCategories();if(o){var a=e.length;if(g.isArray(e[0])&&1<e[0].length){n=[];for(var s=0;s<a;s++)n[s]=o[e[s][t.categoryIndex||0]]}else n=o.slice(0)}}return n}(s,t),d={},p=0<=c&&null!=(h=function(t){for(var e=0;e<t.length&&null==t[e];)e++;return t[e]}(t))&&!g.isArray(y(h))?function(t,e,i,n){return x(t)&&(u.hasItemOption=!0),n===c?i:_(y(t),l[n])}:function(t,e,i,n){var r=y(t),o=_(r&&r[n],l[n]);x(t)&&(u.hasItemOption=!0);var a=s&&s.categoryAxesModels;return a&&a[e]&&"string"==typeof o&&(d[e]=d[e]||a[e].getCategories(),(o=g.indexOf(d[e],o))<0&&!isNaN(o)&&(o=+o)),o};return u.hasItemOption=!1,u.initData(t,f,p),u};t.exports=r},function(d,t,p){(function(t){p(605).__DEV__;var x=p(598),i=p(609),r=p(730),b=p(601),o=x.isObject,e="undefined",n=typeof window===e?t:window,w={float:typeof n.Float64Array===e?Array:n.Float64Array,int:typeof n.Int32Array===e?Array:n.Int32Array,ordinal:Array,number:Array,time:Array},a=["stackedOn","hasItemOption","_nameList","_idList","_rawData"];function h(e,i){x.each(a.concat(i.__wrappedMethods||[]),function(t){i.hasOwnProperty(t)&&(e[t]=i[t])}),e.__wrappedMethods=i.__wrappedMethods}function C(t){this._array=t||[]}C.prototype.pure=!1,C.prototype.count=function(){return this._array.length},C.prototype.getItem=function(t){return this._array[t]};var c=function(t,e){t=t||["x","y"];for(var i={},n=[],r=0;r<t.length;r++){var o,a={};"string"==typeof t[r]?a={name:o=t[r],coordDim:o,coordDimIndex:0,stackable:!1,type:"number"}:(o=(a=t[r]).name,a.type=a.type||"number",a.coordDim||(a.coordDim=o,a.coordDimIndex=0)),a.otherDims=a.otherDims||{},n.push(o),i[o]=a}this.dimensions=n,this._dimensionInfos=i,this.hostModel=e,this.dataType,this.indices=[],this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this.stackedOn=null,this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._rawData,this._extent},s=c.prototype;function u(t){return x.isArray(t)||(t=[t]),t}function y(t,e){var i=t.dimensions,n=new c(x.map(i,t.getDimensionInfo,t),t.hostModel);h(n,t);for(var r=n._storage={},o=t._storage,a=0;a<i.length;a++){var s=i[a],l=o[s];0<=x.indexOf(e,s)?r[s]=new l.constructor(o[s].length):r[s]=o[s]}return n}s.type="list",s.hasItemOption=!0,s.getDimension=function(t){return isNaN(t)||(t=this.dimensions[t]||t),t},s.getDimensionInfo=function(t){return x.clone(this._dimensionInfos[this.getDimension(t)])},s.initData=function(t,e,i){t=t||[],x.isArray(t)&&(t=new C(t)),this._rawData=t;var n,r=this._storage={},o=this.indices=[],a=this.dimensions,s=this._dimensionInfos,l=t.count(),h=[],c={};e=e||[];for(var u=0;u<a.length;u++){var f=s[a[u]];0===f.otherDims.itemName&&(n=u);var d=w[f.type];r[a[u]]=new d(l)}var p=this;i||(p.hasItemOption=!1),i=i||function(t,e,i,n){var r=b.getDataItemValue(t);return b.isDataItemOption(t)&&(p.hasItemOption=!0),b.converDataValue(r instanceof Array?r[n]:r,s[e])};for(u=0;u<l;u++){for(var g=t.getItem(u),v=0;v<a.length;v++){var m=a[v];r[m][u]=i(g,m,u,v)}o.push(u)}for(u=0;u<l;u++){g=t.getItem(u);!e[u]&&g&&(null!=g.name?e[u]=g.name:null!=n&&(e[u]=r[a[n]][u]));var y=e[u]||"",_=g&&g.id;!_&&y&&(c[y]=c[y]||0,0<c[_=y]&&(_+="__ec__"+c[y]),c[y]++),_&&(h[u]=_)}this._nameList=e,this._idList=h},s.count=function(){return this.indices.length},s.get=function(t,e,i){var n=this._storage,r=this.indices[e];if(null==r||!n[t])return NaN;var o=n[t][r];if(i){var a=this._dimensionInfos[t];if(a&&a.stackable)for(var s=this.stackedOn;s;){var l=s.get(t,e);(0<=o&&0<l||o<=0&&l<0)&&(o+=l),s=s.stackedOn}}return o},s.getValues=function(t,e,i){var n=[];x.isArray(t)||(i=e,e=t,t=this.dimensions);for(var r=0,o=t.length;r<o;r++)n.push(this.get(t[r],e,i));return n},s.hasValue=function(t){for(var e=this.dimensions,i=this._dimensionInfos,n=0,r=e.length;n<r;n++)if("ordinal"!==i[e[n]].type&&isNaN(this.get(e[n],t)))return!1;return!0},s.getDataExtent=function(t,e,i){t=this.getDimension(t);var n=this._storage[t],r=this.getDimensionInfo(t);e=r&&r.stackable&&e;var o,a=(this._extent||(this._extent={}))[t+!!e];if(a)return a;if(n){for(var s=1/0,l=-1/0,h=0,c=this.count();h<c;h++)o=this.get(t,h,e),i&&!i(o,t,h)||(o<s&&(s=o),l<o&&(l=o));return this._extent[t+!!e]=[s,l]}return[1/0,-1/0]},s.getSum=function(t,e){var i=0;if(this._storage[t])for(var n=0,r=this.count();n<r;n++){var o=this.get(t,n,e);isNaN(o)||(i+=o)}return i},s.indexOf=function(t,e){var i=this._storage[t],n=this.indices;if(i)for(var r=0,o=n.length;r<o;r++){if(i[n[r]]===e)return r}return-1},s.indexOfName=function(t){for(var e=this.indices,i=this._nameList,n=0,r=e.length;n<r;n++){if(i[e[n]]===t)return n}return-1},s.indexOfRawIndex=function(t){var e=this.indices,i=e[t];if(null!=i&&i===t)return t;for(var n=0,r=e.length-1;n<=r;){var o=(n+r)/2|0;if(e[o]<t)n=o+1;else{if(!(e[o]>t))return o;r=o-1}}return-1},s.indicesOfNearest=function(t,e,i,n){var r=[];if(!this._storage[t])return r;null==n&&(n=1/0);for(var o=Number.MAX_VALUE,a=-1,s=0,l=this.count();s<l;s++){var h=e-this.get(t,s,i),c=Math.abs(h);h<=n&&c<=o&&((c<o||0<=h&&a<0)&&(o=c,a=h,r.length=0),r.push(s))}return r},s.getRawIndex=function(t){var e=this.indices[t];return null==e?-1:e},s.getRawDataItem=function(t){return this._rawData.getItem(this.getRawIndex(t))},s.getName=function(t){return this._nameList[this.indices[t]]||""},s.getId=function(t){return this._idList[this.indices[t]]||this.getRawIndex(t)+""},s.each=function(t,e,i,n){"function"==typeof t&&(n=i,i=e,e=t,t=[]);var r=[],o=(t=x.map(u(t),this.getDimension,this)).length,a=this.indices;n=n||this;for(var s=0;s<a.length;s++)switch(o){case 0:e.call(n,s);break;case 1:e.call(n,this.get(t[0],s,i),s);break;case 2:e.call(n,this.get(t[0],s,i),this.get(t[1],s,i),s);break;default:for(var l=0;l<o;l++)r[l]=this.get(t[l],s,i);r[l]=s,e.apply(n,r)}},s.filterSelf=function(t,e,i,n){"function"==typeof t&&(n=i,i=e,e=t,t=[]);var r=[],o=[],a=(t=x.map(u(t),this.getDimension,this)).length,s=this.indices;n=n||this;for(var l=0;l<s.length;l++){var h;if(a)if(1===a)h=e.call(n,this.get(t[0],l,i),l);else{for(var c=0;c<a;c++)o[c]=this.get(t[c],l,i);o[c]=l,h=e.apply(n,o)}else h=e.call(n,l);h&&r.push(s[l])}return this.indices=r,this._extent={},this},s.mapArray=function(t,e,i,n){"function"==typeof t&&(n=i,i=e,e=t,t=[]);var r=[];return this.each(t,function(){r.push(e&&e.apply(this,arguments))},i,n),r},s.map=function(a,s,t,e){var i=y(this,a=x.map(u(a),this.getDimension,this)),l=i.indices=this.indices,h=i._storage,c=[];return this.each(a,function(){var t=arguments[arguments.length-1],e=s&&s.apply(this,arguments);if(null!=e){"number"==typeof e&&(c[0]=e,e=c);for(var i=0;i<e.length;i++){var n=a[i],r=h[n],o=l[t];r&&(r[o]=e[i])}}},t,e),i},s.downSample=function(t,e,i,n){for(var r=y(this,[t]),o=this._storage,a=r._storage,s=this.indices,l=r.indices=[],h=[],c=[],u=Math.floor(1/e),f=a[t],d=this.count(),p=0;p<o[t].length;p++)a[t][p]=o[t][p];for(p=0;p<d;p+=u){d-p<u&&(u=d-p,h.length=u);for(var g=0;g<u;g++){var v=s[p+g];h[g]=f[v],c[g]=v}var m=i(h);f[v=c[n(h,m)||0]]=m,l.push(v)}return r},s.getItemModel=function(t){var e=this.hostModel;return t=this.indices[t],new i(this._rawData.getItem(t),e,e&&e.ecModel)},s.diff=function(t){var e,i=this._idList,n=t&&t._idList;return new r(t?t.indices:[],this.indices,function(t){return null!=(e=n[t])?e:"e\0\0"+t},function(t){return null!=(e=i[t])?e:"e\0\0"+t})},s.getVisual=function(t){var e=this._visual;return e&&e[t]},s.setVisual=function(t,e){if(o(t))for(var i in t)t.hasOwnProperty(i)&&this.setVisual(i,t[i]);else this._visual=this._visual||{},this._visual[t]=e},s.setLayout=function(t,e){if(o(t))for(var i in t)t.hasOwnProperty(i)&&this.setLayout(i,t[i]);else this._layout[t]=e},s.getLayout=function(t){return this._layout[t]},s.getItemLayout=function(t){return this._itemLayouts[t]},s.setItemLayout=function(t,e,i){this._itemLayouts[t]=i?x.extend(this._itemLayouts[t]||{},e):e},s.clearItemLayouts=function(){this._itemLayouts.length=0},s.getItemVisual=function(t,e,i){var n=this._itemVisuals[t],r=n&&n[e];return null!=r||i?r:this.getVisual(e)},s.setItemVisual=function(t,e,i){var n=this._itemVisuals[t]||{};if(this._itemVisuals[t]=n,o(e))for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);else n[e]=i},s.clearAllVisual=function(){this._visual={},this._itemVisuals=[]};var l=function(t){t.seriesIndex=this.seriesIndex,t.dataIndex=this.dataIndex,t.dataType=this.dataType};s.setItemGraphicEl=function(t,e){var i=this.hostModel;e&&(e.dataIndex=t,e.dataType=this.dataType,e.seriesIndex=i&&i.seriesIndex,"group"===e.type&&e.traverse(l,e)),this._graphicEls[t]=e},s.getItemGraphicEl=function(t){return this._graphicEls[t]},s.eachItemGraphicEl=function(i,n){x.each(this._graphicEls,function(t,e){t&&i&&i.call(n,t,e)})},s.cloneShallow=function(){var t=x.map(this.dimensions,this.getDimensionInfo,this),e=new c(t,this.hostModel);return e._storage=this._storage,h(e,this),e.indices=this.indices.slice(),this._extent&&(e._extent=x.extend({},this._extent)),e},s.wrapMethod=function(t,e){var i=this[t];"function"==typeof i&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=i.apply(this,arguments);return e.apply(this,[t].concat(x.slice(arguments)))})},s.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],s.CHANGABLE_METHODS=["filterSelf"];var f=c;d.exports=f}).call(t,p(48))},function(t,e,i){var _=i(598),x=i(601).normalizeToArray,b=_.each,w=_.isString,C=_.defaults,S={tooltip:1,label:1,itemName:1};function n(t,e,i){e=e||[],i=i||{},t=(t||[]).slice();var n=(i.dimsDef||[]).slice(),s=_.createHashMap(i.encodeDef),r=_.createHashMap(),o=_.createHashMap(),l=[],a=i.dimCount;if(null==a){var h=O(e[0]);a=Math.max(_.isArray(h)&&h.length||1,t.length,n.length),b(t,function(t){var e=t.dimsDef;e&&(a=Math.max(a,e.length))})}for(var c=0;c<a;c++){var u=w(n[c])?{name:n[c]}:n[c]||{},f=u.name,d=l[c]={otherDims:{}};null!=f&&null==r.get(f)&&(d.name=d.tooltipName=f,r.set(f,c)),null!=u.type&&(d.type=u.type)}s.each(function(i,n){i=s.set(n,x(i).slice()),b(i,function(t,e){w(t)&&(t=r.get(t)),null!=t&&t<a&&(i[e]=t,m(l[t],n,e))})});var p=0;b(t,function(n,t){var r,o,a;w(n)?(r=n,n={}):(r=n.name,n=_.clone(n),o=n.dimsDef,a=n.otherDims,n.name=n.coordDim=n.coordDimIndex=n.dimsDef=n.otherDims=null);var e=x(s.get(r));if(!e.length)for(var i=0;i<(o&&o.length||1);i++){for(;p<l.length&&null!=l[p].coordDim;)p++;p<l.length&&e.push(p++)}b(e,function(t,e){var i=l[t];m(C(i,n),r,e),null==i.name&&o&&(i.name=i.tooltipName=o[e]),a&&C(i.otherDims,a)})});for(var g=i.extraPrefix||"value",v=0;v<a;v++){null==(d=l[v]=l[v]||{}).coordDim&&(d.coordDim=y(g,o,i.extraFromZero),d.coordDimIndex=0,d.isExtraCoord=!0),null==d.name&&(d.name=y(d.coordDim,r)),null==d.type&&T(e,v)&&(d.type="ordinal")}return l;function m(t,e,i){S[e]?t.otherDims[e]=i:(t.coordDim=e,t.coordDimIndex=i,o.set(e,!0))}function y(t,e,i){if(i||null!=e.get(t)){for(var n=0;null!=e.get(t+n);)n++;t+=n}return e.set(t,!0),t}}var T=n.guessOrdinal=function(t,e){for(var i=0,n=t.length;i<n;i++){var r=O(t[i]);if(!_.isArray(r))return!1;if(null!=(r=r[e])&&isFinite(r)&&""!==r)return!1;if(w(r)&&"-"!==r)return!0}return!1};function O(t){return _.isArray(t)?t:_.isObject(t)?t.value:t}var r=n;t.exports=r},function(t,e,i){var r=i(598),n=i(621),o=i(633),a=i(610),s=i(601);function l(){this.group=new n,this.uid=o.getUID("viewChart")}var h=l.prototype={type:"chart",init:function(t,e){},render:function(t,e,i,n){},highlight:function(t,e,i,n){u(t.getData(),n,"emphasis")},downplay:function(t,e,i,n){u(t.getData(),n,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){}};function c(t,e){if(t&&(t.trigger(e),"group"===t.type))for(var i=0;i<t.childCount();i++)c(t.childAt(i),e)}function u(e,t,i){var n=s.queryDataIndex(e,t);null!=n?r.each(s.normalizeToArray(n),function(t){c(e.getItemGraphicEl(t),i)}):e.eachItemGraphicEl(function(t){c(t,i)})}h.updateView=h.updateLayout=h.updateVisual=function(t,e,i,n){this.render(t,e,i,n)},a.enableClassExtend(l,["dispose"]),a.enableClassManagement(l,{registerWhenExtend:!0});var f=l;t.exports=f},function(t,e,i){var n=i(598),r=i(614);function o(t){return n.isObject(t)&&null!=t.value?t.value:t+""}var a={getFormattedLabels:function(){return r.getFormattedLabels(this.axis,this.get("axisLabel.formatter"))},getCategories:function(){return"category"===this.get("type")&&n.map(this.get("data"),o)},getMin:function(t){var e=this.option,i=t||null==e.rangeStart?e.min:e.rangeStart;return this.axis&&null!=i&&"dataMin"!==i&&"function"!=typeof i&&!n.eqNaN(i)&&(i=this.axis.scale.parse(i)),i},getMax:function(t){var e=this.option,i=t||null==e.rangeEnd?e.max:e.rangeEnd;return this.axis&&null!=i&&"dataMax"!==i&&"function"!=typeof i&&!n.eqNaN(i)&&(i=this.axis.scale.parse(i)),i},getNeedCrossZero:function(){var t=this.option;return null==t.rangeStart&&null==t.rangeEnd&&!t.scale},getCoordSysModel:n.noop,setRange:function(t,e){this.option.rangeStart=t,this.option.rangeEnd=e},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}};t.exports=a},function(t,e,i){var r=i(598),n=i(603),o=i(614),a=n.linearMap;function s(t,e){var i=(t[1]-t[0])/e/2;t[0]+=i,t[1]-=i}var l=[0,1],h=function(t,e,i){this.dim=t,this.scale=e,this._extent=i||[0,0],this.inverse=!1,this.onBand=!1,this._labelInterval};h.prototype={constructor:h,contain:function(t){var e=this._extent,i=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]);return i<=t&&t<=n},containData:function(t){return this.contain(this.dataToCoord(t))},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(t){return n.getPixelPrecision(t||this.scale.getExtent(),this._extent)},setExtent:function(t,e){var i=this._extent;i[0]=t,i[1]=e},dataToCoord:function(t,e){var i=this._extent,n=this.scale;return t=n.normalize(t),this.onBand&&"ordinal"===n.type&&s(i=i.slice(),n.count()),a(t,l,i,e)},coordToData:function(t,e){var i=this._extent,n=this.scale;this.onBand&&"ordinal"===n.type&&s(i=i.slice(),n.count());var r=a(t,i,l,e);return this.scale.scale(r)},pointToData:function(t,e){},getTicksCoords:function(t){if(this.onBand&&!t){for(var e=this.getBands(),i=[],n=0;n<e.length;n++)i.push(e[n][0]);return e[n-1]&&i.push(e[n-1][1]),i}return r.map(this.scale.getTicks(),this.dataToCoord,this)},getLabelsCoords:function(){return r.map(this.scale.getTicks(),this.dataToCoord,this)},getBands:function(){for(var t=this.getExtent(),e=[],i=this.scale.count(),n=t[0],r=t[1]-n,o=0;o<i;o++)e.push([r*o/i+n,r*(o+1)/i+n]);return e},getBandWidth:function(){var t=this._extent,e=this.scale.getExtent(),i=e[1]-e[0]+(this.onBand?1:0);0===i&&(i=1);var n=Math.abs(t[1]-t[0]);return Math.abs(n)/i},isHorizontal:null,getRotate:null,getLabelInterval:function(){var t=this._labelInterval;if(!t){var e=this.model,i=e.getModel("axisLabel");t=i.get("interval"),"category"!==this.type||null!=t&&"auto"!==t||(t=o.getAxisLabelInterval(r.map(this.scale.getTicks(),this.dataToCoord,this),e.getFormattedLabels(),i.getFont(),this.getRotate?this.getRotate():this.isHorizontal&&!this.isHorizontal()?90:0,i.get("rotate"))),this._labelInterval=t}return t}};var c=h;t.exports=c},function(t,e,i){var n=i(598),w=n.retrieve,x=n.defaults,C=n.extend,S=n.each,T=i(607),O=i(599),k=i(609),r=i(603),A=r.isRadianAroundZero,M=r.remRadian,u=i(620).createSymbol,a=i(615),b=i(602).applyTransform,D=Math.PI;function I(t){var e={componentType:t.mainType};return e[t.mainType+"Index"]=t.componentIndex,e}var o=function(t,e){this.opt=e,this.axisModel=t,x(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new O.Group;var i=new O.Group({position:e.position.slice(),rotation:e.rotation});i.updateTransform(),this._transform=i.transform,this._dumbGroup=i};o.prototype={constructor:o,hasBuilder:function(t){return!!s[t]},add:function(t){s[t].call(this)},getGroup:function(){return this.group}};var s={axisLine:function(){var t=this.opt,e=this.axisModel;if(e.get("axisLine.show")){var i=this.axisModel.axis.getExtent(),n=this._transform,r=[i[0],0],o=[i[1],0];n&&(b(r,r,n),b(o,o,n));var a=C({lineCap:"round"},e.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new O.Line(O.subPixelOptimizeLine({anid:"line",shape:{x1:r[0],y1:r[1],x2:o[0],y2:o[1]},style:a,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1})));var s=e.get("axisLine.symbol"),l=e.get("axisLine.symbolSize");if(null!=s){"string"==typeof s&&(s=[s,s]),"string"!=typeof l&&"number"!=typeof l||(l=[l,l]);var h=l[0],c=l[1];S([[t.rotation+Math.PI/2,r],[t.rotation-Math.PI/2,o]],function(t,e){if("none"!==s[e]&&null!=s[e]){var i=u(s[e],-h/2,-c/2,h,c,a.stroke,!0);i.attr({rotation:t[0],position:t[1],silent:!0}),this.group.add(i)}},this)}}},axisTickLabel:function(){var t=this.axisModel,e=this.opt,i=function(t,e,i){var n=e.axis;if(!e.get("axisTick.show")||n.scale.isBlank())return;for(var r=e.getModel("axisTick"),o=r.getModel("lineStyle"),a=r.get("length"),s=R(r,i.labelInterval),l=n.getTicksCoords(r.get("alignWithLabel")),h=n.scale.getTicks(),c=e.get("axisLabel.showMinLabel"),u=e.get("axisLabel.showMaxLabel"),f=[],d=[],p=t._transform,g=[],v=l.length,m=0;m<v;m++)if(!j(n,m,s,v,c,u)){var y=l[m];f[0]=y,f[1]=0,d[0]=y,d[1]=i.tickDirection*a,p&&(b(f,f,p),b(d,d,p));var _=new O.Line(O.subPixelOptimizeLine({anid:"tick_"+h[m],shape:{x1:f[0],y1:f[1],x2:d[0],y2:d[1]},style:x(o.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}),z2:2,silent:!0}));t.group.add(_),g.push(_)}return g}(this,t,e);!function(t,e,i){var n=t.get("axisLabel.showMinLabel"),r=t.get("axisLabel.showMaxLabel");i=i||[];var o=(e=e||[])[0],a=e[1],s=e[e.length-1],l=e[e.length-2],h=i[0],c=i[1],u=i[i.length-1],f=i[i.length-2];!1===n?(d(o),d(h)):p(o,a)&&(n?(d(a),d(c)):(d(o),d(h)));!1===r?(d(s),d(u)):p(l,s)&&(r?(d(l),d(f)):(d(s),d(u)))}(t,function(s,l,h){var c=l.axis;if(!w(h.axisLabelShow,l.get("axisLabel.show"))||c.scale.isBlank())return;var u=l.getModel("axisLabel"),f=u.get("margin"),d=c.scale.getTicks(),p=l.getFormattedLabels(),t=(w(h.labelRotate,u.get("rotate"))||0)*D/180,g=P(h.rotation,t,h.labelDirection),v=l.get("data"),m=[],y=E(l),_=l.get("triggerEvent"),x=l.get("axisLabel.showMinLabel"),b=l.get("axisLabel.showMaxLabel");return S(d,function(t,e){if(!j(c,e,h.labelInterval,d.length,x,b)){var i=u;v&&v[t]&&v[t].textStyle&&(i=new k(v[t].textStyle,u,l.ecModel));var n=i.getTextColor()||l.get("axisLine.lineStyle.color"),r=[c.dataToCoord(t),h.labelOffset+h.labelDirection*f],o=c.scale.getLabel(t),a=new O.Text({anid:"label_"+t,position:r,rotation:g.rotation,silent:y,z2:10});O.setTextStyle(a.style,i,{text:p[e],textAlign:i.getShallow("align",!0)||g.textAlign,textVerticalAlign:i.getShallow("verticalAlign",!0)||i.getShallow("baseline",!0)||g.textVerticalAlign,textFill:"function"==typeof n?n("category"===c.type?o:"value"===c.type?t+"":t,e):n}),_&&(a.eventData=I(l),a.eventData.targetType="axisLabel",a.eventData.value=o),s._dumbGroup.add(a),a.updateTransform(),m.push(a),s.group.add(a),a.decomposeTransform()}}),m}(this,t,e),i)},axisName:function(){var t=this.opt,e=this.axisModel,i=w(t.axisName,e.get("name"));if(i){var n,r,o=e.get("nameLocation"),a=t.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,h=this.axisModel.axis.getExtent(),c=h[0]>h[1]?-1:1,u=["start"===o?h[0]-c*l:"end"===o?h[1]+c*l:(h[0]+h[1])/2,L(o)?t.labelOffset+a*l:0],f=e.get("nameRotate");null!=f&&(f=f*D/180),L(o)?n=P(t.rotation,null!=f?f:t.rotation,a):(n=function(t,e,i,n){var r,o,a=M(i-t.rotation),s=n[0]>n[1],l="start"===e&&!s||"start"!==e&&s;A(a-D/2)?(o=l?"bottom":"top",r="center"):A(a-1.5*D)?(o=l?"top":"bottom",r="center"):(o="middle",r=a<1.5*D&&D/2<a?l?"left":"right":l?"right":"left");return{rotation:a,textAlign:r,textVerticalAlign:o}}(t,o,f||0,h),null!=(r=t.axisNameAvailableWidth)&&(r=Math.abs(r/Math.sin(n.rotation)),!isFinite(r)&&(r=null)));var d=s.getFont(),p=e.get("nameTruncate",!0)||{},g=p.ellipsis,v=w(t.nameTruncateMaxWidth,p.maxWidth,r),m=null!=g&&null!=v?T.truncateText(i,v,d,g,{minChar:2,placeholder:p.placeholder}):i,y=e.get("tooltip",!0),_=e.mainType,x={componentType:_,name:i,$vars:["name"]};x[_+"Index"]=e.componentIndex;var b=new O.Text({anid:"name",__fullText:i,__truncatedText:m,position:u,rotation:n.rotation,silent:E(e),z2:1,tooltip:y&&y.show?C({content:i,formatter:function(){return i},formatterParams:x},y):null});O.setTextStyle(b.style,s,{text:m,textFont:d,textFill:s.getTextColor()||e.get("axisLine.lineStyle.color"),textAlign:n.textAlign,textVerticalAlign:n.textVerticalAlign}),e.get("triggerEvent")&&(b.eventData=I(e),b.eventData.targetType="axisName",b.eventData.name=i),this._dumbGroup.add(b),b.updateTransform(),this.group.add(b),b.decomposeTransform()}}},P=o.innerTextLayout=function(t,e,i){var n,r,o=M(e-t);return A(o)?(r=0<i?"top":"bottom",n="center"):A(o-D)?(r=0<i?"bottom":"top",n="center"):(r="middle",n=0<o&&o<D?0<i?"right":"left":0<i?"left":"right"),{rotation:o,textAlign:n,textVerticalAlign:r}};function E(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)}function d(t){t&&(t.ignore=!0)}function p(t,e,i){var n=t&&t.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(n&&r){var o=a.identity([]);return a.rotate(o,o,-t.rotation),n.applyTransform(a.mul([],o,t.getLocalTransform())),r.applyTransform(a.mul([],o,e.getLocalTransform())),n.intersect(r)}}function L(t){return"middle"===t||"center"===t}var j=o.ifIgnoreOnTick=function(t,e,i,n,r,o){if(0===e&&r||e===n-1&&o)return!1;var a,s=t.scale;return"ordinal"===s.type&&("function"==typeof i?!i(a=s.getTicks()[e],s.getLabel(a)):e%(i+1))},R=o.getInterval=function(t,e){var i=t.get("interval");return null!=i&&"auto"!=i||(i=e),i};var l=o;t.exports=l},function(t,e,i){var n=i(644),c=i(606),u=i(598),f=i(680),d=i(682),r=i(686),p=i(689),g=i(690),v=!c.canvasSupported,m={canvas:r},o={};var a=function(t,e,i){i=i||{},this.dom=e,this.id=t;var n=this,r=new d,o=i.renderer;if(v){if(!m.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");o="vml"}else o&&m[o]||(o="canvas");var a=new m[o](e,r,i);this.storage=r,this.painter=a;var s=c.node?null:new g(a.getViewportRoot());this.handler=new f(r,a,s,a.root),this.animation=new p({stage:{update:u.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var l=r.delFromStorage,h=r.addToStorage;r.delFromStorage=function(t){l.call(r,t),t&&t.removeSelfFromZr(n)},r.addToStorage=function(t){h.call(r,t),t.addSelfToZr(n)}};a.prototype={constructor:a,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer(t,e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},flush:function(){this._needsRefresh&&this.refreshImmediately(),this._needsRefreshHover&&this.refreshHoverImmediately()},addHover:function(t,e){this.painter.addHover&&(this.painter.addHover(t,e),this.refreshHover())},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,i){this.handler.on(t,e,i)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){var t;this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,t=this.id,delete o[t]}},e.version="3.7.4",e.init=function(t,e){var i=new a(n(),t,e);return o[i.id]=i},e.dispose=function(t){if(t)t.dispose();else{for(var e in o)o.hasOwnProperty(e)&&o[e].dispose();o={}}return this},e.getInstance=function(t){return o[t]},e.registerPainter=function(t,e){m[t]=e}},function(t,e){var i=2311;t.exports=function(){return i++}},function(t,e,i){var n=i(644),r=i(617),o=i(646),a=i(683),s=i(598),l=function(t){o.call(this,t),r.call(this,t),a.call(this,t),this.id=t.id||n()};l.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var i=this[t];i||(i=this[t]=[]),i[0]=e[0],i[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(s.isObject(t))for(var i in t)t.hasOwnProperty(i)&&this.attrKV(i,t[i]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),(this.clipPath=t).__zr=e,(t.__clipTarget=this).dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.addAnimator(e[i]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.removeAnimator(e[i]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},s.mixin(l,a),s.mixin(l,o),s.mixin(l,r);var h=l;t.exports=h},function(t,e,i){var a=i(615),r=i(602),s=a.identity;function l(t){return 5e-5<t||t<-5e-5}var n=function(t){(t=t||{}).position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},o=n.prototype;o.transform=null,o.needLocalTransform=function(){return l(this.rotation)||l(this.position[0])||l(this.position[1])||l(this.scale[0]-1)||l(this.scale[1]-1)},o.updateTransform=function(){var t=this.parent,e=t&&t.transform,i=this.needLocalTransform(),n=this.transform;i||e?(n=n||a.create(),i?this.getLocalTransform(n):s(n),e&&(i?a.mul(n,t.transform,n):a.copy(n,t.transform)),this.transform=n,this.invTransform=this.invTransform||a.create(),a.invert(this.invTransform,n)):n&&s(n)},o.getLocalTransform=function(t){return n.getLocalTransform(this,t)},o.setTransform=function(t){var e=this.transform,i=t.dpr||1;e?t.setTransform(i*e[0],i*e[1],i*e[2],i*e[3],i*e[4],i*e[5]):t.setTransform(i,0,0,i,0,0)},o.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var h=[];o.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(a.mul(h,t.invTransform,e),e=h);var i=e[0]*e[0]+e[1]*e[1],n=e[2]*e[2]+e[3]*e[3],r=this.position,o=this.scale;l(i-1)&&(i=Math.sqrt(i)),l(n-1)&&(n=Math.sqrt(n)),e[0]<0&&(i=-i),e[3]<0&&(n=-n),r[0]=e[4],r[1]=e[5],o[0]=i,o[1]=n,this.rotation=Math.atan2(-e[1]/n,e[0]/i)}},o.getGlobalScale=function(){var t=this.transform;if(!t)return[1,1];var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]),i=Math.sqrt(t[2]*t[2]+t[3]*t[3]);return t[0]<0&&(e=-e),t[3]<0&&(i=-i),[e,i]},o.transformCoordToLocal=function(t,e){var i=[t,e],n=this.invTransform;return n&&r.applyTransform(i,i,n),i},o.transformCoordToGlobal=function(t,e){var i=[t,e],n=this.transform;return n&&r.applyTransform(i,i,n),i},n.getLocalTransform=function(t,e){s(e=e||[]);var i=t.origin,n=t.scale||[1,1],r=t.rotation||0,o=t.position||[0,0];return i&&(e[4]-=i[0],e[5]-=i[1]),a.scale(e,e,n),r&&a.rotate(e,e,r),i&&(e[4]+=i[0],e[5]+=i[1]),e[4]+=o[0],e[5]+=o[1],e};var c=n;t.exports=c},function(t,e,i){var j=i(684),R=i(618),B=i(598).isArrayLike,l=Array.prototype.slice;function r(t,e){return t[e]}function o(t,e,i){t[e]=i}function F(t,e,i){return(e-t)*i+t}function N(t,e,i){return.5<i?e:t}function z(t,e,i,n,r){var o=t.length;if(1==r)for(var a=0;a<o;a++)n[a]=F(t[a],e[a],i);else{var s=o&&t[0].length;for(a=0;a<o;a++)for(var l=0;l<s;l++)n[a][l]=F(t[a][l],e[a][l],i)}}function H(t,e,i){var n=t.length,r=e.length;if(n!==r)if(r<n)t.length=r;else for(var o=n;o<r;o++)t.push(1===i?e[o]:l.call(e[o]));var a=t[0]&&t[0].length;for(o=0;o<t.length;o++)if(1===i)isNaN(t[o])&&(t[o]=e[o]);else for(var s=0;s<a;s++)isNaN(t[o][s])&&(t[o][s]=e[o][s])}function W(t,e,i){if(t===e)return!0;var n=t.length;if(n!==e.length)return!1;if(1===i){for(var r=0;r<n;r++)if(t[r]!==e[r])return!1}else{var o=t[0].length;for(r=0;r<n;r++)for(var a=0;a<o;a++)if(t[r][a]!==e[r][a])return!1}return!0}function G(t,e,i,n,r,o,a,s,l){var h=t.length;if(1==l)for(var c=0;c<h;c++)s[c]=X(t[c],e[c],i[c],n[c],r,o,a);else{var u=t[0].length;for(c=0;c<h;c++)for(var f=0;f<u;f++)s[c][f]=X(t[c][f],e[c][f],i[c][f],n[c][f],r,o,a)}}function X(t,e,i,n,r,o,a){var s=.5*(i-t),l=.5*(n-e);return(2*(e-i)+s+l)*a+(-3*(e-i)-2*s-l)*o+s*r+e}function a(t){if(B(t)){var e=t.length;if(B(t[0])){for(var i=[],n=0;n<e;n++)i.push(l.call(t[n]));return i}return l.call(t)}return t}function Y(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function h(t,e,i,n,o,r){var a=t._getter,s=t._setter,l="spline"===e,h=n.length;if(h){var c,u,f,d=n[0].value,p=B(d),g=!1,v=!1,m=p?(u=(c=n)[c.length-1].value,B(u&&u[0])?2:1):0;n.sort(function(t,e){return t.time-e.time}),f=n[h-1].time;for(var y=[],_=[],x=n[0].value,b=!0,w=0;w<h;w++){y.push(n[w].time/f);var C=n[w].value;if(p&&W(C,x,m)||!p&&C===x||(b=!1),"string"==typeof(x=C)){var S=R.parse(C);S?(C=S,g=!0):v=!0}_.push(C)}if(r||!b){var T=_[h-1];for(w=0;w<h-1;w++)p?H(_[w],T,m):!isNaN(_[w])||isNaN(T)||v||g||(_[w]=T);p&&H(a(t._target,o),T,m);var O,k,A,M,D,I=0,P=0;if(g)var E=[0,0,0,0];var L=new j({target:t._target,life:f,loop:t._loop,delay:t._delay,onframe:function(t,e){var i;if(e<0)i=0;else if(e<P){for(i=Math.min(I+1,h-1);0<=i&&!(y[i]<=e);i--);i=Math.min(i,h-2)}else{for(i=I;i<h&&!(y[i]>e);i++);i=Math.min(i-1,h-2)}P=e;var n=y[(I=i)+1]-y[i];if(0!==n)if(O=(e-y[i])/n,l)if(A=_[i],k=_[0===i?i:i-1],M=_[h-2<i?h-1:i+1],D=_[h-3<i?h-1:i+2],p)G(k,A,M,D,O,O*O,O*O*O,a(t,o),m);else{if(g)r=G(k,A,M,D,O,O*O,O*O*O,E,1),r=Y(E);else{if(v)return N(A,M,O);r=X(k,A,M,D,O,O*O,O*O*O)}s(t,o,r)}else if(p)z(_[i],_[i+1],O,a(t,o),m);else{var r;if(g)z(_[i],_[i+1],O,E,1),r=Y(E);else{if(v)return N(_[i],_[i+1],O);r=F(_[i],_[i+1],O)}s(t,o,r)}},ondestroy:i});return e&&"spline"!==e&&(L.easing=e),L}}}var n=function(t,e,i,n){this._tracks={},this._target=t,this._loop=e||!1,this._getter=i||r,this._setter=n||o,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};n.prototype={when:function(t,e){var i=this._tracks;for(var n in e)if(e.hasOwnProperty(n)){if(!i[n]){i[n]=[];var r=this._getter(this._target,n);if(null==r)continue;0!==t&&i[n].push({time:0,value:a(r)})}i[n].push({time:t,value:e[n]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,i=0;i<e;i++)t[i].call(this)},start:function(t,e){var i,n=this,r=0,o=function(){--r||n._doneCallback()};for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var s=h(this,t,o,this._tracks[a],a,e);s&&(this._clipList.push(s),r++,this.animation&&this.animation.addClip(s),i=s)}if(i){var l=i.onframe;i.onframe=function(t,e){l(t,e);for(var i=0;i<n._onframeList.length;i++)n._onframeList[i](t,e)}}return r||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,i=this.animation,n=0;n<e.length;n++){var r=e[n];t&&r.onframe(this._target,1),i&&i.removeClip(r)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var s=n;t.exports=s},function(t,e){var i=function(){this.head=null,this.tail=null,this._len=0},n=i.prototype;n.insert=function(t){var e=new l(t);return this.insertEntry(e),e},n.insertEntry=function(t){this.head?((this.tail.next=t).prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},n.remove=function(t){var e=t.prev,i=t.next;e?e.next=i:this.head=i,i?i.prev=e:this.tail=e,t.next=t.prev=null,this._len--},n.len=function(){return this._len},n.clear=function(){this.head=this.tail=null,this._len=0};var l=function(t){this.value=t,this.next,this.prev},r=function(t){this._list=new i,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},o=r.prototype;o.put=function(t,e){var i=this._list,n=this._map,r=null;if(null==n[t]){var o=i.len(),a=this._lastRemovedEntry;if(o>=this._maxSize&&0<o){var s=i.head;i.remove(s),delete n[s.key],r=s.value,this._lastRemovedEntry=s}a?a.value=e:a=new l(e),a.key=t,i.insertEntry(a),n[t]=a}return r},o.get=function(t){var e=this._map[t],i=this._list;if(null!=e)return e!==i.tail&&(i.remove(e),i.insertEntry(e)),e.value},o.clear=function(){this._list.clear(),this._map={}};var a=r;t.exports=a},function(t,e,i){var n=i(622).debugMode,r=function(){};1===n?r=function(){for(var t in arguments)throw new Error(arguments[t])}:1<n&&(r=function(){for(var t in arguments)console.log(arguments[t])});var o=r;t.exports=o},function(t,e){var c=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],i=function(t,e){this.extendFrom(t,!1),this.host=e};function a(t,e,i){var n=null==e.x?0:e.x,r=null==e.x2?1:e.x2,o=null==e.y?0:e.y,a=null==e.y2?0:e.y2;return e.global||(n=n*i.width+i.x,r=r*i.width+i.x,o=o*i.height+i.y,a=a*i.height+i.y),t.createLinearGradient(n,o,r,a)}function s(t,e,i){var n=i.width,r=i.height,o=Math.min(n,r),a=null==e.x?.5:e.x,s=null==e.y?.5:e.y,l=null==e.r?.5:e.r;return e.global||(a=a*n+i.x,s=s*r+i.y,l*=o),t.createRadialGradient(a,s,0,a,s,l)}for(var n=i.prototype={constructor:i,host:null,fill:"#000",stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,i){for(var n=this,r=i&&i.style,o=!r,a=0;a<c.length;a++){var s=c[a],l=s[0];(o||n[l]!==r[l])&&(t[l]=n[l]||s[1])}if((o||n.fill!==r.fill)&&(t.fillStyle=n.fill),(o||n.stroke!==r.stroke)&&(t.strokeStyle=n.stroke),(o||n.opacity!==r.opacity)&&(t.globalAlpha=null==n.opacity?1:n.opacity),(o||n.blend!==r.blend)&&(t.globalCompositeOperation=n.blend||"source-over"),this.hasStroke()){var h=n.lineWidth;t.lineWidth=h/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&0<this.lineWidth},extendFrom:function(t,e){if(t)for(var i in t)!t.hasOwnProperty(i)||!0!==e&&(!1===e?this.hasOwnProperty(i):null==t[i])||(this[i]=t[i])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,i){for(var n=("radial"===e.type?s:a)(t,e,i),r=e.colorStops,o=0;o<r.length;o++)n.addColorStop(r[o].offset,r[o].color);return n}},r=0;r<c.length;r++){var o=c[r];o[0]in n||(n[o[0]]=o[1])}i.getGradient=n.getGradient;var l=i;t.exports=l},function(t,e){var i=function(t,e){this.image=t,this.repeat=e,this.type="pattern"};i.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")};var n=i;t.exports=n},function(t,e){var i="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)};t.exports=i},function(t,e,i){var n=i(630),r=i(608),o=i(598),p=i(631);function a(t){n.call(this,t)}a.prototype={constructor:a,type:"image",brush:function(t,e){var i=this.style,n=i.image;i.bind(t,this,e);var r=this._image=p.createOrUpdateImage(n,this._image,this,this.onload);if(r&&p.isImageReady(r)){var o=i.x||0,a=i.y||0,s=i.width,l=i.height,h=r.width/r.height;if(null==s&&null!=l?s=l*h:null==l&&null!=s?l=s/h:null==s&&null==l&&(s=r.width,l=r.height),this.setTransform(t),i.sWidth&&i.sHeight){var c=i.sx||0,u=i.sy||0;t.drawImage(r,c,u,i.sWidth,i.sHeight,o,a,s,l)}else if(i.sx&&i.sy){var f=s-(c=i.sx),d=l-(u=i.sy);t.drawImage(r,c,u,f,d,o,a,s,l)}else t.drawImage(r,o,a,s,l);this.restoreTransform(t),null!=i.text&&this.drawRectText(t,this.getBoundingRect())}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new r(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},o.inherits(a,n);var s=a;t.exports=s},function(t,e,i){var n=i(598),g=n.retrieve2,v=n.retrieve3,r=n.each,o=n.normalizeCssArray,d=n.isString,p=n.isObject,D=i(613),m=i(655),y=i(631),a={left:1,right:1,center:1},s={top:1,bottom:1,middle:1};function l(t){if(t){t.font=D.makeFont(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||a[e]?e:"left";var i=t.textVerticalAlign||t.textBaseline;"center"===i&&(i="middle"),t.textVerticalAlign=null==i||s[i]?i:"top",t.textPadding&&(t.textPadding=o(t.textPadding))}}function I(t,e,i,n,r){if(i&&e.textRotation){var o=e.textOrigin;"center"===o?(n=i.width/2+i.x,r=i.height/2+i.y):o&&(n=o[0]+i.x,r=o[1]+i.y),t.translate(n,r),t.rotate(-e.textRotation),t.translate(-n,-r)}}function P(t,e,i,n,r,o,a,s){var l=n.rich[i.styleName]||{},h=i.textVerticalAlign,c=o+r/2;"top"===h?c=o+i.height/2:"bottom"===h&&(c=o+r-i.height/2),!i.isLineHolder&&E(l)&&L(t,e,l,"right"===s?a-i.width:"center"===s?a-i.width/2:a,c-i.height/2,i.width,i.height);var u=i.textPadding;u&&(a=R(a,s,u),c-=i.height/2-u[2]-i.textHeight/2),k(e,"shadowBlur",v(l.textShadowBlur,n.textShadowBlur,0)),k(e,"shadowColor",l.textShadowColor||n.textShadowColor||"transparent"),k(e,"shadowOffsetX",v(l.textShadowOffsetX,n.textShadowOffsetX,0)),k(e,"shadowOffsetY",v(l.textShadowOffsetY,n.textShadowOffsetY,0)),k(e,"textAlign",s),k(e,"textBaseline","middle"),k(e,"font",i.font||D.DEFAULT_FONT);var f=A(l.textStroke||n.textStroke,p),d=M(l.textFill||n.textFill),p=g(l.textStrokeWidth,n.textStrokeWidth);f&&(k(e,"lineWidth",p),k(e,"strokeStyle",f),e.strokeText(i.text,a,c)),d&&(k(e,"fillStyle",d),e.fillText(i.text,a,c))}function E(t){return t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor}function L(t,e,i,n,r,o,a){var s=i.textBackgroundColor,l=i.textBorderWidth,h=i.textBorderColor,c=d(s);if(k(e,"shadowBlur",i.textBoxShadowBlur||0),k(e,"shadowColor",i.textBoxShadowColor||"transparent"),k(e,"shadowOffsetX",i.textBoxShadowOffsetX||0),k(e,"shadowOffsetY",i.textBoxShadowOffsetY||0),c||l&&h){e.beginPath();var u=i.textBorderRadius;u?m.buildPath(e,{x:n,y:r,width:o,height:a,r:u}):e.rect(n,r,o,a),e.closePath()}if(c)k(e,"fillStyle",s),e.fill();else if(p(s)){var f=s.image;(f=y.createOrUpdateImage(f,null,t,_,s))&&y.isImageReady(f)&&e.drawImage(f,n,r,o,a)}l&&h&&(k(e,"lineWidth",l),k(e,"strokeStyle",h),e.stroke())}function _(t,e){e.image=t}function j(t,e,i){var n=e.x||0,r=e.y||0,o=e.textAlign,a=e.textVerticalAlign;if(i){var s=e.textPosition;if(s instanceof Array)n=i.x+c(s[0],i.width),r=i.y+c(s[1],i.height);else{var l=D.adjustTextPositionOnRect(s,i,e.textDistance);n=l.x,r=l.y,o=o||l.textAlign,a=a||l.textVerticalAlign}var h=e.textOffset;h&&(n+=h[0],r+=h[1])}return{baseX:n,baseY:r,textAlign:o,textVerticalAlign:a}}function k(t,e,i){return t[e]=i,t[e]}function A(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function M(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function c(t,e){return"string"==typeof t?0<=t.lastIndexOf("%")?parseFloat(t)/100*e:parseFloat(t):t}function R(t,e,i){return"right"===e?t-i[1]:"center"===e?t+i[3]/2-i[1]/2:t+i[3]}e.normalizeTextStyle=function(t){return l(t),r(t.rich,l),t},e.renderText=function(t,e,i,n,r){n.rich?(o=t,a=e,s=i,l=n,h=r,c=o.__textCotentBlock,c&&!o.__dirty||(c=o.__textCotentBlock=D.parseRichText(s,l)),function(t,e,i,n,r){var o=i.width,a=i.outerWidth,s=i.outerHeight,l=n.textPadding,h=j(0,n,r),c=h.baseX,u=h.baseY,f=h.textAlign,d=h.textVerticalAlign;I(e,n,r,c,u);var p=D.adjustTextX(c,a,f),g=D.adjustTextY(u,s,d),v=p,m=g;l&&(v+=l[3],m+=l[0]);var y=v+o;E(n)&&L(t,e,n,p,g,a,s);for(var _=0;_<i.lines.length;_++){for(var x,b=i.lines[_],w=b.tokens,C=w.length,S=b.lineHeight,T=b.width,O=0,k=v,A=y,M=C-1;O<C&&(!(x=w[O]).textAlign||"left"===x.textAlign);)P(t,e,x,n,S,m,k,"left"),T-=x.width,k+=x.width,O++;for(;0<=M&&"right"===(x=w[M]).textAlign;)P(t,e,x,n,S,m,A,"right"),T-=x.width,A-=x.width,M--;for(k+=(o-(k-v)-(y-A)-T)/2;O<=M;)x=w[O],P(t,e,x,n,S,m,k+x.width/2,"center"),k+=x.width,O++;m+=S}}(o,a,c,l,h)):function(t,e,i,n,r){var o=k(e,"font",n.font||D.DEFAULT_FONT),a=n.textPadding,s=t.__textCotentBlock;s&&!t.__dirty||(s=t.__textCotentBlock=D.parsePlainText(i,o,a,n.truncate));var l=s.outerHeight,h=s.lines,c=s.lineHeight,u=j(0,n,r),f=u.baseX,d=u.baseY,p=u.textAlign,g=u.textVerticalAlign;I(e,n,r,f,d);var v=D.adjustTextY(d,l,g),m=f,y=v,_=E(n);if(_||a){var x=D.getWidth(i,o),b=x;a&&(b+=a[1]+a[3]);var w=D.adjustTextX(f,b,p);_&&L(t,e,n,w,v,b,l),a&&(m=R(f,p,a),y+=a[0])}k(e,"textAlign",p||"left"),k(e,"textBaseline","middle"),k(e,"shadowBlur",n.textShadowBlur||0),k(e,"shadowColor",n.textShadowColor||"transparent"),k(e,"shadowOffsetX",n.textShadowOffsetX||0),k(e,"shadowOffsetY",n.textShadowOffsetY||0),y+=c/2;var C=n.textStrokeWidth,S=A(n.textStroke,C),T=M(n.textFill);S&&(k(e,"lineWidth",C),k(e,"strokeStyle",S)),T&&k(e,"fillStyle",T);for(var O=0;O<h.length;O++)S&&e.strokeText(h[O],m,y),T&&e.fillText(h[O],m,y),y+=c}(t,e,i,n,r);var o,a,s,l,h,c},e.getStroke=A,e.getFill=M,e.needDrawText=function(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}},function(t,e){e.buildPath=function(t,e){var i,n,r,o,a,s=e.x,l=e.y,h=e.width,c=e.height,u=e.r;h<0&&(s+=h,h=-h),c<0&&(l+=c,c=-c),"number"==typeof u?i=n=r=o=u:u instanceof Array?1===u.length?i=n=r=o=u[0]:2===u.length?(i=r=u[0],n=o=u[1]):3===u.length?(i=u[0],n=o=u[1],r=u[2]):(i=u[0],n=u[1],r=u[2],o=u[3]):i=n=r=o=0,h<i+n&&(i*=h/(a=i+n),n*=h/a),h<r+o&&(r*=h/(a=r+o),o*=h/a),c<n+r&&(n*=c/(a=n+r),r*=c/a),c<i+o&&(i*=c/(a=i+o),o*=c/a),t.moveTo(s+i,l),t.lineTo(s+h-n,l),0!==n&&t.quadraticCurveTo(s+h,l,s+h,l+n),t.lineTo(s+h,l+c-r),0!==r&&t.quadraticCurveTo(s+h,l+c,s+h-r,l+c),t.lineTo(s+o,l+c),0!==o&&t.quadraticCurveTo(s,l+c,s,l+c-o),t.lineTo(s,l+i),0!==i&&t.quadraticCurveTo(s,l,s+i,l)}},function(t,e,i){var p=i(602),v=i(616),m=Math.min,y=Math.max,g=Math.sin,_=Math.cos,x=2*Math.PI,b=p.create(),w=p.create(),C=p.create();var S=[],T=[];e.fromPoints=function(t,e,i){if(0!==t.length){var n,r=t[0],o=r[0],a=r[0],s=r[1],l=r[1];for(n=1;n<t.length;n++)r=t[n],o=m(o,r[0]),a=y(a,r[0]),s=m(s,r[1]),l=y(l,r[1]);e[0]=o,e[1]=s,i[0]=a,i[1]=l}},e.fromLine=function(t,e,i,n,r,o){r[0]=m(t,i),r[1]=m(e,n),o[0]=y(t,i),o[1]=y(e,n)},e.fromCubic=function(t,e,i,n,r,o,a,s,l,h){var c,u=v.cubicExtrema,f=v.cubicAt,d=u(t,i,r,a,S);for(l[0]=1/0,l[1]=1/0,h[0]=-1/0,h[1]=-1/0,c=0;c<d;c++){var p=f(t,i,r,a,S[c]);l[0]=m(p,l[0]),h[0]=y(p,h[0])}for(d=u(e,n,o,s,T),c=0;c<d;c++){var g=f(e,n,o,s,T[c]);l[1]=m(g,l[1]),h[1]=y(g,h[1])}l[0]=m(t,l[0]),h[0]=y(t,h[0]),l[0]=m(a,l[0]),h[0]=y(a,h[0]),l[1]=m(e,l[1]),h[1]=y(e,h[1]),l[1]=m(s,l[1]),h[1]=y(s,h[1])},e.fromQuadratic=function(t,e,i,n,r,o,a,s){var l=v.quadraticExtremum,h=v.quadraticAt,c=y(m(l(t,i,r),1),0),u=y(m(l(e,n,o),1),0),f=h(t,i,r,c),d=h(e,n,o,u);a[0]=m(t,r,f),a[1]=m(e,o,d),s[0]=y(t,r,f),s[1]=y(e,o,d)},e.fromArc=function(t,e,i,n,r,o,a,s,l){var h=p.min,c=p.max,u=Math.abs(r-o);if(u%x<1e-4&&1e-4<u)return s[0]=t-i,s[1]=e-n,l[0]=t+i,void(l[1]=e+n);if(b[0]=_(r)*i+t,b[1]=g(r)*n+e,w[0]=_(o)*i+t,w[1]=g(o)*n+e,h(s,b,w),c(l,b,w),(r%=x)<0&&(r+=x),(o%=x)<0&&(o+=x),o<r&&!a?o+=x:r<o&&a&&(r+=x),a){var f=o;o=r,r=f}for(var d=0;d<o;d+=Math.PI/2)r<d&&(C[0]=_(d)*i+t,C[1]=g(d)*n+e,h(s,C,s),c(l,C,l))}},function(t,e){var i=2*Math.PI;e.normalizeRadian=function(t){return(t%=i)<0&&(t+=i),t}},function(t,e){t.exports=function(t,e,i,n,r,o){if(e<o&&n<o||o<e&&o<n)return 0;if(n===e)return 0;var a=n<e?1:-1,s=(o-e)/(n-e);return 1!==s&&0!==s||(a=n<e?.5:-.5),r<s*(i-t)+t?a:0}},function(t,e,i){var n=i(606),h=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];t.exports=function(l){return n.browser.ie&&11<=n.browser.version?function(){var t,e=this.__clipPaths,i=this.style;if(e)for(var n=0;n<e.length;n++){var r=e[n],o=r&&r.shape,a=r&&r.type;if(o&&("sector"===a&&o.startAngle===o.endAngle||"rect"===a&&(!o.width||!o.height))){for(var s=0;s<h.length;s++)h[s][2]=i[h[s][0]],i[h[s][0]]=h[s][1];t=!0;break}}if(l.apply(this,arguments),t)for(s=0;s<h.length;s++)i[h[s][0]]=h[s][2]}:l}},function(t,e,i){var f=i(708),d=i(709);e.buildPath=function(t,e,i){var n=e.points,r=e.smooth;if(n&&2<=n.length){if(r&&"spline"!==r){var o=d(n,r,i,e.smoothConstraint);t.moveTo(n[0][0],n[0][1]);for(var a=n.length,s=0;s<(i?a:a-1);s++){var l=o[2*s],h=o[2*s+1],c=n[(s+1)%a];t.bezierCurveTo(l[0],l[1],h[0],h[1],c[0],c[1])}}else{"spline"===r&&(n=f(n,i)),t.moveTo(n[0][0],n[0][1]),s=1;for(var u=n.length;s<u;s++)t.lineTo(n[s][0],n[s][1])}i&&t.closePath()}}},function(t,e,i){var n=i(610),a=n.set,s=n.get,r={clearColorPalette:function(){a(this,"colorIdx",0),a(this,"colorNameMap",{})},getColorFromPalette:function(t,e){var i=s(e=e||this,"colorIdx")||0,n=s(e,"colorNameMap")||a(e,"colorNameMap",{});if(n.hasOwnProperty(t))return n[t];var r=this.get("color",!0)||[];if(r.length){var o=r[i];return t&&(n[t]=o),a(e,"colorIdx",(i+1)%r.length),o}}};t.exports=r},function(t,e,i){var l=i(603),h=l.round;function c(t){return l.getPrecisionSafe(t)+2}function n(t,e,i){t[e]=Math.max(Math.min(t[e],i[1]),i[0])}function u(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),n(t,0,e),n(t,1,e),t[0]>t[1]&&(t[0]=t[1])}e.intervalScaleNiceTicks=function(t,e,i,n){var r={},o=t[1]-t[0],a=r.interval=l.nice(o/e,!0);null!=i&&a<i&&(a=r.interval=i),null!=n&&n<a&&(a=r.interval=n);var s=r.intervalPrecision=c(a);return u(r.niceTickExtent=[h(Math.ceil(t[0]/a)*a,s),h(Math.floor(t[1]/a)*a,s)],t),r},e.getIntervalPrecision=c,e.fixExtent=u,e.intervalScaleGetTicks=function(t,e,i,n){var r=[];if(!t)return r;e[0]<i[0]&&r.push(e[0]);for(var o=i[0];o<=i[1]&&(r.push(o),(o=h(o+t,n))!==r[r.length-1]);)if(1e4<r.length)return[];return e[1]>(r.length?r[r.length-1]:i[1])&&r.push(e[1]),r}},function(t,e,i){var C=i(598),a=i(620).createSymbol,S=i(599),T=i(603).parsePercent,O=i(740).findLabelValueDim;function k(t){return[t[0]/2,t[1]/2]}function n(t,e,i){S.Group.call(this),this.updateData(t,e,i)}var r=n.prototype;function s(t,e){this.parent.drift(t,e)}r._createSymbol=function(t,e,i,n){this.removeAll();var r=e.getItemVisual(i,"color"),o=a(t,-1,-1,2,2,r);o.attr({z2:100,culling:!0,scale:k(n)}),o.drift=s,this._symbolType=t,this.add(o)},r.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},r.getSymbolPath=function(){return this.childAt(0)},r.getScale=function(){return this.childAt(0).scale},r.highlight=function(){this.childAt(0).trigger("emphasis")},r.downplay=function(){this.childAt(0).trigger("normal")},r.setZ=function(t,e){var i=this.childAt(0);i.zlevel=t,i.z=e},r.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":"pointer"},r.updateData=function(t,e,i){this.silent=!1;var n,r,o=t.getItemVisual(e,"symbol")||"circle",a=t.hostModel,s=(n=e,(r=t.getItemVisual(n,"symbolSize"))instanceof Array?r.slice():[+r,+r]),l=o!==this._symbolType;l?this._createSymbol(o,t,e,s):((h=this.childAt(0)).silent=!1,S.updateProps(h,{scale:k(s)},a,e));if(this._updateCommon(t,e,s,i),l){var h=this.childAt(0),c=i&&i.fadeIn,u={scale:h.scale.slice()};c&&(u.style={opacity:h.style.opacity}),h.scale=[0,0],c&&(h.style.opacity=0),S.initProps(h,u,a,e)}this._seriesModel=a};var A=["itemStyle","normal"],M=["itemStyle","emphasis"],D=["label","normal"],I=["label","emphasis"];r._updateCommon=function(t,e,i,n){var r=this.childAt(0),o=t.hostModel,a=t.getItemVisual(e,"color");"image"!==r.type&&r.useStyle({strokeNoScale:!0});var s=n&&n.itemStyle,l=n&&n.hoverItemStyle,h=n&&n.symbolRotate,c=n&&n.symbolOffset,u=n&&n.labelModel,f=n&&n.hoverLabelModel,d=n&&n.hoverAnimation,p=n&&n.cursorStyle;if(!n||t.hasItemOption){var g=n&&n.itemModel?n.itemModel:t.getItemModel(e);s=g.getModel(A).getItemStyle(["color"]),l=g.getModel(M).getItemStyle(),h=g.getShallow("symbolRotate"),c=g.getShallow("symbolOffset"),u=g.getModel(D),f=g.getModel(I),d=g.getShallow("hoverAnimation"),p=g.getShallow("cursor")}else l=C.extend({},l);var v=r.style;r.attr("rotation",(h||0)*Math.PI/180||0),c&&r.attr("position",[T(c[0],i[0]),T(c[1],i[1])]),p&&r.attr("cursor",p),r.setColor(a,n&&n.symbolInnerColor),r.setStyle(s);var m=t.getItemVisual(e,"opacity");null!=m&&(v.opacity=m);var y=n&&n.useNameLabel,_=!y&&O(t);(y||null!=_)&&S.setLabelStyle(v,l,u,f,{labelFetcher:o,labelDataIndex:e,defaultText:y?t.getName(e):t.get(_,e),isRectText:!0,autoColor:a}),r.off("mouseover").off("mouseout").off("emphasis").off("normal"),r.hoverStyle=l,S.setHoverStyle(r);var x=k(i);if(d&&o.isAnimationEnabled()){var b=function(){var t=x[1]/x[0];this.animateTo({scale:[Math.max(1.1*x[0],x[0]+3),Math.max(1.1*x[1],x[1]+3*t)]},400,"elasticOut")},w=function(){this.animateTo({scale:x},400,"elasticOut")};r.on("mouseover",b).on("mouseout",w).on("emphasis",b).on("normal",w)}},r.fadeOut=function(t,e){var i=this.childAt(0);this.silent=i.silent=!0,(!e||!e.keepLabel)&&(i.style.text=null),S.updateProps(i,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)},C.inherits(n,S.Group);var o=n;t.exports=o},function(t,e,i){var n=i(598),r=i(611),o=i(749),a=i(640),s=r.extend({type:"cartesian2dAxis",axis:null,init:function(){s.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){s.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){s.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function l(t,e){return e.type||(e.data?"category":"value")}n.merge(s.prototype,a);var h={offset:0};o("x",s,l,h),o("y",s,l,h);var c=s;t.exports=c},function(t,e,i){i(605).__DEV__;var n=i(600),l=i(625),h=n.extendComponentView({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,e,i,n){this.axisPointerClass&&l.fixValue(t),h.superApply(this,"render",arguments),o(this,t,e,i,n,!0)},updateAxisPointer:function(t,e,i,n,r){o(this,t,e,i,n,!1)},remove:function(t,e){var i=this._axisPointer;i&&i.remove(e),h.superApply(this,"remove",arguments)},dispose:function(t,e){c(this,e),h.superApply(this,"dispose",arguments)}});function o(t,e,i,n,r,o){var a=h.getAxisPointerClass(t.axisPointerClass);if(a){var s=l.getAxisPointerModel(e);s?(t._axisPointer||(t._axisPointer=new a)).render(e,s,n,o):c(t,n)}}function c(t,e,i){var n=t._axisPointer;n&&n.dispose(e,i),t._axisPointer=null}var r=[];h.registerAxisPointerClass=function(t,e){r[t]=e},h.getAxisPointerClass=function(t){return t&&r[t]};var a=h;t.exports=a},function(t,e,i){var m=i(598);e.layout=function(t,e,i){i=i||{};var n=t.coordinateSystem,r=e.axis,o={},a=r.position,s=r.onZero?"onZero":a,l=r.dim,h=n.getRect(),c=[h.x,h.x+h.width,h.y,h.y+h.height],u={left:0,right:1,top:0,bottom:1,onZero:2},f=e.get("offset")||0,d="x"===l?[c[2]-f,c[3]+f]:[c[0]-f,c[1]+f];if(r.onZero){var p=n.getAxis("x"===l?"y":"x",r.onZeroAxisIndex),g=p.toGlobalCoord(p.dataToCoord(0));d[u.onZero]=Math.max(Math.min(g,d[1]),d[0])}o.position=["y"===l?d[u[s]]:c[0],"x"===l?d[u[s]]:c[3]],o.rotation=Math.PI/2*("x"===l?0:1),o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,left:-1,right:1}[a],o.labelOffset=r.onZero?d[u[a]]-d[u.onZero]:0,e.get("axisTick.inside")&&(o.tickDirection=-o.tickDirection),m.retrieve(i.labelInside,e.get("axisLabel.inside"))&&(o.labelDirection=-o.labelDirection);var v=e.get("axisLabel.rotate");return o.labelRotate="top"===s?-v:v,o.labelInterval=r.getLabelInterval(),o.z2=1,o}},function(t,e,i){var c=i(598),u=i(601);t.exports=function(t,e){var i,n=[],r=t.seriesIndex;if(null==r||!(i=e.getSeriesByIndex(r)))return{point:[]};var o=i.getData(),a=u.queryDataIndex(o,t);if(null==a||c.isArray(a))return{point:[]};var s=o.getItemGraphicEl(a),l=i.coordinateSystem;if(i.getTooltipPosition)n=i.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)n=l.dataToPoint(o.getValues(c.map(l.dimensions,function(t){return i.coordDimToDataDim(t)[0]}),a,!0))||[];else if(s){var h=s.getBoundingRect().clone();h.applyTransform(s.transform),n=[h.x+h.width/2,h.y+h.height/2]}return{point:n,el:s}}},function(t,e,i){var r=i(598),o=i(606),d=i(601).makeGetter(),p=r.each;function a(t,e,i){t.handler("leave",null,i)}function s(t,e,i,n){e.handler(t,i,n)}e.register=function(t,e,i){if(!o.node){var n=e.getZr();d(n).records||(d(n).records={}),function(u,f){function t(t,c){u.on(t,function(e){var i,n,r,t,o,a,s,l,h=(i=f,{dispatchAction:r=function(t){var e=n[t.type];e?e.push(t):(t.dispatchAction=r,i.dispatchAction(t))},pendings:n={showTip:[],hideTip:[]}});p(d(u).records,function(t){t&&c(t,e,h.dispatchAction)}),t=h.pendings,o=f,s=t.showTip.length,l=t.hideTip.length,s?a=t.showTip[s-1]:l&&(a=t.hideTip[l-1]),a&&(a.dispatchAction=null,o.dispatchAction(a))})}d(u).initialized||(d(u).initialized=!0,t("click",r.curry(s,"click")),t("mousemove",r.curry(s,"mousemove")),t("globalout",a))}(n,e),(d(n).records[t]||(d(n).records[t]={})).handler=i}},e.unregister=function(t,e){if(!o.node){var i=e.getZr();(d(i).records||{})[t]&&(d(i).records[t]=null)}}},function(t,e,i){var l=i(598),r=i(599),w=i(613),C=i(607),o=i(615),h=i(614),s=i(642);function c(t,e,i,n,r){var o=S(i.get("value"),e.axis,e.ecModel,i.get("seriesDataIndices"),{precision:i.get("label.precision"),formatter:i.get("label.formatter")}),a=i.getModel("label"),s=C.normalizeCssArray(a.get("padding")||0),l=a.getFont(),h=w.getBoundingRect(o,l),c=r.position,u=h.width+s[1]+s[3],f=h.height+s[0]+s[2],d=r.align;"right"===d&&(c[0]-=u),"center"===d&&(c[0]-=u/2);var p,g,v,m,y,_,x=r.verticalAlign;"bottom"===x&&(c[1]-=f),"middle"===x&&(c[1]-=f/2),p=c,g=u,v=f,y=(m=n).getWidth(),_=m.getHeight(),p[0]=Math.min(p[0]+g,y)-g,p[1]=Math.min(p[1]+v,_)-v,p[0]=Math.max(p[0],0),p[1]=Math.max(p[1],0);var b=a.get("backgroundColor");b&&"auto"!==b||(b=e.get("axisLine.lineStyle.color")),t.label={shape:{x:0,y:0,width:u,height:f,r:a.get("borderRadius")},position:c.slice(),style:{text:o,textFont:l,textFill:a.getTextColor(),textPosition:"inside",fill:b,stroke:a.get("borderColor")||"transparent",lineWidth:a.get("borderWidth")||0,shadowBlur:a.get("shadowBlur"),shadowColor:a.get("shadowColor"),shadowOffsetX:a.get("shadowOffsetX"),shadowOffsetY:a.get("shadowOffsetY")},z2:10}}function S(t,e,r,i,n){var o=e.scale.getLabel(t,{precision:n.precision}),a=n.formatter;if(a){var s={value:h.getAxisRawValue(e,t),seriesData:[]};l.each(i,function(t){var e=r.getSeriesByIndex(t.seriesIndex),i=t.dataIndexInside,n=e&&e.getDataParams(i);n&&s.seriesData.push(n)}),l.isString(a)?o=a.replace("{value}",o):l.isFunction(a)&&(o=a(s))}return o}function u(t,e,i){var n=o.create();return o.rotate(n,n,i.rotation),o.translate(n,n,i.position),r.applyTransform([t.dataToCoord(e),(i.labelOffset||0)+(i.labelDirection||1)*(i.labelMargin||0)],n)}e.buildElStyle=function(t){var e,i=t.get("type"),n=t.getModel(i+"Style");return"line"===i?(e=n.getLineStyle()).fill=null:"shadow"===i&&((e=n.getAreaStyle()).stroke=null),e},e.buildLabelElOption=c,e.getValueLabel=S,e.getTransformedPosition=u,e.buildCartesianSingleLabelElOption=function(t,e,i,n,r,o){var a=s.innerTextLayout(i.rotation,0,i.labelDirection);i.labelMargin=r.get("label.margin"),c(e,n,r,o,{position:u(n.axis,t,i),align:a.textAlign,verticalAlign:a.textVerticalAlign})},e.makeLineShape=function(t,e,i){return{x1:t[i=i||0],y1:t[1-i],x2:e[i],y2:e[1-i]}},e.makeRectShape=function(t,e,i){return{x:t[i=i||0],y:t[1-i],width:e[i],height:e[1-i]}},e.makeSectorShape=function(t,e,i,n,r,o){return{cx:t,cy:e,r0:i,r:n,startAngle:r,endAngle:o,clockwise:!0}}},function(t,e,i){var n=i(600);i(752),i(758),i(759),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){})},function(t,e,i){var n=i(600),b=i(599),w=i(612).getLayoutRect;n.extendComponentModel({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),n.extendComponentView({type:"title",render:function(t,e,i){if(this.group.removeAll(),t.get("show")){var n=this.group,r=t.getModel("textStyle"),o=t.getModel("subtextStyle"),a=t.get("textAlign"),s=t.get("textBaseline"),l=new b.Text({style:b.setTextStyle({},r,{text:t.get("text"),textFill:r.getTextColor()},{disableBox:!0}),z2:10}),h=l.getBoundingRect(),c=t.get("subtext"),u=new b.Text({style:b.setTextStyle({},o,{text:c,textFill:o.getTextColor(),y:h.height+t.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),f=t.get("link"),d=t.get("sublink");l.silent=!f,u.silent=!d,f&&l.on("click",function(){window.open(f,"_"+t.get("target"))}),d&&u.on("click",function(){window.open(d,"_"+t.get("subtarget"))}),n.add(l),c&&n.add(u);var p=n.getBoundingRect(),g=t.getBoxLayoutParams();g.width=p.width,g.height=p.height;var v=w(g,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));a||("middle"===(a=t.get("left")||t.get("right"))&&(a="center"),"right"===a?v.x+=v.width:"center"===a&&(v.x+=v.width/2)),s||("center"===(s=t.get("top")||t.get("bottom"))&&(s="middle"),"bottom"===s?v.y+=v.height:"middle"===s&&(v.y+=v.height/2),s=s||"top"),n.attr("position",[v.x,v.y]);var m={textAlign:a,textVerticalAlign:s};l.setStyle(m),u.setStyle(m),p=n.getBoundingRect();var y=v.margin,_=t.getItemStyle(["color","opacity"]);_.fill=t.get("backgroundColor");var x=new b.Rect({shape:{x:p.x-y[3],y:p.y-y[0],width:p.width+y[1]+y[3],height:p.height+y[0]+y[2],r:t.get("borderRadius")},style:_,silent:!0});b.subPixelOptimizeRect(x),n.add(x)}}})},function(t,e,i){var n=i(600);i(761),i(762),i(763);var r=i(765),o=i(611);n.registerProcessor(r),o.registerSubTypeDefaulter("legend",function(){return"plain"})},function(t,e,i){var n=i(304)(i(773),i(774),function(t){i(771)},null,null);t.exports=n.exports},function(t,e,i){var n=i(600),r=i(598);i(737),i(738);var o=i(678),a=i(743),s=i(744);i(675),n.registerVisual(r.curry(o,"line","circle","line")),n.registerLayout(r.curry(a,"line")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,r.curry(s,"line"))},function(t,e,i){var n=i(600),r=i(598),o=i(599);i(676),i(750),n.extendComponentView({type:"grid",render:function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new o.Rect({shape:t.coordinateSystem.getRect(),style:r.defaults({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))}}),n.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})},function(t,e,i){i(605).__DEV__;var u=i(598),y=i(608),o=i(612).getLayoutRect,c=i(614),f=i(745),d=i(747),n=i(627);i(748);var p=u.each,r=c.ifAxisCrossZero,a=c.niceScaleExtent;function g(t,e,i){return t.getCoordSysModel()===e}function s(t,e,i){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,i),this.model=t}var l=s.prototype;function h(t,e,i){var n=t[e];if(i.onZero){var r=i.onZeroAxisIndex;if(null==r){for(var o in n){if(n.hasOwnProperty(o))if((a=n[o])&&!v(a)){r=+o;break}}null==r&&(i.onZero=!1),i.onZeroAxisIndex=r}else{var a;(a=n[r])&&v(a)&&(i.onZero=!1)}}}function v(t){return"category"===t.type||"time"===t.type||!r(t)}l.type="grid",l.axisPointerEnabled=!0,l.getRect=function(){return this._rect},l.update=function(t,e){var i=this._axesMap;this._updateScale(t,this.model),p(i.x,function(t){a(t.scale,t.model)}),p(i.y,function(t){a(t.scale,t.model)}),p(i.x,function(t){h(i,"y",t)}),p(i.y,function(t){h(i,"x",t)}),this.resize(this.model,e)},l.resize=function(t,e,i){var l=o(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=l;var n=this._axesList;function r(){p(n,function(t){var e,i,n,r,o=t.isHorizontal(),a=o?[0,l.width]:[0,l.height],s=t.inverse?1:0;t.setExtent(a[s],a[1-s]),e=t,i=o?l.x:l.y,n=e.getExtent(),r=n[0]+n[1],e.toGlobalCoord="x"===e.dim?function(t){return t+i}:function(t){return r-t+i},e.toLocalCoord="x"===e.dim?function(t){return t-i}:function(t){return r-t+i}})}r(),!i&&t.get("containLabel")&&(p(n,function(t){if(!t.model.get("axisLabel.inside")){var e=function(t){var e,i,n,r,o,a,s,l,h,c=t.model,u=c.getFormattedLabels(),f=c.getModel("axisLabel"),d=1,p=u.length;40<p&&(d=Math.ceil(p/40));for(var g=0;g<p;g+=d)if(!t.isLabelIgnored(g)){var v=f.getTextRect(u[g]),m=(i=v,n=f.get("rotate")||0,r=n*Math.PI/180,o=i.plain(),a=o.width,s=o.height,l=a*Math.cos(r)+s*Math.sin(r),h=a*Math.sin(r)+s*Math.cos(r),new y(o.x,o.y,l,h));e?e.union(m):e=m}return e}(t);if(e){var i=t.isHorizontal()?"height":"width",n=t.model.get("axisLabel.margin");l[i]-=e[i]+n,"top"===t.position?l.y+=e.height+n:"left"===t.position&&(l.x+=e.width+n)}}}),r())},l.getAxis=function(t,e){var i=this._axesMap[t];if(null!=i){if(null==e)for(var n in i)if(i.hasOwnProperty(n))return i[n];return i[e]}},l.getAxes=function(){return this._axesList.slice()},l.getCartesian=function(t,e){if(null!=t&&null!=e){var i="x"+t+"y"+e;return this._coordsMap[i]}u.isObject(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,r=this._coordsList;n<r.length;n++)if(r[n].getAxis("x").index===t||r[n].getAxis("y").index===e)return r[n]},l.getCartesians=function(){return this._coordsList.slice()},l.convertToPixel=function(t,e,i){var n=this._findConvertTarget(t,e);return n.cartesian?n.cartesian.dataToPoint(i):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(i)):null},l.convertFromPixel=function(t,e,i){var n=this._findConvertTarget(t,e);return n.cartesian?n.cartesian.pointToData(i):n.axis?n.axis.coordToData(n.axis.toLocalCoord(i)):null},l._findConvertTarget=function(t,e){var i,n,r=e.seriesModel,o=e.xAxisModel||r&&r.getReferringComponents("xAxis")[0],a=e.yAxisModel||r&&r.getReferringComponents("yAxis")[0],s=e.gridModel,l=this._coordsList;if(r)i=r.coordinateSystem,u.indexOf(l,i)<0&&(i=null);else if(o&&a)i=this.getCartesian(o.componentIndex,a.componentIndex);else if(o)n=this.getAxis("x",o.componentIndex);else if(a)n=this.getAxis("y",a.componentIndex);else if(s){s.coordinateSystem===this&&(i=this._coordsList[0])}return{cartesian:i,axis:n}},l.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},l._initCartesian=function(a,t,e){var s={left:!1,right:!1,top:!1,bottom:!1},l={x:{},y:{}},h={x:0,y:0};if(t.eachComponent("xAxis",i("x"),this),t.eachComponent("yAxis",i("y"),this),!h.x||!h.y)return this._axesMap={},void(this._axesList=[]);function i(o){return function(t,e){if(g(t,a)){var i=t.get("position");"x"===o?"top"!==i&&"bottom"!==i&&s[i="bottom"]&&(i="top"===i?"bottom":"top"):"left"!==i&&"right"!==i&&s[i="left"]&&(i="left"===i?"right":"left"),s[i]=!0;var n=new d(o,c.createScaleByModel(t),[0,0],t.get("type"),i),r="category"===n.type;n.onBand=r&&t.get("boundaryGap"),n.inverse=t.get("inverse"),n.onZero=t.get("axisLine.onZero"),n.onZeroAxisIndex=t.get("axisLine.onZeroAxisIndex"),(t.axis=n).model=t,n.grid=this,n.index=e,this._axesList.push(n),l[o][e]=n,h[o]++}}}this._axesMap=l,p(l.x,function(r,o){p(l.y,function(t,e){var i="x"+o+"y"+e,n=new f(i);n.grid=this,n.model=a,this._coordsMap[i]=n,this._coordsList.push(n),n.addAxis(r),n.addAxis(t)},this)},this)},l._updateScale=function(l,h){function c(e,i,t){p(t.coordDimToDataDim(i.dim),function(t){i.scale.unionExtentFromData(e,t)})}u.each(this._axesList,function(t){t.scale.setExtent(1/0,-1/0)}),l.eachSeries(function(t){if(x(t)){var e=_(t,l),i=e[0],n=e[1];if(!g(i,h)||!g(n,h))return;var r=this.getCartesian(i.componentIndex,n.componentIndex),o=t.getData(),a=r.getAxis("x"),s=r.getAxis("y");"list"===o.type&&(c(o,a,t),c(o,s,t))}},this)},l.getTooltipAxes=function(n){var r=[],o=[];return p(this.getCartesians(),function(t){var e=null!=n&&"auto"!==n?t.getAxis(n):t.getBaseAxis(),i=t.getOtherAxis(e);u.indexOf(r,e)<0&&r.push(e),u.indexOf(o,i)<0&&o.push(i)}),{baseAxes:r,otherAxes:o}};var m=["xAxis","yAxis"];function _(e,t){return u.map(m,function(t){return e.getReferringComponents(t)[0]})}function x(t){return"cartesian2d"===t.get("coordinateSystem")}s.create=function(n,r){var o=[];return n.eachComponent("grid",function(t,e){var i=new s(t,n,r);i.name="grid_"+e,i.resize(t,r,!0),t.coordinateSystem=i,o.push(i)}),n.eachSeries(function(t){if(x(t)){var e=_(t),i=e[0],n=e[1],r=i.getCoordSysModel().coordinateSystem;t.coordinateSystem=r.getCartesian(i.componentIndex,n.componentIndex)}}),o},s.dimensions=s.prototype.dimensions=f.prototype.dimensions,n.register("cartesian2d",s);var b=s;t.exports=b},function(t,e,i){t.exports={default:i(766),__esModule:!0}},function(t,e){t.exports=function(t,e,i,a,n){a.eachRawSeriesByType(t,function(n){var r=n.getData(),t=n.get("symbol")||e,o=n.get("symbolSize");r.setVisual({legendSymbol:i||t,symbol:t,symbolSize:o}),a.isSeriesFiltered(n)||("function"==typeof o&&r.each(function(t){var e=n.getRawValue(t),i=n.getDataParams(t);r.setItemVisual(t,"symbolSize",o(e,i))}),r.each(function(t){var e=r.getItemModel(t),i=e.getShallow("symbol",!0),n=e.getShallow("symbolSize",!0);null!=i&&r.setItemVisual(t,"symbol",i),null!=n&&r.setItemVisual(t,"symbolSize",n)}))})}},function(t,e,i){var n=i(598),r={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},o={};o.categoryAxis=n.merge({boundaryGap:!0,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},r),o.valueAxis=n.merge({boundaryGap:[0,0],splitNumber:5},r),o.timeAxis=n.defaults({scale:!0,min:"dataMin",max:"dataMax"},o.valueAxis),o.logAxis=n.defaults({scale:!0,logBase:10},o.valueAxis);var a=o;t.exports=a},function(t,e,i){var r=i(598),o=i(602),a=i(681),s=i(617),l="silent";function h(){}h.prototype.dispose=function(){};var c=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],u=function(t,e,i,n){s.call(this),this.storage=t,this.painter=e,this.painterRoot=n,i=i||new h,((this.proxy=i).handler=this)._hovered={},this._lastTouchMoment,this._lastX,this._lastY,a.call(this),r.each(c,function(t){i.on&&i.on(t,this[t],this)},this)};function f(t,e,i){if(t[t.rectHover?"rectContain":"contain"](e,i)){for(var n,r=t;r;){if(r.clipPath&&!r.clipPath.contain(e,i))return!1;r.silent&&(n=!0),r=r.parent}return!n||l}return!1}u.prototype={constructor:u,mousemove:function(t){var e=t.zrX,i=t.zrY,n=this._hovered,r=n.target;r&&!r.__zr&&(r=(n=this.findHover(n.x,n.y)).target);var o=this._hovered=this.findHover(e,i),a=o.target,s=this.proxy;s.setCursor&&s.setCursor(a?a.cursor:"default"),r&&a!==r&&this.dispatchToElement(n,"mouseout",t),this.dispatchToElement(o,"mousemove",t),a&&a!==r&&this.dispatchToElement(o,"mouseover",t)},mouseout:function(t){this.dispatchToElement(this._hovered,"mouseout",t);for(var e,i=t.toElement||t.relatedTarget;(i=i&&i.parentNode)&&9!=i.nodeType&&!(e=i===this.painterRoot););!e&&this.trigger("globalout",{event:t})},resize:function(t){this._hovered={}},dispatch:function(t,e){var i=this[t];i&&i.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,i){var n=(t=t||{}).target;if(!n||!n.silent){for(var r,o,a="on"+e,s={type:e,event:o=i,target:(r=t).target,topTarget:r.topTarget,cancelBubble:!1,offsetX:o.zrX,offsetY:o.zrY,gestureEvent:o.gestureEvent,pinchX:o.pinchX,pinchY:o.pinchY,pinchScale:o.pinchScale,wheelDelta:o.zrDelta,zrByTouch:o.zrByTouch,which:o.which};n&&(n[a]&&(s.cancelBubble=n[a].call(n,s)),n.trigger(e,s),n=n.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(e,s),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[a]&&t[a].call(t,s),t.trigger&&t.trigger(e,s)}))}},findHover:function(t,e,i){for(var n=this.storage.getDisplayList(),r={x:t,y:e},o=n.length-1;0<=o;o--){var a;if(n[o]!==i&&!n[o].ignore&&(a=f(n[o],t,e))&&(!r.topTarget&&(r.topTarget=n[o]),a!==l)){r.target=n[o];break}}return r}},r.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){u.prototype[n]=function(t){var e=this.findHover(t.zrX,t.zrY),i=e.target;if("mousedown"===n)this._downEl=i,this._downPoint=[t.zrX,t.zrY],this._upEl=i;else if("mosueup"===n)this._upEl=i;else if("click"===n){if(this._downEl!==this._upEl||!this._downPoint||4<o.dist(this._downPoint,[t.zrX,t.zrY]))return;this._downPoint=null}this.dispatchToElement(e,n,t)}}),r.mixin(u,s),r.mixin(u,a);var n=u;t.exports=n},function(t,e){function i(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}function l(t,e){return{target:t,topTarget:e&&e.topTarget}}i.prototype={constructor:i,_dragStart:function(t){var e=t.target;e&&e.draggable&&((this._draggingTarget=e).dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(l(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var i=t.offsetX,n=t.offsetY,r=i-this._x,o=n-this._y;this._x=i,this._y=n,e.drift(r,o,t),this.dispatchToElement(l(e,t),"drag",t.event);var a=this.findHover(i,n,e).target,s=this._dropTarget;e!==(this._dropTarget=a)&&(s&&a!==s&&this.dispatchToElement(l(s,t),"dragleave",t.event),a&&a!==s&&this.dispatchToElement(l(a,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(l(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(l(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var n=i;t.exports=n},function(t,e,i){var o=i(598),a=i(606),s=i(621),l=i(629);function h(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var n=function(){this._roots=[],this._displayList=[],this._displayListLen=0};n.prototype={constructor:n,traverse:function(t,e){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,i=this._displayList,n=0,r=e.length;n<r;n++)this._updateAndAddDisplayable(e[n],null,t);i.length=this._displayListLen,a.canvasSupported&&l(i,h)},_updateAndAddDisplayable:function(t,e,i){if(!t.ignore||i){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var n=t.clipPath;if(n){e=e?e.slice():[];for(var r=n,o=t;r;)r.parent=o,r.updateTransform(),e.push(r),r=(o=r).clipPath}if(t.isGroup){for(var a=t._children,s=0;s<a.length;s++){var l=a[s];t.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,e,i)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof s&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var i=this._roots[e];i instanceof s&&i.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array){e=0;for(var n=t.length;e<n;e++)this.delRoot(t[e])}else{var r=o.indexOf(this._roots,t);0<=r&&(this.delFromStorage(t),this._roots.splice(r,1),t instanceof s&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t.__storage=this,t.dirty(!1),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:h};var r=n;t.exports=r},function(t,e,i){var f=i(647),d=i(649),n=i(598),c=n.isString,u=n.isFunction,h=n.isObject,p=n.isArrayLike,g=n.indexOf,r=function(){this.animators=[]};r.prototype={constructor:r,animate:function(t,e){var i,n=!1,r=this,o=this.__zr;if(t){var a=t.split("."),s=r;n="shape"===a[0];for(var l=0,h=a.length;l<h;l++)s&&(s=s[a[l]]);s&&(i=s)}else i=r;if(i){var c=r.animators,u=new f(i,e);return u.during(function(t){r.dirty(n)}).done(function(){c.splice(g(c,u),1)}),c.push(u),o&&o.animation.addAnimator(u),u}d('Property "'+t+'" is not existed in element '+r.id)},stopAnimation:function(t){for(var e=this.animators,i=e.length,n=0;n<i;n++)e[n].stop(t);return e.length=0,this},animateTo:function(t,e,i,n,r,o){c(i)?(r=n,n=i,i=0):u(n)?(r=n,n="linear",i=0):u(i)?(r=i,i=0):u(e)?(r=e,e=500):e||(e=500),this.stopAnimation(),this._animateToShallow("",this,t,e,i);var a=this.animators.slice(),s=a.length;function l(){--s||r&&r()}s||r&&r();for(var h=0;h<a.length;h++)a[h].done(l).start(n,o)},_animateToShallow:function(t,e,i,n,r){var o={},a=0;for(var s in i)if(i.hasOwnProperty(s))if(null!=e[s])h(i[s])&&!p(i[s])?this._animateToShallow(t?t+"."+s:s,e[s],i[s],n,r):(o[s]=i[s],a++);else if(null!=i[s])if(t){var l={};l[t]={},l[t][s]=i[s],this.attr(l)}else this.attr(s,i[s]);return 0<a&&this.animate(t,!1).when(null==n?500:n,o).delay(r||0),this}};var o=r;t.exports=o},function(t,e,i){var a=i(685);function n(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}n.prototype={constructor:n,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var i=(t-this._startTime-this._pausedTime)/this._life;if(!(i<0)){i=Math.min(i,1);var n=this.easing,r="string"==typeof n?a[n]:n,o="function"==typeof r?r(i):i;return this.fire("frame",o),1==i?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){this[t="on"+t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var r=n;t.exports=r},function(t,e){var i={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){return t*t*(2.70158*t-1.70158)},backOut:function(t){return--t*t*(2.70158*t+1.70158)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-i.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*i.bounceIn(2*t):.5*i.bounceOut(2*t-1)+.5}},n=i;t.exports=n},function(t,e,i){var p=i(622).devicePixelRatio,y=i(598),_=i(649),n=i(608),s=i(629),v=i(687),r=i(652),x=i(653);function l(t){return parseInt(t,10)}function o(t){t.__unusedCount++}function a(t){1==t.__unusedCount&&t.clear()}var c=new n(0,0,0,0),u=new n(0,0,0,0);var h=function(t,e,i){this.type="canvas";var n=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=i=y.extend({},i||{}),this.dpr=i.devicePixelRatio||p,this._singleCanvas=n;var r=(this.root=t).style;r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]=r["user-select"]=r["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var o,a,s,l=this._zlevelList=[],h=this._layers={};if(this._layerConfig={},n){null!=i.width&&(t.width=i.width),null!=i.height&&(t.height=i.height);var c=t.width,u=t.height;this._width=c,this._height=u;var f=new v(t,this,1);f.initContext(),h[0]=f,l.push(0),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var d=this._domRoot=(o=this._width,a=this._height,(s=document.createElement("div")).style.cssText=["position:relative","overflow:hidden","width:"+o+"px","height:"+a+"px","padding:0","margin:0","border-width:0"].join(";")+";",s);t.appendChild(d)}this._progressiveLayers=[],this._hoverlayer,this._hoverElements=[]};h.prototype={constructor:h,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),i=this._zlevelList;this._paintList(e,t);for(var n=0;n<i.length;n++){var r=i[n],o=this._layers[r];!o.__builtin__&&o.refresh&&o.refresh()}return this.refreshHover(),this._progressiveLayers.length&&this._startProgessive(),this},addHover:function(t,e){if(!t.__hoverMir){var i=new t.constructor({style:t.style,shape:t.shape});((i.__from=t).__hoverMir=i).setStyle(e),this._hoverElements.push(i)}},removeHover:function(t){var e=t.__hoverMir,i=this._hoverElements,n=y.indexOf(i,e);0<=n&&i.splice(n,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,i=0;i<e.length;i++){var n=e[i].__from;n&&(n.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,i=this._hoverlayer;if(i&&i.clear(),e){s(t,this.storage.displayableSortFunc),i||(i=this._hoverlayer=this.getLayer(1e5));var n={};i.ctx.save();for(var r=0;r<e;){var o=t[r],a=o.__from;a&&a.__zr?(r++,a.invisible||(o.transform=a.transform,o.invTransform=a.invTransform,o.__clipPaths=a.__clipPaths,this._doPaintEl(o,i,!0,n))):(t.splice(r,1),a.__hoverMir=null,e--)}i.ctx.restore()}},_startProgessive:function(){var e=this;if(e._furtherProgressive){var i=e._progressiveToken=+new Date;e._progress++,r(function t(){i===e._progressiveToken&&e.storage&&(e._doPaintList(e.storage.getDisplayList()),e._furtherProgressive?(e._progress++,r(t)):e._progressiveToken=-1)})}},_clearProgressive:function(){this._progressiveToken=-1,this._progress=0,y.each(this._progressiveLayers,function(t){t.__dirty&&t.clear()})},_paintList:function(t,e){null==e&&(e=!1),this._updateLayerStatus(t),this._clearProgressive(),this.eachBuiltinLayer(o),this._doPaintList(t,e),this.eachBuiltinLayer(a)},_doPaintList:function(t,e){var i,n,r,o,a,s,l=0,h=this._width,c=this._height,u=this._progress;function f(t){var e=r.dpr||1;r.save(),r.globalAlpha=1,r.shadowBlur=0,i.__dirty=!0,r.setTransform(1,0,0,1,0,0),r.drawImage(t.dom,0,0,h*e,c*e),r.restore()}for(var d=0,p=t.length;d<p;d++){var g=t[d],v=this._singleCanvas?0:g.zlevel,m=g.__frame;if(m<0&&a&&(f(a),a=null),n!==v&&(r&&r.restore(),o={},n=v,(i=this.getLayer(n)).__builtin__||_("ZLevel "+n+" has been used by unkown layer "+i.id),(r=i.ctx).save(),i.__unusedCount=0,(i.__dirty||e)&&i.clear()),i.__dirty||e){if(0<=m){if(!a){if((a=this._progressiveLayers[Math.min(l++,4)]).ctx.save(),a.renderScope={},a&&a.__progress>a.__maxProgress){d=a.__nextIdxNotProg-1;continue}s=a.__progress,a.__dirty||(u=s),a.__progress=u+1}m===u&&this._doPaintEl(g,a,!0,a.renderScope)}else this._doPaintEl(g,i,e,o);g.__dirty=!1}}a&&f(a),r&&r.restore(),this._furtherProgressive=!1,y.each(this._progressiveLayers,function(t){t.__maxProgress>=t.__progress&&(this._furtherProgressive=!0)},this)},_doPaintEl:function(t,e,i,n){var r,o,a,s=e.ctx,l=t.transform;if((e.__dirty||i)&&!t.invisible&&0!==t.style.opacity&&(!l||l[0]||l[3])&&(!t.culling||(r=t,o=this._width,a=this._height,c.copy(r.getBoundingRect()),r.transform&&c.applyTransform(r.transform),u.width=o,u.height=a,c.intersect(u)))){var h=t.__clipPaths;(n.prevClipLayer!==e||function(t,e){if(t==e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!0}(h,n.prevElClipPaths))&&(n.prevElClipPaths&&(n.prevClipLayer.ctx.restore(),n.prevClipLayer=n.prevElClipPaths=null,n.prevEl=null),h&&(s.save(),function(t,e){for(var i=0;i<t.length;i++){var n=t[i];n.setTransform(e),e.beginPath(),n.buildPath(e,n.shape),e.clip(),n.restoreTransform(e)}}(h,s),n.prevClipLayer=e,n.prevElClipPaths=h)),t.beforeBrush&&t.beforeBrush(s),t.brush(s,n.prevEl||null),(n.prevEl=t).afterBrush&&t.afterBrush(s)}},getLayer:function(t){if(this._singleCanvas)return this._layers[0];var e=this._layers[t];return e||((e=new v("zr_"+t,this,this.dpr)).__builtin__=!0,this._layerConfig[t]&&y.merge(e,this._layerConfig[t],!0),this.insertLayer(t,e),e.initContext()),e},insertLayer:function(t,e){var i=this._layers,n=this._zlevelList,r=n.length,o=null,a=-1,s=this._domRoot;if(i[t])_("ZLevel "+t+" has been used already");else if((l=e)&&(l.__builtin__||"function"==typeof l.resize&&"function"==typeof l.refresh)){var l;if(0<r&&t>n[0]){for(a=0;a<r-1&&!(n[a]<t&&n[a+1]>t);a++);o=i[n[a]]}if(n.splice(a+1,0,t),!(i[t]=e).virtual)if(o){var h=o.dom;h.nextSibling?s.insertBefore(e.dom,h.nextSibling):s.appendChild(e.dom)}else s.firstChild?s.insertBefore(e.dom,s.firstChild):s.appendChild(e.dom)}else _("Layer of zlevel "+t+" is not valid")},eachLayer:function(t,e){var i,n,r=this._zlevelList;for(n=0;n<r.length;n++)i=r[n],t.call(e,this._layers[i],i)},eachBuiltinLayer:function(t,e){var i,n,r,o=this._zlevelList;for(r=0;r<o.length;r++)n=o[r],(i=this._layers[n]).__builtin__&&t.call(e,i,n)},eachOtherLayer:function(t,e){var i,n,r,o=this._zlevelList;for(r=0;r<o.length;r++)n=o[r],(i=this._layers[n]).__builtin__||t.call(e,i,n)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){var e=this._layers,i=this._progressiveLayers,n={},r={};this.eachBuiltinLayer(function(t,e){n[e]=t.elCount,t.elCount=0,t.__dirty=!1}),y.each(i,function(t,e){r[e]=t.elCount,t.elCount=0,t.__dirty=!1});for(var o,a,s=0,l=0,h=0,c=t.length;h<c;h++){var u=t[h],f=e[this._singleCanvas?0:u.zlevel],d=u.progressive;if(f&&(f.elCount++,f.__dirty=f.__dirty||u.__dirty),0<=d){a!==d&&(a=d,l++);var p=u.__frame=l-1;if(!o){var g=Math.min(s,4);(o=i[g])||(o=i[g]=new v("progressive",this,this.dpr)).initContext(),o.__maxProgress=0}o.__dirty=o.__dirty||u.__dirty,o.elCount++,o.__maxProgress=Math.max(o.__maxProgress,p),o.__maxProgress>=o.__progress&&(f.__dirty=!0)}else u.__frame=-1,o&&(o.__nextIdxNotProg=h,s++,o=null)}o&&(s++,o.__nextIdxNotProg=h),this.eachBuiltinLayer(function(t,e){n[e]!==t.elCount&&(t.__dirty=!0)}),i.length=Math.min(s,5),y.each(i,function(t,e){r[e]!==t.elCount&&(u.__dirty=!0),t.__dirty&&(t.__progress=0)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},configLayer:function(t,e){if(e){var i=this._layerConfig;i[t]?y.merge(i[t],e,!0):i[t]=e;var n=this._layers[t];n&&y.merge(n,i[t],!0)}},delLayer:function(t){var e=this._layers,i=this._zlevelList,n=e[t];n&&(n.dom.parentNode.removeChild(n.dom),delete e[t],i.splice(y.indexOf(i,t),1))},resize:function(e,i){var t=this._domRoot;t.style.display="none";var n=this._opts;if(null!=e&&(n.width=e),null!=i&&(n.height=i),e=this._getSize(0),i=this._getSize(1),t.style.display="",this._width!=e||i!=this._height){for(var r in t.style.width=e+"px",t.style.height=i+"px",this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(e,i);y.each(this._progressiveLayers,function(t){t.resize(e,i)}),this.refresh(!0)}return this._width=e,this._height=i,this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas)return this._layers[0].dom;var s=new v("image",this,t.pixelRatio||this.dpr);s.initContext(),s.clearColor=t.backgroundColor,s.clear();var e,i=this.storage.getDisplayList(!0),n={},l=this;function r(t,e){var i,n=l._zlevelList;null==t&&(t=-1/0);for(var r=0;r<n.length;r++){var o=n[r],a=l._layers[o];if(!a.__builtin__&&t<o&&o<e){i=a;break}}i&&i.renderToCanvas&&(s.ctx.save(),i.renderToCanvas(s.ctx),s.ctx.restore())}for(var o=0;o<i.length;o++){var a=i[o];a.zlevel!==e&&(r(e,a.zlevel),e=a.zlevel),this._doPaintEl(a,s,!0,n)}return r(e,1/0),s.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,i=["width","height"][t],n=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=e[i]&&"auto"!==e[i])return parseFloat(e[i]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[n]||l(s[i])||l(a.style[i]))-(l(s[r])||0)-(l(s[o])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var i=document.createElement("canvas"),n=i.getContext("2d"),r=t.getBoundingRect(),o=t.style,a=o.shadowBlur,s=o.shadowOffsetX,l=o.shadowOffsetY,h=o.hasStroke()?o.lineWidth:0,c=Math.max(h/2,-s+a),u=Math.max(h/2,s+a),f=Math.max(h/2,-l+a),d=Math.max(h/2,l+a),p=r.width+c+u,g=r.height+f+d;i.width=p*e,i.height=g*e,n.scale(e,e),n.clearRect(0,0,p,g),n.dpr=e;var v={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[c-r.x,f-r.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(n);var m=new x({style:{x:0,y:0,image:i}});return null!=v.position&&(m.position=t.position=v.position),null!=v.rotation&&(m.rotation=t.rotation=v.rotation),null!=v.scale&&(m.scale=t.scale=v.scale),m}};var f=h;t.exports=f},function(t,e,i){var s=i(598),o=i(622).devicePixelRatio,u=i(650),f=i(651);function a(){return!1}function l(t,e,i){var n=s.createCanvas(),r=e.getWidth(),o=e.getHeight(),a=n.style;return a.position="absolute",a.left=0,a.top=0,a.width=r+"px",a.height=o+"px",n.width=r*i,n.height=o*i,n.setAttribute("data-zr-dom-id",t),n}var n=function(t,e,i){var n;i=i||o,"string"==typeof t?n=l(t,e,i):s.isObject(t)&&(t=(n=t).id),this.id=t;var r=(this.dom=n).style;r&&(n.onselectstart=a,r["-webkit-user-select"]="none",r["user-select"]="none",r["-webkit-touch-callout"]="none",r["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",r.padding=0,r.margin=0,r["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=i};n.prototype={constructor:n,elCount:0,__dirty:!0,initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.__currentValues={},this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=l("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),this.ctxBack.__currentValues={},1!=t&&this.ctxBack.scale(t,t)},resize:function(t,e){var i=this.dpr,n=this.dom,r=n.style,o=this.domBack;r.width=t+"px",r.height=e+"px",n.width=t*i,n.height=e*i,o&&(o.width=t*i,o.height=e*i,1!=i&&this.ctxBack.scale(i,i))},clear:function(t){var e,i=this.dom,n=this.ctx,r=i.width,o=i.height,a=this.clearColor,s=this.motionBlur&&!t,l=this.lastFrameAlpha,h=this.dpr;(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,r/h,o/h)),n.clearRect(0,0,r,o),a)&&(a.colorStops?(e=a.__canvasGradient||u.getGradient(n,a,{x:0,y:0,width:r,height:o}),a.__canvasGradient=e):a.image&&(e=f.prototype.getCanvasPattern.call(a,n)),n.save(),n.fillStyle=e||a,n.fillRect(0,0,r,o),n.restore());if(s){var c=this.domBack;n.save(),n.globalAlpha=l,n.drawImage(c,0,0,r,o),n.restore()}}};var r=n;t.exports=r},function(t,e,i){var o=i(654),a=new(i(608)),n=function(){};n.prototype={constructor:n,drawRectText:function(t,e){var i=this.style;e=i.textRect||e,this.__dirty&&o.normalizeTextStyle(i,!0);var n=i.text;if(null!=n&&(n+=""),o.needDrawText(n,i)){t.save();var r=this.transform;i.transformText?this.setTransform(t):r&&(a.copy(e),a.applyTransform(r),e=a),o.renderText(this,t,n,i,e),t.restore()}}};var r=n;t.exports=r},function(t,e,i){var n=i(598),r=i(619).Dispatcher,o=i(652),a=i(647),s=function(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,r.call(this)};s.prototype={constructor:s,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),i=0;i<e.length;i++)this.addClip(e[i])},removeClip:function(t){var e=n.indexOf(this._clips,t);0<=e&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),i=0;i<e.length;i++)this.removeClip(e[i]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,i=this._clips,n=i.length,r=[],o=[],a=0;a<n;a++){var s=i[a],l=s.step(t,e);l&&(r.push(l),o.push(s))}for(a=0;a<n;)i[a]._needsRemove?(i[a]=i[n-1],i.pop(),n--):a++;n=r.length;for(a=0;a<n;a++)o[a].fire(r[a]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){var e=this;this._running=!0,o(function t(){e._running&&(o(t),!e._paused&&e._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},animate:function(t,e){var i=new a(t,(e=e||{}).loop,e.getter,e.setter);return this.addAnimator(i),i}},n.mixin(s,r);var l=s;t.exports=l},function(t,e,i){var n=i(619),r=n.addEventListener,o=n.removeEventListener,a=n.normalizeEvent,s=i(598),l=i(617),h=i(606),c=i(691),u=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],f=["touchstart","touchend","touchmove"],d={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},p=s.map(u,function(t){var e=t.replace("mouse","pointer");return d[e]?e:t});function g(t){return"mousewheel"===t&&h.browser.firefox?"DOMMouseScroll":t}function v(t,e,i){var n=t._gestureMgr;"start"===i&&n.clear();var r=n.recognize(e,t.handler.findHover(e.zrX,e.zrY,null).target,t.dom);if("end"===i&&n.clear(),r){var o=r.type;e.gestureEvent=o,t.handler.dispatchToElement({target:r.target},o,r.event)}}function m(t){t._touching=!0,clearTimeout(t._touchTimer),t._touchTimer=setTimeout(function(){t._touching=!1},700)}var y={mousemove:function(t){t=a(this.dom,t),this.trigger("mousemove",t)},mouseout:function(t){var e=(t=a(this.dom,t)).toElement||t.relatedTarget;if(e!=this.dom)for(;e&&9!=e.nodeType;){if(e===this.dom)return;e=e.parentNode}this.trigger("mouseout",t)},touchstart:function(t){(t=a(this.dom,t)).zrByTouch=!0,this._lastTouchMoment=new Date,v(this,t,"start"),y.mousemove.call(this,t),y.mousedown.call(this,t),m(this)},touchmove:function(t){(t=a(this.dom,t)).zrByTouch=!0,v(this,t,"change"),y.mousemove.call(this,t),m(this)},touchend:function(t){(t=a(this.dom,t)).zrByTouch=!0,v(this,t,"end"),y.mouseup.call(this,t),+new Date-this._lastTouchMoment<300&&y.click.call(this,t),m(this)},pointerdown:function(t){y.mousedown.call(this,t)},pointermove:function(t){_(t)||y.mousemove.call(this,t)},pointerup:function(t){y.mouseup.call(this,t)},pointerout:function(t){_(t)||y.mouseout.call(this,t)}};function _(t){var e=t.pointerType;return"pen"===e||"touch"===e}function x(i){var n;function t(t,e){s.each(t,function(t){r(i,g(t),e._handlers[t])},e)}l.call(this),this.dom=i,this._touching=!1,this._touchTimer,this._gestureMgr=new c,this._handlers={},n=this,s.each(f,function(t){n._handlers[t]=s.bind(y[t],n)}),s.each(p,function(t){n._handlers[t]=s.bind(y[t],n)}),s.each(u,function(t){var e,i;n._handlers[t]=(e=y[t],i=n,function(){if(!i._touching)return e.apply(i,arguments)})}),h.pointerEventsSupported?t(p,this):(h.touchEventsSupported&&t(f,this),t(u,this))}s.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){y[e]=function(t){t=a(this.dom,t),this.trigger(e,t)}});var b=x.prototype;b.dispose=function(){for(var t=u.concat(f),e=0;e<t.length;e++){var i=t[e];o(this.dom,g(i),this._handlers[i])}},b.setCursor=function(t){this.dom.style.cursor=t||"default"},s.mixin(x,l);var w=x;t.exports=w},function(t,e,i){var h=i(619),n=function(){this._track=[]};function l(t){var e=t[1][0]-t[0][0],i=t[1][1]-t[0][1];return Math.sqrt(e*e+i*i)}n.prototype={constructor:n,recognize:function(t,e,i){return this._doTrack(t,e,i),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,i){var n=t.touches;if(n){for(var r={points:[],touches:[],target:e,event:t},o=0,a=n.length;o<a;o++){var s=n[o],l=h.clientToLocal(i,s,{});r.points.push([l.zrX,l.zrY]),r.touches.push(s)}this._track.push(r)}},_recognize:function(t){for(var e in r)if(r.hasOwnProperty(e)){var i=r[e](this._track,t);if(i)return i}}};var r={pinch:function(t,e){var i=t.length;if(i){var n,r=(t[i-1]||{}).points,o=(t[i-2]||{}).points||r;if(o&&1<o.length&&r&&1<r.length){var a=l(r)/l(o);!isFinite(a)&&(a=1),e.pinchScale=a;var s=[((n=r)[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2];return e.pinchX=s[0],e.pinchY=s[1],{type:"pinch",target:t[0].target,event:e}}}}},o=n;t.exports=o},function(t,e,i){i(605).__DEV__;var c=i(598),r=i(601),o=i(609),u=i(611),a=i(720),n=i(661),f=c.each,d=c.filter,h=c.map,p=c.isArray,g=c.indexOf,v=c.isObject,s="\0_ec_inner",l=o.extend({constructor:l,init:function(t,e,i,n){i=i||{},this.option=null,this._theme=new o(i),this._optionManager=n},setOption:function(t,e){c.assert(!(s in t),"please use chart.getOption()"),this._optionManager.setOption(t,e),this.resetOption(null)},resetOption:function(t){var e=!1,i=this._optionManager;if(!t||"recreate"===t){var n=i.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this.mergeOption(n)):function(t){t=t,this.option={},this.option[s]=1,this._componentsMap=c.createHashMap({series:[]}),this._seriesIndices=null,i=t,e=this._theme.option,c.each(e,function(t,e){u.hasClass(e)||("object"==typeof t?i[e]=i[e]?c.merge(i[e],t,!1):c.clone(t):null==i[e]&&(i[e]=t))}),c.merge(t,a,!1),this.mergeOption(t);var i,e}.call(this,n),e=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var r=i.getTimelineOption(this);r&&(this.mergeOption(r),e=!0)}if(!t||"recreate"===t||"media"===t){var o=i.getMediaOption(this,this._api);o.length&&f(o,function(t){this.mergeOption(t,e=!0)},this)}return e},mergeOption:function(n){var l=this.option,h=this._componentsMap,i=[];f(n,function(t,e){null!=t&&(u.hasClass(e)?i.push(e):l[e]=null==l[e]?c.clone(t):c.merge(l[e],t,!0))}),u.topologicalTravel(i,u.getAllClassMainTypes(),function(a,t){var e=r.normalizeToArray(n[a]),i=r.mappingToExists(h.get(a),e);r.makeIdAndName(i),f(i,function(t,e){var i,n,r,o=t.option;v(o)&&(t.keyInfo.mainType=a,t.keyInfo.subType=(i=a,n=o,r=t.exist,n.type?n.type:r?r.subType:u.determineSubType(i,n)))});var s=function(e,t){c.isArray(t)||(t=t?[t]:[]);var i={};return f(t,function(t){i[t]=(e.get(t)||[]).slice()}),i}(h,t);l[a]=[],h.set(a,[]),f(i,function(t,e){var i=t.exist,n=t.option;if(c.assert(v(n)||i,"Empty component definition"),n){var r=u.getClass(a,t.keyInfo.subType,!0);if(i&&i instanceof r)i.name=t.keyInfo.name,i.mergeOption(n,this),i.optionUpdated(n,!1);else{var o=c.extend({dependentModels:s,componentIndex:e},t.keyInfo);i=new r(n,this,this,o),c.extend(i,o),i.init(n,this,this,o),i.optionUpdated(null,!0)}}else i.mergeOption({},this),i.optionUpdated({},!1);h.get(a)[e]=i,l[a][e]=i.option},this),"series"===a&&(this._seriesIndices=m(h.get("series")))},this),this._seriesIndices=this._seriesIndices||[]},getOption:function(){var n=c.clone(this.option);return f(n,function(t,e){if(u.hasClass(e)){for(var i=(t=r.normalizeToArray(t)).length-1;0<=i;i--)r.isIdInner(t[i])&&t.splice(i,1);n[e]=t}}),delete n[s],n},getTheme:function(){return this._theme},getComponent:function(t,e){var i=this._componentsMap.get(t);if(i)return i[e||0]},queryComponents:function(t){var e=t.mainType;if(!e)return[];var i,n=t.index,r=t.id,o=t.name,a=this._componentsMap.get(e);if(!a||!a.length)return[];if(null!=n)p(n)||(n=[n]),i=d(h(n,function(t){return a[t]}),function(t){return!!t});else if(null!=r){var s=p(r);i=d(a,function(t){return s&&0<=g(r,t.id)||!s&&t.id===r})}else if(null!=o){var l=p(o);i=d(a,function(t){return l&&0<=g(o,t.name)||!l&&t.name===o})}else i=a.slice();return y(i,t)},findComponents:function(t){var e,i,n,r,o,a=t.query,s=t.mainType,l=(i=s+"Index",n=s+"Id",r=s+"Name",!(e=a)||null==e[i]&&null==e[n]&&null==e[r]?null:{mainType:s,index:e[i],id:e[n],name:e[r]}),h=l?this.queryComponents(l):this._componentsMap.get(s);return o=y(h,t),t.filter?d(o,t.filter):o},eachComponent:function(t,n,r){var e=this._componentsMap;if("function"==typeof t)r=n,n=t,e.each(function(t,i){f(t,function(t,e){n.call(r,i,t,e)})});else if(c.isString(t))f(e.get(t),n,r);else if(v(t)){var i=this.findComponents(t);f(i,n,r)}},getSeriesByName:function(e){var t=this._componentsMap.get("series");return d(t,function(t){return t.name===e})},getSeriesByIndex:function(t){return this._componentsMap.get("series")[t]},getSeriesByType:function(e){var t=this._componentsMap.get("series");return d(t,function(t){return t.subType===e})},getSeries:function(){return this._componentsMap.get("series").slice()},eachSeries:function(i,n){f(this._seriesIndices,function(t){var e=this._componentsMap.get("series")[t];i.call(n,e,t)},this)},eachRawSeries:function(t,e){f(this._componentsMap.get("series"),t,e)},eachSeriesByType:function(i,n,r){f(this._seriesIndices,function(t){var e=this._componentsMap.get("series")[t];e.subType===i&&n.call(r,e,t)},this)},eachRawSeriesByType:function(t,e,i){return f(this.getSeriesByType(t),e,i)},isSeriesFiltered:function(t){return c.indexOf(this._seriesIndices,t.componentIndex)<0},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(t,e){var i=d(this._componentsMap.get("series"),t,e);this._seriesIndices=m(i)},restoreData:function(){var i=this._componentsMap;this._seriesIndices=m(i.get("series"));var n=[];i.each(function(t,e){n.push(e)}),u.topologicalTravel(n,u.getAllClassMainTypes(),function(t,e){f(i.get(t),function(t){t.restoreData()})})}});function m(t){return h(t,function(t){return t.componentIndex})||[]}function y(t,e){return e.hasOwnProperty("subType")?d(t,function(t){return t.subType===e.subType}):t}c.mixin(l,n);var _=l;t.exports=_},function(t,e,i){var n=i(626)([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),r={getLineStyle:function(t){var e=n(this,t),i=this.getLineDash(e.lineWidth);return i&&(e.lineDash=i),e},getLineDash:function(t){null==t&&(t=1);var e=this.get("type"),i=Math.max(t,2),n=4*t;return"solid"===e||null==e?null:"dashed"===e?[n,n]:[i,i]}};t.exports=r},function(t,e,i){var n=i(626)([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),r={getAreaStyle:function(t,e){return n(this,t,e)}};t.exports=r},function(t,e,i){var n=i(613),r=i(599),o=["textStyle","color"],a={getTextColor:function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(o):null)},getFont:function(){return r.getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(t){return n.getBoundingRect(t,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("rich"),this.getShallow("truncateText"))}};t.exports=a},function(t,e,i){var s=i(604),O=i(623),n=i(702),k=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],S=Math.sqrt,T=Math.sin,A=Math.cos,M=Math.PI,r=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},D=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(r(t)*r(e))},I=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(D(t,e))};function P(t,e,i,n,r,o,a,s,l,h,c){var u=l*(M/180),f=A(u)*(t-i)/2+T(u)*(e-n)/2,d=-1*T(u)*(t-i)/2+A(u)*(e-n)/2,p=f*f/(a*a)+d*d/(s*s);1<p&&(a*=S(p),s*=S(p));var g=(r===o?-1:1)*S((a*a*(s*s)-a*a*(d*d)-s*s*(f*f))/(a*a*(d*d)+s*s*(f*f)))||0,v=g*a*d/s,m=g*-s*f/a,y=(t+i)/2+A(u)*v-T(u)*m,_=(e+n)/2+T(u)*v+A(u)*m,x=I([1,0],[(f-v)/a,(d-m)/s]),b=[(f-v)/a,(d-m)/s],w=[(-1*f-v)/a,(-1*d-m)/s],C=I(b,w);D(b,w)<=-1&&(C=M),1<=D(b,w)&&(C=0),0===o&&0<C&&(C-=2*M),1===o&&C<0&&(C+=2*M),c.addData(h,y,_,a,s,x,C,u,o)}function o(t,e){var i=function(t){if(!t)return[];var e,i=t.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,",");for(e=0;e<k.length;e++)i=i.replace(new RegExp(k[e],"g"),"|"+k[e]);var n,r=i.split("|"),o=0,a=0,s=new O,l=O.CMD;for(e=1;e<r.length;e++){var h,c=r[e],u=c.charAt(0),f=0,d=c.slice(1).replace(/e,-/g,"e-").split(",");0<d.length&&""===d[0]&&d.shift();for(var p=0;p<d.length;p++)d[p]=parseFloat(d[p]);for(;f<d.length&&!isNaN(d[f])&&!isNaN(d[0]);){var g,v,m,y,_,x,b,w=o,C=a;switch(u){case"l":o+=d[f++],a+=d[f++],h=l.L,s.addData(h,o,a);break;case"L":o=d[f++],a=d[f++],h=l.L,s.addData(h,o,a);break;case"m":o+=d[f++],a+=d[f++],h=l.M,s.addData(h,o,a),u="l";break;case"M":o=d[f++],a=d[f++],h=l.M,s.addData(h,o,a),u="L";break;case"h":o+=d[f++],h=l.L,s.addData(h,o,a);break;case"H":o=d[f++],h=l.L,s.addData(h,o,a);break;case"v":a+=d[f++],h=l.L,s.addData(h,o,a);break;case"V":a=d[f++],h=l.L,s.addData(h,o,a);break;case"C":h=l.C,s.addData(h,d[f++],d[f++],d[f++],d[f++],d[f++],d[f++]),o=d[f-2],a=d[f-1];break;case"c":h=l.C,s.addData(h,d[f++]+o,d[f++]+a,d[f++]+o,d[f++]+a,d[f++]+o,d[f++]+a),o+=d[f-2],a+=d[f-1];break;case"S":g=o,v=a;var S=s.len(),T=s.data;n===l.C&&(g+=o-T[S-4],v+=a-T[S-3]),h=l.C,w=d[f++],C=d[f++],o=d[f++],a=d[f++],s.addData(h,g,v,w,C,o,a);break;case"s":g=o,v=a,S=s.len(),T=s.data,n===l.C&&(g+=o-T[S-4],v+=a-T[S-3]),h=l.C,w=o+d[f++],C=a+d[f++],o+=d[f++],a+=d[f++],s.addData(h,g,v,w,C,o,a);break;case"Q":w=d[f++],C=d[f++],o=d[f++],a=d[f++],h=l.Q,s.addData(h,w,C,o,a);break;case"q":w=d[f++]+o,C=d[f++]+a,o+=d[f++],a+=d[f++],h=l.Q,s.addData(h,w,C,o,a);break;case"T":g=o,v=a,S=s.len(),T=s.data,n===l.Q&&(g+=o-T[S-4],v+=a-T[S-3]),o=d[f++],a=d[f++],h=l.Q,s.addData(h,g,v,o,a);break;case"t":g=o,v=a,S=s.len(),T=s.data,n===l.Q&&(g+=o-T[S-4],v+=a-T[S-3]),o+=d[f++],a+=d[f++],h=l.Q,s.addData(h,g,v,o,a);break;case"A":m=d[f++],y=d[f++],_=d[f++],x=d[f++],b=d[f++],P(w=o,C=a,o=d[f++],a=d[f++],x,b,m,y,_,h=l.A,s);break;case"a":m=d[f++],y=d[f++],_=d[f++],x=d[f++],b=d[f++],P(w=o,C=a,o+=d[f++],a+=d[f++],x,b,m,y,_,h=l.A,s)}}"z"!==u&&"Z"!==u||(h=l.Z,s.addData(h)),n=h}return s.toStatic(),s}(t);return(e=e||{}).buildPath=function(t){if(t.setData){t.setData(i.data),(e=t.getContext())&&t.rebuildPath(e)}else{var e=t;i.rebuildPath(e)}},e.applyTransform=function(t){n(i,t),this.dirty(!0)},e}e.createFromString=function(t,e){return new s(o(t,e))},e.extendFromString=function(t,e){return s.extend(o(t,e))},e.mergePath=function(t,e){for(var i=[],n=t.length,r=0;r<n;r++){var o=t[r];o.path||o.createPathProxy(),o.__dirtyPath&&o.buildPath(o.path,o.shape,!0),i.push(o.path)}var a=new s(e);return a.createPathProxy(),a.buildPath=function(t){t.appendPath(i);var e=t.getContext();e&&t.rebuildPath(e)},a}},function(t,e,i){var n=i(623),S=i(698),T=i(699),O=i(700),k=i(701),g=i(657).normalizeRadian,_=i(616),A=i(658),M=n.CMD,v=2*Math.PI,D=1e-4;var x=[-1,-1,-1],b=[-1,-1];function I(t,e,i,n,r,o,a,s,l,h){if(e<h&&n<h&&o<h&&s<h||h<e&&h<n&&h<o&&h<s)return 0;var c,u=_.cubicRootAt(e,n,o,s,h,x);if(0===u)return 0;for(var f,d,p=0,g=-1,v=0;v<u;v++){var m=x[v],y=0===m||1===m?.5:1;_.cubicAt(t,i,r,a,m)<l||(g<0&&(g=_.cubicExtrema(e,n,o,s,b),b[1]<b[0]&&1<g&&(void 0,c=b[0],b[0]=b[1],b[1]=c),f=_.cubicAt(e,n,o,s,b[0]),1<g&&(d=_.cubicAt(e,n,o,s,b[1]))),2==g?m<b[0]?p+=f<e?y:-y:m<b[1]?p+=d<f?y:-y:p+=s<d?y:-y:m<b[0]?p+=f<e?y:-y:p+=s<f?y:-y)}return p}function P(t,e,i,n,r,o,a,s){if(e<s&&n<s&&o<s||s<e&&s<n&&s<o)return 0;var l=_.quadraticRootAt(e,n,o,s,x);if(0===l)return 0;var h=_.quadraticExtremum(e,n,o);if(0<=h&&h<=1){for(var c=0,u=_.quadraticAt(e,n,o,h),f=0;f<l;f++){var d=0===x[f]||1===x[f]?.5:1;_.quadraticAt(t,i,r,x[f])<a||(x[f]<h?c+=u<e?d:-d:c+=o<u?d:-d)}return c}d=0===x[0]||1===x[0]?.5:1;return _.quadraticAt(t,i,r,x[0])<a?0:o<e?d:-d}function E(t,e,i,n,r,o,a,s){if(i<(s-=e)||s<-i)return 0;var l=Math.sqrt(i*i-s*s);x[0]=-l,x[1]=l;var h=Math.abs(n-r);if(h<1e-4)return 0;if(h%v<1e-4){r=v;var c=o?1:-1;return a>=x[n=0]+t&&a<=x[1]+t?c:0}if(o){l=n;n=g(r),r=g(l)}else n=g(n),r=g(r);r<n&&(r+=v);for(var u=0,f=0;f<2;f++){var d=x[f];if(a<d+t){var p=Math.atan2(s,d);c=o?1:-1;p<0&&(p=v+p),(n<=p&&p<=r||n<=p+v&&p+v<=r)&&(p>Math.PI/2&&p<1.5*Math.PI&&(c=-c),u+=c)}}return u}function r(t,e,i,n,r){for(var o,a,s=0,l=0,h=0,c=0,u=0,f=0;f<t.length;){var d=t[f++];switch(d===M.M&&1<f&&(i||(s+=A(l,h,c,u,n,r))),1==f&&(c=l=t[f],u=h=t[f+1]),d){case M.M:l=c=t[f++],h=u=t[f++];break;case M.L:if(i){if(S.containStroke(l,h,t[f],t[f+1],e,n,r))return!0}else s+=A(l,h,t[f],t[f+1],n,r)||0;l=t[f++],h=t[f++];break;case M.C:if(i){if(T.containStroke(l,h,t[f++],t[f++],t[f++],t[f++],t[f],t[f+1],e,n,r))return!0}else s+=I(l,h,t[f++],t[f++],t[f++],t[f++],t[f],t[f+1],n,r)||0;l=t[f++],h=t[f++];break;case M.Q:if(i){if(O.containStroke(l,h,t[f++],t[f++],t[f],t[f+1],e,n,r))return!0}else s+=P(l,h,t[f++],t[f++],t[f],t[f+1],n,r)||0;l=t[f++],h=t[f++];break;case M.A:var p=t[f++],g=t[f++],v=t[f++],m=t[f++],y=t[f++],_=t[f++],x=(t[f++],1-t[f++]),b=Math.cos(y)*v+p,w=Math.sin(y)*m+g;1<f?s+=A(l,h,b,w,n,r):(c=b,u=w);var C=(n-p)*m/v+p;if(i){if(k.containStroke(p,g,m,y,y+_,x,e,C,r))return!0}else s+=E(p,g,m,y,y+_,x,C,r);l=Math.cos(y+_)*v+p,h=Math.sin(y+_)*m+g;break;case M.R:c=l=t[f++],u=h=t[f++];b=c+t[f++],w=u+t[f++];if(i){if(S.containStroke(c,u,b,u,e,n,r)||S.containStroke(b,u,b,w,e,n,r)||S.containStroke(b,w,c,w,e,n,r)||S.containStroke(c,w,c,u,e,n,r))return!0}else s+=A(b,u,b,w,n,r),s+=A(c,w,c,u,n,r);break;case M.Z:if(i){if(S.containStroke(l,h,c,u,e,n,r))return!0}else s+=A(l,h,c,u,n,r);l=c,h=u}}return i||(o=h,a=u,Math.abs(o-a)<D)||(s+=A(l,h,c,u,n,r)||0),0!==s}e.contain=function(t,e,i){return r(t,0,!1,e,i)},e.containStroke=function(t,e,i,n){return r(t,e,!0,i,n)}},function(t,e){e.containStroke=function(t,e,i,n,r,o,a){if(0===r)return!1;var s=r,l=0;if(e+s<a&&n+s<a||a<e-s&&a<n-s||t+s<o&&i+s<o||o<t-s&&o<i-s)return!1;if(t===i)return Math.abs(o-t)<=s/2;var h=(l=(e-n)/(t-i))*o-a+(t*n-i*e)/(t-i);return h*h/(l*l+1)<=s/2*s/2}},function(t,e,i){var f=i(616);e.containStroke=function(t,e,i,n,r,o,a,s,l,h,c){if(0===l)return!1;var u=l;return!(e+u<c&&n+u<c&&o+u<c&&s+u<c||c<e-u&&c<n-u&&c<o-u&&c<s-u||t+u<h&&i+u<h&&r+u<h&&a+u<h||h<t-u&&h<i-u&&h<r-u&&h<a-u)&&f.cubicProjectPoint(t,e,i,n,r,o,a,s,h,c,null)<=u/2}},function(t,e,i){var c=i(616).quadraticProjectPoint;e.containStroke=function(t,e,i,n,r,o,a,s,l){if(0===a)return!1;var h=a;return!(e+h<l&&n+h<l&&o+h<l||l<e-h&&l<n-h&&l<o-h||t+h<s&&i+h<s&&r+h<s||s<t-h&&s<i-h&&s<r-h)&&c(t,e,i,n,r,o,s,l,null)<=h/2}},function(t,e,i){var d=i(657).normalizeRadian,p=2*Math.PI;e.containStroke=function(t,e,i,n,r,o,a,s,l){if(0===a)return!1;var h=a;s-=t,l-=e;var c=Math.sqrt(s*s+l*l);if(i<c-h||c+h<i)return!1;if(Math.abs(n-r)%p<1e-4)return!0;if(o){var u=n;n=d(r),r=d(u)}else n=d(n),r=d(r);r<n&&(r+=p);var f=Math.atan2(l,s);return f<0&&(f+=p),n<=f&&f<=r||n<=f+p&&f+p<=r}},function(t,e,i){var n=i(623),x=i(602).applyTransform,b=n.CMD,w=[[],[],[]],C=Math.sqrt,S=Math.atan2;t.exports=function(t,e){var i,n,r,o,a,s=t.data,l=b.M,h=b.C,c=b.L,u=b.R,f=b.A,d=b.Q;for(o=r=0;r<s.length;){switch(i=s[r++],o=r,n=0,i){case l:case c:n=1;break;case h:n=3;break;case d:n=2;break;case f:var p=e[4],g=e[5],v=C(e[0]*e[0]+e[1]*e[1]),m=C(e[2]*e[2]+e[3]*e[3]),y=S(-e[1]/m,e[0]/v);s[r]*=v,s[r++]+=p,s[r]*=m,s[r++]+=g,s[r++]*=v,s[r++]*=m,s[r++]+=y,s[r++]+=y,o=r+=2;break;case u:_[0]=s[r++],_[1]=s[r++],x(_,_,e),s[o++]=_[0],s[o++]=_[1],_[0]+=s[r++],_[1]+=s[r++],x(_,_,e),s[o++]=_[0],s[o++]=_[1]}for(a=0;a<n;a++){var _;(_=w[a])[0]=s[r++],_[1]=s[r++],x(_,_,e),s[o++]=_[0],s[o++]=_[1]}}}},function(t,e,i){var n=i(630),r=i(598),o=i(613),a=i(654),s=function(t){n.call(this,t)};s.prototype={constructor:s,type:"text",brush:function(t,e){var i=this.style;this.__dirty&&a.normalizeTextStyle(i,!0),i.fill=i.stroke=i.shadowBlur=i.shadowColor=i.shadowOffsetX=i.shadowOffsetY=null;var n=i.text;null!=n&&(n+=""),i.bind(t,this,e),a.needDrawText(n,i)&&(this.setTransform(t),a.renderText(this,t,n,i),this.restoreTransform(t))},getBoundingRect:function(){var t=this.style;if(this.__dirty&&a.normalizeTextStyle(t,!0),!this._rect){var e=t.text;null!=e?e+="":e="";var i=o.getBoundingRect(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.rich);if(i.x+=t.x||0,i.y+=t.y||0,a.getStroke(t.textStroke,t.textStrokeWidth)){var n=t.textStrokeWidth;i.x-=n/2,i.y-=n/2,i.width+=n,i.height+=n}this._rect=i}return this._rect}},r.inherits(s,n);var l=s;t.exports=l},function(t,e,i){var n=i(604).extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,i){i&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}});t.exports=n},function(t,e,i){var n=i(604),r=i(659),o=n.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:r(n.prototype.brush),buildPath:function(t,e){var i=e.cx,n=e.cy,r=Math.max(e.r0||0,0),o=Math.max(e.r,0),a=e.startAngle,s=e.endAngle,l=e.clockwise,h=Math.cos(a),c=Math.sin(a);t.moveTo(h*r+i,c*r+n),t.lineTo(h*o+i,c*o+n),t.arc(i,n,o,a,s,!l),t.lineTo(Math.cos(s)*r+i,Math.sin(s)*r+n),0!==r&&t.arc(i,n,r,s,a,l),t.closePath()}});t.exports=o},function(t,e,i){var n=i(604).extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=2*Math.PI;t.moveTo(i+e.r,n),t.arc(i,n,e.r,0,r,!1),t.moveTo(i+e.r0,n),t.arc(i,n,e.r0,0,r,!0)}});t.exports=n},function(t,e,i){var n=i(604),r=i(660),o=n.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){r.buildPath(t,e,!0)}});t.exports=o},function(t,e,i){var v=i(602).distance;function m(t,e,i,n,r,o,a){var s=.5*(i-t),l=.5*(n-e);return(2*(e-i)+s+l)*a+(-3*(e-i)-2*s-l)*o+s*r+e}t.exports=function(t,e){for(var i=t.length,n=[],r=0,o=1;o<i;o++)r+=v(t[o-1],t[o]);var a=r/2;for(a=a<i?i:a,o=0;o<a;o++){var s,l,h,c=o/(a-1)*(e?i:i-1),u=Math.floor(c),f=c-u,d=t[u%i];e?(s=t[(u-1+i)%i],l=t[(u+1)%i],h=t[(u+2)%i]):(s=t[0===u?u:u-1],l=t[i-2<u?i-1:u+1],h=t[i-3<u?i-1:u+2]);var p=f*f,g=f*p;n.push([m(s[0],d[0],l[0],h[0],f,p,g),m(s[1],d[1],l[1],h[1],f,p,g)])}return n}},function(t,e,i){var n=i(602),x=n.min,b=n.max,w=n.scale,C=n.distance,S=n.add,T=n.clone,O=n.sub;t.exports=function(t,e,i,n){var r,o,a,s,l=[],h=[],c=[],u=[];if(n){a=[1/0,1/0],s=[-1/0,-1/0];for(var f=0,d=t.length;f<d;f++)x(a,a,t[f]),b(s,s,t[f]);x(a,a,n[0]),b(s,s,n[1])}for(f=0,d=t.length;f<d;f++){var p=t[f];if(i)r=t[f?f-1:d-1],o=t[(f+1)%d];else{if(0===f||f===d-1){l.push(T(t[f]));continue}r=t[f-1],o=t[f+1]}O(h,o,r),w(h,h,e);var g=C(p,r),v=C(p,o),m=g+v;0!==m&&(g/=m,v/=m),w(c,h,-g),w(u,h,v);var y=S([],p,c),_=S([],p,u);n&&(b(y,y,a),x(y,y,s),b(_,_,a),x(_,_,s)),l.push(y),l.push(_)}return i&&l.push(l.shift()),l}},function(t,e,i){var n=i(604),r=i(660),o=n.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){r.buildPath(t,e,!1)}});t.exports=o},function(t,e,i){var n=i(604),a=i(655),r=n.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.x,n=e.y,r=e.width,o=e.height;e.r?a.buildPath(t,e):t.rect(i,n,r,o),t.closePath()}});t.exports=r},function(t,e,i){var n=i(604).extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.x1,n=e.y1,r=e.x2,o=e.y2,a=e.percent;0!==a&&(t.moveTo(i,n),a<1&&(r=i*(1-a)+r*a,o=n*(1-a)+o*a),t.lineTo(r,o))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}});t.exports=n},function(t,e,i){var n=i(604),r=i(602),o=i(616),u=o.quadraticSubdivide,f=o.cubicSubdivide,a=o.quadraticAt,s=o.cubicAt,l=o.quadraticDerivativeAt,h=o.cubicDerivativeAt,d=[];function c(t,e,i){var n=t.cpx2,r=t.cpy2;return null===n||null===r?[(i?h:s)(t.x1,t.cpx1,t.cpx2,t.x2,e),(i?h:s)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(i?l:a)(t.x1,t.cpx1,t.x2,e),(i?l:a)(t.y1,t.cpy1,t.y2,e)]}var p=n.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.x1,n=e.y1,r=e.x2,o=e.y2,a=e.cpx1,s=e.cpy1,l=e.cpx2,h=e.cpy2,c=e.percent;0!==c&&(t.moveTo(i,n),null==l||null==h?(c<1&&(u(i,a,r,c,d),a=d[1],r=d[2],u(n,s,o,c,d),s=d[1],o=d[2]),t.quadraticCurveTo(a,s,r,o)):(c<1&&(f(i,a,l,r,c,d),a=d[1],l=d[2],r=d[3],f(n,s,h,o,c,d),s=d[1],h=d[2],o=d[3]),t.bezierCurveTo(a,s,l,h,r,o)))},pointAt:function(t){return c(this.shape,t,!1)},tangentAt:function(t){var e=c(this.shape,t,!0);return r.normalize(e,e)}});t.exports=p},function(t,e,i){var n=i(604).extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.cx,n=e.cy,r=Math.max(e.r,0),o=e.startAngle,a=e.endAngle,s=e.clockwise,l=Math.cos(o),h=Math.sin(o);t.moveTo(l*r+i,h*r+n),t.arc(i,n,r,o,a,!s)}});t.exports=n},function(t,e,i){var n=i(604),r=n.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,i=0;i<e.length;i++)t=t||e[i].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),i=0;i<t.length;i++)t[i].path||t[i].createPathProxy(),t[i].path.setScale(e[0],e[1])},buildPath:function(t,e){for(var i=e.paths||[],n=0;n<i.length;n++)i[n].buildPath(t,i[n].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),n.prototype.getBoundingRect.call(this)}});t.exports=r},function(t,e,i){var n=i(598),a=i(632),r=function(t,e,i,n,r,o){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==i?1:i,this.y2=null==n?0:n,this.type="linear",this.global=o||!1,a.call(this,r)};r.prototype={constructor:r},n.inherits(r,a);var o=r;t.exports=o},function(t,e,i){var n=i(598),o=i(632),r=function(t,e,i,n,r){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==i?.5:i,this.type="radial",this.global=r||!1,o.call(this,n)};r.prototype={constructor:r},n.inherits(r,o);var a=r;t.exports=a},function(t,e,i){var r=i(626)([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),n={getItemStyle:function(t,e){var i=r(this,t,e),n=this.getBorderLineDash();return n&&(i.lineDash=n),i},getBorderLineDash:function(){var t=this.get("borderType");return"solid"===t||null==t?null:"dashed"===t?[5,5]:[1,1]}};t.exports=n},function(t,e){t.exports={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}}},function(t,e){var i="";"undefined"!=typeof navigator&&(i=navigator.platform||"");var n={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],textStyle:{fontFamily:i.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};t.exports=n},function(t,e,i){var n=i(598),r=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];var o=function(e){n.each(r,function(t){this[t]=n.bind(e[t],e)},this)};t.exports=o},function(t,e,i){var c=i(598),a=i(601),s=i(611),h=c.each,u=c.clone,f=c.map,l=c.merge,d=/^(min|max)?(.+)$/;function n(t){this._api=t,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function p(t,e,i){var l={width:e,height:i,aspectratio:e/i},h=!0;return c.each(t,function(t,e){var i=e.match(d);if(i&&i[1]&&i[2]){var n,r,o,a=i[1],s=i[2].toLowerCase();n=l[s],r=t,("min"===(o=a)?r<=n:"max"===o?n<=r:n===r)||(h=!1)}}),h}n.prototype={constructor:n,setOption:function(t,e){t=u(t,!0);var r,i,n=this._optionBackup,o=function(t,i,n){var e,r,o=[],a=[],s=t.timeline;t.baseOption&&(r=t.baseOption);(s||t.options)&&(r=r||{},o=(t.options||[]).slice());if(t.media){r=r||{};var l=t.media;h(l,function(t){t&&t.option&&(t.query?a.push(t):e||(e=t))})}r||(r=t);r.timeline||(r.timeline=s);return h([r].concat(o).concat(c.map(a,function(t){return t.option})),function(e){h(i,function(t){t(e,n)})}),{baseOption:r,timelineOptions:o,mediaDefault:e,mediaList:a}}.call(this,t,e,!n);this._newBaseOption=o.baseOption,n?(r=n.baseOption,i=o.baseOption,h(i=i||{},function(t,e){if(null!=t){var i=r[e];if(s.hasClass(e)){t=a.normalizeToArray(t),i=a.normalizeToArray(i);var n=a.mappingToExists(i,t);r[e]=f(n,function(t){return t.option&&t.exist?l(t.exist,t.option,!0):t.exist||t.option})}else r[e]=l(i,t,!0)}}),o.timelineOptions.length&&(n.timelineOptions=o.timelineOptions),o.mediaList.length&&(n.mediaList=o.mediaList),o.mediaDefault&&(n.mediaDefault=o.mediaDefault)):this._optionBackup=o},mountOption:function(t){var e=this._optionBackup;return this._timelineOptions=f(e.timelineOptions,u),this._mediaList=f(e.mediaList,u),this._mediaDefault=u(e.mediaDefault),this._currentMediaIndices=[],u(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e,i=this._timelineOptions;if(i.length){var n=t.getComponent("timeline");n&&(e=u(i[n.getCurrentIndex()],!0))}return e},getMediaOption:function(t){var e,i,n=this._api.getWidth(),r=this._api.getHeight(),o=this._mediaList,a=this._mediaDefault,s=[],l=[];if(!o.length&&!a)return l;for(var h=0,c=o.length;h<c;h++)p(o[h].query,n,r)&&s.push(h);return!s.length&&a&&(s=[-1]),s.length&&(e=s,i=this._currentMediaIndices,e.join(",")!==i.join(","))&&(l=f(s,function(t){return u(-1===t?a.option:o[t].option)})),this._currentMediaIndices=s,l}};var r=n;t.exports=r},function(t,e,i){var n=i(598),r=n.each,o=n.isArray,a=n.isObject,s=i(724),l=i(601).normalizeToArray;function h(e){r(c,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var c=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],u=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],f=["bar","boxplot","candlestick","chord","effectScatter","funnel","gauge","lines","graph","heatmap","line","map","parallel","pie","radar","sankey","scatter","treemap"];t.exports=function(i,t){s(i,t),i.series=l(i.series),r(i.series,function(t){if(a(t)){var e=t.type;if("pie"!==e&&"gauge"!==e||null!=t.clockWise&&(t.clockwise=t.clockWise),"gauge"===e){var i=function(t,e){e=e.split(",");for(var i=t,n=0;n<e.length&&null!=(i=i&&i[e[n]]);n++);return i}(t,"pointer.color");null!=i&&function(t,e,i,n){e=e.split(",");for(var r,o=t,a=0;a<e.length-1;a++)null==o[r=e[a]]&&(o[r]={}),o=o[r];(n||null==o[e[a]])&&(o[e[a]]=i)}(t,"itemStyle.normal.color",i)}for(var n=0;n<f.length;n++)if(f[n]===t.type){h(t);break}}}),i.dataRange&&(i.visualMap=i.dataRange),r(u,function(t){var e=i[t];e&&(o(e)||(e=[e]),r(e,function(t){h(t)}))})}},function(t,e,i){var l=i(598),a=i(601),n=l.each,h=l.isObject,s=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function c(t){var e=t&&t.itemStyle;if(e)for(var i=0,n=s.length;i<n;i++){var r=s[i],o=e.normal,a=e.emphasis;o&&o[r]&&(t[r]=t[r]||{},t[r].normal?l.merge(t[r].normal,o[r]):t[r].normal=o[r],o[r]=null),a&&a[r]&&(t[r]=t[r]||{},t[r].emphasis?l.merge(t[r].emphasis,a[r]):t[r].emphasis=a[r],a[r]=null)}}function u(t,e){var i=h(t)&&t[e],n=h(i)&&i.textStyle;if(n)for(var r=0,o=a.TEXT_STYLE_OPTIONS.length;r<o;r++){e=a.TEXT_STYLE_OPTIONS[r];n.hasOwnProperty(e)&&(i[e]=n[e])}}function f(t){h(t)&&(u(t,"normal"),u(t,"emphasis"))}function r(t){return l.isArray(t)?t:t?[t]:[]}function o(t){return(l.isArray(t)?t[0]:t)||{}}t.exports=function(e,t){n(r(e.series),function(t){h(t)&&function(t){if(h(t)){c(t),f(t.label),f(t.upperLabel),f(t.edgeLabel),c(n=t.markPoint),f(n&&n.label);var e=t.markLine;c(t.markLine),f(e&&e.label);var i=t.markArea;f(i&&i.label),u(t,"axisLabel"),u(t,"title"),u(t,"detail");var n,r=t.data;if(r)for(var o=0;o<r.length;o++)c(r[o]),f(r[o]&&r[o].label);if((n=t.markPoint)&&n.data){var a=n.data;for(o=0;o<a.length;o++)c(a[o]),f(a[o]&&a[o].label)}if((e=t.markLine)&&e.data){var s=e.data;for(o=0;o<s.length;o++)l.isArray(s[o])?(c(s[o][0]),f(s[o][0]&&s[o][0].label),c(s[o][1]),f(s[o][1]&&s[o][1].label)):(c(s[o]),f(s[o]&&s[o].label))}}}(t)});var i=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&i.push("valueAxis","categoryAxis","logAxis","timeAxis"),n(i,function(t){n(r(e[t]),function(t){t&&(u(t,"axisLabel"),u(t.axisPointer,"label"))})}),n(r(e.parallel),function(t){var e=t&&t.parallelAxisDefault;u(e,"axisLabel"),u(e&&e.axisPointer,"label")}),n(r(e.calendar),function(t){u(t,"dayLabel"),u(t,"monthLabel"),u(t,"yearLabel")}),n(r(e.radar),function(t){u(t,"name")}),n(r(e.geo),function(t){h(t)&&(f(t.label),n(r(t.regions),function(t){f(t.label)}))}),f(o(e.timeline).label),u(o(e.axisPointer),"label"),u(o(e.tooltip).axisPointer,"label")}},function(t,e,i){var n=i(621),r=i(633),o=i(610),a=function(){this.group=new n,this.uid=r.getUID("viewComponent")},s=a.prototype={constructor:a,init:function(t,e){},render:function(t,e,i,n){},dispose:function(){}};s.updateView=s.updateLayout=s.updateVisual=function(t,e,i,n){},o.enableClassExtend(a),o.enableClassManagement(a,{registerWhenExtend:!0});var l=a;t.exports=l},function(t,e,i){var o=i(632);t.exports=function(t){t.eachRawSeries(function(e){var i=(e.visualColorAccessPath||"itemStyle.normal.color").split("."),n=e.getData(),r=e.get(i)||e.getColorFromPalette(e.get("name"));n.setVisual("color",r),t.isSeriesFiltered(e)||("function"!=typeof r||r instanceof o||n.each(function(t){n.setItemVisual(t,"color",r(e.getDataParams(t)))}),n.each(function(t){var e=n.getItemModel(t).get(i,!0);null!=e&&n.setItemVisual(t,"color",e)}))})}},function(t,e,i){var s=i(598),l=i(599),h=Math.PI;t.exports=function(n,t){t=t||{},s.defaults(t,{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var r=new l.Rect({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4}),o=new l.Arc({shape:{startAngle:-h/2,endAngle:-h/2+.1,r:10},style:{stroke:t.color,lineCap:"round",lineWidth:5},zlevel:t.zlevel,z:10001}),a=new l.Rect({style:{fill:"none",text:t.text,textPosition:"right",textDistance:10,textFill:t.textColor},zlevel:t.zlevel,z:10001});o.animateShape(!0).when(1e3,{endAngle:3*h/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:3*h/2}).delay(300).start("circularInOut");var e=new l.Group;return e.add(o),e.add(a),e.add(r),e.resize=function(){var t=n.getWidth()/2,e=n.getHeight()/2;o.setShape({cx:t,cy:e});var i=o.shape.r;a.setShape({x:t-i,y:e-i,width:2*i,height:2*i}),r.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},e.resize(),e}},function(t,e,i){var n=i(643);e.zrender=n;var r=i(615);e.matrix=r;var o=i(602);e.vector=o;var a=i(598),s=i(618);e.color=s;var l=i(599);e.graphic=l;var h=i(603);e.number=h;var c=i(607);e.format=c;var u=i(634);u.throttle;e.throttle=u.throttle;var f=i(729);e.helper=f;var d=i(637);e.List=d;var p=i(609);e.Model=p;var g=i(641);e.Axis=g;var v=i(606);e.env=v;var m=i(734);e.parseGeoJson=m;var y={};a.each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(t){y[t]=a[t]}),e.util=y},function(t,e,i){var r=i(598),n=i(636),o=i(614),a=i(640),s=i(609),l=i(638);e.completeDimensions=l;var h=i(620);e.createSymbol=h.createSymbol,e.createList=function(t){var e=t.get("data");return n(e,t,t.ecModel)},e.createScale=function(t,e){var i=e;e instanceof s||(i=new s(e),r.mixin(i,a));var n=o.createScaleByModel(i);return n.setExtent(t[0],t[1]),o.niceScaleExtent(n,i),n},e.mixinAxisModelCommonMethods=function(t){r.mixin(t,a)}},function(t,e){function o(t){return t}function i(t,e,i,n,r){this._old=t,this._new=e,this._oldKeyGetter=i||o,this._newKeyGetter=n||o,this.context=r}function c(t,e,i,n,r){for(var o=0;o<t.length;o++){var a="_ec_"+r[n](t[o],o),s=e[a];null==s?(i.push(a),e[a]=o):(s.length||(e[a]=s=[s]),s.push(o))}}i.prototype={constructor:i,add:function(t){return this._add=t,this},update:function(t){return this._update=t,this},remove:function(t){return this._remove=t,this},execute:function(){var t=this._old,e=this._new,i={},n=[],r=[];for(c(t,{},n,"_oldKeyGetter",this),c(e,i,r,"_newKeyGetter",this),o=0;o<t.length;o++){if(null!=(s=i[a=n[o]]))(h=s.length)?(1===h&&(i[a]=null),s=s.unshift()):i[a]=null,this._update&&this._update(s,o);else this._remove&&this._remove(o)}for(var o=0;o<r.length;o++){var a=r[o];if(i.hasOwnProperty(a)){var s;if(null==(s=i[a]))continue;if(s.length)for(var l=0,h=s.length;l<h;l++)this._add&&this._add(s[l]);else this._add&&this._add(s)}}}};var n=i;t.exports=n},function(t,e,i){var n=i(598),r=i(624),o=r.prototype,a=r.extend({type:"ordinal",init:function(t,e){this._data=t,this._extent=e||[0,t.length-1]},parse:function(t){return"string"==typeof t?n.indexOf(this._data,t):Math.round(t)},contain:function(t){return t=this.parse(t),o.contain.call(this,t)&&null!=this._data[t]},normalize:function(t){return o.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(o.scale.call(this,t))},getTicks:function(){for(var t=[],e=this._extent,i=e[0];i<=e[1];)t.push(i),i++;return t},getLabel:function(t){return this._data[t]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(t,e){this.unionExtent(t.getDataExtent(e,!1))},niceTicks:n.noop,niceExtent:n.noop});a.create=function(){return new a};var s=a;t.exports=s},function(t,e,i){var n=i(598),d=i(603),r=i(607),p=i(662),o=i(628),a=o.prototype,g=Math.ceil,v=Math.floor,s=864e5,l=o.extend({type:"time",getLabel:function(t){var e=this._stepLvl,i=new Date(t);return r.formatTime(e[0],i,this.getSetting("useUTC"))},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=s,e[1]+=s),e[1]===-1/0&&e[0]===1/0){var i=new Date;e[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),e[0]=e[1]-s}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var n=this._interval;t.fixMin||(e[0]=d.round(v(e[0]/n)*n)),t.fixMax||(e[1]=d.round(g(e[1]/n)*n))},niceTicks:function(t,e,i){t=t||10;var n=this._extent,r=n[1]-n[0],o=r/t;null!=e&&o<e&&(o=e),null!=i&&i<o&&(o=i);var a=m.length,s=function(t,e,i,n){for(;i<n;){var r=i+n>>>1;t[r][1]<e?i=r+1:n=r}return i}(m,o,0,a),l=m[Math.min(s,a-1)],h=l[1];if("year"===l[0]){var c=r/h;h*=d.nice(c/t,!0)}var u=this.getSetting("useUTC")?0:60*new Date(+n[0]||+n[1]).getTimezoneOffset()*1e3,f=[Math.round(g((n[0]-u)/h)*h+u),Math.round(v((n[1]-u)/h)*h+u)];p.fixExtent(f,n),this._stepLvl=l,this._interval=h,this._niceExtent=f},parse:function(t){return+d.parseDate(t)}});n.each(["contain","normalize"],function(e){l.prototype[e]=function(t){return a[e].call(this,this.parse(t))}});var m=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",s],["MM-dd\nyyyy",2*s],["MM-dd\nyyyy",3*s],["MM-dd\nyyyy",4*s],["MM-dd\nyyyy",432e6],["MM-dd\nyyyy",6*s],["week",7*s],["MM-dd\nyyyy",864e6],["week",14*s],["week",21*s],["month",31*s],["week",42*s],["month",62*s],["week",42*s],["quarter",8208e6],["month",107136e5],["month",13392e6],["half-year",16416e6],["month",214272e5],["month",26784e6],["year",32832e6]];l.create=function(t){return new l({useUTC:t.ecModel.get("useUTC")})};var h=l;t.exports=h},function(t,e,i){var o=i(598),n=i(624),a=i(603),r=i(628),s=n.prototype,l=r.prototype,h=a.getPrecisionSafe,c=a.round,u=Math.floor,f=Math.ceil,d=Math.pow,p=Math.log,g=n.extend({type:"log",base:10,$constructor:function(){n.apply(this,arguments),this._originalScale=new r},getTicks:function(){var i=this._originalScale,n=this._extent,r=i.getExtent();return o.map(l.getTicks.call(this),function(t){var e=a.round(d(this.base,t));return e=t===n[0]&&i.__fixMin?v(e,r[0]):e,e=t===n[1]&&i.__fixMax?v(e,r[1]):e},this)},getLabel:l.getLabel,scale:function(t){return t=s.scale.call(this,t),d(this.base,t)},setExtent:function(t,e){var i=this.base;t=p(t)/p(i),e=p(e)/p(i),l.setExtent.call(this,t,e)},getExtent:function(){var t=this.base,e=s.getExtent.call(this);e[0]=d(t,e[0]),e[1]=d(t,e[1]);var i=this._originalScale,n=i.getExtent();return i.__fixMin&&(e[0]=v(e[0],n[0])),i.__fixMax&&(e[1]=v(e[1],n[1])),e},unionExtent:function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=p(t[0])/p(e),t[1]=p(t[1])/p(e),s.unionExtent.call(this,t)},unionExtentFromData:function(t,e){this.unionExtent(t.getDataExtent(e,!0,function(t){return 0<t}))},niceTicks:function(t){t=t||10;var e=this._extent,i=e[1]-e[0];if(!(i===1/0||i<=0)){var n=a.quantity(i);for(t/i*n<=.5&&(n*=10);!isNaN(n)&&Math.abs(n)<1&&0<Math.abs(n);)n*=10;var r=[a.round(f(e[0]/n)*n),a.round(u(e[1]/n)*n)];this._interval=n,this._niceExtent=r}},niceExtent:function(t){l.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin,e.__fixMax=t.fixMax}});function v(t,e){return c(t,h(e))}o.each(["contain","normalize"],function(e){g.prototype[e]=function(t){return t=p(t)/p(this.base),s[e].call(this,t)}}),g.create=function(){return new g};var m=g;t.exports=m},function(t,e,i){var a=i(598),s=i(735);function u(t,e,i){for(var n=[],r=e[0],o=e[1],a=0;a<t.length;a+=2){var s=t.charCodeAt(a)-64,l=t.charCodeAt(a+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),r=s+=r,o=l+=o,n.push([s/i,l/i])}return n}t.exports=function(t){return function(t){if(t.UTF8Encoding){var e=t.UTF8Scale;null==e&&(e=1024);for(var i=t.features,n=0;n<i.length;n++)for(var r=i[n].geometry,o=r.coordinates,a=r.encodeOffsets,s=0;s<o.length;s++){var l=o[s];if("Polygon"===r.type)o[s]=u(l,a[s],e);else if("MultiPolygon"===r.type)for(var h=0;h<l.length;h++){var c=l[h];l[h]=u(c,a[s][h],e)}}t.UTF8Encoding=!1}}(t),a.map(a.filter(t.features,function(t){return t.geometry&&t.properties&&0<t.geometry.coordinates.length}),function(t){var e=t.properties,i=t.geometry,n=i.coordinates,r=[];"Polygon"===i.type&&r.push({type:"polygon",exterior:n[0],interiors:n.slice(1)}),"MultiPolygon"===i.type&&a.each(n,function(t){t[0]&&r.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})});var o=new s(e.name,r,e.cp);return o.properties=e,o})}},function(t,e,i){var p=i(608),h=i(656),g=i(602),l=i(736);function n(t,e,i){if(this.name=t,this.geometries=e,i)i=[i[0],i[1]];else{var n=this.getBoundingRect();i=[n.x+n.width/2,n.y+n.height/2]}this.center=i}n.prototype={constructor:n,properties:null,getBoundingRect:function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,i=[e,e],n=[-e,-e],r=[],o=[],a=this.geometries,s=0;s<a.length;s++)if("polygon"===a[s].type){var l=a[s].exterior;h.fromPoints(l,r,o),g.min(i,i,r),g.max(n,n,o)}return 0===s&&(i[0]=i[1]=n[0]=n[1]=0),this._rect=new p(i[0],i[1],n[0]-i[0],n[1]-i[1])},contain:function(t){var e=this.getBoundingRect(),i=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var n=0,r=i.length;n<r;n++)if("polygon"===i[n].type){var o=i[n].exterior,a=i[n].interiors;if(l.contain(o,t[0],t[1])){for(var s=0;s<(a?a.length:0);s++)if(l.contain(a[s]))continue t;return!0}}return!1},transformTo:function(t,e,i,n){var r=this.getBoundingRect(),o=r.width/r.height;i?n||(n=i/o):i=o*n;for(var a=new p(t,e,i,n),s=r.calculateTransform(a),l=this.geometries,h=0;h<l.length;h++)if("polygon"===l[h].type){for(var c=l[h].exterior,u=l[h].interiors,f=0;f<c.length;f++)g.applyTransform(c[f],c[f],s);for(var d=0;d<(u?u.length:0);d++)for(f=0;f<u[d].length;f++)g.applyTransform(u[d][f],u[d][f],s)}(r=this._rect).copy(a),this.center=[r.x+r.width/2,r.y+r.height/2]}};var r=n;t.exports=r},function(t,e,i){var l=i(658),n=1e-8;function h(t,e){return Math.abs(t-e)<n}e.contain=function(t,e,i){var n=0,r=t[0];if(!r)return!1;for(var o=1;o<t.length;o++){var a=t[o];n+=l(r[0],r[1],a[0],a[1],e,i),r=a}var s=t[0];return h(r[0],s[0])&&h(r[1],s[1])||(n+=l(r[0],r[1],s[0],s[1],e,i)),0!==n}},function(t,e,i){i(605).__DEV__;var n=i(636),r=i(635).extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,e){return n(t.data,this,e)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clipOverflow:!0,label:{normal:{position:"top"}},lineStyle:{normal:{width:2,type:"solid"}},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:!1,connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});t.exports=r},function(t,e,i){i(605).__DEV__;var O=i(598),n=i(739),l=i(663),m=i(741),k=i(599),h=i(601),r=i(742),o=r.Polyline,a=r.Polygon,c=i(639);function A(t,e){if(t.length===e.length){for(var i=0;i<t.length;i++){var n=t[i],r=e[i];if(n[0]!==r[0]||n[1]!==r[1])return}return!0}}function M(t){return"number"==typeof t?t:t?.3:0}function d(t){var e=t.getGlobalExtent();if(t.onBand){var i=t.getBandWidth()/2-1,n=e[1]>e[0]?1:-1;e[0]+=n*i,e[1]-=n*i}return e}function D(t){return 0<=t?1:-1}function I(t,e,i){return"polar"===t.type?(r=e,o=i,a=(n=t).getAngleAxis(),s=n.getRadiusAxis().getExtent(),l=a.getExtent(),h=Math.PI/180,c=new k.Sector({shape:{cx:n.cx,cy:n.cy,r0:s[0],r:s[1],startAngle:-l[0]*h,endAngle:-l[1]*h,clockwise:a.inverse}}),r&&(c.shape.endAngle=-l[0]*h,k.initProps(c,{shape:{endAngle:-l[1]*h}},o)),c):function(t,e,i){var n=d(t.getAxis("x")),r=d(t.getAxis("y")),o=t.getBaseAxis().isHorizontal(),a=Math.min(n[0],n[1]),s=Math.min(r[0],r[1]),l=Math.max(n[0],n[1])-a,h=Math.max(r[0],r[1])-s,c=i.get("lineStyle.normal.width")||2,u=i.get("clipOverflow")?c/2:Math.max(l,h);o?(s-=u,h+=2*u):(a-=u,l+=2*u);var f=new k.Rect({shape:{x:a,y:s,width:l,height:h}});return e&&(f.shape[o?"width":"height"]=0,k.initProps(f,{shape:{width:l,height:h}},i)),f}(t,e,i);var n,r,o,a,s,l,h,c}function P(t,e,i){for(var n=e.getBaseAxis(),r="x"===n.dim||"radius"===n.dim?0:1,o=[],a=0;a<t.length-1;a++){var s=t[a+1],l=t[a];o.push(l);var h=[];switch(i){case"end":h[r]=s[r],h[1-r]=l[1-r],o.push(h);break;case"middle":var c=(l[r]+s[r])/2,u=[];h[r]=u[r]=c,h[1-r]=l[1-r],u[1-r]=s[1-r],o.push(h),o.push(u);break;default:h[r]=l[r],h[1-r]=s[1-r],o.push(h)}}return t[a]&&o.push(t[a]),o}var s=c.extend({type:"line",init:function(){var t=new k.Group,e=new n;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},render:function(t,e,i){var n=t.coordinateSystem,r=this.group,o=t.getData(),a=t.getModel("lineStyle.normal"),s=t.getModel("areaStyle.normal"),l=o.mapArray(o.getItemLayout,!0),h="polar"===n.type,c=this._coordSys,u=this._symbolDraw,f=this._polyline,d=this._polygon,p=this._lineGroup,g=t.get("animation"),v=!s.isEmpty(),m=function(o,a){var s=o.getBaseAxis(),t=o.getOtherAxis(s),l=0;if(!s.onZero){var e=t.scale.getExtent();0<e[0]?l=e[0]:e[1]<0&&(l=e[1])}var h=t.dim,c="x"===h||"radius"===h?1:0;return a.mapArray([h],function(t,e){for(var i,n=a.stackedOn;n&&D(n.get(h,e))===D(t);){i=n;break}var r=[];return r[c]=a.get(s.dim,e),r[1-c]=i?i.get(h,e,!0):l,o.dataToPoint(r)},!0)}(n,o),y=t.get("showSymbol"),_=y&&!h&&!t.get("showAllSymbol")&&this._getSymbolIgnoreFunc(o,n),x=this._data;x&&x.eachItemGraphicEl(function(t,e){t.__temp&&(r.remove(t),x.setItemGraphicEl(e,null))}),y||u.remove(),r.add(p);var b=!h&&t.get("step");f&&c.type===n.type&&b===this._step?(v&&!d?d=this._newPolygon(l,m,n,g):d&&!v&&(p.remove(d),d=this._polygon=null),p.setClipPath(I(n,!1,t)),y&&u.updateData(o,_),o.eachItemGraphicEl(function(t){t.stopAnimation(!0)}),A(this._stackedOnPoints,m)&&A(this._points,l)||(g?this._updateAnimation(o,m,n,i,b):(b&&(l=P(l,n,b),m=P(m,n,b)),f.setShape({points:l}),d&&d.setShape({points:l,stackedOnPoints:m})))):(y&&u.updateData(o,_),b&&(l=P(l,n,b),m=P(m,n,b)),f=this._newPolyline(l,n,g),v&&(d=this._newPolygon(l,m,n,g)),p.setClipPath(I(n,!0,t)));var w=function(t,e){var i=t.getVisual("visualMeta");if(i&&i.length&&t.count()){for(var n,r=i.length-1;0<=r;r--)if(i[r].dimension<2){n=i[r];break}if(n&&"cartesian2d"===e.type){var o=n.dimension,a=t.dimensions[o],s=e.getAxis(a),l=O.map(n.stops,function(t){return{coord:s.toGlobalCoord(s.dataToCoord(t.value)),color:t.color}}),h=l.length,c=n.outerColors.slice();h&&l[0].coord>l[h-1].coord&&(l.reverse(),c.reverse());var u=l[0].coord-10,f=l[h-1].coord+10,d=f-u;if(d<.001)return"transparent";O.each(l,function(t){t.offset=(t.coord-u)/d}),l.push({offset:h?l[h-1].offset:.5,color:c[1]||"transparent"}),l.unshift({offset:h?l[0].offset:.5,color:c[0]||"transparent"});var p=new k.LinearGradient(0,0,0,0,l,!0);return p[a]=u,p[a+"2"]=f,p}}}(o,n)||o.getVisual("color");f.useStyle(O.defaults(a.getLineStyle(),{fill:"none",stroke:w,lineJoin:"bevel"}));var C=t.get("smooth");if(C=M(t.get("smooth")),f.setShape({smooth:C,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")}),d){var S=o.stackedOn,T=0;if(d.useStyle(O.defaults(s.getAreaStyle(),{fill:w,opacity:.7,lineJoin:"bevel"})),S)T=M(S.hostModel.get("smooth"));d.setShape({smooth:C,stackedOnSmooth:T,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})}this._data=o,this._coordSys=n,this._stackedOnPoints=m,this._points=l,this._step=b},dispose:function(){},highlight:function(t,e,i,n){var r=t.getData(),o=h.queryDataIndex(r,n);if(!(o instanceof Array)&&null!=o&&0<=o){var a=r.getItemGraphicEl(o);if(!a){var s=r.getItemLayout(o);if(!s)return;(a=new l(r,o)).position=s,a.setZ(t.get("zlevel"),t.get("z")),a.ignore=isNaN(s[0])||isNaN(s[1]),a.__temp=!0,r.setItemGraphicEl(o,a),a.stopSymbolAnimation(!0),this.group.add(a)}a.highlight()}else c.prototype.highlight.call(this,t,e,i,n)},downplay:function(t,e,i,n){var r=t.getData(),o=h.queryDataIndex(r,n);if(null!=o&&0<=o){var a=r.getItemGraphicEl(o);a&&(a.__temp?(r.setItemGraphicEl(o,null),this.group.remove(a)):a.downplay())}else c.prototype.downplay.call(this,t,e,i,n)},_newPolyline:function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new o({shape:{points:t},silent:!0,z2:10}),this._lineGroup.add(e),this._polyline=e},_newPolygon:function(t,e){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new a({shape:{points:t,stackedOnPoints:e},silent:!0}),this._lineGroup.add(i),this._polygon=i},_getSymbolIgnoreFunc:function(t,e){var i=e.getAxesByScale("ordinal")[0];if(i&&i.isLabelIgnored)return O.bind(i.isLabelIgnored,i)},_updateAnimation:function(t,e,i,n,r){var o=this._polyline,a=this._polygon,s=t.hostModel,l=m(this._data,t,this._stackedOnPoints,e,this._coordSys,i),h=l.current,c=l.stackedOnCurrent,u=l.next,f=l.stackedOnNext;r&&(h=P(l.current,i,r),c=P(l.stackedOnCurrent,i,r),u=P(l.next,i,r),f=P(l.stackedOnNext,i,r)),o.shape.__points=l.current,o.shape.points=h,k.updateProps(o,{shape:{points:u}},s),a&&(a.setShape({points:h,stackedOnPoints:c}),k.updateProps(a,{shape:{points:u,stackedOnPoints:f}},s));for(var d=[],p=l.status,g=0;g<p.length;g++){if("="===p[g].cmd){var v=t.getItemGraphicEl(p[g].idx1);v&&d.push({el:v,ptIdx:g})}}o.animators&&o.animators.length&&o.animators[0].during(function(){for(var t=0;t<d.length;t++){d[t].el.attr("position",o.shape.__points[d[t].ptIdx])}})},remove:function(t){var i=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(t,e){t.__temp&&(i.remove(t),n.setItemGraphicEl(e,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});t.exports=s},function(t,e,i){var u=i(599),n=i(663);function r(t){this.group=new u.Group,this._symbolCtor=t||n}var o=r.prototype;function f(t,e,i){var n=t.getItemLayout(e);return n&&!isNaN(n[0])&&!isNaN(n[1])&&!(i&&i(e))&&"none"!==t.getItemVisual(e,"symbol")}o.updateData=function(r,o){var a=this.group,s=r.hostModel,l=this._data,h=this._symbolCtor,c={itemStyle:s.getModel("itemStyle.normal").getItemStyle(["color"]),hoverItemStyle:s.getModel("itemStyle.emphasis").getItemStyle(),symbolRotate:s.get("symbolRotate"),symbolOffset:s.get("symbolOffset"),hoverAnimation:s.get("hoverAnimation"),labelModel:s.getModel("label.normal"),hoverLabelModel:s.getModel("label.emphasis"),cursorStyle:s.get("cursor")};r.diff(l).add(function(t){var e=r.getItemLayout(t);if(f(r,t,o)){var i=new h(r,t,c);i.attr("position",e),r.setItemGraphicEl(t,i),a.add(i)}}).update(function(t,e){var i=l.getItemGraphicEl(e),n=r.getItemLayout(t);f(r,t,o)?(i?(i.updateData(r,t,c),u.updateProps(i,{position:n},s)):(i=new h(r,t)).attr("position",n),a.add(i),r.setItemGraphicEl(t,i)):a.remove(i)}).remove(function(t){var e=l.getItemGraphicEl(t);e&&e.fadeOut(function(){a.remove(e)})}).execute(),this._data=r},o.updateLayout=function(){var n=this._data;n&&n.eachItemGraphicEl(function(t,e){var i=n.getItemLayout(e);t.attr("position",i)})},o.remove=function(t){var e=this.group,i=this._data;i&&(t?i.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)})}):e.removeAll())};var a=r;t.exports=a},function(t,e,i){var o=i(601).otherDimToDataDim;e.findLabelValueDim=function(t){var e,i=o(t,"label");if(i.length)e=i[0];else for(var n,r=t.dimensions.slice();r.length&&(e=r.pop(),"ordinal"===(n=t.getDimensionInfo(e).type)||"time"===n););return e}},function(t,e){function f(t){return 0<=t?1:-1}function M(t,e,i){for(var n,r=t.getBaseAxis(),o=t.getOtherAxis(r),a=r.onZero?0:o.scale.getExtent()[0],s=o.dim,l="x"===s||"radius"===s?1:0,h=e.stackedOn,c=e.get(s,i);h&&f(h.get(s,i))===f(c);){n=h;break}var u=[];return u[l]=e.get(r.dim,i),u[1-l]=n?n.get(s,i,!0):a,t.dataToPoint(u)}t.exports=function(t,e,i,n,r,o){for(var a,s,l=(a=t,s=[],e.diff(a).add(function(t){s.push({cmd:"+",idx:t})}).update(function(t,e){s.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){s.push({cmd:"-",idx:t})}).execute(),s),h=[],c=[],u=[],f=[],d=[],p=[],g=[],v=o.dimensions,m=0;m<l.length;m++){var y=l[m],_=!0;switch(y.cmd){case"=":var x=t.getItemLayout(y.idx),b=e.getItemLayout(y.idx1);(isNaN(x[0])||isNaN(x[1]))&&(x=b.slice()),h.push(x),c.push(b),u.push(i[y.idx]),f.push(n[y.idx1]),g.push(e.getRawIndex(y.idx1));break;case"+":var w=y.idx;h.push(r.dataToPoint([e.get(v[0],w,!0),e.get(v[1],w,!0)])),c.push(e.getItemLayout(w).slice()),u.push(M(r,e,w)),f.push(n[w]),g.push(e.getRawIndex(w));break;case"-":w=y.idx;var C=t.getRawIndex(w);C!==w?(h.push(t.getItemLayout(w)),c.push(o.dataToPoint([t.get(v[0],w,!0),t.get(v[1],w,!0)])),u.push(i[w]),f.push(M(o,t,w)),g.push(C)):_=!1}_&&(d.push(y),p.push(p.length))}p.sort(function(t,e){return g[t]-g[e]});var S=[],T=[],O=[],k=[],A=[];for(m=0;m<p.length;m++)w=p[m],S[m]=h[w],T[m]=c[w],O[m]=u[w],k[m]=f[w],A[m]=d[w];return{current:S,next:T,stackedOnCurrent:O,stackedOnNext:k,status:A}}},function(t,e,i){var n=i(604),w=i(602),r=i(659),C=w.min,S=w.max,T=w.scaleAndAdd,O=w.copy,k=[],A=[],M=[];function D(t){return isNaN(t[0])||isNaN(t[1])}function c(t,e,i,n,r,o,a,s,l,h,c){for(var u=0,f=i,d=0;d<n;d++){var p=e[f];if(r<=f||f<0)break;if(D(p)){if(c){f+=o;continue}break}if(f===i)t[0<o?"moveTo":"lineTo"](p[0],p[1]),O(A,p);else if(0<l){var g=f+o,v=e[g];if(c)for(;v&&D(e[g]);)v=e[g+=o];var m=.5,y=e[u];if(!(v=e[g])||D(v))O(M,p);else{var _,x;if(D(v)&&!c&&(v=p),w.sub(k,v,y),"x"===h||"y"===h){var b="x"===h?0:1;_=Math.abs(p[b]-y[b]),x=Math.abs(p[b]-v[b])}else _=w.dist(p,y),x=w.dist(p,v);T(M,p,k,-l*(1-(m=x/(x+_))))}C(A,A,s),S(A,A,a),C(M,M,s),S(M,M,a),t.bezierCurveTo(A[0],A[1],M[0],M[1],p[0],p[1]),T(A,p,k,l*m)}else t.lineTo(p[0],p[1]);u=f,f+=o}return d}function u(t,e){var i=[1/0,1/0],n=[-1/0,-1/0];if(e)for(var r=0;r<t.length;r++){var o=t[r];o[0]<i[0]&&(i[0]=o[0]),o[1]<i[1]&&(i[1]=o[1]),o[0]>n[0]&&(n[0]=o[0]),o[1]>n[1]&&(n[1]=o[1])}return{min:e?i:n,max:e?n:i}}var o=n.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:r(n.prototype.brush),buildPath:function(t,e){var i=e.points,n=0,r=i.length,o=u(i,e.smoothConstraint);if(e.connectNulls){for(;0<r&&D(i[r-1]);r--);for(;n<r&&D(i[n]);n++);}for(;n<r;)n+=c(t,i,n,r,r,1,o.min,o.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}),a=n.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:r(n.prototype.brush),buildPath:function(t,e){var i=e.points,n=e.stackedOnPoints,r=0,o=i.length,a=e.smoothMonotone,s=u(i,e.smoothConstraint),l=u(n,e.smoothConstraint);if(e.connectNulls){for(;0<o&&D(i[o-1]);o--);for(;r<o&&D(i[r]);r++);}for(;r<o;){var h=c(t,i,r,o,o,1,s.min,s.max,e.smooth,a,e.connectNulls);c(t,n,r+h-1,h,o,-1,l.min,l.max,e.stackedOnSmooth,a,e.connectNulls),r+=h+1,t.closePath()}}});e.Polyline=o,e.Polygon=a},function(t,e){t.exports=function(t,e){e.eachSeriesByType(t,function(t){var n=t.getData(),r=t.coordinateSystem;if(r){for(var e=[],i=r.dimensions,o=0;o<i.length;o++)e.push(t.coordDimToDataDim(r.dimensions[o])[0]);1===e.length?n.each(e[0],function(t,e){n.setItemLayout(e,isNaN(t)?[NaN,NaN]:r.dataToPoint(t))}):2===e.length&&n.each(e,function(t,e,i){n.setItemLayout(i,isNaN(t)||isNaN(e)?[NaN,NaN]:r.dataToPoint([t,e]))},!0)}})}},function(t,e){var c={average:function(t){for(var e=0,i=0,n=0;n<t.length;n++)isNaN(t[n])||(e+=t[n],i++);return 0===i?NaN:e/i},sum:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i]||0;return e},max:function(t){for(var e=-1/0,i=0;i<t.length;i++)t[i]>e&&(e=t[i]);return e},min:function(t){for(var e=1/0,i=0;i<t.length;i++)t[i]<e&&(e=t[i]);return e},nearest:function(t){return t[0]}},u=function(t,e){return Math.round(t.length/2)};t.exports=function(t,e,i){e.eachSeriesByType(t,function(t){var e=t.getData(),i=t.get("sampling"),n=t.coordinateSystem;if("cartesian2d"===n.type&&i){var r,o=n.getBaseAxis(),a=n.getOtherAxis(o),s=o.getExtent(),l=s[1]-s[0],h=Math.round(e.count()/l);1<h&&("string"==typeof i?r=c[i]:"function"==typeof i&&(r=i),r&&(e=e.downSample(a.dim,1/h,r,u),t.setData(e)))}},this)}},function(t,e,i){var n=i(598),r=i(746);function o(t){r.call(this,t)}o.prototype={constructor:o,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x"),i=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&i.contain(i.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e){var i=this.getAxis("x"),n=this.getAxis("y");return[i.toGlobalCoord(i.dataToCoord(t[0],e)),n.toGlobalCoord(n.dataToCoord(t[1],e))]},pointToData:function(t,e){var i=this.getAxis("x"),n=this.getAxis("y");return[i.coordToData(i.toLocalCoord(t[0]),e),n.coordToData(n.toLocalCoord(t[1]),e)]},getOtherAxis:function(t){return this.getAxis("x"===t.dim?"y":"x")}},n.inherits(o,r);var a=o;t.exports=a},function(t,e,i){var n=i(598);function r(t){return this._axes[t]}var o=function(t){this._axes={},this._dimList=[],this.name=t||""};o.prototype={constructor:o,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return n.map(this._dimList,r,this)},getAxesByScale:function(e){return e=e.toLowerCase(),n.filter(this.getAxes(),function(t){return t.scale.type===e})},addAxis:function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){for(var i=this._dimList,n=t instanceof Array?[]:{},r=0;r<i.length;r++){var o=i[r],a=this._axes[o];n[o]=a[e](t[o])}return n}};var a=o;t.exports=a},function(t,e,i){var n=i(598),o=i(641),r=function(t,e,i,n,r){o.call(this,t,e,i),this.type=n||"value",this.position=r||"bottom"};r.prototype={constructor:r,index:0,onZero:!1,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getGlobalExtent:function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},getOtherAxis:function(){this.grid.getOtherAxis()},isLabelIgnored:function(t){if("category"===this.type){var e=this.getLabelInterval();return"function"==typeof e&&!e(t,this.scale.getLabel(t))||t%(e+1)}},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},toLocalCoord:null,toGlobalCoord:null},n.inherits(r,o);var a=r;t.exports=a},function(t,e,i){i(664);var n=i(611).extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});t.exports=n},function(t,e,i){var l=i(598),n=i(679),r=i(611),o=i(612),h=o.getLayoutParams,c=o.mergeLayoutParam,u=["value","category","time","log"];t.exports=function(a,t,s,e){l.each(u,function(o){t.extend({type:a+"Axis."+o,mergeDefaultAndTheme:function(t,e){var i=this.layoutMode,n=i?h(t):{},r=e.getTheme();l.merge(t,r.get(o+"Axis")),l.merge(t,this.getDefaultOption()),t.type=s(a,t),i&&c(t,n,i)},defaultOption:l.mergeAll([{},n[o+"Axis"],e],!0)})}),r.registerSubTypeDefaulter(a+"Axis",l.curry(s,a))}},function(t,e,i){i(664),i(751)},function(t,e,i){var S=i(598),T=i(599),l=i(642),n=i(665),h=i(666),O=l.ifIgnoreOnTick,k=l.getInterval,c=["axisLine","axisTickLabel","axisName"],u=["splitArea","splitLine"],f=n.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(e,t,i,n){this.group.removeAll();var r=this._axisGroup;if(this._axisGroup=new T.Group,this.group.add(this._axisGroup),e.get("show")){var o=e.getCoordSysModel(),a=h.layout(o,e),s=new l(e,a);S.each(c,s.add,s),this._axisGroup.add(s.getGroup()),S.each(u,function(t){e.get(t+".show")&&this["_"+t](e,o,a.labelInterval)},this),T.groupTransition(r,this._axisGroup,e),f.superCall(this,"render",e,t,i,n)}},_splitLine:function(t,e,i){var n=t.axis;if(!n.scale.isBlank()){var r=t.getModel("splitLine"),o=r.getModel("lineStyle"),a=o.get("color"),s=k(r,i);a=S.isArray(a)?a:[a];for(var l=e.coordinateSystem.getRect(),h=n.isHorizontal(),c=0,u=n.getTicksCoords(),f=n.scale.getTicks(),d=t.get("axisLabel.showMinLabel"),p=t.get("axisLabel.showMaxLabel"),g=[],v=[],m=o.getLineStyle(),y=0;y<u.length;y++)if(!O(n,y,s,u.length,d,p)){var _=n.toGlobalCoord(u[y]);h?(g[0]=_,g[1]=l.y,v[0]=_,v[1]=l.y+l.height):(g[0]=l.x,g[1]=_,v[0]=l.x+l.width,v[1]=_);var x=c++%a.length;this._axisGroup.add(new T.Line(T.subPixelOptimizeLine({anid:"line_"+f[y],shape:{x1:g[0],y1:g[1],x2:v[0],y2:v[1]},style:S.defaults({stroke:a[x]},m),silent:!0})))}}},_splitArea:function(t,e,i){var n=t.axis;if(!n.scale.isBlank()){var r=t.getModel("splitArea"),o=r.getModel("areaStyle"),a=o.get("color"),s=e.coordinateSystem.getRect(),l=n.getTicksCoords(),h=n.scale.getTicks(),c=n.toGlobalCoord(l[0]),u=n.toGlobalCoord(l[0]),f=0,d=k(r,i),p=o.getAreaStyle();a=S.isArray(a)?a:[a];for(var g=t.get("axisLabel.showMinLabel"),v=t.get("axisLabel.showMaxLabel"),m=1;m<l.length;m++)if(!O(n,m,d,l.length,g,v)){var y,_,x,b,w=n.toGlobalCoord(l[m]);n.isHorizontal()?(y=c,_=s.y,x=w-y,b=s.height):(y=s.x,_=u,x=s.width,b=w-_);var C=f++%a.length;this._axisGroup.add(new T.Rect({anid:"area_"+h[m],shape:{x:y,y:_,width:x,height:b},style:S.defaults({fill:a[C]},p),silent:!0})),c=y+x,u=_+b}}}});f.extend({type:"xAxis"}),f.extend({type:"yAxis"})},function(t,e,i){var n=i(600),r=i(598),o=i(625),a=i(753);i(754),i(755),i(756),n.registerPreprocessor(function(t){if(t){(!t.axisPointer||0===t.axisPointer.length)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!r.isArray(e)&&(t.axisPointer.link=[e])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=o.collect(t,e)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},a)},function(t,e,i){var x=i(598),n=i(601),u=i(625),b=i(667),w=x.each,C=x.curry,S=n.makeGetter();function T(t,e,i,n,r){var o=t.axis;if(!o.scale.isBlank()&&o.containData(e))if(t.involveSeries){var l,a,h,c,u,f,d,p,s=(l=e,h=(a=t).axis,c=h.dim,u=l,f=[],d=Number.MAX_VALUE,p=-1,w(a.seriesModels,function(e,t){var i,n,r=e.coordDimToDataDim(c);if(e.getAxisTooltipData){var o=e.getAxisTooltipData(r,l,h);n=o.dataIndices,i=o.nestestValue}else{if(!(n=e.getData().indicesOfNearest(r[0],l,!1,"category"===h.type?.5:null)).length)return;i=e.getData().get(r[0],n[0])}if(null!=i&&isFinite(i)){var a=l-i,s=Math.abs(a);s<=d&&((s<d||0<=a&&p<0)&&(d=s,p=a,u=i,f.length=0),w(n,function(t){f.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})}))}}),{payloadBatch:f,snapToValue:u}),g=s.payloadBatch,v=s.snapToValue;g[0]&&null==r.seriesIndex&&x.extend(r,g[0]),!n&&t.snap&&o.containData(v)&&null!=v&&(e=v),i.showPointer(t,e,g,r),i.showTooltip(t,s,v)}else i.showPointer(t,e)}function O(t,e,i,n){t[e.key]={value:i,payloadBatch:n}}function k(t,e,i,n){var r=i.payloadBatch,o=e.axis,a=o.model,s=e.axisPointerModel;if(e.triggerTooltip&&r.length){var l=e.coordSys.model,h=u.makeKey(l),c=t.map[h];c||(c=t.map[h]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:n,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:r.slice()})}}function A(t){var e=t.axis.model,i={},n=i.axisDim=t.axis.dim;return i.axisIndex=i[n+"AxisIndex"]=e.componentIndex,i.axisName=i[n+"AxisName"]=e.name,i.axisId=i[n+"AxisId"]=e.id,i}function M(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}t.exports=function(t,e,i){var n=t.currTrigger,a=[t.x,t.y],r=t,o=t.dispatchAction||x.bind(i.dispatchAction,i),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){M(a)&&(a=b({seriesIndex:r.seriesIndex,dataIndex:r.dataIndex},e).point);var l=M(a),h=r.axesInfo,c=s.axesInfo,u="leave"===n||M(a),f={},d={},p={list:[],map:{}},g={showPointer:C(O,d),showTooltip:C(k,p)};w(s.coordSysMap,function(t,e){var o=l||t.containPoint(a);w(s.coordSysAxesInfo[e],function(t,e){var i=t.axis,n=function(t,e){for(var i=0;i<(t||[]).length;i++){var n=t[i];if(e.axis.dim===n.axisDim&&e.axis.model.componentIndex===n.axisIndex)return n}}(h,t);if(!u&&o&&(!h||n)){var r=n&&n.value;null!=r||l||(r=i.pointToData(a)),null!=r&&T(t,r,g,!1,f)}})});var v,m,y,_={};return w(c,function(r,t){var o=r.linkGroup;o&&!d[t]&&w(o.axesInfo,function(t,e){var i=d[e];if(t!==r&&i){var n=i.value;o.mapper&&(n=r.axis.scale.parse(o.mapper(n,A(t),A(r)))),_[r.key]=n}})}),w(_,function(t,e){T(c[e],t,g,!0,f)}),v=d,m=c,y=f.axesInfo=[],w(m,function(t,e){var i=t.axisPointerModel.option,n=v[e];n?(!t.useHandle&&(i.status="show"),i.value=n.value,i.seriesDataIndices=(n.payloadBatch||[]).slice()):!t.useHandle&&(i.status="hide"),"show"===i.status&&y.push({axisDim:t.axis.dim,axisIndex:t.axis.model.componentIndex,value:i.value})}),function(t,e,i,n){if(M(e)||!t.list.length)return n({type:"hideTip"});var r=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:i.tooltipOption,position:i.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:t.list})}(p,a,t,o),function(t,e,i){var n=i.getZr(),r="axisPointerLastHighlights",o=S(n)[r]||{},a=S(n)[r]={};w(t,function(t,e){var i=t.axisPointerModel.option;"show"===i.status&&w(i.seriesDataIndices,function(t){var e=t.seriesIndex+" | "+t.dataIndex;a[e]=t})});var s=[],l=[];x.each(o,function(t,e){!a[e]&&l.push(t)}),x.each(a,function(t,e){!o[e]&&s.push(t)}),l.length&&i.dispatchAction({type:"downplay",escapeConnect:!0,batch:l}),s.length&&i.dispatchAction({type:"highlight",escapeConnect:!0,batch:s})}(c,0,i),f}}},function(t,e,i){var n=i(600).extendComponentModel({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});t.exports=n},function(t,e,i){var n=i(600),o=i(668),r=n.extendComponentView({type:"axisPointer",render:function(t,e,i){var n=e.getComponent("tooltip"),r=t.get("triggerOn")||n&&n.get("triggerOn")||"mousemove|click";o.register("axisPointer",i,function(t,e,i){"none"!==r&&("leave"===t||0<=r.indexOf(t))&&i({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})})},remove:function(t,e){o.unregister(e.getZr(),"axisPointer"),r.superApply(this._model,"remove",arguments)},dispose:function(t,e){o.unregister("axisPointer",e),r.superApply(this._model,"dispose",arguments)}}),a=r;t.exports=a},function(t,e,i){var o=i(599),n=i(757),d=i(669),p=i(666),r=i(665),a=n.extend({makeElOption:function(t,e,i,n,r){var o=i.axis,a=o.grid,s=n.get("type"),l=g(a,o).getOtherAxis(o).getGlobalExtent(),h=o.toGlobalCoord(o.dataToCoord(e,!0));if(s&&"none"!==s){var c=d.buildElStyle(n),u=v[s](o,h,l,c);u.style=c,t.graphicKey=u.type,t.pointer=u}var f=p.layout(a.model,i);d.buildCartesianSingleLabelElOption(e,t,f,i,n,r)},getHandleTransform:function(t,e,i){var n=p.layout(e.axis.grid.model,e,{labelInside:!1});return n.labelMargin=i.get("handle.margin"),{position:d.getTransformedPosition(e.axis,t,n),rotation:n.rotation+(n.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,i,n){var r=i.axis,o=r.grid,a=r.getGlobalExtent(!0),s=g(o,r).getOtherAxis(r).getGlobalExtent(),l="x"===r.dim?0:1,h=t.position;h[l]+=e[l],h[l]=Math.min(a[1],h[l]),h[l]=Math.max(a[0],h[l]);var c=(s[1]+s[0])/2,u=[c,c];u[l]=h[l];return{position:h,rotation:t.rotation,cursorPoint:u,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}}});function g(t,e){var i={};return i[e.dim+"AxisIndex"]=e.index,t.getCartesian(i)}var v={line:function(t,e,i,n){var r=d.makeLineShape([e,i[0]],[e,i[1]],s(t));return o.subPixelOptimizeLine({shape:r,style:n}),{type:"Line",shape:r}},shadow:function(t,e,i,n){var r=t.getBandWidth(),o=i[1]-i[0];return{type:"Rect",shape:d.makeRectShape([e-r/2,i[0]],[r,o],s(t))}}};function s(t){return"x"===t.dim?0:1}r.registerAxisPointerClass("CartesianAxisPointer",a);var l=a;t.exports=l},function(t,e,i){var f=i(598),n=i(610),d=i(599),h=i(625),l=i(619),c=i(634),a=i(601).makeGetter(),s=f.clone,u=f.bind;function r(){}function p(t,e,i,n){(function i(n,t){{if(f.isObject(n)&&f.isObject(t)){var r=!0;return f.each(t,function(t,e){r=r&&i(n[e],t)}),!!r}return n===t}})(a(i).lastProp,n)||(a(i).lastProp=n,e?d.updateProps(i,n,t):(i.stopAnimation(),i.attr(n)))}function o(t,e){t[e.get("label.show")?"show":"hide"]()}function g(t){return{position:t.position.slice(),rotation:t.rotation||0}}function v(t,e,i){var n=e.get("z"),r=e.get("zlevel");t&&t.traverse(function(t){"group"!==t.type&&(null!=n&&(t.z=n),null!=r&&(t.zlevel=r),t.silent=i)})}(r.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(t,e,i,n){var r=e.get("value"),o=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=i,n||this._lastValue!==r||this._lastStatus!==o){this._lastValue=r,this._lastStatus=o;var a=this._group,s=this._handle;if(!o||"hide"===o)return a&&a.hide(),void(s&&s.hide());a&&a.show(),s&&s.show();var l={};this.makeElOption(l,r,t,e,i);var h=l.graphicKey;h!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=h;var c=this._moveAnimation=this.determineAnimation(t,e);if(a){var u=f.curry(p,e,c);this.updatePointerEl(a,l,u,e),this.updateLabelEl(a,l,u,e)}else a=this._group=new d.Group,this.createPointerEl(a,l,t,e),this.createLabelEl(a,l,t,e),i.getZr().add(a);v(a,e,!0),this._renderHandle(r)}},remove:function(t){this.clear(t)},dispose:function(t){this.clear(t)},determineAnimation:function(t,e){var i=e.get("animation"),n=t.axis,r="category"===n.type,o=e.get("snap");if(!o&&!r)return!1;if("auto"===i||null==i){var a=this.animationThreshold;if(r&&n.getBandWidth()>a)return!0;if(o){var s=h.getAxisInfo(t).seriesDataCount,l=n.getExtent();return Math.abs(l[0]-l[1])/s>a}return!1}return!0===i},makeElOption:function(t,e,i,n,r){},createPointerEl:function(t,e,i,n){var r=e.pointer;if(r){var o=a(t).pointerEl=new d[r.type](s(e.pointer));t.add(o)}},createLabelEl:function(t,e,i,n){if(e.label){var r=a(t).labelEl=new d.Rect(s(e.label));t.add(r),o(r,n)}},updatePointerEl:function(t,e,i){var n=a(t).pointerEl;n&&(n.setStyle(e.pointer.style),i(n,{shape:e.pointer.shape}))},updateLabelEl:function(t,e,i,n){var r=a(t).labelEl;r&&(r.setStyle(e.label.style),i(r,{shape:e.label.shape,position:e.label.position}),o(r,n))},_renderHandle:function(t){if(!this._dragging&&this.updateHandleTransform){var e,i=this._axisPointerModel,n=this._api.getZr(),r=this._handle,o=i.getModel("handle"),a=i.get("status");if(!o.get("show")||!a||"hide"===a)return r&&n.remove(r),void(this._handle=null);this._handle||(e=!0,r=this._handle=d.createIcon(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){l.stop(t.event)},onmousedown:u(this._onHandleDragMove,this,0,0),drift:u(this._onHandleDragMove,this),ondragend:u(this._onHandleDragEnd,this)}),n.add(r)),v(r,i,!1);r.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=o.get("size");f.isArray(s)||(s=[s,s]),r.attr("scale",[s[0]/2,s[1]/2]),c.createOrUpdate(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},_moveHandleToValue:function(t,e){p(this._axisPointerModel,!e&&this._moveAnimation,this._handle,g(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(t,e){var i=this._handle;if(i){this._dragging=!0;var n=this.updateHandleTransform(g(i),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=n,i.stopAnimation(),i.attr(g(n)),a(i).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},_onHandleDragEnd:function(t){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),i=this._group,n=this._handle;e&&i&&(this._lastGraphicKey=null,i&&e.remove(i),n&&e.remove(n),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(t,e,i){return{x:t[i=i||0],y:t[1-i],width:e[i],height:e[1-i]}}}).constructor=r,n.enableClassExtend(r);var m=r;t.exports=m},function(t,e,i){var n=i(600).extendComponentModel({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:8,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});t.exports=n},function(t,e,i){var n=i(600),C=i(598),c=i(606),r=i(760),f=i(607),o=i(603),a=i(599),u=i(667),S=i(612),s=i(609),l=i(668),d=i(614),p=i(669),g=C.bind,v=C.each,T=o.parsePercent,m=new a.Rect({shape:{x:-1,y:-1,width:2,height:2}}),h=n.extendComponentView({type:"tooltip",init:function(t,e){if(!c.node){var i=new r(e.getDom(),e);this._tooltipContent=i}},render:function(t,e,i){if(!c.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=i,this._lastDataByCoordSys=null,this._alwaysShowContent=t.get("alwaysShowContent");var n=this._tooltipContent;n.update(),n.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var n=this._tooltipModel.get("triggerOn");l.register("itemTooltip",this._api,g(function(t,e,i){"none"!==n&&(0<=n.indexOf(t)?this._tryShow(e,i):"leave"===t&&this._hide(i))},this))},_keepShow:function(){var t=this._tooltipModel,e=this._ecModel,i=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var n=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){n.manuallyShowTip(t,e,i,{x:n._lastX,y:n._lastY})})}},manuallyShowTip:function(t,e,i,n){if(n.from!==this.uid&&!c.node){var r=_(n,i);this._ticket="";var o=n.dataByCoordSys;if(n.tooltip&&null!=n.x&&null!=n.y){var a=m;a.position=[n.x,n.y],a.update(),a.tooltip=n.tooltip,this._tryShow({offsetX:n.x,offsetY:n.y,target:a},r)}else if(o)this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,event:{},dataByCoordSys:n.dataByCoordSys,tooltipOption:n.tooltipOption},r);else if(null!=n.seriesIndex){if(this._manuallyAxisShowTip(t,e,i,n))return;var s=u(n,e),l=s.point[0],h=s.point[1];null!=l&&null!=h&&this._tryShow({offsetX:l,offsetY:h,position:n.position,target:s.el,event:{}},r)}else null!=n.x&&null!=n.y&&(i.dispatchAction({type:"updateAxisPointer",x:n.x,y:n.y}),this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,target:i.getZr().findHover(n.x,n.y).target,event:{}},r))}},manuallyHideTip:function(t,e,i,n){var r=this._tooltipContent;this._alwaysShowContent||r.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,n.from!==this.uid&&this._hide(_(n,i))},_manuallyAxisShowTip:function(t,e,i,n){var r=n.seriesIndex,o=n.dataIndex,a=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=r&&null!=o&&null!=a){var s=e.getSeriesByIndex(r);if(s)if("axis"===(t=y([s.getData().getItemModel(o),s,(s.coordinateSystem||{}).model,t])).get("trigger"))return i.dispatchAction({type:"updateAxisPointer",seriesIndex:r,dataIndex:o,position:n.position}),!0}},_tryShow:function(t,e){var i=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var n=t.dataByCoordSys;n&&n.length?this._showAxisTooltip(n,t):i&&null!=i.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(t,i,e)):i&&i.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(t,i,e)):(this._lastDataByCoordSys=null,this._hide(e))}},_showOrMove:function(t,e){var i=t.get("showDelay");e=C.bind(e,this),clearTimeout(this._showTimout),0<i?this._showTimout=setTimeout(e,i):e()},_showAxisTooltip:function(t,e){var h=this._ecModel,i=this._tooltipModel,n=[e.offsetX,e.offsetY],c=[],u=[],r=y([e.tooltipOption,i]);v(t,function(t){v(t.dataByAxis,function(r){var o=h.getComponent(r.axisDim+"Axis",r.axisIndex),a=r.value,s=[];if(o&&null!=a){var l=p.getValueLabel(a,o.axis,h,r.seriesDataIndices,r.valueLabelOpt);C.each(r.seriesDataIndices,function(t){var e=h.getSeriesByIndex(t.seriesIndex),i=t.dataIndexInside,n=e&&e.getDataParams(i);n.axisDim=r.axisDim,n.axisIndex=r.axisIndex,n.axisType=r.axisType,n.axisId=r.axisId,n.axisValue=d.getAxisRawValue(o.axis,a),n.axisValueLabel=l,n&&(u.push(n),s.push(e.formatTooltip(i,!0)))});var t=l;c.push((t?f.encodeHTML(t)+"<br />":"")+s.join("<br />"))}})},this),c.reverse(),c=c.join("<br /><br />");var o=e.position;this._showOrMove(r,function(){this._updateContentNotChangedOnAxis(t)?this._updatePosition(r,o,n[0],n[1],this._tooltipContent,u):this._showTooltipContent(r,c,u,Math.random(),n[0],n[1],o)})},_showSeriesItemTooltip:function(t,e,i){var n=this._ecModel,r=e.seriesIndex,o=n.getSeriesByIndex(r),a=e.dataModel||o,s=e.dataIndex,l=e.dataType,h=a.getData(),c=y([h.getItemModel(s),a,o&&(o.coordinateSystem||{}).model,this._tooltipModel]),u=c.get("trigger");if(null==u||"item"===u){var f=a.getDataParams(s,l),d=a.formatTooltip(s,!1,l),p="item_"+a.name+"_"+s;this._showOrMove(c,function(){this._showTooltipContent(c,d,f,p,t.offsetX,t.offsetY,t.position,t.target)}),i({type:"showTip",dataIndexInside:s,dataIndex:h.getRawIndex(s),seriesIndex:r,from:this.uid})}},_showComponentItemTooltip:function(t,e,i){var n=e.tooltip;if("string"==typeof n){n={content:n,formatter:n}}var r=new s(n,this._tooltipModel,this._ecModel),o=r.get("content"),a=Math.random();this._showOrMove(r,function(){this._showTooltipContent(r,o,r.get("formatterParams")||{},a,t.offsetX,t.offsetY,t.position,e)}),i({type:"showTip",from:this.uid})},_showTooltipContent:function(i,t,n,e,r,o,a,s){if(this._ticket="",i.get("showContent")&&i.get("show")){var l=this._tooltipContent,h=i.get("formatter");a=a||i.get("position");var c=t;if(h&&"string"==typeof h)c=f.formatTpl(h,n,!0);else if("function"==typeof h){var u=g(function(t,e){t===this._ticket&&(l.setContent(e),this._updatePosition(i,a,r,o,l,n,s))},this);this._ticket=e,c=h(n,e,u)}l.setContent(c),l.show(i),this._updatePosition(i,a,r,o,l,n,s)}},_updatePosition:function(t,e,i,n,r,o,a){var s=this._api.getWidth(),l=this._api.getHeight();e=e||t.get("position");var h,c,u,f,d,p,g,v,m=r.getSize(),y=t.get("align"),_=t.get("verticalAlign"),x=a&&a.getBoundingRect().clone();if(a&&x.applyTransform(a.transform),"function"==typeof e&&(e=e([i,n],o,r.el,x,{viewSize:[s,l],contentSize:m.slice()})),C.isArray(e))i=T(e[0],s),n=T(e[1],l);else if(C.isObject(e)){e.width=m[0],e.height=m[1];var b=S.getLayoutRect(e,{width:s,height:l});i=b.x,n=b.y,_=y=null}else if("string"==typeof e&&a){i=(w=function(t,e,i){var n=i[0],r=i[1],o=0,a=0,s=e.width,l=e.height;switch(t){case"inside":o=e.x+s/2-n/2,a=e.y+l/2-r/2;break;case"top":o=e.x+s/2-n/2,a=e.y-r-5;break;case"bottom":o=e.x+s/2-n/2,a=e.y+l+5;break;case"left":o=e.x-n-5,a=e.y+l/2-r/2;break;case"right":o=e.x+s+5,a=e.y+l/2-r/2}return[o,a]}(e,x,m))[0],n=w[1]}else{var w;i=(w=function(t,e,i,n,r,o,a){var s=O(i),l=s.width,h=s.height;null!=o&&(n<t+l+o?t-=l+o:t+=o);null!=a&&(r<e+h+a?e-=h+a:e+=a);return[t,e]}(i,n,r.el,s,l,y?null:20,_?null:20))[0],n=w[1]}(y&&(i-=k(y)?m[0]/2:"right"===y?m[0]:0),_&&(n-=k(_)?m[1]/2:"bottom"===_?m[1]:0),t.get("confine"))&&(i=(w=(h=i,c=n,u=r.el,f=s,d=l,p=O(u),g=p.width,v=p.height,h=Math.min(h+g,f)-g,c=Math.min(c+v,d)-v,h=Math.max(h,0),c=Math.max(c,0),[h,c]))[0],n=w[1]);r.moveTo(i,n)},_updateContentNotChangedOnAxis:function(n){var t=this._lastDataByCoordSys,a=!!t&&t.length===n.length;return a&&v(t,function(t,e){var i=t.dataByAxis||{},o=(n[e]||{}).dataByAxis||[];(a&=i.length===o.length)&&v(i,function(t,e){var i=o[e]||{},n=t.seriesDataIndices||[],r=i.seriesDataIndices||[];(a&=t.value===i.value&&t.axisType===i.axisType&&t.axisId===i.axisId&&n.length===r.length)&&v(n,function(t,e){var i=r[e];a&=t.seriesIndex===i.seriesIndex&&t.dataIndex===i.dataIndex})})}),this._lastDataByCoordSys=n,!!a},_hide:function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},dispose:function(t,e){c.node||(this._tooltipContent.hide(),l.unregister("itemTooltip",e))}});function y(t){for(var e=t.pop();t.length;){var i=t.pop();i&&(i instanceof s&&(i=i.get("tooltip",!0)),"string"==typeof i&&(i={formatter:i}),e=new s(i,e,e.ecModel))}return e}function _(t,e){return t.dispatchAction||C.bind(e.dispatchAction,e)}function O(t){var e=t.clientWidth,i=t.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(t);n&&(e+=parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10)+parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),i+=parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))}return{width:e,height:i}}function k(t){return"center"===t||"middle"===t}t.exports=h},function(t,e,i){var d=i(598),p=i(618),o=i(619),g=i(606),v=i(607),m=d.each,y=v.toCamelCase,_=["","-webkit-","-moz-","-o-"];function n(r){var t,e,i,n,o,a,s,l=[],h=r.get("transitionDuration"),c=r.get("backgroundColor"),u=r.getModel("textStyle"),f=r.get("padding");return h&&l.push((i="left "+(t=h)+"s "+(e="cubic-bezier(0.23, 1, 0.32, 1)")+",top "+t+"s "+e,d.map(_,function(t){return t+"transition:"+i}).join(";"))),c&&(g.canvasSupported?l.push("background-Color:"+c):(l.push("background-Color:#"+p.toHex(c)),l.push("filter:alpha(opacity=70)"))),m(["width","color","radius"],function(t){var e="border-"+t,i=y(e),n=r.get(i);null!=n&&l.push(e+":"+n+("color"===t?"":"px"))}),l.push((o=[],a=(n=u).get("fontSize"),(s=n.getTextColor())&&o.push("color:"+s),o.push("font:"+n.getFont()),a&&o.push("line-height:"+Math.round(3*a/2)+"px"),m(["decoration","align"],function(t){var e=n.get(t);e&&o.push("text-"+t+":"+e)}),o.join(";"))),null!=f&&l.push("padding:"+v.normalizeCssArray(f).join("px ")+"px"),l.join(";")+";"}function r(i,t){var e=document.createElement("div"),n=this._zr=t.getZr();this.el=e,this._x=t.getWidth()/2,this._y=t.getHeight()/2,i.appendChild(e),this._container=i,this._show=!1,this._hideTimeout;var r=this;e.onmouseenter=function(){r._enterable&&(clearTimeout(r._hideTimeout),r._show=!0),r._inContent=!0},e.onmousemove=function(t){if(t=t||window.event,!r._enterable){var e=n.handler;o.normalizeEvent(i,t,!0),e.dispatch("mousemove",t)}},e.onmouseleave=function(){r._enterable&&r._show&&r.hideLater(r._hideDelay),r._inContent=!1}}r.prototype={constructor:r,_enterable:!0,update:function(){var t=this._container,e=t.currentStyle||document.defaultView.getComputedStyle(t),i=t.style;"absolute"!==i.position&&"absolute"!==e.position&&(i.position="relative")},show:function(t){clearTimeout(this._hideTimeout);var e=this.el;e.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+n(t)+";left:"+this._x+"px;top:"+this._y+"px;"+(t.get("extraCssText")||""),e.style.display=e.innerHTML?"block":"none",this._show=!0},setContent:function(t){this.el.innerHTML=null==t?"":t},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el;return[t.clientWidth,t.clientHeight]},moveTo:function(t,e){var i,n=this._zr;n&&n.painter&&(i=n.painter.getViewportRootOffset())&&(t+=i.offsetLeft,e+=i.offsetTop);var r=this.el.style;r.left=t+"px",r.top=e+"px",this._x=t,this._y=e},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(d.bind(this.hide,this),t)):this.hide())},isShow:function(){return this._show}};var a=r;t.exports=a},function(t,e,i){var n=i(600),r=i(598),o=i(609),a=n.extendComponentModel({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(t,e,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{}},mergeOption:function(t){a.superCall(this,"mergeOption",t)},optionUpdated:function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,i=0;i<t.length;i++){var n=t[i].get("name");if(this.isSelected(n)){this.select(n),e=!0;break}}!e&&this.select(t[0].get("name"))}},_updateData:function(t){var e=r.map(this.get("data")||[],function(t){return"string"!=typeof t&&"number"!=typeof t||(t={name:t}),new o(t,this,this.ecModel)},this);this._data=e;var i=r.map(t.getSeries(),function(t){return t.name});t.eachSeries(function(t){if(t.legendDataProvider){var e=t.legendDataProvider();i=i.concat(e.mapArray(e.getName))}}),this._availableNames=i},getData:function(){return this._data},select:function(t){var e=this.option.selected;if("single"===this.get("selectedMode")){var i=this._data;r.each(i,function(t){e[t.get("name")]=!1})}e[t]=!0},unSelect:function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},toggleSelected:function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},isSelected:function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&0<=r.indexOf(this._availableNames,t)},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",textStyle:{color:"#333"},selectedMode:!0,tooltip:{show:!1}}}),s=a;t.exports=s},function(t,e,i){var n=i(600),s=i(598);function r(e,i,t){var r,o={},a="toggleSelected"===e;return t.eachComponent("legend",function(n){a&&null!=r?n[r?"select":"unSelect"](i.name):(n[e](i.name),r=n.isSelected(i.name));var t=n.getData();s.each(t,function(t){var e=t.get("name");if("\n"!==e&&""!==e){var i=n.isSelected(e);o.hasOwnProperty(e)?o[e]=o[e]&&i:o[e]=i}})}),{name:i.name,selected:o}}n.registerAction("legendToggleSelect","legendselectchanged",s.curry(r,"toggleSelected")),n.registerAction("legendSelect","legendselected",s.curry(r,"select")),n.registerAction("legendUnSelect","legendunselected",s.curry(r,"unSelect"))},function(t,e,i){i(605).__DEV__;var n=i(600),S=i(598),T=i(620).createSymbol,O=i(599),c=i(764).makeBackground,u=i(612),g=S.curry,r=S.each,k=O.Group,o=n.extendComponentView({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new k),this._backgroundEl},getContentGroup:function(){return this._contentGroup},render:function(t,e,i){if(this.resetInner(),t.get("show",!0)){var n=t.get("align");n&&"auto"!==n||(n="right"===t.get("left")&&"vertical"===t.get("orient")?"right":"left"),this.renderInner(n,t,e,i);var r=t.getBoxLayoutParams(),o={width:i.getWidth(),height:i.getHeight()},a=t.get("padding"),s=u.getLayoutRect(r,o,a),l=this.layoutInner(t,n,s),h=u.getLayoutRect(S.defaults({width:l.width,height:l.height},r),o,a);this.group.attr("position",[h.x-l.x,h.y-l.y]),this.group.add(this._backgroundEl=c(l,t))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl)},renderInner:function(l,h,c,u){var f=this.getContentGroup(),d=S.createHashMap(),p=h.get("selectedMode");r(h.getData(),function(r,o){var a=r.get("name");if(this.newlineDisabled||""!==a&&"\n"!==a){var t=c.getSeriesByName(a)[0];if(!d.get(a))if(t){var e=t.getData(),i=e.getVisual("color");"function"==typeof i&&(i=i(t.getDataParams(0)));var n=e.getVisual("legendSymbol")||"roundRect",s=e.getVisual("symbol");this._createItem(a,o,r,h,n,s,l,i,p).on("click",g(v,a,u)).on("mouseover",g(m,t,null,u)).on("mouseout",g(y,t,null,u)),d.set(a,!0)}else c.eachRawSeries(function(t){if(!d.get(a)&&t.legendDataProvider){var e=t.legendDataProvider(),i=e.indexOfName(a);if(i<0)return;var n=e.getItemVisual(i,"color");this._createItem(a,o,r,h,"roundRect",null,l,n,p).on("click",g(v,a,u)).on("mouseover",g(m,t,a,u)).on("mouseout",g(y,t,a,u)),d.set(a,!0)}},this)}else f.add(new k({newline:!0}))},this)},_createItem:function(t,e,i,n,r,o,a,s,l){var h=n.get("itemWidth"),c=n.get("itemHeight"),u=n.get("inactiveColor"),f=n.isSelected(t),d=new k,p=i.getModel("textStyle"),g=i.get("icon"),v=i.getModel("tooltip"),m=v.parentModel;if(r=g||r,d.add(T(r,0,0,h,c,f?s:u,!0)),!g&&o&&(o!==r||"none"==o)){var y=.8*c;"none"===o&&(o="circle"),d.add(T(o,(h-y)/2,(c-y)/2,y,y,f?s:u))}var _="left"===a?h+5:-5,x=a,b=n.get("formatter"),w=t;"string"==typeof b&&b?w=b.replace("{name}",null!=t?t:""):"function"==typeof b&&(w=b(t)),d.add(new O.Text({style:O.setTextStyle({},p,{text:w,x:_,y:c/2,textFill:f?p.getTextColor():u,textAlign:x,textVerticalAlign:"middle"})}));var C=new O.Rect({shape:d.getBoundingRect(),invisible:!0,tooltip:v.get("show")?S.extend({content:t,formatter:m.get("formatter",!0)||function(){return t},formatterParams:{componentType:"legend",legendIndex:n.componentIndex,name:t,$vars:["name"]}},v.option):null});return d.add(C),d.eachChild(function(t){t.silent=!0}),C.silent=!l,this.getContentGroup().add(d),O.setHoverStyle(d),d.__legendDataIndex=e,d},layoutInner:function(t,e,i){var n=this.getContentGroup();u.box(t.get("orient"),n,t.get("itemGap"),i.width,i.height);var r=n.getBoundingRect();return n.attr("position",[-r.x,-r.y]),this.group.getBoundingRect()}});function v(t,e){e.dispatchAction({type:"legendToggleSelect",name:t})}function m(t,e,i){var n=i.getZr().storage.getDisplayList()[0];n&&n.useHoverLayer||t.get("legendHoverLink")&&i.dispatchAction({type:"highlight",seriesName:t.name,name:e})}function y(t,e,i){var n=i.getZr().storage.getDisplayList()[0];n&&n.useHoverLayer||t.get("legendHoverLink")&&i.dispatchAction({type:"downplay",seriesName:t.name,name:e})}t.exports=o},function(t,e,i){var n=i(612),s=n.getLayoutRect,l=n.box,h=n.positionElement,r=i(607),o=i(599);e.layout=function(t,e,i){var n=e.getBoxLayoutParams(),r=e.get("padding"),o={width:i.getWidth(),height:i.getHeight()},a=s(n,o,r);l(e.get("orient"),t,e.get("itemGap"),a.width,a.height),h(t,n,o,r)},e.makeBackground=function(t,e){var i=r.normalizeCssArray(e.get("padding")),n=e.getItemStyle(["color","opacity"]);return n.fill=e.get("backgroundColor"),t=new o.Rect({shape:{x:t.x-i[3],y:t.y-i[0],width:t.width+i[1]+i[3],height:t.height+i[0]+i[2],r:e.get("borderRadius")},style:n,silent:!0,z2:-1})}},function(t,e){t.exports=function(t){var i=t.findComponents({mainType:"legend"});i&&i.length&&t.filterSeries(function(t){for(var e=0;e<i.length;e++)if(!i[e].isSelected(t.name))return!1;return!0})}},function(t,e,i){i(309),i(308),t.exports=i(767)},function(t,e,i){var n=i(37),r=i(310);t.exports=i(26).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,i){t.exports=i.p+"static/img/loading_bw.ff80b9e.gif"},function(t,e,i){t.exports={default:i(775),__esModule:!0}},function(t,e,i){t.exports={default:i(778),__esModule:!0}},function(t,e,i){var n=i(772);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(590)("2a3f73c4",n,!0,{})},function(t,e,i){(t.exports=i(589)()).push([t.i,"",""])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"loading",props:["loadingState","classname"]}},function(t,e,i){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return this.loadingState?e("div",{staticClass:"loadingContent",class:this.classname},[e("img",{attrs:{src:i(768)}})]):this._e()},staticRenderFns:[]}},function(t,e,i){i(776),t.exports=i(26).Object.keys},function(t,e,i){var n=i(125),r=i(124);i(777)("keys",function(){return function(t){return r(n(t))}})},function(t,e,i){var r=i(49),o=i(26),a=i(85);t.exports=function(t,e){var i=(o.Object||{})[t]||Object[t],n={};n[t]=e(i),r(r.S+r.F*a(function(){i(1)}),"Object",n)}},function(t,e,i){i(779),t.exports=i(26).Object.values},function(t,e,i){var n=i(49),r=i(780)(!1);n(n.S,"Object",{values:function(t){return r(t)}})},function(t,e,i){var l=i(124),h=i(86),c=i(313).f;t.exports=function(s){return function(t){for(var e,i=h(t),n=l(i),r=n.length,o=0,a=[];o<r;)c.call(i,e=n[o++])&&a.push(s?[e,i[e]]:i[e]);return a}}},function(t,e,i){"use strict";i.d(e,"a",function(){return v});var n=i(770),x=i.n(n),r=i(677),b=i.n(r),o=i(769),w=i.n(o),a=i(305),s=i.n(a),l=i(84),h=i.n(l),c=i(306),u=i.n(c),f=i(311),d=i.n(f),p=i(307),g=i(312),C=i(83),v={data:function(){return{storeAttributeData:[]}},mounted:function(){},computed:d()({},Object(g.c)(["ageText2Value"])),methods:{getStoreAttributeDataAction:function(i,n){var r=this;return u()(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p._21(h()(i),h()(n));case 2:(e=t.sent)&&200===e.code&&(r.storeAttributeData=e.data);case 4:case"end":return t.stop()}},t,r)}))()},sumTest:function(){for(var t=[],e=0;e<8;e+=1){t.push([]);for(var i=0;i<2;i+=1){t[e].push([]);for(var n=0;n<4;n+=1)t[e][i].push(Math.floor(10*Math.random()))}}this.sumAttributes({age:["child","young"],gender:["male","female"]},t)},sumAttributes:function(t,e){if(null===e)return 0;var i=0,n=C.a.category_describes,r=!0,o=!1,a=void 0;try{for(var s,l=b()(n);!(r=(s=l.next()).done);r=!0){var h=s.value;if(-1===w()(t).indexOf(w()(h)[0])){var c=w()(h)[0];t[c]=x()(h[c])}}}catch(t){o=!0,a=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}for(var u in e){var f=w()(n[0])[0],d=n[0][f];if(-1!==t[f].indexOf(d[u]))for(var p in e[u]){var g=w()(n[1])[0],v=n[1][g];if(-1!==t[g].indexOf(v[p]))for(var m in e[u][p]){var y=w()(n[2])[0],_=n[2][y];-1!==t[y].indexOf(_[m])&&(i+=e[u][p][m])}}}return i}}}},,,function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(789),o=(n=r)&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return(0,o.default)(t)}},function(t,e,i){"use strict";e.__esModule=!0;var n=r(i(786)),l=r(i(677));function r(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(Array.isArray(t))return t;if((0,n.default)(Object(t)))return function(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=(0,l.default)(t);!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,i){t.exports={default:i(787),__esModule:!0}},function(t,e,i){i(309),i(308),t.exports=i(788)},function(t,e,i){var n=i(129),r=i(21)("iterator"),o=i(57);t.exports=i(26).isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||o.hasOwnProperty(n(e))}},function(t,e,i){t.exports={default:i(790),__esModule:!0}},function(t,e,i){i(308),i(791),t.exports=i(26).Array.from},function(t,e,i){"use strict";var f=i(62),n=i(49),d=i(125),p=i(314),g=i(315),v=i(128),m=i(792),y=i(310);n(n.S+n.F*!i(316)(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,n,r,o=d(t),a="function"==typeof this?this:Array,s=arguments.length,l=1<s?arguments[1]:void 0,h=void 0!==l,c=0,u=y(o);if(h&&(l=f(l,2<s?arguments[2]:void 0,2)),null==u||a==Array&&g(u))for(i=new a(e=v(o.length));c<e;c++)m(i,c,h?l(o[c],c):o[c]);else for(r=u.call(o),i=new a;!(n=r.next()).done;c++)m(i,c,h?p(r,l,[n.value,c],!0):n.value);return i.length=c,i}})},function(t,e,i){"use strict";var n=i(56),r=i(127);t.exports=function(t,e,i){e in t?n.f(t,e,r(0,i)):t[e]=i}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},,,,,,,,function(t,F,e){"use strict";(function(t){var n=e(1033),o=e(1034),a=e(885);function i(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(i()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,i){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return r(this,t,e,i)}function r(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=c(t,e);return t}(t,e,i,n):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!u.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,i),r=(t=s(t,n)).write(e,i);r!==n&&(t=t.slice(0,r));return t}(t,e,i):function(t,e){if(u.isBuffer(e)){var i=0|f(e.length);return 0===(t=s(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):c(t,e);if("Buffer"===e.type&&a(e.data))return c(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=s(t,e<0?0:0|f(e)),!u.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function c(t,e){var i=e.length<0?0:0|f(e.length);t=s(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function f(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return R(t).length;default:if(n)return j(t).length;e=(""+e).toLowerCase(),n=!0}}function p(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function g(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:v(t,e,i,n,r);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):v(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function v(t,e,i,n,r){var o,a=1,s=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s/=a=2,l/=2,i/=2}function h(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var c=-1;for(o=i;o<s;o++)if(h(t,o)===h(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(s<i+l&&(i=s-l),o=i;0<=o;o--){for(var u=!0,f=0;f<l;f++)if(h(t,o+f)!==h(e,f)){u=!1;break}if(u)return o}return-1}function m(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?r<(n=Number(n))&&(n=r):n=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<n&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[i+a]=s}return a}function y(t,e,i,n){return B(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function _(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function x(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var o,a,s,l,h=t[r],c=null,u=239<h?4:223<h?3:191<h?2:1;if(r+u<=i)switch(u){case 1:h<128&&(c=h);break;case 2:128==(192&(o=t[r+1]))&&127<(l=(31&h)<<6|63&o)&&(c=l);break;case 3:o=t[r+1],a=t[r+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&h)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:o=t[r+1],a=t[r+2],s=t[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&h)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,u=1):65535<c&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),r+=u}return function(t){var e=t.length;if(e<=b)return String.fromCharCode.apply(String,t);var i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=b));return i}(n)}F.Buffer=u,F.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},F.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),F.kMaxLength=i(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,i){return r(null,t,e,i)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,i){return n=null,o=e,a=i,l(r=t),r<=0?s(n,r):void 0!==o?"string"==typeof a?s(n,r).fill(o,a):s(n,r).fill(o):s(n,r);var n,r,o,a},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var i;if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;var n=u.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var o=t[i];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?x(this,0,t):function(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return S(this,e,i);case"utf8":case"utf-8":return x(this,e,i);case"ascii":return w(this,e,i);case"latin1":case"binary":return C(this,e,i);case"base64":return _(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",e=F.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,i,n,r){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(r<=n&&i<=e)return 0;if(r<=n)return-1;if(i<=e)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(n>>>=0),a=(i>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(n,r),h=t.slice(e,i),c=0;c<s;++c)if(l[c]!==h[c]){o=l[c],a=h[c];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},u.prototype.indexOf=function(t,e,i){return g(this,t,e,i,!0)},u.prototype.lastIndexOf=function(t,e,i){return g(this,t,e,i,!1)},u.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||r<i)&&(i=r),0<t.length&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o,a,s,l,h,c,u,f,d,p=!1;;)switch(n){case"hex":return m(this,t,e,i);case"utf8":case"utf-8":return f=e,d=i,B(j(t,(u=this).length-f),u,f,d);case"ascii":return y(this,t,e,i);case"latin1":case"binary":return y(this,t,e,i);case"base64":return l=this,h=e,c=i,B(R(t),l,h,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=e,s=i,B(function(t,e){for(var i,n,r,o=[],a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),n=i>>8,r=i%256,o.push(r),o.push(n);return o}(t,(o=this).length-a),o,a,s);default:if(p)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),p=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function w(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function C(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function S(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||n<i)&&(i=n);for(var r="",o=e;o<i;++o)r+=L(t[o]);return r}function T(t,e,i){for(var n=t.slice(e,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function O(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(i<t+e)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,i,n,r,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r<e||e<o)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function A(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-i,2);r<o;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function M(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-i,4);r<o;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function D(t,e,i,n,r,o){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function I(t,e,i,n,r){return r||D(t,0,i,4),o.write(t,e,i,n,23,4),i+4}function P(t,e,i,n,r){return r||D(t,0,i,8),o.write(t,e,i,n,52,8),i+8}u.prototype.slice=function(t,e){var i,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=u.prototype;else{var r=e-t;i=new u(r,void 0);for(var o=0;o<r;++o)i[o]=this[o+t]}return i},u.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||O(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n},u.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||O(t,e,this.length);for(var n=this[t+--e],r=1;0<e&&(r*=256);)n+=this[t+--e]*r;return n},u.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||O(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return(r*=128)<=n&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||O(t,e,this.length);for(var n=e,r=1,o=this[t+--n];0<n&&(r*=256);)o+=this[t+--n]*r;return(r*=128)<=o&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||k(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,o=0;for(this[e]=255&t;++o<i&&(r*=256);)this[e+o]=t/r&255;return e+i},u.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||k(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,o=1;for(this[e+r]=255&t;0<=--r&&(o*=256);)this[e+r]=t/o&255;return e+i},u.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);k(this,t,e,i,r-1,-r)}var o=0,a=1,s=0;for(this[e]=255&t;++o<i&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+i},u.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);k(this,t,e,i,r-1,-r)}var o=i-1,a=1,s=0;for(this[e+o]=255&t;0<=--o&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+i},u.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,i){return I(this,t,e,!0,i)},u.prototype.writeFloatBE=function(t,e,i){return I(this,t,e,!1,i)},u.prototype.writeDoubleLE=function(t,e,i){return P(this,t,e,!0,i)},u.prototype.writeDoubleBE=function(t,e,i){return P(this,t,e,!1,i)},u.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),0<n&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,o=n-i;if(this===t&&i<e&&e<n)for(r=o-1;0<=r;--r)t[r+e]=this[r+i];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},u.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var a=u.isBuffer(t)?t:j(new u(t,n).toString()),s=a.length;for(o=0;o<i-e;++o)this[o+e]=a[o%s]}return this};var E=/[^+\/0-9A-Za-z-_]/g;function L(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t,e){var i;e=e||1/0;for(var n=t.length,r=null,o=[],a=0;a<n;++a){if(55295<(i=t.charCodeAt(a))&&i<57344){if(!r){if(56319<i){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===n){-1<(e-=3)&&o.push(239,191,189);continue}r=i;continue}if(i<56320){-1<(e-=3)&&o.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&-1<(e-=3)&&o.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function R(t){return n.toByteArray(function(t){var e;if((t=(e=t,e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(E,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}}).call(F,e(48))},function(t,e,i){"use strict";var n=i(837),r=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=u;var o=i(818);o.inherits=i(793);var a=i(890),s=i(894);o.inherits(u,a);for(var l=r(s.prototype),h=0;h<l.length;h++){var c=l[h];u.prototype[c]||(u.prototype[c]=s.prototype[c])}function u(t){if(!(this instanceof u))return new u(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),u.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},,,,,,,,,,,,,,,,function(t,i,e){(function(t){function e(t){return Object.prototype.toString.call(t)}i.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},i.isBoolean=function(t){return"boolean"==typeof t},i.isNull=function(t){return null===t},i.isNullOrUndefined=function(t){return null==t},i.isNumber=function(t){return"number"==typeof t},i.isString=function(t){return"string"==typeof t},i.isSymbol=function(t){return"symbol"==typeof t},i.isUndefined=function(t){return void 0===t},i.isRegExp=function(t){return"[object RegExp]"===e(t)},i.isObject=function(t){return"object"==typeof t&&null!==t},i.isDate=function(t){return"[object Date]"===e(t)},i.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},i.isFunction=function(t){return"function"==typeof t},i.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},i.isBuffer=t.isBuffer}).call(i,e(801).Buffer)},,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";(function(s){!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?t.exports={nextTick:function(t,e,i,n){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var r,o,a=arguments.length;switch(a){case 0:case 1:return s.nextTick(t);case 2:return s.nextTick(function(){t.call(null,e)});case 3:return s.nextTick(function(){t.call(null,e,i)});case 4:return s.nextTick(function(){t.call(null,e,i,n)});default:for(r=new Array(a-1),o=0;o<r.length;)r[o++]=arguments[o];return s.nextTick(function(){t.apply(null,r)})}}}:t.exports=s}).call(e,i(126))},function(t,e,i){var n=i(801),r=n.Buffer;function o(t,e){for(var i in t)e[i]=t[i]}function a(t,e,i){return r(t,e,i)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=a),o(r,a),a.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,i)},a.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=r(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(677),h=i.n(n),r={data:function(){return{}},created:function(){},methods:{getDataByKeys:function(){var t=[];for(var e in this.storeAttributeData){var i={},n=!0,r=!1,o=void 0;try{for(var a,s=h()(this.requestParamKeys);!(n=(a=s.next()).done);n=!0){var l=a.value;i[l]=this.storeAttributeData[e][l]}}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}t.push(i)}return t}}}},,,,,,,,function(Ve,qe,t){var $e;!function(t,e){"use strict";"object"==typeof Ve&&"object"==typeof Ve.exports?Ve.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(C,t){"use strict";var e=[],S=C.document,n=Object.getPrototypeOf,s=e.slice,g=e.concat,l=e.push,r=e.indexOf,i={},o=i.toString,v=i.hasOwnProperty,a=v.toString,h=a.call(Object),m={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},_=function(t){return null!=t&&t===t.window},c={type:!0,src:!0,noModule:!0};function x(t,e,i){var n,r=(e=e||S).createElement("script");if(r.text=t,i)for(n in c)i[n]&&(r[n]=i[n]);e.head.appendChild(r).parentNode.removeChild(r)}function b(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?i[o.call(t)]||"object":typeof t}var T=function(t,e){return new T.fn.init(t,e)},u=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function f(t){var e=!!t&&"length"in t&&t.length,i=b(t);return!y(t)&&!_(t)&&("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t)}T.fn=T.prototype={jquery:"3.3.1",constructor:T,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=T.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return T.each(this,t)},map:function(i){return this.pushStack(T.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(0<=i&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:e.sort,splice:e.splice},T.extend=T.fn.extend=function(){var t,e,i,n,r,o,a=arguments[0]||{},s=1,l=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)i=a[e],a!==(n=t[e])&&(h&&n&&(T.isPlainObject(n)||(r=Array.isArray(n)))?(r?(r=!1,o=i&&Array.isArray(i)?i:[]):o=i&&T.isPlainObject(i)?i:{},a[e]=T.extend(h,o,n)):void 0!==n&&(a[e]=n));return a},T.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==o.call(t))&&(!(e=n(t))||"function"==typeof(i=v.call(e,"constructor")&&e.constructor)&&a.call(i)===h)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){x(t)},each:function(t,e){var i,n=0;if(f(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(u,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(f(Object(t))?T.merge(i,"string"==typeof t?[t]:t):l.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:r.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,o=t.length,a=!i;r<o;r++)!e(t[r],r)!==a&&n.push(t[r]);return n},map:function(t,e,i){var n,r,o=0,a=[];if(f(t))for(n=t.length;o<n;o++)null!=(r=e(t[o],o,i))&&a.push(r);else for(o in t)null!=(r=e(t[o],o,i))&&a.push(r);return g.apply([],a)},guid:1,support:m}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=e[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){i["[object "+e+"]"]=e.toLowerCase()});var d=function(i){var t,d,x,o,r,p,u,g,b,l,h,w,C,a,S,v,s,c,m,T="sizzle"+1*new Date,y=i.document,O=0,n=0,f=at(),_=at(),k=at(),A=function(t,e){return t===e&&(h=!0),0},M={}.hasOwnProperty,e=[],D=e.pop,I=e.push,P=e.push,E=e.slice,L=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+R+"*("+B+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+R+"*\\]",N=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",z=new RegExp(R+"+","g"),H=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),W=new RegExp("^"+R+"*,"+R+"*"),G=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),X=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),Y=new RegExp(N),U=new RegExp("^"+B+"$"),V={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},q=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Q=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),tt=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},nt=function(){w()},rt=yt(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{P.apply(e=E.call(y.childNodes),y.childNodes),e[y.childNodes.length].nodeType}catch(t){P={apply:e.length?function(t,e){I.apply(t,E.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function ot(t,e,i,n){var r,o,a,s,l,h,c,u=e&&e.ownerDocument,f=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==f&&9!==f&&11!==f)return i;if(!n&&((e?e.ownerDocument||e:y)!==C&&w(e),e=e||C,S)){if(11!==f&&(l=Z.exec(t)))if(r=l[1]){if(9===f){if(!(a=e.getElementById(r)))return i;if(a.id===r)return i.push(a),i}else if(u&&(a=u.getElementById(r))&&m(e,a)&&a.id===r)return i.push(a),i}else{if(l[2])return P.apply(i,e.getElementsByTagName(t)),i;if((r=l[3])&&d.getElementsByClassName&&e.getElementsByClassName)return P.apply(i,e.getElementsByClassName(r)),i}if(d.qsa&&!k[t+" "]&&(!v||!v.test(t))){if(1!==f)u=e,c=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(et,it):e.setAttribute("id",s=T),o=(h=p(t)).length;o--;)h[o]="#"+s+" "+mt(h[o]);c=h.join(","),u=J.test(t)&&gt(e.parentNode)||e}if(c)try{return P.apply(i,u.querySelectorAll(c)),i}catch(t){}finally{s===T&&e.removeAttribute("id")}}}return g(t.replace(H,"$1"),e,i,n)}function at(){var n=[];return function t(e,i){return n.push(e+" ")>x.cacheLength&&delete t[n.shift()],t[e+" "]=i}}function st(t){return t[T]=!0,t}function lt(t){var e=C.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var i=t.split("|"),n=i.length;n--;)x.attrHandle[i[n]]=e}function ct(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function ut(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ft(i){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===i}}function dt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&rt(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pt(a){return st(function(o){return o=+o,st(function(t,e){for(var i,n=a([],t.length,o),r=n.length;r--;)t[i=n[r]]&&(t[i]=!(e[i]=t[i]))})})}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in d=ot.support={},r=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},w=ot.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:y;return n!==C&&9===n.nodeType&&n.documentElement&&(a=(C=n).documentElement,S=!r(C),y!==C&&(i=C.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",nt,!1):i.attachEvent&&i.attachEvent("onunload",nt)),d.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),d.getElementsByTagName=lt(function(t){return t.appendChild(C.createComment("")),!t.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=lt(function(t){return a.appendChild(t).id=T,!C.getElementsByName||!C.getElementsByName(T).length}),d.getById?(x.filter.ID=function(t){var e=t.replace(Q,tt);return function(t){return t.getAttribute("id")===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&S){var i=e.getElementById(t);return i?[i]:[]}}):(x.filter.ID=function(t){var i=t.replace(Q,tt);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===i}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&S){var i,n,r,o=e.getElementById(t);if(o){if((i=o.getAttributeNode("id"))&&i.value===t)return[o];for(r=e.getElementsByName(t),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===t)return[o]}return[]}}),x.find.TAG=d.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):d.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},x.find.CLASS=d.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&S)return e.getElementsByClassName(t)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(lt(function(t){a.appendChild(t).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+R+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+R+"*(?:value|"+j+")"),t.querySelectorAll("[id~="+T+"-]").length||v.push("~="),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+T+"+*").length||v.push(".#.+[+~]")}),lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=C.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+R+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&lt(function(t){d.disconnectedMatch=c.call(t,"*"),c.call(t,"[s!='']:x"),s.push("!=",N)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),e=K.test(a.compareDocumentPosition),m=e||K.test(a.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!d.sortDetached&&e.compareDocumentPosition(t)===i?t===C||t.ownerDocument===y&&m(y,t)?-1:e===C||e.ownerDocument===y&&m(y,e)?1:l?L(l,t)-L(l,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var i,n=0,r=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!r||!o)return t===C?-1:e===C?1:r?-1:o?1:l?L(l,t)-L(l,e):0;if(r===o)return ct(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)s.unshift(i);for(;a[n]===s[n];)n++;return n?ct(a[n],s[n]):a[n]===y?-1:s[n]===y?1:0}),C},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==C&&w(t),e=e.replace(X,"='$1']"),d.matchesSelector&&S&&!k[e+" "]&&(!s||!s.test(e))&&(!v||!v.test(e)))try{var i=c.call(t,e);if(i||d.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return 0<ot(e,C,null,[t]).length},ot.contains=function(t,e){return(t.ownerDocument||t)!==C&&w(t),m(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==C&&w(t);var i=x.attrHandle[e.toLowerCase()],n=i&&M.call(x.attrHandle,e.toLowerCase())?i(t,e,!S):void 0;return void 0!==n?n:d.attributes||!S?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},ot.escape=function(t){return(t+"").replace(et,it)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,i=[],n=0,r=0;if(h=!d.detectDuplicates,l=!d.sortStable&&t.slice(0),t.sort(A),h){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return l=null,t},o=ot.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=o(e);return i},(x=ot.selectors={cacheLength:50,createPseudo:st,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Q,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(Q,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return V.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&Y.test(i)&&(e=p(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Q,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=f[t+" "];return e||(e=new RegExp("(^|"+R+")"+t+"("+R+"|$)"))&&f(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(i,n,r){return function(t){var e=ot.attr(t,i);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e.replace(z," ")+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,t,e,g,v){var m="nth"!==p.slice(0,3),y="last"!==p.slice(-4),_="of-type"===t;return 1===g&&0===v?function(t){return!!t.parentNode}:function(t,e,i){var n,r,o,a,s,l,h=m!==y?"nextSibling":"previousSibling",c=t.parentNode,u=_&&t.nodeName.toLowerCase(),f=!i&&!_,d=!1;if(c){if(m){for(;h;){for(a=t;a=a[h];)if(_?a.nodeName.toLowerCase()===u:1===a.nodeType)return!1;l=h="only"===p&&!l&&"nextSibling"}return!0}if(l=[y?c.firstChild:c.lastChild],y&&f){for(d=(s=(n=(r=(o=(a=c)[T]||(a[T]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===O&&n[1])&&n[2],a=s&&c.childNodes[s];a=++s&&a&&a[h]||(d=s=0)||l.pop();)if(1===a.nodeType&&++d&&a===t){r[p]=[O,s,d];break}}else if(f&&(d=s=(n=(r=(o=(a=t)[T]||(a[T]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===O&&n[1]),!1===d)for(;(a=++s&&a&&a[h]||(d=s=0)||l.pop())&&((_?a.nodeName.toLowerCase()!==u:1!==a.nodeType)||!++d||(f&&((r=(o=a[T]||(a[T]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]=[O,d]),a!==t)););return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(t,o){var e,a=x.pseudos[t]||x.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return a[T]?a(o):1<a.length?(e=[t,t,"",o],x.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,e){for(var i,n=a(t,o),r=n.length;r--;)t[i=L(t,n[r])]=!(e[i]=n[r])}):function(t){return a(t,0,e)}):a}},pseudos:{not:st(function(t){var n=[],r=[],s=u(t.replace(H,"$1"));return s[T]?st(function(t,e,i,n){for(var r,o=s(t,null,n,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,e,i){return n[0]=t,s(n,null,i,r),n[0]=null,!r.pop()}}),has:st(function(e){return function(t){return 0<ot(e,t).length}}),contains:st(function(e){return e=e.replace(Q,tt),function(t){return-1<(t.textContent||t.innerText||o(t)).indexOf(e)}}),lang:st(function(i){return U.test(i||"")||ot.error("unsupported lang: "+i),i=i.replace(Q,tt).toLowerCase(),function(t){var e;do{if(e=S?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===i||0===e.indexOf(i+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===a},focus:function(t){return t===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:dt(!1),disabled:dt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return q.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,i){return[i<0?i+e:i]}),even:pt(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:pt(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:pt(function(t,e,i){for(var n=i<0?i+e:i;0<=--n;)t.push(n);return t}),gt:pt(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[t]=ut(t);for(t in{submit:!0,reset:!0})x.pseudos[t]=ft(t);function vt(){}function mt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function yt(s,t,e){var l=t.dir,h=t.next,c=h||l,u=e&&"parentNode"===c,f=n++;return t.first?function(t,e,i){for(;t=t[l];)if(1===t.nodeType||u)return s(t,e,i);return!1}:function(t,e,i){var n,r,o,a=[O,f];if(i){for(;t=t[l];)if((1===t.nodeType||u)&&s(t,e,i))return!0}else for(;t=t[l];)if(1===t.nodeType||u)if(r=(o=t[T]||(t[T]={}))[t.uniqueID]||(o[t.uniqueID]={}),h&&h===t.nodeName.toLowerCase())t=t[l]||t;else{if((n=r[c])&&n[0]===O&&n[1]===f)return a[2]=n[2];if((r[c]=a)[2]=s(t,e,i))return!0}return!1}}function _t(r){return 1<r.length?function(t,e,i){for(var n=r.length;n--;)if(!r[n](t,e,i))return!1;return!0}:r[0]}function xt(t,e,i,n,r){for(var o,a=[],s=0,l=t.length,h=null!=e;s<l;s++)(o=t[s])&&(i&&!i(o,n,r)||(a.push(o),h&&e.push(s)));return a}function bt(d,p,g,v,m,t){return v&&!v[T]&&(v=bt(v)),m&&!m[T]&&(m=bt(m,t)),st(function(t,e,i,n){var r,o,a,s=[],l=[],h=e.length,c=t||function(t,e,i){for(var n=0,r=e.length;n<r;n++)ot(t,e[n],i);return i}(p||"*",i.nodeType?[i]:i,[]),u=!d||!t&&p?c:xt(c,s,d,i,n),f=g?m||(t?d:h||v)?[]:e:u;if(g&&g(u,f,i,n),v)for(r=xt(f,l),v(r,[],i,n),o=r.length;o--;)(a=r[o])&&(f[l[o]]=!(u[l[o]]=a));if(t){if(m||d){if(m){for(r=[],o=f.length;o--;)(a=f[o])&&r.push(u[o]=a);m(null,f=[],r,n)}for(o=f.length;o--;)(a=f[o])&&-1<(r=m?L(t,a):s[o])&&(t[r]=!(e[r]=a))}}else f=xt(f===e?f.splice(h,f.length):f),m?m(null,e,f,n):P.apply(e,f)})}function wt(t){for(var r,e,i,n=t.length,o=x.relative[t[0].type],a=o||x.relative[" "],s=o?1:0,l=yt(function(t){return t===r},a,!0),h=yt(function(t){return-1<L(r,t)},a,!0),c=[function(t,e,i){var n=!o&&(i||e!==b)||((r=e).nodeType?l(t,e,i):h(t,e,i));return r=null,n}];s<n;s++)if(e=x.relative[t[s].type])c=[yt(_t(c),e)];else{if((e=x.filter[t[s].type].apply(null,t[s].matches))[T]){for(i=++s;i<n&&!x.relative[t[i].type];i++);return bt(1<s&&_t(c),1<s&&mt(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(H,"$1"),e,s<i&&wt(t.slice(s,i)),i<n&&wt(t=t.slice(i)),i<n&&mt(t))}c.push(e)}return _t(c)}return vt.prototype=x.filters=x.pseudos,x.setFilters=new vt,p=ot.tokenize=function(t,e){var i,n,r,o,a,s,l,h=_[t+" "];if(h)return e?0:h.slice(0);for(a=t,s=[],l=x.preFilter;a;){for(o in i&&!(n=W.exec(a))||(n&&(a=a.slice(n[0].length)||a),s.push(r=[])),i=!1,(n=G.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(H," ")}),a=a.slice(i.length)),x.filter)!(n=V[o].exec(a))||l[o]&&!(n=l[o](n))||(i=n.shift(),r.push({value:i,type:o,matches:n}),a=a.slice(i.length));if(!i)break}return e?a.length:a?ot.error(t):_(t,s).slice(0)},u=ot.compile=function(t,e){var i,v,m,y,_,n,r=[],o=[],a=k[t+" "];if(!a){for(e||(e=p(t)),i=e.length;i--;)(a=wt(e[i]))[T]?r.push(a):o.push(a);(a=k(t,(v=o,y=0<(m=r).length,_=0<v.length,n=function(t,e,i,n,r){var o,a,s,l=0,h="0",c=t&&[],u=[],f=b,d=t||_&&x.find.TAG("*",r),p=O+=null==f?1:Math.random()||.1,g=d.length;for(r&&(b=e===C||e||r);h!==g&&null!=(o=d[h]);h++){if(_&&o){for(a=0,e||o.ownerDocument===C||(w(o),i=!S);s=v[a++];)if(s(o,e||C,i)){n.push(o);break}r&&(O=p)}y&&((o=!s&&o)&&l--,t&&c.push(o))}if(l+=h,y&&h!==l){for(a=0;s=m[a++];)s(c,u,e,i);if(t){if(0<l)for(;h--;)c[h]||u[h]||(u[h]=D.call(n));u=xt(u)}P.apply(n,u),r&&!t&&0<u.length&&1<l+m.length&&ot.uniqueSort(n)}return r&&(O=p,b=f),c},y?st(n):n))).selector=t}return a},g=ot.select=function(t,e,i,n){var r,o,a,s,l,h="function"==typeof t&&t,c=!n&&p(t=h.selector||t);if(i=i||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===e.nodeType&&S&&x.relative[o[1].type]){if(!(e=(x.find.ID(a.matches[0].replace(Q,tt),e)||[])[0]))return i;h&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=V.needsContext.test(t)?0:o.length;r--&&(a=o[r],!x.relative[s=a.type]);)if((l=x.find[s])&&(n=l(a.matches[0].replace(Q,tt),J.test(o[0].type)&&gt(e.parentNode)||e))){if(o.splice(r,1),!(t=n.length&&mt(o)))return P.apply(i,n),i;break}}return(h||u(t,c))(n,e,!S,i,!e||J.test(t)&&gt(e.parentNode)||e),i},d.sortStable=T.split("").sort(A).join("")===T,d.detectDuplicates=!!h,w(),d.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(C.createElement("fieldset"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ht("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),d.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ht("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ht(j,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),ot}(C);T.find=d,T.expr=d.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=d.uniqueSort,T.text=d.getText,T.isXMLDoc=d.isXML,T.contains=d.contains,T.escapeSelector=d.escape;var p=function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&T(t).is(i))break;n.push(t)}return n},w=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},O=T.expr.match.needsContext;function k(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(t,i,n){return y(i)?T.grep(t,function(t,e){return!!i.call(t,e,t)!==n}):i.nodeType?T.grep(t,function(t){return t===i!==n}):"string"!=typeof i?T.grep(t,function(t){return-1<r.call(i,t)!==n}):T.filter(i,t,n)}T.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?T.find.matchesSelector(n,t)?[n]:[]:T.find.matches(t,T.grep(e,function(t){return 1===t.nodeType}))},T.fn.extend({find:function(t){var e,i,n=this.length,r=this;if("string"!=typeof t)return this.pushStack(T(t).filter(function(){for(e=0;e<n;e++)if(T.contains(r[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)T.find(t,r[e],i);return 1<n?T.uniqueSort(i):i},filter:function(t){return this.pushStack(M(this,t||[],!1))},not:function(t){return this.pushStack(M(this,t||[],!0))},is:function(t){return!!M(this,"string"==typeof t&&O.test(t)?T(t):t||[],!1).length}});var D,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||D,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:I.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:S,!0)),A.test(n[1])&&T.isPlainObject(e))for(n in e)y(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(r=S.getElementById(n[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==i.ready?i.ready(t):t(T):T.makeArray(t,this)}).prototype=T.fn,D=T(S);var P=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};function L(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(T.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,r=this.length,o=[],a="string"!=typeof t&&T(t);if(!O.test(t))for(;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&T.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(1<o.length?T.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?r.call(T(t),this[0]):r.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return p(t,"parentNode")},parentsUntil:function(t,e,i){return p(t,"parentNode",i)},next:function(t){return L(t,"nextSibling")},prev:function(t){return L(t,"previousSibling")},nextAll:function(t){return p(t,"nextSibling")},prevAll:function(t){return p(t,"previousSibling")},nextUntil:function(t,e,i){return p(t,"nextSibling",i)},prevUntil:function(t,e,i){return p(t,"previousSibling",i)},siblings:function(t){return w((t.parentNode||{}).firstChild,t)},children:function(t){return w(t.firstChild)},contents:function(t){return k(t,"iframe")?t.contentDocument:(k(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},function(n,r){T.fn[n]=function(t,e){var i=T.map(this,r,t);return"Until"!==n.slice(-5)&&(e=t),e&&"string"==typeof e&&(i=T.filter(e,i)),1<this.length&&(E[n]||T.uniqueSort(i),P.test(n)&&i.reverse()),this.pushStack(i)}});var j=/[^\x20\t\r\n\f]+/g;function R(t){return t}function B(t){throw t}function F(t,e,i,n){var r;try{t&&y(r=t.promise)?r.call(t).done(e).fail(i):t&&y(r=t.then)?r.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}T.Callbacks=function(n){var t,i;n="string"==typeof n?(t=n,i={},T.each(t.match(j)||[],function(t,e){i[e]=!0}),i):T.extend({},n);var r,e,o,a,s=[],l=[],h=-1,c=function(){for(a=a||n.once,o=r=!0;l.length;h=-1)for(e=l.shift();++h<s.length;)!1===s[h].apply(e[0],e[1])&&n.stopOnFalse&&(h=s.length,e=!1);n.memory||(e=!1),r=!1,a&&(s=e?[]:"")},u={add:function(){return s&&(e&&!r&&(h=s.length-1,l.push(e)),function i(t){T.each(t,function(t,e){y(e)?n.unique&&u.has(e)||s.push(e):e&&e.length&&"string"!==b(e)&&i(e)})}(arguments),e&&!r&&c()),this},remove:function(){return T.each(arguments,function(t,e){for(var i;-1<(i=T.inArray(e,s,i));)s.splice(i,1),i<=h&&h--}),this},has:function(t){return t?-1<T.inArray(t,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=l=[],s=e="",this},disabled:function(){return!s},lock:function(){return a=l=[],e||r||(s=e=""),this},locked:function(){return!!a},fireWith:function(t,e){return a||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),r||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},T.extend({Deferred:function(t){var o=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return a.then(null,t)},pipe:function(){var r=arguments;return T.Deferred(function(n){T.each(o,function(t,e){var i=y(r[e[4]])&&r[e[4]];s[e[1]](function(){var t=i&&i.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[e[0]+"With"](this,i?[t]:arguments)})}),r=null}).promise()},then:function(e,i,n){var l=0;function h(r,o,a,s){return function(){var i=this,n=arguments,t=function(){var t,e;if(!(r<l)){if((t=a.apply(i,n))===o.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,y(e)?s?e.call(t,h(l,o,R,s),h(l,o,B,s)):(l++,e.call(t,h(l,o,R,s),h(l,o,B,s),h(l,o,R,o.notifyWith))):(a!==R&&(i=void 0,n=[t]),(s||o.resolveWith)(i,n))}},e=s?t:function(){try{t()}catch(t){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(t,e.stackTrace),l<=r+1&&(a!==B&&(i=void 0,n=[t]),o.rejectWith(i,n))}};r?e():(T.Deferred.getStackHook&&(e.stackTrace=T.Deferred.getStackHook()),C.setTimeout(e))}}return T.Deferred(function(t){o[0][3].add(h(0,t,y(n)?n:R,t.notifyWith)),o[1][3].add(h(0,t,y(e)?e:R)),o[2][3].add(h(0,t,y(i)?i:B))}).promise()},promise:function(t){return null!=t?T.extend(t,a):a}},s={};return T.each(o,function(t,e){var i=e[2],n=e[5];a[e[1]]=i.add,n&&i.add(function(){r=n},o[3-t][2].disable,o[3-t][3].disable,o[0][2].lock,o[0][3].lock),i.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=i.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(t){var i=arguments.length,e=i,n=Array(e),r=s.call(arguments),o=T.Deferred(),a=function(e){return function(t){n[e]=this,r[e]=1<arguments.length?s.call(arguments):t,--i||o.resolveWith(n,r)}};if(i<=1&&(F(t,o.done(a(e)).resolve,o.reject,!i),"pending"===o.state()||y(r[e]&&r[e].then)))return o.then();for(;e--;)F(r[e],a(e),o.reject);return o.promise()}});var N=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,e){C.console&&C.console.warn&&t&&N.test(t.name)&&C.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){C.setTimeout(function(){throw t})};var z=T.Deferred();function H(){S.removeEventListener("DOMContentLoaded",H),C.removeEventListener("load",H),T.ready()}T.fn.ready=function(t){return z.then(t).catch(function(t){T.readyException(t)}),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0)!==t&&0<--T.readyWait||z.resolveWith(S,[T])}}),T.ready.then=z.then,"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?C.setTimeout(T.ready):(S.addEventListener("DOMContentLoaded",H),C.addEventListener("load",H));var W=function(t,e,i,n,r,o,a){var s=0,l=t.length,h=null==i;if("object"===b(i))for(s in r=!0,i)W(t,e,s,i[s],!0,o,a);else if(void 0!==n&&(r=!0,y(n)||(a=!0),h&&(a?(e.call(t,n),e=null):(h=e,e=function(t,e,i){return h.call(T(t),i)})),e))for(;s<l;s++)e(t[s],i,a?n:n.call(t[s],s,e(t[s],i)));return r?t:h?e.call(t):l?e(t[0],i):o},G=/^-ms-/,X=/-([a-z])/g;function Y(t,e){return e.toUpperCase()}function U(t){return t.replace(G,"ms-").replace(X,Y)}var V=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function q(){this.expando=T.expando+q.uid++}q.uid=1,q.prototype={cache:function(t){var e=t[this.expando];return e||(e={},V(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[U(e)]=i;else for(n in e)r[U(n)]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][U(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(U):(e=U(e))in n?[e]:e.match(j)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||T.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var $=new q,K=new q,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Q(t,e,i){var n,r;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(J,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:Z.test(r)?JSON.parse(r):r)}catch(t){}K.set(t,e,i)}else i=void 0;return i}T.extend({hasData:function(t){return K.hasData(t)||$.hasData(t)},data:function(t,e,i){return K.access(t,e,i)},removeData:function(t,e){K.remove(t,e)},_data:function(t,e,i){return $.access(t,e,i)},_removeData:function(t,e){$.remove(t,e)}}),T.fn.extend({data:function(i,t){var e,n,r,o=this[0],a=o&&o.attributes;if(void 0===i){if(this.length&&(r=K.get(o),1===o.nodeType&&!$.get(o,"hasDataAttrs"))){for(e=a.length;e--;)a[e]&&0===(n=a[e].name).indexOf("data-")&&(n=U(n.slice(5)),Q(o,n,r[n]));$.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof i?this.each(function(){K.set(this,i)}):W(this,function(t){var e;if(o&&void 0===t)return void 0!==(e=K.get(o,i))?e:void 0!==(e=Q(o,i))?e:void 0;this.each(function(){K.set(this,i,t)})},null,t,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){K.remove(this,t)})}}),T.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=$.get(t,e),i&&(!n||Array.isArray(i)?n=$.access(t,e,T.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=T.queue(t,e),n=i.length,r=i.shift(),o=T._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,function(){T.dequeue(t,e)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return $.get(t,i)||$.access(t,i,{empty:T.Callbacks("once memory").add(function(){$.remove(t,[e+"queue",i])})})}}),T.fn.extend({queue:function(e,i){var t=2;return"string"!=typeof e&&(i=e,e="fx",t--),arguments.length<t?T.queue(this[0],e):void 0===i?this:this.each(function(){var t=T.queue(this,e,i);T._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&T.dequeue(this,e)})},dequeue:function(t){return this.each(function(){T.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=T.Deferred(),o=this,a=this.length,s=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(i=$.get(o[a],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),it=["Top","Right","Bottom","Left"],nt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&T.contains(t.ownerDocument,t)&&"none"===T.css(t,"display")},rt=function(t,e,i,n){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in r=i.apply(t,n||[]),e)t.style[o]=a[o];return r};function ot(t,e,i,n){var r,o,a=20,s=n?function(){return n.cur()}:function(){return T.css(t,e,"")},l=s(),h=i&&i[3]||(T.cssNumber[e]?"":"px"),c=(T.cssNumber[e]||"px"!==h&&+l)&&et.exec(T.css(t,e));if(c&&c[3]!==h){for(l/=2,h=h||c[3],c=+l||1;a--;)T.style(t,e,c+h),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;c*=2,T.style(t,e,c+h),i=i||[]}return i&&(c=+c||+l||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=h,n.start=c,n.end=r)),r}var at={};function st(t,e){for(var i,n,r,o,a,s,l,h=[],c=0,u=t.length;c<u;c++)(n=t[c]).style&&(i=n.style.display,e?("none"===i&&(h[c]=$.get(n,"display")||null,h[c]||(n.style.display="")),""===n.style.display&&nt(n)&&(h[c]=(l=a=o=void 0,a=(r=n).ownerDocument,s=r.nodeName,(l=at[s])||(o=a.body.appendChild(a.createElement(s)),l=T.css(o,"display"),o.parentNode.removeChild(o),"none"===l&&(l="block"),at[s]=l)))):"none"!==i&&(h[c]="none",$.set(n,"display",i)));for(c=0;c<u;c++)null!=h[c]&&(t[c].style.display=h[c]);return t}T.fn.extend({show:function(){return st(this,!0)},hide:function(){return st(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){nt(this)?T(this).show():T(this).hide()})}});var lt=/^(?:checkbox|radio)$/i,ht=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ct=/^$|^module$|\/(?:java|ecma)script/i,ut={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ft(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&k(t,e)?T.merge([t],i):i}function dt(t,e){for(var i=0,n=t.length;i<n;i++)$.set(t[i],"globalEval",!e||$.get(e[i],"globalEval"))}ut.optgroup=ut.option,ut.tbody=ut.tfoot=ut.colgroup=ut.caption=ut.thead,ut.th=ut.td;var pt,gt,vt=/<|&#?\w+;/;function mt(t,e,i,n,r){for(var o,a,s,l,h,c,u=e.createDocumentFragment(),f=[],d=0,p=t.length;d<p;d++)if((o=t[d])||0===o)if("object"===b(o))T.merge(f,o.nodeType?[o]:o);else if(vt.test(o)){for(a=a||u.appendChild(e.createElement("div")),s=(ht.exec(o)||["",""])[1].toLowerCase(),l=ut[s]||ut._default,a.innerHTML=l[1]+T.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;T.merge(f,a.childNodes),(a=u.firstChild).textContent=""}else f.push(e.createTextNode(o));for(u.textContent="",d=0;o=f[d++];)if(n&&-1<T.inArray(o,n))r&&r.push(o);else if(h=T.contains(o.ownerDocument,o),a=ft(u.appendChild(o),"script"),h&&dt(a),i)for(c=0;o=a[c++];)ct.test(o.type||"")&&i.push(o);return u}pt=S.createDocumentFragment().appendChild(S.createElement("div")),(gt=S.createElement("input")).setAttribute("type","radio"),gt.setAttribute("checked","checked"),gt.setAttribute("name","t"),pt.appendChild(gt),m.checkClone=pt.cloneNode(!0).cloneNode(!0).lastChild.checked,pt.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!pt.cloneNode(!0).lastChild.defaultValue;var yt=S.documentElement,_t=/^key/,xt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,bt=/^([^.]*)(?:\.(.+)|)/;function wt(){return!0}function Ct(){return!1}function St(){try{return S.activeElement}catch(t){}}function Tt(t,e,i,n,r,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof i&&(n=n||i,i=void 0),e)Tt(t,s,i,n,e[s],o);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=Ct;else if(!r)return t;return 1===o&&(a=r,(r=function(t){return T().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=T.guid++)),t.each(function(){T.event.add(this,e,r,n,i)})}T.event={global:{},add:function(e,t,i,n,r){var o,a,s,l,h,c,u,f,d,p,g,v=$.get(e);if(v)for(i.handler&&(i=(o=i).handler,r=o.selector),r&&T.find.matchesSelector(yt,r),i.guid||(i.guid=T.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return void 0!==T&&T.event.triggered!==t.type?T.event.dispatch.apply(e,arguments):void 0}),h=(t=(t||"").match(j)||[""]).length;h--;)d=g=(s=bt.exec(t[h])||[])[1],p=(s[2]||"").split(".").sort(),d&&(u=T.event.special[d]||{},d=(r?u.delegateType:u.bindType)||d,u=T.event.special[d]||{},c=T.extend({type:d,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&T.expr.match.needsContext.test(r),namespace:p.join(".")},o),(f=l[d])||((f=l[d]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,n,p,a)||e.addEventListener&&e.addEventListener(d,a)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),r?f.splice(f.delegateCount++,0,c):f.push(c),T.event.global[d]=!0)},remove:function(t,e,i,n,r){var o,a,s,l,h,c,u,f,d,p,g,v=$.hasData(t)&&$.get(t);if(v&&(l=v.events)){for(h=(e=(e||"").match(j)||[""]).length;h--;)if(d=g=(s=bt.exec(e[h])||[])[1],p=(s[2]||"").split(".").sort(),d){for(u=T.event.special[d]||{},f=l[d=(n?u.delegateType:u.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!r&&g!==c.origType||i&&i.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,u.remove&&u.remove.call(t,c));a&&!f.length&&(u.teardown&&!1!==u.teardown.call(t,p,v.handle)||T.removeEvent(t,d,v.handle),delete l[d])}else for(d in l)T.event.remove(t,d+e[h],i,n,!0);T.isEmptyObject(l)&&$.remove(t,"handle events")}},dispatch:function(t){var e,i,n,r,o,a,s=T.event.fix(t),l=new Array(arguments.length),h=($.get(this,"events")||{})[s.type]||[],c=T.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=T.event.handlers.call(this,s,h),e=0;(r=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(n=((T.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(t,e){var i,n,r,o,a,s=[],l=e.delegateCount,h=t.target;if(l&&h.nodeType&&!("click"===t.type&&1<=t.button))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(o=[],a={},i=0;i<l;i++)void 0===a[r=(n=e[i]).selector+" "]&&(a[r]=n.needsContext?-1<T(r,this).index(h):T.find(r,this,null,[h]).length),a[r]&&o.push(n);o.length&&s.push({elem:h,handlers:o})}return h=this,l<e.length&&s.push({elem:h,handlers:e.slice(l)}),s},addProp:function(e,t){Object.defineProperty(T.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==St()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===St()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&k(this,"input"))return this.click(),!1},_default:function(t){return k(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?wt:Ct,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Ct,isPropagationStopped:Ct,isImmediatePropagationStopped:Ct,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&_t.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&xt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},T.event.addProp),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,r){T.event.special[t]={delegateType:r,bindType:r,handle:function(t){var e,i=t.relatedTarget,n=t.handleObj;return i&&(i===this||T.contains(this,i))||(t.type=n.origType,e=n.handler.apply(this,arguments),t.type=r),e}}}),T.fn.extend({on:function(t,e,i,n){return Tt(this,t,e,i,n)},one:function(t,e,i,n){return Tt(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,T(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=Ct),this.each(function(){T.event.remove(this,t,i,e)})}});var Ot=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,kt=/<script|<style|<link/i,At=/checked\s*(?:[^=]|=\s*.checked.)/i,Mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Dt(t,e){return k(t,"table")&&k(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function It(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Pt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Et(t,e){var i,n,r,o,a,s,l,h;if(1===e.nodeType){if($.hasData(t)&&(o=$.access(t),a=$.set(e,o),h=o.events))for(r in delete a.handle,a.events={},h)for(i=0,n=h[r].length;i<n;i++)T.event.add(e,r,h[r][i]);K.hasData(t)&&(s=K.access(t),l=T.extend({},s),K.set(e,l))}}function Lt(i,n,r,o){n=g.apply([],n);var t,e,a,s,l,h,c=0,u=i.length,f=u-1,d=n[0],p=y(d);if(p||1<u&&"string"==typeof d&&!m.checkClone&&At.test(d))return i.each(function(t){var e=i.eq(t);p&&(n[0]=d.call(this,t,e.html())),Lt(e,n,r,o)});if(u&&(e=(t=mt(n,i[0].ownerDocument,!1,i,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(s=(a=T.map(ft(t,"script"),It)).length;c<u;c++)l=t,c!==f&&(l=T.clone(l,!0,!0),s&&T.merge(a,ft(l,"script"))),r.call(i[c],l,c);if(s)for(h=a[a.length-1].ownerDocument,T.map(a,Pt),c=0;c<s;c++)l=a[c],ct.test(l.type||"")&&!$.access(l,"globalEval")&&T.contains(h,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?T._evalUrl&&T._evalUrl(l.src):x(l.textContent.replace(Mt,""),h,l))}return i}function jt(t,e,i){for(var n,r=e?T.filter(e,t):t,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||T.cleanData(ft(n)),n.parentNode&&(i&&T.contains(n.ownerDocument,n)&&dt(ft(n,"script")),n.parentNode.removeChild(n));return t}T.extend({htmlPrefilter:function(t){return t.replace(Ot,"<$1></$2>")},clone:function(t,e,i){var n,r,o,a,s,l,h,c=t.cloneNode(!0),u=T.contains(t.ownerDocument,t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(a=ft(c),n=0,r=(o=ft(t)).length;n<r;n++)s=o[n],l=a[n],void 0,"input"===(h=l.nodeName.toLowerCase())&&lt.test(s.type)?l.checked=s.checked:"input"!==h&&"textarea"!==h||(l.defaultValue=s.defaultValue);if(e)if(i)for(o=o||ft(t),a=a||ft(c),n=0,r=o.length;n<r;n++)Et(o[n],a[n]);else Et(t,c);return 0<(a=ft(c,"script")).length&&dt(a,!u&&ft(t,"script")),c},cleanData:function(t){for(var e,i,n,r=T.event.special,o=0;void 0!==(i=t[o]);o++)if(V(i)){if(e=i[$.expando]){if(e.events)for(n in e.events)r[n]?T.event.remove(i,n):T.removeEvent(i,n,e.handle);i[$.expando]=void 0}i[K.expando]&&(i[K.expando]=void 0)}}}),T.fn.extend({detach:function(t){return jt(this,t,!0)},remove:function(t){return jt(this,t)},text:function(t){return W(this,function(t){return void 0===t?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Lt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Dt(this,t).appendChild(t)})},prepend:function(){return Lt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Dt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Lt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Lt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(ft(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return T.clone(this,t,e)})},html:function(t){return W(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!kt.test(t)&&!ut[(ht.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(T.cleanData(ft(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var i=[];return Lt(this,arguments,function(t){var e=this.parentNode;T.inArray(this,i)<0&&(T.cleanData(ft(this)),e&&e.replaceChild(t,this))},i)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){T.fn[t]=function(t){for(var e,i=[],n=T(t),r=n.length-1,o=0;o<=r;o++)e=o===r?this:this.clone(!0),T(n[o])[a](e),l.apply(i,e.get());return this.pushStack(i)}});var Rt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Bt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=C),e.getComputedStyle(t)},Ft=new RegExp(it.join("|"),"i");function Nt(t,e,i){var n,r,o,a,s=t.style;return(i=i||Bt(t))&&(""!==(a=i.getPropertyValue(e)||i[e])||T.contains(t.ownerDocument,t)||(a=T.style(t,e)),!m.pixelBoxStyles()&&Rt.test(a)&&Ft.test(e)&&(n=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function zt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",yt.appendChild(s).appendChild(l);var t=C.getComputedStyle(l);i="1%"!==t.top,a=12===e(t.marginLeft),l.style.right="60%",o=36===e(t.right),n=36===e(t.width),l.style.position="absolute",r=36===l.offsetWidth||"absolute",yt.removeChild(s),l=null}}function e(t){return Math.round(parseFloat(t))}var i,n,r,o,a,s=S.createElement("div"),l=S.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===l.style.backgroundClip,T.extend(m,{boxSizingReliable:function(){return t(),n},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),a},scrollboxSize:function(){return t(),r}}))}();var Ht=/^(none|table(?!-c[ea]).+)/,Wt=/^--/,Gt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"},Yt=["Webkit","Moz","ms"],Ut=S.createElement("div").style;function Vt(t){var e=T.cssProps[t];return e||(e=T.cssProps[t]=function(t){if(t in Ut)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=Yt.length;i--;)if((t=Yt[i]+e)in Ut)return t}(t)||t),e}function qt(t,e,i){var n=et.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function $t(t,e,i,n,r,o){var a="width"===e?1:0,s=0,l=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(l+=T.css(t,i+it[a],!0,r)),n?("content"===i&&(l-=T.css(t,"padding"+it[a],!0,r)),"margin"!==i&&(l-=T.css(t,"border"+it[a]+"Width",!0,r))):(l+=T.css(t,"padding"+it[a],!0,r),"padding"!==i?l+=T.css(t,"border"+it[a]+"Width",!0,r):s+=T.css(t,"border"+it[a]+"Width",!0,r));return!n&&0<=o&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))),l}function Kt(t,e,i){var n=Bt(t),r=Nt(t,e,n),o="border-box"===T.css(t,"boxSizing",!1,n),a=o;if(Rt.test(r)){if(!i)return r;r="auto"}return a=a&&(m.boxSizingReliable()||r===t.style[e]),("auto"===r||!parseFloat(r)&&"inline"===T.css(t,"display",!1,n))&&(r=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(r=parseFloat(r)||0)+$t(t,e,i||(o?"border":"content"),a,n,r)+"px"}function Zt(t,e,i,n,r){return new Zt.prototype.init(t,e,i,n,r)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Nt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=U(e),l=Wt.test(e),h=t.style;if(l||(e=Vt(s)),a=T.cssHooks[e]||T.cssHooks[s],void 0===i)return a&&"get"in a&&void 0!==(r=a.get(t,!1,n))?r:h[e];"string"===(o=typeof i)&&(r=et.exec(i))&&r[1]&&(i=ot(t,e,r),o="number"),null!=i&&i==i&&("number"===o&&(i+=r&&r[3]||(T.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),a&&"set"in a&&void 0===(i=a.set(t,i,n))||(l?h.setProperty(e,i):h[e]=i))}},css:function(t,e,i,n){var r,o,a,s=U(e);return Wt.test(e)||(e=Vt(s)),(a=T.cssHooks[e]||T.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,i)),void 0===r&&(r=Nt(t,e,n)),"normal"===r&&e in Xt&&(r=Xt[e]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),T.each(["height","width"],function(t,s){T.cssHooks[s]={get:function(t,e,i){if(e)return!Ht.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Kt(t,s,i):rt(t,Gt,function(){return Kt(t,s,i)})},set:function(t,e,i){var n,r=Bt(t),o="border-box"===T.css(t,"boxSizing",!1,r),a=i&&$t(t,s,i,o,r);return o&&m.scrollboxSize()===r.position&&(a-=Math.ceil(t["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(r[s])-$t(t,s,"border",!1,r)-.5)),a&&(n=et.exec(e))&&"px"!==(n[3]||"px")&&(t.style[s]=e,e=T.css(t,s)),qt(0,e,a)}}}),T.cssHooks.marginLeft=zt(m.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Nt(t,"marginLeft"))||t.getBoundingClientRect().left-rt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(r,o){T.cssHooks[r+o]={expand:function(t){for(var e=0,i={},n="string"==typeof t?t.split(" "):[t];e<4;e++)i[r+it[e]+o]=n[e]||n[e-2]||n[0];return i}},"margin"!==r&&(T.cssHooks[r+o].set=qt)}),T.fn.extend({css:function(t,e){return W(this,function(t,e,i){var n,r,o={},a=0;if(Array.isArray(e)){for(n=Bt(t),r=e.length;a<r;a++)o[e[a]]=T.css(t,e[a],!1,n);return o}return void 0!==i?T.style(t,e,i):T.css(t,e)},t,e,1<arguments.length)}}),((T.Tween=Zt).prototype={constructor:Zt,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(T.cssNumber[i]?"":"px")},cur:function(){var t=Zt.propHooks[this.prop];return t&&t.get?t.get(this):Zt.propHooks._default.get(this)},run:function(t){var e,i=Zt.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Zt.propHooks._default.set(this),this}}).init.prototype=Zt.prototype,(Zt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=T.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[T.cssProps[t.prop]]&&!T.cssHooks[t.prop]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=Zt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},T.fx=Zt.prototype.init,T.fx.step={};var Jt,Qt,te,ee,ie=/^(?:toggle|show|hide)$/,ne=/queueHooks$/;function re(){Qt&&(!1===S.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(re):C.setTimeout(re,T.fx.interval),T.fx.tick())}function oe(){return C.setTimeout(function(){Jt=void 0}),Jt=Date.now()}function ae(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)r["margin"+(i=it[n])]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function se(t,e,i){for(var n,r=(le.tweeners[e]||[]).concat(le.tweeners["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,e,t))return n}function le(o,t,e){var i,a,n=0,r=le.prefilters.length,s=T.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=Jt||oe(),e=Math.max(0,h.startTime+h.duration-t),i=1-(e/h.duration||0),n=0,r=h.tweens.length;n<r;n++)h.tweens[n].run(i);return s.notifyWith(o,[h,i,e]),i<1&&r?e:(r||s.notifyWith(o,[h,1,0]),s.resolveWith(o,[h]),!1)},h=s.promise({elem:o,props:T.extend({},t),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},e),originalProperties:t,originalOptions:e,startTime:Jt||oe(),duration:e.duration,tweens:[],createTween:function(t,e){var i=T.Tween(o,h.opts,t,e,h.opts.specialEasing[t]||h.opts.easing);return h.tweens.push(i),i},stop:function(t){var e=0,i=t?h.tweens.length:0;if(a)return this;for(a=!0;e<i;e++)h.tweens[e].run(1);return t?(s.notifyWith(o,[h,1,0]),s.resolveWith(o,[h,t])):s.rejectWith(o,[h,t]),this}}),c=h.props;for(!function(t,e){var i,n,r,o,a;for(i in t)if(r=e[n=U(i)],o=t[i],Array.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(a=T.cssHooks[n])&&"expand"in a)for(i in o=a.expand(o),delete t[n],o)i in t||(t[i]=o[i],e[i]=r);else e[n]=r}(c,h.opts.specialEasing);n<r;n++)if(i=le.prefilters[n].call(h,o,c,h.opts))return y(i.stop)&&(T._queueHooks(h.elem,h.opts.queue).stop=i.stop.bind(i)),i;return T.map(c,se,h),y(h.opts.start)&&h.opts.start.call(o,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),T.fx.timer(T.extend(l,{elem:o,anim:h,queue:h.opts.queue})),h}T.Animation=T.extend(le,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return ot(i.elem,t,et.exec(e),i),i}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(j);for(var i,n=0,r=t.length;n<r;n++)i=t[n],le.tweeners[i]=le.tweeners[i]||[],le.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,r,o,a,s,l,h,c,u="width"in e||"height"in e,f=this,d={},p=t.style,g=t.nodeType&&nt(t),v=$.get(t,"fxshow");for(n in i.queue||(null==(a=T._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,T.queue(t,"fx").length||a.empty.fire()})})),e)if(r=e[n],ie.test(r)){if(delete e[n],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!v||void 0===v[n])continue;g=!0}d[n]=v&&v[n]||T.style(t,n)}if((l=!T.isEmptyObject(e))||!T.isEmptyObject(d))for(n in u&&1===t.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(h=v&&v.display)&&(h=$.get(t,"display")),"none"===(c=T.css(t,"display"))&&(h?c=h:(st([t],!0),h=t.style.display||h,c=T.css(t,"display"),st([t]))),("inline"===c||"inline-block"===c&&null!=h)&&"none"===T.css(t,"float")&&(l||(f.done(function(){p.display=h}),null==h&&(c=p.display,h="none"===c?"":c)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1,d)l||(v?"hidden"in v&&(g=v.hidden):v=$.access(t,"fxshow",{display:h}),o&&(v.hidden=!g),g&&st([t],!0),f.done(function(){for(n in g||st([t]),$.remove(t,"fxshow"),d)T.style(t,n,d[n])})),l=se(g?v[n]:0,n,f),n in v||(v[n]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?le.prefilters.unshift(t):le.prefilters.push(t)}}),T.speed=function(t,e,i){var n=t&&"object"==typeof t?T.extend({},t):{complete:i||!i&&e||y(t)&&t,duration:t,easing:i&&e||e&&!y(e)&&e};return T.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in T.fx.speeds?n.duration=T.fx.speeds[n.duration]:n.duration=T.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&T.dequeue(this,n.queue)},n},T.fn.extend({fadeTo:function(t,e,i,n){return this.filter(nt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(e,t,i,n){var r=T.isEmptyObject(e),o=T.speed(t,i,n),a=function(){var t=le(this,T.extend({},e),o);(r||$.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(r,t,o){var a=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof r&&(o=t,t=r,r=void 0),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",i=T.timers,n=$.get(this);if(e)n[e]&&n[e].stop&&a(n[e]);else for(e in n)n[e]&&n[e].stop&&ne.test(e)&&a(n[e]);for(e=i.length;e--;)i[e].elem!==this||null!=r&&i[e].queue!==r||(i[e].anim.stop(o),t=!1,i.splice(e,1));!t&&o||T.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=$.get(this),i=e[a+"queue"],n=e[a+"queueHooks"],r=T.timers,o=i?i.length:0;for(e.finish=!0,T.queue(this,a,[]),n&&n.stop&&n.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===a&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete e.finish})}}),T.each(["toggle","show","hide"],function(t,n){var r=T.fn[n];T.fn[n]=function(t,e,i){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(ae(n,!0),t,e,i)}}),T.each({slideDown:ae("show"),slideUp:ae("hide"),slideToggle:ae("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){T.fn[t]=function(t,e,i){return this.animate(n,t,e,i)}}),T.timers=[],T.fx.tick=function(){var t,e=0,i=T.timers;for(Jt=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||T.fx.stop(),Jt=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){Qt||(Qt=!0,re())},T.fx.stop=function(){Qt=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(n,t){return n=T.fx&&T.fx.speeds[n]||n,t=t||"fx",this.queue(t,function(t,e){var i=C.setTimeout(t,n);e.stop=function(){C.clearTimeout(i)}})},te=S.createElement("input"),ee=S.createElement("select").appendChild(S.createElement("option")),te.type="checkbox",m.checkOn=""!==te.value,m.optSelected=ee.selected,(te=S.createElement("input")).value="t",te.type="radio",m.radioValue="t"===te.value;var he,ce=T.expr.attrHandle;T.fn.extend({attr:function(t,e){return W(this,T.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){T.removeAttr(this,t)})}}),T.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?T.prop(t,e,i):(1===o&&T.isXMLDoc(t)||(r=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?he:void 0)),void 0!==i?null===i?void T.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:null==(n=T.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&k(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,r=e&&e.match(j);if(r&&1===t.nodeType)for(;i=r[n++];)t.removeAttribute(i)}}),he={set:function(t,e,i){return!1===e?T.removeAttr(t,i):t.setAttribute(i,i),i}},T.each(T.expr.match.bool.source.match(/\w+/g),function(t,e){var a=ce[e]||T.find.attr;ce[e]=function(t,e,i){var n,r,o=e.toLowerCase();return i||(r=ce[o],ce[o]=n,n=null!=a(t,e,i)?o:null,ce[o]=r),n}});var ue=/^(?:input|select|textarea|button)$/i,fe=/^(?:a|area)$/i;function de(t){return(t.match(j)||[]).join(" ")}function pe(t){return t.getAttribute&&t.getAttribute("class")||""}function ge(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(j)||[]}T.fn.extend({prop:function(t,e){return W(this,T.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[T.propFix[t]||t]})}}),T.extend({prop:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&T.isXMLDoc(t)||(e=T.propFix[e]||e,r=T.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):ue.test(t.nodeName)||fe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(T.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(e){var t,i,n,r,o,a,s,l=0;if(y(e))return this.each(function(t){T(this).addClass(e.call(this,t,pe(this)))});if((t=ge(e)).length)for(;i=this[l++];)if(r=pe(i),n=1===i.nodeType&&" "+de(r)+" "){for(a=0;o=t[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r!==(s=de(n))&&i.setAttribute("class",s)}return this},removeClass:function(e){var t,i,n,r,o,a,s,l=0;if(y(e))return this.each(function(t){T(this).removeClass(e.call(this,t,pe(this)))});if(!arguments.length)return this.attr("class","");if((t=ge(e)).length)for(;i=this[l++];)if(r=pe(i),n=1===i.nodeType&&" "+de(r)+" "){for(a=0;o=t[a++];)for(;-1<n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");r!==(s=de(n))&&i.setAttribute("class",s)}return this},toggleClass:function(r,e){var o=typeof r,a="string"===o||Array.isArray(r);return"boolean"==typeof e&&a?e?this.addClass(r):this.removeClass(r):y(r)?this.each(function(t){T(this).toggleClass(r.call(this,t,pe(this),e),e)}):this.each(function(){var t,e,i,n;if(a)for(e=0,i=T(this),n=ge(r);t=n[e++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==r&&"boolean"!==o||((t=pe(this))&&$.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===r?"":$.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+de(pe(i))+" ").indexOf(e))return!0;return!1}});var ve=/\r/g;T.fn.extend({val:function(i){var n,t,r,e=this[0];return arguments.length?(r=y(i),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?i.call(this,t,T(this).val()):i)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=T.map(e,function(t){return null==t?"":t+""})),(n=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):e?(n=T.valHooks[e.type]||T.valHooks[e.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(ve,""):null==t?"":t:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:de(T.text(t))}},select:{get:function(t){var e,i,n,r=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:r.length;for(n=o<0?l:a?o:0;n<l;n++)if(((i=r[n]).selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!k(i.parentNode,"optgroup"))){if(e=T(i).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var i,n,r=t.options,o=T.makeArray(e),a=r.length;a--;)((n=r[a]).selected=-1<T.inArray(T.valHooks.option.get(n),o))&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<T.inArray(T(t).val(),e)}},m.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),m.focusin="onfocusin"in C;var me=/^(?:focusinfocus|focusoutblur)$/,ye=function(t){t.stopPropagation()};T.extend(T.event,{trigger:function(t,e,i,n){var r,o,a,s,l,h,c,u,f=[i||S],d=v.call(t,"type")?t.type:t,p=v.call(t,"namespace")?t.namespace.split("."):[];if(o=u=a=i=i||S,3!==i.nodeType&&8!==i.nodeType&&!me.test(d+T.event.triggered)&&(-1<d.indexOf(".")&&(d=(p=d.split(".")).shift(),p.sort()),l=d.indexOf(":")<0&&"on"+d,(t=t[T.expando]?t:new T.Event(d,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:T.makeArray(e,[t]),c=T.event.special[d]||{},n||!c.trigger||!1!==c.trigger.apply(i,e))){if(!n&&!c.noBubble&&!_(i)){for(s=c.delegateType||d,me.test(s+d)||(o=o.parentNode);o;o=o.parentNode)f.push(o),a=o;a===(i.ownerDocument||S)&&f.push(a.defaultView||a.parentWindow||C)}for(r=0;(o=f[r++])&&!t.isPropagationStopped();)u=o,t.type=1<r?s:c.bindType||d,(h=($.get(o,"events")||{})[t.type]&&$.get(o,"handle"))&&h.apply(o,e),(h=l&&o[l])&&h.apply&&V(o)&&(t.result=h.apply(o,e),!1===t.result&&t.preventDefault());return t.type=d,n||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(f.pop(),e)||!V(i)||l&&y(i[d])&&!_(i)&&((a=i[l])&&(i[l]=null),T.event.triggered=d,t.isPropagationStopped()&&u.addEventListener(d,ye),i[d](),t.isPropagationStopped()&&u.removeEventListener(d,ye),T.event.triggered=void 0,a&&(i[l]=a)),t.result}},simulate:function(t,e,i){var n=T.extend(new T.Event,i,{type:t,isSimulated:!0});T.event.trigger(n,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each(function(){T.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return T.event.trigger(t,e,i,!0)}}),m.focusin||T.each({focus:"focusin",blur:"focusout"},function(i,n){var r=function(t){T.event.simulate(n,t.target,T.event.fix(t))};T.event.special[n]={setup:function(){var t=this.ownerDocument||this,e=$.access(t,n);e||t.addEventListener(i,r,!0),$.access(t,n,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=$.access(t,n)-1;e?$.access(t,n,e):(t.removeEventListener(i,r,!0),$.remove(t,n))}}});var _e=C.location,xe=Date.now(),be=/\?/;T.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new C.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+t),e};var we=/\[\]$/,Ce=/\r?\n/g,Se=/^(?:submit|button|image|reset|file)$/i,Te=/^(?:input|select|textarea|keygen)/i;function Oe(i,t,n,r){var e;if(Array.isArray(t))T.each(t,function(t,e){n||we.test(i)?r(i,e):Oe(i+"["+("object"==typeof e&&null!=e?t:"")+"]",e,n,r)});else if(n||"object"!==b(t))r(i,t);else for(e in t)Oe(i+"["+e+"]",t[e],n,r)}T.param=function(t,e){var i,n=[],r=function(t,e){var i=y(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,function(){r(this.name,this.value)});else for(i in t)Oe(i,t[i],e,r);return n.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&Te.test(this.nodeName)&&!Se.test(t)&&(this.checked||!lt.test(t))}).map(function(t,e){var i=T(this).val();return null==i?null:Array.isArray(i)?T.map(i,function(t){return{name:e.name,value:t.replace(Ce,"\r\n")}}):{name:e.name,value:i.replace(Ce,"\r\n")}}).get()}});var ke=/%20/g,Ae=/#.*$/,Me=/([?&])_=[^&]*/,De=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ie=/^(?:GET|HEAD)$/,Pe=/^\/\//,Ee={},Le={},je="*/".concat("*"),Re=S.createElement("a");function Be(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var i,n=0,r=t.toLowerCase().match(j)||[];if(y(e))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(o[i]=o[i]||[]).unshift(e)):(o[i]=o[i]||[]).push(e)}}function Fe(e,r,o,a){var s={},l=e===Le;function h(t){var n;return s[t]=!0,T.each(e[t]||[],function(t,e){var i=e(r,o,a);return"string"!=typeof i||l||s[i]?l?!(n=i):void 0:(r.dataTypes.unshift(i),h(i),!1)}),n}return h(r.dataTypes[0])||!s["*"]&&h("*")}function Ne(t,e){var i,n,r=T.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&T.extend(!0,t,n),t}Re.href=_e.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_e.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_e.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":je,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ne(Ne(t,T.ajaxSettings),e):Ne(T.ajaxSettings,t)},ajaxPrefilter:Be(Ee),ajaxTransport:Be(Le),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var c,u,f,i,d,n,p,g,r,o,v=T.ajaxSetup({},e),m=v.context||v,y=v.context&&(m.nodeType||m.jquery)?T(m):T.event,_=T.Deferred(),x=T.Callbacks("once memory"),b=v.statusCode||{},a={},s={},l="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(p){if(!i)for(i={};e=De.exec(f);)i[e[1].toLowerCase()]=e[2];e=i[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return p?f:null},setRequestHeader:function(t,e){return null==p&&(t=s[t.toLowerCase()]=s[t.toLowerCase()]||t,a[t]=e),this},overrideMimeType:function(t){return null==p&&(v.mimeType=t),this},statusCode:function(t){var e;if(t)if(p)w.always(t[w.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||l;return c&&c.abort(e),h(0,e),this}};if(_.promise(w),v.url=((t||v.url||_e.href)+"").replace(Pe,_e.protocol+"//"),v.type=e.method||e.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(j)||[""],null==v.crossDomain){n=S.createElement("a");try{n.href=v.url,n.href=n.href,v.crossDomain=Re.protocol+"//"+Re.host!=n.protocol+"//"+n.host}catch(t){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=T.param(v.data,v.traditional)),Fe(Ee,v,e,w),p)return w;for(r in(g=T.event&&v.global)&&0==T.active++&&T.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ie.test(v.type),u=v.url.replace(Ae,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(ke,"+")):(o=v.url.slice(u.length),v.data&&(v.processData||"string"==typeof v.data)&&(u+=(be.test(u)?"&":"?")+v.data,delete v.data),!1===v.cache&&(u=u.replace(Me,"$1"),o=(be.test(u)?"&":"?")+"_="+xe+++o),v.url=u+o),v.ifModified&&(T.lastModified[u]&&w.setRequestHeader("If-Modified-Since",T.lastModified[u]),T.etag[u]&&w.setRequestHeader("If-None-Match",T.etag[u])),(v.data&&v.hasContent&&!1!==v.contentType||e.contentType)&&w.setRequestHeader("Content-Type",v.contentType),w.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+je+"; q=0.01":""):v.accepts["*"]),v.headers)w.setRequestHeader(r,v.headers[r]);if(v.beforeSend&&(!1===v.beforeSend.call(m,w,v)||p))return w.abort();if(l="abort",x.add(v.complete),w.done(v.success),w.fail(v.error),c=Fe(Le,v,e,w)){if(w.readyState=1,g&&y.trigger("ajaxSend",[w,v]),p)return w;v.async&&0<v.timeout&&(d=C.setTimeout(function(){w.abort("timeout")},v.timeout));try{p=!1,c.send(a,h)}catch(t){if(p)throw t;h(-1,t)}}else h(-1,"No Transport");function h(t,e,i,n){var r,o,a,s,l,h=e;p||(p=!0,d&&C.clearTimeout(d),c=void 0,f=n||"",w.readyState=0<t?4:0,r=200<=t&&t<300||304===t,i&&(s=function(t,e,i){for(var n,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),i[o]}(v,w,i)),s=function(t,e,i,n){var r,o,a,s,l,h={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)h[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=h[l+" "+o]||h["* "+o]))for(r in h)if((s=r.split(" "))[1]===o&&(a=h[l+" "+s[0]]||h["* "+s[0]])){!0===a?a=h[r]:!0!==h[r]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(v,s,w,r),r?(v.ifModified&&((l=w.getResponseHeader("Last-Modified"))&&(T.lastModified[u]=l),(l=w.getResponseHeader("etag"))&&(T.etag[u]=l)),204===t||"HEAD"===v.type?h="nocontent":304===t?h="notmodified":(h=s.state,o=s.data,r=!(a=s.error))):(a=h,!t&&h||(h="error",t<0&&(t=0))),w.status=t,w.statusText=(e||h)+"",r?_.resolveWith(m,[o,h,w]):_.rejectWith(m,[w,h,a]),w.statusCode(b),b=void 0,g&&y.trigger(r?"ajaxSuccess":"ajaxError",[w,v,r?o:a]),x.fireWith(m,[w,h]),g&&(y.trigger("ajaxComplete",[w,v]),--T.active||T.event.trigger("ajaxStop")))}return w},getJSON:function(t,e,i){return T.get(t,e,i,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],function(t,r){T[r]=function(t,e,i,n){return y(e)&&(n=n||i,i=e,e=void 0),T.ajax(T.extend({url:t,type:r,dataType:n,data:e,success:i},T.isPlainObject(t)&&t))}}),T._evalUrl=function(t){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},T.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(i){return y(i)?this.each(function(t){T(this).wrapInner(i.call(this,t))}):this.each(function(){var t=T(this),e=t.contents();e.length?e.wrapAll(i):t.append(i)})},wrap:function(e){var i=y(e);return this.each(function(t){T(this).wrapAll(i?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(t){}};var ze={0:200,1223:204},He=T.ajaxSettings.xhr();m.cors=!!He&&"withCredentials"in He,m.ajax=He=!!He,T.ajaxTransport(function(r){var o,a;if(m.cors||He&&!r.crossDomain)return{send:function(t,e){var i,n=r.xhr();if(n.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(i in r.xhrFields)n[i]=r.xhrFields[i];for(i in r.mimeType&&n.overrideMimeType&&n.overrideMimeType(r.mimeType),r.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)n.setRequestHeader(i,t[i]);o=function(t){return function(){o&&(o=a=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,"abort"===t?n.abort():"error"===t?"number"!=typeof n.status?e(0,"error"):e(n.status,n.statusText):e(ze[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=o(),a=n.onerror=n.ontimeout=o("error"),void 0!==n.onabort?n.onabort=a:n.onreadystatechange=function(){4===n.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{n.send(r.hasContent&&r.data||null)}catch(t){if(o)throw t}},abort:function(){o&&o()}}}),T.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),T.ajaxTransport("script",function(i){var n,r;if(i.crossDomain)return{send:function(t,e){n=T("<script>").prop({charset:i.scriptCharset,src:i.url}).on("load error",r=function(t){n.remove(),r=null,t&&e("error"===t.type?404:200,t.type)}),S.head.appendChild(n[0])},abort:function(){r&&r()}}});var We,Ge=[],Xe=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ge.pop()||T.expando+"_"+xe++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",function(t,e,i){var n,r,o,a=!1!==t.jsonp&&(Xe.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xe.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Xe,"$1"+n):!1!==t.jsonp&&(t.url+=(be.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return o||T.error(n+" was not called"),o[0]},t.dataTypes[0]="json",r=C[n],C[n]=function(){o=arguments},i.always(function(){void 0===r?T(C).removeProp(n):C[n]=r,t[n]&&(t.jsonpCallback=e.jsonpCallback,Ge.push(n)),o&&y(r)&&r(o[0]),o=r=void 0}),"script"}),m.createHTMLDocument=((We=S.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===We.childNodes.length),T.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(m.createHTMLDocument?((n=(e=S.implementation.createHTMLDocument("")).createElement("base")).href=S.location.href,e.head.appendChild(n)):e=S),o=!i&&[],(r=A.exec(t))?[e.createElement(r[1])]:(r=mt([t],e,o),o&&o.length&&T(o).remove(),T.merge([],r.childNodes)));var n,r,o},T.fn.load=function(t,e,i){var n,r,o,a=this,s=t.indexOf(" ");return-1<s&&(n=de(t.slice(s)),t=t.slice(0,s)),y(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),0<a.length&&T.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(n?T("<div>").append(T.parseHTML(t)).find(n):t)}).always(i&&function(t,e){a.each(function(){i.apply(this,o||[t.responseText,e,t])})}),this},T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){T.fn[e]=function(t){return this.on(e,t)}}),T.expr.pseudos.animated=function(e){return T.grep(T.timers,function(t){return e===t.elem}).length},T.offset={setOffset:function(t,e,i){var n,r,o,a,s,l,h=T.css(t,"position"),c=T(t),u={};"static"===h&&(t.style.position="relative"),s=c.offset(),o=T.css(t,"top"),l=T.css(t,"left"),("absolute"===h||"fixed"===h)&&-1<(o+l).indexOf("auto")?(a=(n=c.position()).top,r=n.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),y(e)&&(e=e.call(t,i,T.extend({},s))),null!=e.top&&(u.top=e.top-s.top+a),null!=e.left&&(u.left=e.left-s.left+r),"using"in e?e.using.call(t,u):c.css(u)}},T.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){T.offset.setOffset(this,e,t)});var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],r={top:0,left:0};if("fixed"===T.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((r=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),r.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-T.css(n,"marginTop",!0),left:e.left-r.left-T.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||yt})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var o="pageYOffset"===r;T.fn[e]=function(t){return W(this,function(t,e,i){var n;if(_(t)?n=t:9===t.nodeType&&(n=t.defaultView),void 0===i)return n?n[r]:t[e];n?n.scrollTo(o?n.pageXOffset:i,o?i:n.pageYOffset):t[e]=i},e,t,arguments.length)}}),T.each(["top","left"],function(t,i){T.cssHooks[i]=zt(m.pixelPosition,function(t,e){if(e)return e=Nt(t,i),Rt.test(e)?T(t).position()[i]+"px":e})}),T.each({Height:"height",Width:"width"},function(a,s){T.each({padding:"inner"+a,content:s,"":"outer"+a},function(n,o){T.fn[o]=function(t,e){var i=arguments.length&&(n||"boolean"!=typeof t),r=n||(!0===t||!0===e?"margin":"border");return W(this,function(t,e,i){var n;return _(t)?0===o.indexOf("outer")?t["inner"+a]:t.document.documentElement["client"+a]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+a],n["scroll"+a],t.body["offset"+a],n["offset"+a],n["client"+a])):void 0===i?T.css(t,e,r):T.style(t,e,i,r)},s,i?t:void 0,i)}})}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,i){T.fn[i]=function(t,e){return 0<arguments.length?this.on(i,null,t,e):this.trigger(i)}}),T.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),T.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),T.proxy=function(t,e){var i,n,r;if("string"==typeof e&&(i=t[e],e=t,t=i),y(t))return n=s.call(arguments,2),(r=function(){return t.apply(e||this,n.concat(s.call(arguments)))}).guid=t.guid=t.guid||T.guid++,r},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=k,T.isFunction=y,T.isWindow=_,T.camelCase=U,T.type=b,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===($e=function(){return T}.apply(qe,[]))||(Ve.exports=$e);var Ye=C.jQuery,Ue=C.$;return T.noConflict=function(t){return C.$===T&&(C.$=Ue),t&&C.jQuery===T&&(C.jQuery=Ye),T},t||(C.jQuery=C.$=T),T})},,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){(function(Buffer,process){var fabric=fabric||{version:"1.7.22"},Npc,Opc,Ppc,Qpc,Rpc,Spc,zwc,Awc,Bwc,Gyc,Hyc,Iyc,Jyc,Kyc,L$c,M$c,p_c,k3c,l3c,m3c,c4c,d4c,q7c,vud,Syd,ODd,PDd,XFd,AGd;exports.fabric=fabric,"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window,window.fabric=fabric):(fabric.document=__webpack_require__(1035).jsdom(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E")),fabric.document.createWindow?fabric.window=fabric.document.createWindow():fabric.window=fabric.document.parentWindow),fabric.isTouchSupported="ontouchstart"in fabric.window,fabric.isLikelyNode=void 0!==Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",fabric.fontPaths={},fabric.iMatrix=[1,0,0,1,0,0],fabric.canvasModule="canvas",fabric.perfLimitSizeTotal=2097152,fabric.maxCacheSideLimit=4096,fabric.minCacheSideLimit=256,fabric.charWidthsCache={},fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,function(){function n(t,e){if(this.__eventListeners[t]){var i=this.__eventListeners[t];e?i[i.indexOf(e)]=!1:fabric.util.array.fill(i,!1)}}function t(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function e(t,e){if(this.__eventListeners){if(0===arguments.length)for(t in this.__eventListeners)n.call(this,t);else if(1===arguments.length&&"object"==typeof t)for(var i in t)n.call(this,i,t[i]);else n.call(this,t,e);return this}}function i(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i){for(var n=0,r=i.length;n<r;n++)i[n]&&i[n].call(this,e||{});return this.__eventListeners[t]=i.filter(function(t){return!1!==t}),this}}}fabric.Observable={observe:t,stopObserving:e,fire:i,on:t,off:e,trigger:i}}(),fabric.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(t,e,i){var n=this.getObjects();return i?n[e]=t:n.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.renderAll(),this},remove:function(){for(var t,e=this.getObjects(),i=!1,n=0,r=arguments.length;n<r;n++)-1!==(t=e.indexOf(arguments[n]))&&(i=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[n]));return this.renderOnAddRemove&&i&&this.renderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),n=0,r=i.length;n<r;n++)t.call(e,i[n],n,i);return this},getObjects:function(e){return void 0===e?this._objects:this._objects.filter(function(t){return t.type===e})},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return-1<this.getObjects().indexOf(t)},complexity:function(){return this.getObjects().reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},fabric.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof fabric.Gradient||this.set(e,new fabric.Gradient(t))},_initPattern:function(t,e,i){!t||!t.source||t instanceof fabric.Pattern?i&&i():this.set(e,new fabric.Pattern(t,i))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var e=fabric.util.getFunctionBody(t.clipTo);void 0!==e&&(this.clipTo=new Function("ctx",e))}},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},Npc=exports,Opc=Math.sqrt,Ppc=Math.atan2,Qpc=Math.pow,Rpc=Math.abs,Spc=Math.PI/180,fabric.util={removeFromArray:function(t,e){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*Spc},radiansToDegrees:function(t){return t/Spc},rotatePoint:function(t,e,i){t.subtractEquals(e);var n=fabric.util.rotateVector(t,i);return new fabric.Point(n.x,n.y).addEquals(e)},rotateVector:function(t,e){var i=Math.sin(e),n=Math.cos(e);return{x:t.x*n-t.y*i,y:t.x*i+t.y*n}},transformPoint:function(t,e,i){return i?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t){var e=[t[0].x,t[1].x,t[2].x,t[3].x],i=fabric.util.array.min(e),n=fabric.util.array.max(e),r=Math.abs(i-n),o=[t[0].y,t[1].y,t[2].y,t[3].y],a=fabric.util.array.min(o),s=fabric.util.array.max(o);return{left:i,top:a,width:r,height:Math.abs(a-s)}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),i=[e*t[3],-e*t[1],-e*t[2],e*t[0]],n=fabric.util.transformPoint({x:t[4],y:t[5]},i,!0);return i[4]=-n.x,i[5]=-n.y,i},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\D{0,2}$/.exec(t),n=parseFloat(t);switch(e||(e=fabric.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return n*fabric.DPI/25.4;case"cm":return n*fabric.DPI/2.54;case"in":return n*fabric.DPI;case"pt":return n*fabric.DPI/72;case"pc":return n*fabric.DPI/72*12;case"em":return n*e;default:return n}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},resolveNamespace:function(t){if(!t)return fabric;var e,i=t.split("."),n=i.length,r=Npc||fabric.window;for(e=0;e<n;++e)r=r[i[e]];return r},loadImage:function(t,e,i,n){if(t){var r=fabric.util.createImage();r.onload=function(){e&&e.call(i,r),r=r.onload=r.onerror=null},r.onerror=function(){fabric.log("Error loading "+r.src),e&&e.call(i,null,!0),r=r.onload=r.onerror=null},0!==t.indexOf("data")&&n&&(r.crossOrigin=n),r.src=t}else e&&e.call(i,t)},enlivenObjects:function(t,e,r,o){function a(){++i===n&&e&&e(s)}var s=[],i=0,n=(t=t||[]).length;n?t.forEach(function(i,n){i&&i.type?fabric.util.getKlass(i.type,r).fromObject(i,function(t,e){e||(s[n]=t),o&&o(i,t,e),a()},!0):a()}):e&&e(s)},enlivenPatterns:function(t,e){function i(){++r===o&&e&&e(n)}var n=[],r=0,o=(t=t||[]).length;o?t.forEach(function(t,e){t&&t.source?new fabric.Pattern(t,function(t){n[e]=t,i()}):(n[e]=t,i())}):e&&e(n)},groupSVGElements:function(t,e,i){var n;return n=new fabric.PathGroup(t,e),void 0!==i&&(n.sourcePath=i),n},populateWithProperties:function(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var n=0,r=i.length;n<r;n++)i[n]in t&&(e[i[n]]=t[i[n]])},drawDashedLine:function(t,e,i,n,r,o){var a=n-e,s=r-i,l=Opc(a*a+s*s),h=Ppc(s,a),c=o.length,u=0,f=!0;for(t.save(),t.translate(e,i),t.moveTo(0,0),t.rotate(h),e=0;e<l;)l<(e+=o[u++%c])&&(e=l),t[f?"lineTo":"moveTo"](e,0),f=!f;t.restore()},createCanvasElement:function(t){return t||(t=fabric.document.createElement("canvas")),t.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(t),t},createImage:function(){return fabric.isLikelyNode?new(__webpack_require__(875).Image):fabric.document.createElement("img")},createAccessors:function(t){var e,i,n,r,o,a=t.prototype;for(e=a.stateProperties.length;e--;)r="set"+(n=(i=a.stateProperties[e]).charAt(0).toUpperCase()+i.slice(1)),a[o="get"+n]||(a[o]=new Function('return this.get("'+i+'")')),a[r]||(a[r]=new Function("value",'return this.set("'+i+'", value)'))},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var e=Ppc(t[1],t[0]),i=Qpc(t[0],2)+Qpc(t[1],2),n=Opc(i),r=(t[0]*t[3]-t[2]*t[1])/n,o=Ppc(t[0]*t[2]+t[1]*t[3],i);return{angle:e/Spc,scaleX:n,scaleY:r,skewX:o/Spc,skewY:0,translateX:t[4],translateY:t[5]}},customTransformMatrix:function(t,e,i){var n=[1,0,Rpc(Math.tan(i*Spc)),1],r=[Rpc(t),0,0,Rpc(e)];return fabric.util.multiplyTransformMatrices(r,n,!0)},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.setAngle(0)},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,i,n){0<n&&(n<e?e-=n:e=0,n<i?i-=n:i=0);var r,o=!0,a=t.getImageData(e,i,2*n||1,2*n||1),s=a.data.length;for(r=3;r<s&&!1!=(o=a.data[r]<=0);r+=4);return a=null,o},parsePreserveAspectRatioAttribute:function(t){var e,i="meet",n=t.split(" ");return n&&n.length&&("meet"!==(i=n.pop())&&"slice"!==i?(e=i,i="meet"):n.length&&(e=n.pop())),{meetOrSlice:i,alignX:"none"!==e?e.slice(1,4):"none",alignY:"none"!==e?e.slice(5,8):"none"}},clearFabricFontCache:function(t){t?fabric.charWidthsCache[t]&&delete fabric.charWidthsCache[t]:fabric.charWidthsCache={}},limitDimsByArea:function(t,e){var i=Math.sqrt(e*t),n=Math.floor(e/i);return{x:Math.floor(i),y:n}},capValue:function(t,e,i){return Math.max(t,Math.min(e,i))}},function(){var j={},w={},D={},R=Array.prototype.join;function v(t,e,i,n,r,o,a){var s=R.call(arguments);if(j[s])return j[s];var l=Math.PI,h=a*l/180,c=Math.sin(h),u=Math.cos(h),f=0,d=0,p=-u*t*.5-c*e*.5,g=-u*e*.5+c*t*.5,v=(i=Math.abs(i))*i,m=(n=Math.abs(n))*n,y=g*g,_=p*p,x=v*m-v*y-m*_,b=0;if(x<0){var w=Math.sqrt(1-x/(v*m));i*=w,n*=w}else b=(r===o?-1:1)*Math.sqrt(x/(v*y+m*_));var C=b*i*g/n,S=-b*n*p/i,T=u*C-c*S+.5*t,O=c*C+u*S+.5*e,k=F(1,0,(p-C)/i,(g-S)/n),A=F((p-C)/i,(g-S)/n,(-p-C)/i,(-g-S)/n);0===o&&0<A?A-=2*l:1===o&&A<0&&(A+=2*l);for(var M=Math.ceil(Math.abs(A/l*2)),D=[],I=A/M,P=8/3*Math.sin(I/4)*Math.sin(I/4)/Math.sin(I/2),E=k+I,L=0;L<M;L++)D[L]=B(k,E,u,c,i,n,T,O,P,f,d),f=D[L][4],d=D[L][5],k=E,E+=I;return j[s]=D}function B(t,e,i,n,r,o,a,s,l,h,c){var u=R.call(arguments);if(w[u])return w[u];var f=Math.cos(t),d=Math.sin(t),p=Math.cos(e),g=Math.sin(e),v=i*r*p-n*o*g+a,m=n*r*p+i*o*g+s,y=h+l*(-i*r*d-n*o*f),_=c+l*(-n*r*d+i*o*f),x=v+l*(i*r*g+n*o*p),b=m+l*(n*r*g-i*o*p);return w[u]=[y,_,x,b,v,m],w[u]}function F(t,e,i,n){var r=Math.atan2(e,t),o=Math.atan2(n,i);return r<=o?o-r:2*Math.PI-(r-o)}function m(t,e,i,n,r,o,a,s){var l=R.call(arguments);if(D[l])return D[l];var h,c,u,f,d,p,g,v,m=Math.sqrt,y=Math.min,_=Math.max,x=Math.abs,b=[],w=[[],[]];c=6*t-12*i+6*r,h=-3*t+9*i-9*r+3*a,u=3*i-3*t;for(var C=0;C<2;++C)if(0<C&&(c=6*e-12*n+6*o,h=-3*e+9*n-9*o+3*s,u=3*n-3*e),x(h)<1e-12){if(x(c)<1e-12)continue;0<(f=-u/c)&&f<1&&b.push(f)}else(g=c*c-4*u*h)<0||(0<(d=(-c+(v=m(g)))/(2*h))&&d<1&&b.push(d),0<(p=(-c-v)/(2*h))&&p<1&&b.push(p));for(var S,T,O,k=b.length,A=k;k--;)S=(O=1-(f=b[k]))*O*O*t+3*O*O*f*i+3*O*f*f*r+f*f*f*a,w[0][k]=S,T=O*O*O*e+3*O*O*f*n+3*O*f*f*o+f*f*f*s,w[1][k]=T;w[0][A]=t,w[1][A]=e,w[0][A+1]=a,w[1][A+1]=s;var M=[{x:y.apply(null,w[0]),y:y.apply(null,w[1])},{x:_.apply(null,w[0]),y:_.apply(null,w[1])}];return D[l]=M}fabric.util.drawArc=function(t,e,i,n){for(var r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],h=[[],[],[],[]],c=v(n[5]-e,n[6]-i,r,o,s,l,a),u=0,f=c.length;u<f;u++)h[u][0]=c[u][0]+e,h[u][1]=c[u][1]+i,h[u][2]=c[u][2]+e,h[u][3]=c[u][3]+i,h[u][4]=c[u][4]+e,h[u][5]=c[u][5]+i,t.bezierCurveTo.apply(t,h[u])},fabric.util.getBoundsOfArc=function(t,e,i,n,r,o,a,s,l){for(var h,c=0,u=0,f=[],d=v(s-t,l-e,i,n,o,a,r),p=0,g=d.length;p<g;p++)h=m(c,u,d[p][0],d[p][1],d[p][2],d[p][3],d[p][4],d[p][5]),f.push({x:h[0].x+t,y:h[0].y+e}),f.push({x:h[1].x+t,y:h[1].y+e}),c=d[p][4],u=d[p][5];return f},fabric.util.getBoundsOfCurve=m}(),function(){var a=Array.prototype.slice;function i(t,e,i){if(t&&0!==t.length){var n=t.length-1,r=e?t[n][e]:t[n];if(e)for(;n--;)i(t[n][e],r)&&(r=t[n][e]);else for(;n--;)i(t[n],r)&&(r=t[n]);return r}}Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null==this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var n=0;if(0<arguments.length&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==Number.POSITIVE_INFINITY&&n!==Number.NEGATIVE_INFINITY&&(n=(0<n||-1)*Math.floor(Math.abs(n)))),i<=n)return-1;for(var r=0<=n?n:Math.max(i-Math.abs(n),0);r<i;r++)if(r in e&&e[r]===t)return r;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)i in this&&t.call(e,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var i=[],n=0,r=this.length>>>0;n<r;n++)n in this&&(i[n]=t.call(e,this[n],n,this));return i}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)if(i in this&&!t.call(e,this[i],i,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)if(i in this&&t.call(e,this[i],i,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var i,n=[],r=0,o=this.length>>>0;r<o;r++)r in this&&(i=this[r],t.call(e,i,r,this)&&n.push(i));return n}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,i=this.length>>>0,n=0;if(1<arguments.length)e=arguments[1];else for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;n<i;n++)n in this&&(e=t.call(null,e,this[n],n,this));return e}),fabric.util.array={fill:function(t,e){for(var i=t.length;i--;)t[i]=e;return t},invoke:function(t,e){for(var i=a.call(arguments,2),n=[],r=0,o=t.length;r<o;r++)n[r]=i.length?t[r][e].apply(t[r],i):t[r][e].call(t[r]);return n},min:function(t,e){return i(t,e,function(t,e){return t<e})},max:function(t,e){return i(t,e,function(t,e){return e<=t})}}}(),function(){function a(t,e,i){if(i)if(!fabric.isLikelyNode&&e instanceof Element)t=e;else if(e instanceof Array){t=[];for(var n=0,r=e.length;n<r;n++)t[n]=a({},e[n],i)}else if(e&&"object"==typeof e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=a({},e[o],i));else t=e;else for(var o in e)t[o]=e[o];return t}fabric.util.object={extend:a,clone:function(t,e){return a({},t,e)}}}(),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},zwc=Array.prototype.slice,Awc=Function.prototype.apply,Bwc=function(){},Function.prototype.bind||(Function.prototype.bind=function(t){var e,i=this,n=zwc.call(arguments,1);return e=n.length?function(){return Awc.call(i,this instanceof Bwc?this:t,n.concat(zwc.call(arguments)))}:function(){return Awc.call(i,this instanceof Bwc?this:t,arguments)},Bwc.prototype=this.prototype,e.prototype=new Bwc,e}),function(){var o=Array.prototype.slice,a=function(){},i=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),s=function(t,n,r){for(var e in n)e in t.prototype&&"function"==typeof t.prototype[e]&&-1<(n[e]+"").indexOf("callSuper")?t.prototype[e]=function(i){return function(){var t=this.constructor.superclass;this.constructor.superclass=r;var e=n[i].apply(this,arguments);if(this.constructor.superclass=t,"initialize"!==i)return e}}(e):t.prototype[e]=n[e],i&&(n.toString!==Object.prototype.toString&&(t.prototype.toString=n.toString),n.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=n.valueOf))};function l(){}function h(t){for(var e=null,i=this;i.constructor.superclass;){var n=i.constructor.superclass.prototype[t];if(i[t]!==n){e=n;break}i=i.constructor.superclass.prototype}return e?1<arguments.length?e.apply(this,o.call(arguments,1)):e.call(this):console.log("tried to callSuper "+t+", method not found in prototype chain",this)}fabric.util.createClass=function(){var t=null,e=o.call(arguments,0);function i(){this.initialize.apply(this,arguments)}"function"==typeof e[0]&&(t=e.shift()),i.superclass=t,i.subclasses=[],t&&(l.prototype=t.prototype,i.prototype=new l,t.subclasses.push(i));for(var n=0,r=e.length;n<r;n++)s(i,e[n],t);return i.prototype.initialize||(i.prototype.initialize=a),(i.prototype.constructor=i).prototype.callSuper=h,i}}(),function(){var n="unknown";function t(t){var e,i,n=Array.prototype.slice.call(arguments,1),r=n.length;for(i=0;i<r;i++)if(e=typeof t[n[i]],!/^(?:function|object|unknown)$/.test(e))return!1;return!0}var r,o,e,i,s=(e=0,function(t){return t.__uniqueID||(t.__uniqueID="uniqueID__"+e++)});function a(t,e){return{handler:e,wrappedHandler:(i=t,n=e,function(t){n.call(r(i),t||fabric.window.event)})};var i,n}i={},r=function(t){return i[t]},o=function(t,e){i[t]=e};var l,h,c=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),u=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),f={},d={};c?(l=function(t,e,i,n){t&&t.addEventListener(e,i,!u&&n)},h=function(t,e,i,n){t&&t.removeEventListener(e,i,!u&&n)}):u?(l=function(t,e,i){if(t){var n=s(t);o(n,t),f[n]||(f[n]={}),f[n][e]||(f[n][e]=[]);var r=a(n,i);f[n][e].push(r),t.attachEvent("on"+e,r.wrappedHandler)}},h=function(t,e,i){if(t){var n,r=s(t);if(f[r]&&f[r][e])for(var o=0,a=f[r][e].length;o<a;o++)(n=f[r][e][o])&&n.handler===i&&(t.detachEvent("on"+e,n.wrappedHandler),f[r][e][o]=null)}}):(l=function(t,e,i){if(t){var r,o,n=s(t);if(d[n]||(d[n]={}),!d[n][e]){d[n][e]=[];var a=t["on"+e];a&&d[n][e].push(a),t["on"+e]=(r=n,o=e,function(t){if(d[r]&&d[r][o])for(var e=d[r][o],i=0,n=e.length;i<n;i++)e[i].call(this,t||fabric.window.event)})}d[n][e].push(i)}},h=function(t,e,i){if(t){var n=s(t);if(d[n]&&d[n][e])for(var r=d[n][e],o=0,a=r.length;o<a;o++)r[o]===i&&r.splice(o,1)}}),fabric.util.addListener=l,fabric.util.removeListener=h;var p=function(t){return typeof t.clientX!==n?t.clientX:0},g=function(t){return typeof t.clientY!==n?t.clientY:0};function v(t,e,i){var n="touchend"===t.type?"changedTouches":"touches";return t[n]&&t[n][0]&&t[n][0][e]-(t[n][0][e]-t[n][0][i])||t[i]}fabric.isTouchSupported&&(p=function(t){return v(t,"pageX","clientX")},g=function(t){return v(t,"pageY","clientY")}),fabric.util.getPointer=function(t){t||(t=fabric.window.event);var e=t.target||(typeof t.srcElement!==n?t.srcElement:null),i=fabric.util.getScrollLeftTop(e);return{x:p(t)+i.left,y:g(t)+i.top}},fabric.util.object.extend(fabric.util,fabric.Observable)}(),Gyc=fabric.document.createElement("div"),Hyc="string"==typeof Gyc.style.opacity,Iyc="string"==typeof Gyc.style.filter,Jyc=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,Kyc=function(t){return t},Hyc?Kyc=function(t,e){return t.style.opacity=e,t}:Iyc&&(Kyc=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),Jyc.test(i.filter)?(e=.9999<=e?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(Jyc,e)):i.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=function(t,e){var i=t.style;if(!i)return t;if("string"==typeof e)return t.style.cssText+=";"+e,-1<e.indexOf("opacity")?Kyc(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var n in e)"opacity"===n?Kyc(t,e[n]):i["float"===n||"cssFloat"===n?void 0===i.styleFloat?"cssFloat":"styleFloat":n]=e[n];return t},function(){var e=Array.prototype.slice;var t,l,i,n,r=function(t){return e.call(t,0)};try{t=r(fabric.document.childNodes)instanceof Array}catch(t){}function o(t,e){var i=fabric.document.createElement(t);for(var n in e)"class"===n?i.className=e[n]:"for"===n?i.htmlFor=e[n]:i.setAttribute(n,e[n]);return i}function h(t){for(var e=0,i=0,n=fabric.document.documentElement,r=fabric.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===fabric.document?(e=r.scrollLeft||n.scrollLeft||0,i=r.scrollTop||n.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1!==t.nodeType||"fixed"!==fabric.util.getElementStyle(t,"position")););return{left:e,top:i}}t||(r=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e}),l=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){var i=fabric.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},i=fabric.document.documentElement.style,n="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"",fabric.util.makeElementUnselectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),n?t.style[n]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t},fabric.util.makeElementSelectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=null),n?t.style[n]="":"string"==typeof t.unselectable&&(t.unselectable=""),t},fabric.util.getScript=function(t,e){var i=fabric.document.getElementsByTagName("head")[0],n=fabric.document.createElement("script"),r=!0;n.onload=n.onreadystatechange=function(t){if(r){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;r=!1,e(t||fabric.window.event),n=n.onload=n.onreadystatechange=null}},n.src=t,i.appendChild(n)},fabric.util.getById=function(t){return"string"==typeof t?fabric.document.getElementById(t):t},fabric.util.toArray=r,fabric.util.makeElement=o,fabric.util.addClass=function(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)},fabric.util.wrapElement=function(t,e,i){return"string"==typeof e&&(e=o(e,i)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e},fabric.util.getScrollLeftTop=h,fabric.util.getElementOffset=function(t){var e,i,n=t&&t.ownerDocument,r={left:0,top:0},o={left:0,top:0},a={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!n)return o;for(var s in a)o[a[s]]+=parseInt(l(t,s),10)||0;return e=n.documentElement,void 0!==t.getBoundingClientRect&&(r=t.getBoundingClientRect()),i=h(t),{left:r.left+i.left-(e.clientLeft||0)+o.left,top:r.top+i.top-(e.clientTop||0)+o.top}},fabric.util.getElementStyle=l}(),function(){var l=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{if(t[e]())return t[e]}catch(t){}}();function h(){}fabric.util.request=function(t,e){e||(e={});var i,n,r=e.method?e.method.toUpperCase():"GET",o=e.onComplete||function(){},a=l(),s=e.body||e.parameters;return a.onreadystatechange=function(){4===a.readyState&&(o(a),a.onreadystatechange=h)},"GET"===r&&(s=null,"string"==typeof e.parameters&&(i=t,n=e.parameters,t=i+(/\?/.test(i)?"&":"?")+n)),a.open(r,t,!0),"POST"!==r&&"PUT"!==r||a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(s),a}}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){void 0!==console[t]&&"function"==typeof console[t].apply&&(fabric[t]=function(){return console[t].apply(console,arguments)})}),function(){function e(){return!1}var t=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){fabric.window.setTimeout(t,1e3/60)};function y(){return t.apply(fabric.window,arguments)}fabric.util.animate=function(m){y(function(t){m||(m={});var a,s=t||+new Date,l=m.duration||500,h=s+l,c=m.onChange||e,u=m.abort||e,f=m.onComplete||e,d=m.easing||function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},p="startValue"in m?m.startValue:0,g="endValue"in m?m.endValue:100,v=m.byValue||g-p;m.onStart&&m.onStart(),function t(e){if(u())f(g,1,1);else{a=e||+new Date;var i=h<a?l:a-s,n=i/l,r=d(i,p,v,l),o=Math.abs((r-p)/v);c(r,o,n),h<a?m.onComplete&&m.onComplete():y(t)}}(s)})},fabric.util.requestAnimFrame=y}(),fabric.util.animateColor=function(t,e,i,h){var n=new fabric.Color(t).getSource(),r=new fabric.Color(e).getSource();h=h||{},fabric.util.animate(fabric.util.object.extend(h,{duration:i||500,startValue:n,endValue:r,byValue:r,easing:function(t,e,i,n){var r,o,a,s,l=h.colorEasing?h.colorEasing(t,n):1-Math.cos(t/n*(Math.PI/2));return r=e,o=i,a=l,s="rgba("+parseInt(r[0]+a*(o[0]-r[0]),10)+","+parseInt(r[1]+a*(o[1]-r[1]),10)+","+parseInt(r[2]+a*(o[2]-r[2]),10),s+=","+(r&&o?parseFloat(r[3]+a*(o[3]-r[3])):1),s+=")"}}))},function(){function a(t,e,i,n){return t<Math.abs(e)?(t=e,n=i/4):n=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:n}}function s(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function r(t,e,i,n){return i-o(n-t,0,i,n)+e}function o(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}fabric.util.ease={easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e},easeInOutExpo:function(t,e,i,n){return 0===t?e:t===n?e+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,n){var r=0;return 0===t?e:1==(t/=n)?e+i:(r||(r=.3*n),-s(a(i,i,r,1.70158),t,n)+e)},easeOutElastic:function(t,e,i,n){var r=0;if(0===t)return e;if(1==(t/=n))return e+i;r||(r=.3*n);var o=a(i,i,r,1.70158);return o.a*Math.pow(2,-10*t)*Math.sin((t*n-o.s)*(2*Math.PI)/o.p)+o.c+e},easeInOutElastic:function(t,e,i,n){var r=0;if(0===t)return e;if(2==(t/=n/2))return e+i;r||(r=n*(.3*1.5));var o=a(i,i,r,1.70158);return t<1?-.5*s(o,t,n)+e:o.a*Math.pow(2,-10*(t-=1))*Math.sin((t*n-o.s)*(2*Math.PI)/o.p)*.5+o.c+e},easeInBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),(t/=n/2)<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:r,easeOutBounce:o,easeInOutBounce:function(t,e,i,n){return t<n/2?.5*r(2*t,0,i,n)+e:.5*o(2*t-n,0,i,n)+.5*i+e}}}(),function(t){"use strict";var b=t.fabric||(t.fabric={}),_=b.util.object.extend,u=b.util.object.clone,x=b.util.toFixed,w=b.util.parseUnit,C=b.util.multiplyTransformMatrices,f=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/i,S=/^(symbol|image|marker|pattern|view|svg)$/i,d=/^(?:pattern|defs|symbol|metadata|clipPath|mask)$/i,T=/^(symbol|g|a|svg)$/i,O={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX",opacity:"opacity"},k={stroke:"strokeOpacity",fill:"fillOpacity"};function g(t,e){for(var i,n,r=[],o=0;o<e.length;o++)i=e[o],n=t.getElementsByTagName(i),r=r.concat(Array.prototype.slice.call(n));return r}function A(t,e){var i,n=!0;return(i=r(t,e.pop()))&&e.length&&(n=function(t,e){var i,n=!0;for(;t.parentNode&&1===t.parentNode.nodeType&&e.length;)n&&(i=e.pop()),t=t.parentNode,n=r(t,i);return 0===e.length}(t,e)),i&&n&&0===e.length}function r(t,e){var i,n=t.nodeName,r=t.getAttribute("class"),o=t.getAttribute("id");if(i=new RegExp("^"+n,"i"),e=e.replace(i,""),o&&e.length&&(i=new RegExp("#"+o+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")),r&&e.length)for(var a=(r=r.split(" ")).length;a--;)i=new RegExp("\\."+r[a]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"");return 0===e.length}function v(t,e){var i;if(t.getElementById&&(i=t.getElementById(e)),i)return i;var n,r,o=t.getElementsByTagName("*");for(r=0;r<o.length;r++)if(e===(n=o[r]).getAttribute("id"))return n}b.cssRules={},b.gradientDefs={},b.parseTransformAttribute=function(){function y(t,e,i){t[i]=Math.tan(b.util.degreesToRadians(e[0]))}var _=[1,0,0,1,0,0],t=b.reNum,e="(?:\\s+,?\\s*|,\\s*)",x="(?:"+("(?:(matrix)\\s*\\(\\s*("+t+")"+e+"("+t+")"+e+"("+t+")"+e+"("+t+")"+e+"("+t+")"+e+"("+t+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+t+")(?:"+e+"("+t+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+t+")(?:"+e+"("+t+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+t+")(?:"+e+"("+t+")"+e+"("+t+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+t+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+t+")\\s*\\))")+")",i=new RegExp("^\\s*(?:"+("(?:"+x+"(?:"+e+"*"+x+")*)")+"?)\\s*$"),n=new RegExp(x,"g");return function(t){var v=_.concat(),m=[];if(!t||t&&!i.test(t))return v;t.replace(n,function(t){var e,i,n,r,o,a,s,l,h,c,u,f,d=new RegExp(x).exec(t).filter(function(t){return!!t}),p=d[1],g=d.slice(2).map(parseFloat);switch(p){case"translate":f=g,(u=v)[4]=f[0],2===f.length&&(u[5]=f[1]);break;case"rotate":g[0]=b.util.degreesToRadians(g[0]),o=v,a=g,s=Math.cos(a[0]),l=Math.sin(a[0]),c=h=0,3===a.length&&(h=a[1],c=a[2]),o[0]=s,o[1]=l,o[2]=-l,o[3]=s,o[4]=h-(s*h-l*c),o[5]=c-(l*h+s*c);break;case"scale":e=v,n=(i=g)[0],r=2===i.length?i[1]:i[0],e[0]=n,e[3]=r;break;case"skewX":y(v,g,2);break;case"skewY":y(v,g,1);break;case"matrix":v=g}m.push(v.concat()),v=_.concat()});for(var e=m[0];1<m.length;)m.shift(),e=b.util.multiplyTransformMatrices(e,m[0]);return e}}();var M=new RegExp("^\\s*("+b.reNum+"+)\\s*,?\\s*("+b.reNum+"+)\\s*,?\\s*("+b.reNum+"+)\\s*,?\\s*("+b.reNum+"+)\\s*$");function m(t){var e,i,n,r,o,a,s=t.getAttribute("viewBox"),l=1,h=1,c=t.getAttribute("width"),u=t.getAttribute("height"),f=t.getAttribute("x")||0,d=t.getAttribute("y")||0,p=t.getAttribute("preserveAspectRatio")||"",g=!s||!S.test(t.nodeName)||!(s=s.match(M)),v=!c||!u||"100%"===c||"100%"===u,m=g&&v,y={},_="";if(y.width=0,y.height=0,y.toBeParsed=m)return y;if(g)return y.width=w(c),y.height=w(u),y;if(e=-parseFloat(s[1]),i=-parseFloat(s[2]),n=parseFloat(s[3]),r=parseFloat(s[4]),v?(y.width=n,y.height=r):(y.width=w(c),y.height=w(u),l=y.width/n,h=y.height/r),"none"!==(p=b.util.parsePreserveAspectRatioAttribute(p)).alignX&&(h=l=h<l?h:l),1===l&&1===h&&0===e&&0===i&&0===f&&0===d)return y;if((f||d)&&(_=" translate("+w(f)+" "+w(d)+") "),o=_+" matrix("+l+" 0 0 "+h+" "+e*l+" "+i*h+") ","svg"===t.nodeName){for(a=t.ownerDocument.createElement("g");t.firstChild;)a.appendChild(t.firstChild);t.appendChild(a)}else o=(a=t).getAttribute("transform")+o;return a.setAttribute("transform",o),y}b.parseSVGDocument=function(t,e,i,n){if(t){!function(t){for(var e=g(t,["use","svg:use"]),i=0;e.length&&i<e.length;){var n,r,o,a,s=e[i],l=s.getAttribute("xlink:href").substr(1),h=s.getAttribute("x")||0,c=s.getAttribute("y")||0,u=v(t,l).cloneNode(!0),f=(u.getAttribute("transform")||"")+" translate("+h+", "+c+")",d=e.length;if(m(u),/^svg$/i.test(u.nodeName)){var p=u.ownerDocument.createElement("g");for(r=0,a=(o=u.attributes).length;r<a;r++)n=o.item(r),p.setAttribute(n.nodeName,n.nodeValue);for(;u.firstChild;)p.appendChild(u.firstChild);u=p}for(r=0,a=(o=s.attributes).length;r<a;r++)"x"!==(n=o.item(r)).nodeName&&"y"!==n.nodeName&&"xlink:href"!==n.nodeName&&("transform"===n.nodeName?f=n.nodeValue+" "+f:u.setAttribute(n.nodeName,n.nodeValue));u.setAttribute("transform",f),u.setAttribute("instantiated_by_use","1"),u.removeAttribute("id"),s.parentNode.replaceChild(u,s),e.length===d&&i++}}(t);var r=b.Object.__uid++,o=m(t),a=b.util.toArray(t.getElementsByTagName("*"));if(o.crossOrigin=n&&n.crossOrigin,o.svgUid=r,0===a.length&&b.isLikelyNode){for(var s=[],l=0,h=(a=t.selectNodes('//*[name(.)!="svg"]')).length;l<h;l++)s[l]=a[l];a=s}var c=a.filter(function(t){return m(t),f.test(t.nodeName.replace("svg:",""))&&!function(t,e){for(;t&&(t=t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}(t,d)});!c||c&&!c.length?e&&e([],{}):(b.gradientDefs[r]=b.getGradientDefs(t),b.cssRules[r]=b.getCSSRules(t),b.parseElements(c,function(t){e&&e(t,o)},u(o),i,n))}};var l=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+b.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+b.reNum+"))?\\s+(.*)");_(b,{parseFontDeclaration:function(t,e){var i=t.match(l);if(i){var n=i[1],r=i[3],o=i[4],a=i[5],s=i[6];n&&(e.fontStyle=n),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),o&&(e.fontSize=w(o)),s&&(e.fontFamily=s),a&&(e.lineHeight="normal"===a?1:a)}},getGradientDefs:function(t){var e,i,n,r=g(t,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),o=0,a={},s={};for(o=r.length;o--;)n=(e=r[o]).getAttribute("xlink:href"),i=e.getAttribute("id"),n&&(s[i]=n.substr(1)),a[i]=e;for(i in s){var l=a[s[i]].cloneNode(!0);for(e=a[i];l.firstChild;)e.appendChild(l.firstChild)}return a},parseAttributes:function(i,t,e){if(i){var n,r,o={};void 0===e&&(e=i.getAttribute("svgUid")),i.parentNode&&T.test(i.parentNode.nodeName)&&(o=b.parseAttributes(i.parentNode,t,e)),r=o&&o.fontSize||i.getAttribute("font-size")||b.Text.DEFAULT_SVG_FONT_SIZE;var a=t.reduce(function(t,e){return(n=i.getAttribute(e))&&(t[e]=n),t},{});a=_(a,_(function(t,e){var i={};for(var n in b.cssRules[e])if(A(t,n.split(" ")))for(var r in b.cssRules[e][n])i[r]=b.cssRules[e][n][r];return i}(i,e),b.parseStyleAttribute(i)));var s,l,h,c,u,f,d,p,g,v={};for(var m in a)s=(g=m)in O?O[g]:g,h=s,c=a[m],u=o,f=r,d=void 0,p="[object Array]"===Object.prototype.toString.call(c),"fill"!==h&&"stroke"!==h||"none"!==c?"strokeDashArray"===h?c="none"===c?null:c.replace(/,/g," ").split(/\s+/).map(function(t){return parseFloat(t)}):"transformMatrix"===h?c=u&&u.transformMatrix?C(u.transformMatrix,b.parseTransformAttribute(c)):b.parseTransformAttribute(c):"visible"===h?(c="none"!==c&&"hidden"!==c,u&&!1===u.visible&&(c=!1)):"opacity"===h?(c=parseFloat(c),u&&void 0!==u.opacity&&(c*=u.opacity)):"originX"===h?c="start"===c?"left":"end"===c?"right":"center":d=p?c.map(w):w(c,f):c="",l=!p&&isNaN(d)?c:d,v[s]=l;v&&v.font&&b.parseFontDeclaration(v.font,v);var y=_(o,v);return T.test(i.nodeName)?y:function(t){for(var e in k)if(void 0!==t[k[e]]&&""!==t[e]){if(void 0===t[e]){if(!b.Object.prototype[e])continue;t[e]=b.Object.prototype[e]}if(0!==t[e].indexOf("url(")){var i=new b.Color(t[e]);t[e]=i.setAlpha(x(i.getAlpha()*t[k[e]],2)).toRgba()}}return t}(y)}},parseElements:function(t,e,i,n,r){new b.ElementsParser(t,e,i,n,r).parse()},parseStyleAttribute:function(t){var i,n,r,e={},o=t.getAttribute("style");return o&&("string"==typeof o?(i=e,o.replace(/;\s*$/,"").split(";").forEach(function(t){var e=t.split(":");n=e[0].trim().toLowerCase(),r=e[1].trim(),i[n]=r})):function(t,e){var i,n;for(var r in t)void 0!==t[r]&&(i=r.toLowerCase(),n=t[r],e[i]=n)}(o,e)),e},parsePointsAttribute:function(t){if(!t)return null;var e,i,n=[];for(e=0,i=(t=(t=t.replace(/,/g," ").trim()).split(/\s+/)).length;e<i;e+=2)n.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return n},getCSSRules:function(t){for(var e=t.getElementsByTagName("style"),h={},i=0,n=e.length;i<n;i++){var r=e[i].textContent||e[i].text;""!==(r=r.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&r.match(/[^{]*\{[\s\S]*?\}/g).map(function(t){return t.trim()}).forEach(function(t){for(var e=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),i={},n=e[2].trim().replace(/;$/,"").split(/\s*;\s*/),r=0,o=n.length;r<o;r++){var a=n[r].split(/\s*:\s*/),s=a[0],l=a[1];i[s]=l}(t=e[1]).split(",").forEach(function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(h[t]?b.util.object.extend(h[t],i):h[t]=b.util.object.clone(i))})})}return h},loadSVGFromURL:function(t,i,n,r){t=t.replace(/^\n\s*/,"").trim(),new b.util.request(t,{method:"get",onComplete:function(t){var e=t.responseXML;e&&!e.documentElement&&b.window.ActiveXObject&&t.responseText&&((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));e&&e.documentElement||i&&i(null);b.parseSVGDocument(e.documentElement,function(t,e){i&&i(t,e)},n,r)}})},loadSVGFromString:function(t,i,e,n){var r;if(t=t.trim(),"undefined"!=typeof DOMParser){var o=new DOMParser;o&&o.parseFromString&&(r=o.parseFromString(t,"text/xml"))}else b.window.ActiveXObject&&((r=new ActiveXObject("Microsoft.XMLDOM")).async="false",r.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));b.parseSVGDocument(r.documentElement,function(t,e){i(t,e)},e,n)}})}(exports),fabric.ElementsParser=function(t,e,i,n,r){this.elements=t,this.callback=e,this.options=i,this.reviver=n,this.svgUid=i&&i.svgUid||0,this.parsingOptions=r},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var t=0,e=this.elements.length;t<e;t++)this.elements[t].setAttribute("svgUid",this.svgUid),function(t,e){setTimeout(function(){t.createObject(t.elements[e],e)},0)}(this,t)},fabric.ElementsParser.prototype.createObject=function(t,e){var i=fabric[fabric.util.string.capitalize(t.tagName.replace("svg:",""))];if(i&&i.fromElement)try{this._createObject(i,t,e)}catch(t){fabric.log(t)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(t,e,i){if(t.async)t.fromElement(e,this.createCallback(i,e),this.options);else{var n=t.fromElement(e,this.options);this.resolveGradient(n,"fill"),this.resolveGradient(n,"stroke"),this.reviver&&this.reviver(e,n),this.instances[i]=n,this.checkIfDone()}},fabric.ElementsParser.prototype.createCallback=function(e,i){var n=this;return function(t){n.resolveGradient(t,"fill"),n.resolveGradient(t,"stroke"),n.reviver&&n.reviver(i,t),n.instances[e]=t,n.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(t,e){var i=t.get(e);if(/^url\(/.test(i)){var n=i.slice(5,i.length-1);fabric.gradientDefs[this.svgUid][n]&&t.set(e,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][n],t))}},fabric.ElementsParser.prototype.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances))},function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t,e){this.x=t,this.y=e}e.Point?e.warn("fabric.Point is already defined"):(e.Point=i).prototype={type:"point",constructor:i,add:function(t){return new i(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new i(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new i(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new i(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new i(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new i(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return void 0===e&&(e=.5),e=Math.max(Math.min(1,e),0),new i(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new i(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new i(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i},clone:function(){return new i(this.x,this.y)}}}(exports),function(t){"use strict";var f=t.fabric||(t.fabric={});function d(t){this.status=t,this.points=[]}f.Intersection?f.warn("fabric.Intersection is already defined"):(f.Intersection=d,f.Intersection.prototype={constructor:d,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},f.Intersection.intersectLineLine=function(t,e,i,n){var r,o=(n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x),a=(e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x),s=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0!==s){var l=o/s,h=a/s;0<=l&&l<=1&&0<=h&&h<=1?(r=new d("Intersection")).appendPoint(new f.Point(t.x+l*(e.x-t.x),t.y+l*(e.y-t.y))):r=new d}else r=new d(0===o||0===a?"Coincident":"Parallel");return r},f.Intersection.intersectLinePolygon=function(t,e,i){for(var n,r,o,a=new d,s=i.length,l=0;l<s;l++)n=i[l],r=i[(l+1)%s],o=d.intersectLineLine(t,e,n,r),a.appendPoints(o.points);return 0<a.points.length&&(a.status="Intersection"),a},f.Intersection.intersectPolygonPolygon=function(t,e){for(var i=new d,n=t.length,r=0;r<n;r++){var o=t[r],a=t[(r+1)%n],s=d.intersectLinePolygon(o,a,e);i.appendPoints(s.points)}return 0<i.points.length&&(i.status="Intersection"),i},f.Intersection.intersectPolygonRectangle=function(t,e,i){var n=e.min(i),r=e.max(i),o=new f.Point(r.x,n.y),a=new f.Point(n.x,r.y),s=d.intersectLinePolygon(n,o,t),l=d.intersectLinePolygon(o,r,t),h=d.intersectLinePolygon(r,a,t),c=d.intersectLinePolygon(a,n,t),u=new d;return u.appendPoints(s.points),u.appendPoints(l.points),u.appendPoints(h.points),u.appendPoints(c.points),0<u.points.length&&(u.status="Intersection"),u})}(exports),function(t){"use strict";var h=t.fabric||(t.fabric={});function c(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function u(t,e,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}h.Color?h.warn("fabric.Color is already defined."):(h.Color=c,h.Color.prototype={_tryParsingColor:function(t){var e;t in c.colorNameMap&&(t=c.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=c.sourceFromHex(t)),e||(e=c.sourceFromRgb(t)),e||(e=c.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,e,i){t/=255,e/=255,i/=255;var n,r,o,a=h.util.array.max([t,e,i]),s=h.util.array.min([t,e,i]);if(o=(a+s)/2,a===s)n=r=0;else{var l=a-s;switch(r=.5<o?l/(2-a-s):l/(a+s),a){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return[Math.round(360*n),Math.round(100*r),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,n=this.getSource();return t=1===(t=n[0].toString(16)).length?"0"+t:t,e=1===(e=n[1].toString(16)).length?"0"+e:e,i=1===(i=n[2].toString(16)).length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},toHexa:function(){var t;return t=1===(t=(t=255*this.getSource()[3]).toString(16)).length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),n=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,n]),this},overlayWith:function(t){t instanceof c||(t=new c(t));for(var e=[],i=this.getAlpha(),n=this.getSource(),r=t.getSource(),o=0;o<3;o++)e.push(Math.round(.5*n[o]+.5*r[o]));return e[3]=i,this.setSource(e),this}},h.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/,h.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,h.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,h.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",grey:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},h.Color.fromRgb=function(t){return c.fromSource(c.sourceFromRgb(t))},h.Color.sourceFromRgb=function(t){var e=t.match(c.reRGBa);if(e){var i=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),n=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),r=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(i,10),parseInt(n,10),parseInt(r,10),e[4]?parseFloat(e[4]):1]}},h.Color.fromRgba=c.fromRgb,h.Color.fromHsl=function(t){return c.fromSource(c.sourceFromHsl(t))},h.Color.sourceFromHsl=function(t){var e=t.match(c.reHSLa);if(e){var i,n,r,o=(parseFloat(e[1])%360+360)%360/360,a=parseFloat(e[2])/(/%$/.test(e[2])?100:1),s=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===a)i=n=r=s;else{var l=s<=.5?s*(a+1):s+a-s*a,h=2*s-l;i=u(h,l,o+1/3),n=u(h,l,o),r=u(h,l,o-1/3)}return[Math.round(255*i),Math.round(255*n),Math.round(255*r),e[4]?parseFloat(e[4]):1]}},h.Color.fromHsla=c.fromHsl,h.Color.fromHex=function(t){return c.fromSource(c.sourceFromHex(t))},h.Color.sourceFromHex=function(t){if(t.match(c.reHex)){var e=t.slice(t.indexOf("#")+1),i=3===e.length||4===e.length,n=8===e.length||4===e.length,r=i?e.charAt(0)+e.charAt(0):e.substring(0,2),o=i?e.charAt(1)+e.charAt(1):e.substring(2,4),a=i?e.charAt(2)+e.charAt(2):e.substring(4,6),s=n?i?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(r,16),parseInt(o,16),parseInt(a,16),parseFloat((parseInt(s,16)/255).toFixed(2))]}},h.Color.fromSource=function(t){var e=new c;return e.setSource(t),e})}(exports),function(){function d(t){var e,i,n,r=t.getAttribute("style"),o=t.getAttribute("offset")||0;if(o=(o=parseFloat(o)/(/%$/.test(o)?100:1))<0?0:1<o?1:o,r){var a=r.split(/\s*;\s*/);""===a[a.length-1]&&a.pop();for(var s=a.length;s--;){var l=a[s].split(/\s*:\s*/),h=l[0].trim(),c=l[1].trim();"stop-color"===h?e=c:"stop-opacity"===h&&(n=c)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),n||(n=t.getAttribute("stop-opacity")),i=(e=new fabric.Color(e)).getAlpha(),n=isNaN(parseFloat(n))?1:parseFloat(n),n*=i,{offset:o,color:e.toRgb(),opacity:n}}var u=fabric.util.object.clone;function p(t,e,i){var n,r=0,o=1,a="";for(var s in e)"Infinity"===e[s]?e[s]=1:"-Infinity"===e[s]&&(e[s]=0),n=parseFloat(e[s],10),o="string"==typeof e[s]&&/^\d+%$/.test(e[s])?.01:1,"x1"===s||"x2"===s||"r2"===s?(o*="objectBoundingBox"===i?t.width:1,r="objectBoundingBox"===i&&t.left||0):"y1"!==s&&"y2"!==s||(o*="objectBoundingBox"===i?t.height:1,r="objectBoundingBox"===i&&t.top||0),e[s]=n*o+r;if("ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===i&&t.rx!==t.ry){var l=t.ry/t.rx;a=" scale(1, "+l+")",e.y1&&(e.y1/=l),e.y2&&(e.y2/=l)}return a}fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var i=new fabric.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return fabric.util.populateWithProperties(this,e,t),e},toSVG:function(t){var e,i,n=u(this.coords,!0),r=u(this.colorStops,!0),o=n.r1>n.r2;if(r.sort(function(t,e){return t.offset-e.offset}),!t.group||"path-group"!==t.group.type)for(var a in n)"x1"===a||"x2"===a?n[a]+=this.offsetX-t.width/2:"y1"!==a&&"y2"!==a||(n[a]+=this.offsetY-t.height/2);if(i='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(i+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?e=["<linearGradient ",i,' x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,'">\n']:"radial"===this.type&&(e=["<radialGradient ",i,' cx="',o?n.x1:n.x2,'" cy="',o?n.y1:n.y2,'" r="',o?n.r1:n.r2,'" fx="',o?n.x2:n.x1,'" fy="',o?n.y2:n.y1,'">\n']),"radial"===this.type){if(o){(r=r.concat()).reverse();for(var s=0;s<r.length;s++)r[s].offset=1-r[s].offset}var l=Math.min(n.r1,n.r2);if(0<l){var h=l/Math.max(n.r1,n.r2);for(s=0;s<r.length;s++)r[s].offset+=h*(1-r[s].offset)}}for(s=0;s<r.length;s++){var c=r[s];e.push("<stop ",'offset="',100*c.offset+"%",'" style="stop-color:',c.color,null!==c.opacity?";stop-opacity: "+c.opacity:";",'"/>\n')}return e.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),e.join("")},toLive:function(t,e){var i,n,r=fabric.util.object.clone(this.coords);if(this.type){if(e.group&&"path-group"===e.group.type)for(n in r)"x1"===n||"x2"===n?r[n]+=-this.offsetX+e.width/2:"y1"!==n&&"y2"!==n||(r[n]+=-this.offsetY+e.height/2);"linear"===this.type?i=t.createLinearGradient(r.x1,r.y1,r.x2,r.y2):"radial"===this.type&&(i=t.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2));for(var o=0,a=this.colorStops.length;o<a;o++){var s=this.colorStops[o].color,l=this.colorStops[o].opacity,h=this.colorStops[o].offset;void 0!==l&&(s=new fabric.Color(s).setAlpha(l).toRgba()),i.addColorStop(h,s)}return i}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(t,e){var i,n,r,o,a,s=t.getElementsByTagName("stop"),l=t.getAttribute("gradientUnits")||"objectBoundingBox",h=t.getAttribute("gradientTransform"),c=[];"linear"===(i="linearGradient"===t.nodeName||"LINEARGRADIENT"===t.nodeName?"linear":"radial")?n={x1:(a=t).getAttribute("x1")||0,y1:a.getAttribute("y1")||0,x2:a.getAttribute("x2")||"100%",y2:a.getAttribute("y2")||0}:"radial"===i&&(n={x1:(o=t).getAttribute("fx")||o.getAttribute("cx")||"50%",y1:o.getAttribute("fy")||o.getAttribute("cy")||"50%",r1:0,x2:o.getAttribute("cx")||"50%",y2:o.getAttribute("cy")||"50%",r2:o.getAttribute("r")||"50%"});for(var u=s.length;u--;)c.push(d(s[u]));r=p(e,n,l);var f=new fabric.Gradient({type:i,coords:n,colorStops:c,offsetX:-e.left,offsetY:-e.top});return(h||""!==r)&&(f.gradientTransform=fabric.parseTransformAttribute((h||"")+r)),f},forObject:function(t,e){return e||(e={}),p(t,e.coords,"userSpaceOnUse"),new fabric.Gradient(e)}})}(),function(){"use strict";var r=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t,e){if(t||(t={}),this.id=fabric.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!=typeof t.source)e&&e(this);else if(void 0!==fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source)),e&&e(this);else{var i=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){i.source=t,e&&e(i)})}},toObject:function(t){var e,i,n=fabric.Object.NUM_FRACTION_DIGITS;return"function"==typeof this.source?e=String(this.source):"string"==typeof this.source.src?e=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(e=this.source.toDataURL()),i={type:"pattern",source:e,repeat:this.repeat,offsetX:r(this.offsetX,n),offsetY:r(this.offsetY,n)},fabric.util.populateWithProperties(this,i,t),i},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,i=e.width/t.width,n=e.height/t.height,r=this.offsetX/t.width,o=this.offsetY/t.height,a="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(n=1),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1),e.src?a=e.src:e.toDataURL&&(a=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+o+'" width="'+i+'" height="'+n+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+a+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if(void 0!==e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var o=t.fabric||(t.fabric={}),a=o.util.toFixed;o.Shadow?o.warn("fabric.Shadow is already defined."):(o.Shadow=o.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(t){for(var e in"string"==typeof t&&(t=this._parseShadow(t)),t)this[e]=t[e];this.id=o.Object.__uid++},_parseShadow:function(t){var e=t.trim(),i=o.Shadow.reOffsetsAndBlur.exec(e)||[];return{color:(e.replace(o.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(i[1],10)||0,offsetY:parseInt(i[2],10)||0,blur:parseInt(i[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var e=40,i=40,n=o.Object.NUM_FRACTION_DIGITS,r=o.util.rotateVector({x:this.offsetX,y:this.offsetY},o.util.degreesToRadians(-t.angle));return t.width&&t.height&&(e=100*a((Math.abs(r.x)+this.blur)/t.width,n)+20,i=100*a((Math.abs(r.y)+this.blur)/t.height,n)+20),t.flipX&&(r.x*=-1),t.flipY&&(r.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+i+'%" height="'+(100+2*i)+'%" x="-'+e+'%" width="'+(100+2*e)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+a(this.blur?this.blur/2:0,n)+'"></feGaussianBlur>\n\t<feOffset dx="'+a(r.x,n)+'" dy="'+a(r.y,n)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+this.color+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke};var e={},i=o.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke"].forEach(function(t){this[t]!==i[t]&&(e[t]=this[t])},this),e}}),o.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)}(exports),function(){"use strict";if(fabric.StaticCanvas)fabric.warn("fabric.StaticCanvas is already defined.");else{var n=fabric.util.object.extend,t=fabric.util.getElementOffset,h=fabric.util.removeFromArray,s=fabric.util.toFixed,o=fabric.util.transformPoint,a=fabric.util.invertTransform,i=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(t,e){e||(e={}),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!1,_initStatic:function(t,e){var i=fabric.StaticCanvas.prototype.renderAll.bind(this);this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,i),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,i),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,i),e.overlayColor&&this.setOverlayColor(e.overlayColor,i),this.calcOffset()},_isRetinaScaling:function(){return 1!==fabric.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?fabric.devicePixelRatio:1},_initRetinaScaling:function(){this._isRetinaScaling()&&(this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio))},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(e,t,i,n){return"string"==typeof t?fabric.util.loadImage(t,function(t){t&&(this[e]=new fabric.Image(t,n)),i&&i(t)},this,n&&n.crossOrigin):(n&&t.setOptions(n),this[e]=t,i&&i(t)),this},__setBgOverlayColor:function(t,e,i){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,i),this},_createCanvasElement:function(t){var e=fabric.util.createCanvasElement(t);if(e.style||(e.style={}),!e)throw i;if(void 0===e.getContext)throw i;return e},_initOptions:function(t){this._setOptions(t),this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(t),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;for(var n in e=e||{},t)i=t[n],e.cssOnly||(this._setBackstoreDimension(n,t[n]),i+="px"),e.backstoreOnly||this._setCssDimension(n,i);return this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),e.cssOnly||this.renderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,i=this._activeGroup;this.viewportTransform=t;for(var n=0,r=this._objects.length;n<r;n++)(e=this._objects[n]).group||e.setCoords(!1,!0);return i&&i.setCoords(!1,!0),this.calcViewportBoundaries(),this.renderAll(),this},zoomToPoint:function(t,e){var i=t,n=this.viewportTransform.slice(0);t=o(t,a(this.viewportTransform)),n[0]=e,n[3]=e;var r=o(t,n);return n[4]+=i.x-r.x,n[5]+=i.y-r.y,this.setViewportTransform(n)},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},calcViewportBoundaries:function(){var t={},e=this.getWidth(),i=this.getHeight(),n=a(this.viewportTransform);return t.tl=o({x:0,y:0},n),t.br=o({x:e,y:i},n),t.tr=new fabric.Point(t.br.x,t.tl.y),t.bl=new fabric.Point(t.tl.x,t.br.y),this.vptCoords=t},renderCanvas:function(t,e){this.calcViewportBoundaries(),this.clearContext(t),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,t),this._renderBackground(t),t.save(),t.transform.apply(t,this.viewportTransform),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.clipTo&&t.restore(),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render")},_renderObjects:function(t,e){for(var i=0,n=e.length;i<n;++i)e[i]&&e[i].render(t)},_renderBackgroundOrOverlay:function(t,e){var i=this[e+"Color"];i&&(t.fillStyle=i.toLive?i.toLive(t,this):i,t.fillRect(i.offsetX||0,i.offsetY||0,this.width,this.height)),(i=this[e+"Image"])&&(this[e+"Vpt"]&&(t.save(),t.transform.apply(t,this.viewportTransform)),i.render(t),this[e+"Vpt"]&&t.restore())},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new fabric.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=a(this.viewportTransform);return o({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),this.renderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(t,e){var i={objects:this._toObjects(t,e)};return n(i,this.__serializeBgOverlay(t,e)),fabric.util.populateWithProperties(this,i,e),i},_toObjects:function(e,i){return this.getObjects().filter(function(t){return!t.excludeFromExport}).map(function(t){return this._toObject(t,e,i)},this)},_toObject:function(t,e,i){var n;this.includeDefaultValues||(n=t.includeDefaultValues,t.includeDefaultValues=!1);var r=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=n),r},__serializeBgOverlay:function(t,e){var i={},n=this.backgroundImage,r=this.overlayImage;return this.backgroundColor&&(i.background=this.backgroundColor.toObject?this.backgroundColor.toObject(e):this.backgroundColor),this.overlayColor&&(i.overlay=this.overlayColor.toObject?this.overlayColor.toObject(e):this.overlayColor),n&&!n.excludeFromExport&&(i.backgroundImage=this._toObject(n,t,e)),r&&!r.excludeFromExport&&(i.overlayImage=this._toObject(r,t,e)),i},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={});var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this._setSVGBgOverlayColor(i,"backgroundColor"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this._setSVGBgOverlayColor(i,"overlayColor"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,n=e.width||this.width,r=e.height||this.height,o='viewBox="0 0 '+this.width+" "+this.height+'" ',a=fabric.Object.NUM_FRACTION_DIGITS;e.viewBox?o='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,o='viewBox="'+s(-i[4]/i[0],a)+" "+s(-i[5]/i[3],a)+" "+s(this.width/i[0],a)+" "+s(this.height/i[3],a)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',r,'" ',o,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),"</defs>\n")},createSVGRefElementsMarkup:function(){var i=this;return["backgroundColor","overlayColor"].map(function(t){var e=i[t];if(e&&e.toLive)return e.toSVG(i,!1)}).join("")},createSVGFontFacesMarkup:function(){for(var t,e,i,n,r,o,a="",s={},l=fabric.fontPaths,h=this.getObjects(),c=0,u=h.length;c<u;c++)if(e=(t=h[c]).fontFamily,-1!==t.type.indexOf("text")&&!s[e]&&l[e]&&(s[e]=!0,t.styles))for(r in i=t.styles)for(o in n=i[r])!s[e=n[o].fontFamily]&&l[e]&&(s[e]=!0);for(var f in s)a+=["\t\t@font-face {\n","\t\t\tfont-family: '",f,"';\n","\t\t\tsrc: url('",l[f],"');\n","\t\t}\n"].join("");return a&&(a=['\t<style type="text/css">',"<![CDATA[\n",a,"]]>","</style>\n"].join("")),a},_setSVGObjects:function(t,e){for(var i,n=0,r=this.getObjects(),o=r.length;n<o;n++)(i=r[n]).excludeFromExport||this._setSVGObject(t,i,e)},_setSVGObject:function(t,e,i){t.push(e.toSVG(i))},_setSVGBgOverlayImage:function(t,e,i){this[e]&&this[e].toSVG&&t.push(this[e].toSVG(i))},_setSVGBgOverlayColor:function(t,e){var i=this[e];if(i)if(i.toLive){var n=i.repeat;t.push('<rect transform="translate(',this.width/2,",",this.height/2,')"',' x="',i.offsetX-this.width/2,'" y="',i.offsetY-this.height/2,'" ','width="',"repeat-y"===n||"no-repeat"===n?i.source.width:this.width,'" height="',"repeat-x"===n||"no-repeat"===n?i.source.height:this.height,'" fill="url(#SVGID_'+i.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[e],'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,i,n,r=this._activeGroup;if(t===r)for(e=(n=r._objects).length;e--;)i=n[e],h(this._objects,i),this._objects.unshift(i);else h(this._objects,t),this._objects.unshift(t);return this.renderAll&&this.renderAll()},bringToFront:function(t){if(!t)return this;var e,i,n,r=this._activeGroup;if(t===r)for(n=r._objects,e=0;e<n.length;e++)i=n[e],h(this._objects,i),this._objects.push(i);else h(this._objects,t),this._objects.push(t);return this.renderAll&&this.renderAll()},sendBackwards:function(t,e){if(!t)return this;var i,n,r,o,a,s=this._activeGroup,l=0;if(t===s)for(a=s._objects,i=0;i<a.length;i++)n=a[i],0+l<(r=this._objects.indexOf(n))&&(o=r-1,h(this._objects,n),this._objects.splice(o,0,n)),l++;else 0!==(r=this._objects.indexOf(t))&&(o=this._findNewLowerIndex(t,r,e),h(this._objects,t),this._objects.splice(o,0,t));return this.renderAll&&this.renderAll(),this},_findNewLowerIndex:function(t,e,i){var n;if(i)for(var r=(n=e)-1;0<=r;--r){if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){n=r;break}}else n=e-1;return n},bringForward:function(t,e){if(!t)return this;var i,n,r,o,a,s=this._activeGroup,l=0;if(t===s)for(i=(a=s._objects).length;i--;)n=a[i],(r=this._objects.indexOf(n))<this._objects.length-1-l&&(o=r+1,h(this._objects,n),this._objects.splice(o,0,n)),l++;else(r=this._objects.indexOf(t))!==this._objects.length-1&&(o=this._findNewUpperIndex(t,r,e),h(this._objects,t),this._objects.splice(o,0,t));return this.renderAll&&this.renderAll(),this},_findNewUpperIndex:function(t,e,i){var n;if(i)for(var r=(n=e)+1;r<this._objects.length;++r){if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){n=r;break}}else n=e+1;return n},moveTo:function(t,e){return h(this._objects,t),this._objects.splice(e,0,t),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),n(fabric.StaticCanvas.prototype,fabric.Observable),n(fabric.StaticCanvas.prototype,fabric.Collection),n(fabric.StaticCanvas.prototype,fabric.DataURLExporter),n(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"getImageData":return void 0!==i.getImageData;case"setLineDash":return void 0!==i.setLineDash;case"toDataURL":return void 0!==e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(t){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:null,setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop,e=this.canvas.getZoom();t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*e,t.shadowOffsetX=this.shadow.offsetX*e,t.shadowOffsetY=this.shadow.offsetY*e}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){1<this._points.length&&t.eq(this._points[this._points.length-1])||this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new fabric.Point(t.x,t.y);this._addPoint(e)},_render:function(){var t,e,i=this.canvas.contextTop,n=this.canvas.viewportTransform,r=this._points[0],o=this._points[1];if(i.save(),i.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i.beginPath(),2===this._points.length&&r.x===o.x&&r.y===o.y){var a=this.width/1e3;r=new fabric.Point(r.x,r.y),o=new fabric.Point(o.x,o.y),r.x-=a,o.x+=a}for(i.moveTo(r.x,r.y),t=1,e=this._points.length;t<e;t++){var s=r.midPointFrom(o);i.quadraticCurveTo(r.x,r.y,s.x,s.y),r=this._points[t],o=this._points[t+1]}i.lineTo(r.x,r.y),i.stroke(),i.restore()},convertPointsToSVGPath:function(t){var e,i=[],n=this.width/1e3,r=new fabric.Point(t[0].x,t[0].y),o=new fabric.Point(t[1].x,t[1].y),a=t.length,s=1,l=1,h=2<a;for(h&&(s=t[2].x<o.x?-1:t[2].x===o.x?0:1,l=t[2].y<o.y?-1:t[2].y===o.y?0:1),i.push("M ",r.x-s*n," ",r.y-l*n," "),e=1;e<a;e++){if(!r.eq(o)){var c=r.midPointFrom(o);i.push("Q ",r.x," ",r.y," ",c.x," ",c.y," ")}r=t[e],e+1<t.length&&(o=t[e+1])}return h&&(s=r.x>t[e-2].x?1:r.x===t[e-2].x?0:-1,l=r.y>t[e-2].y?1:r.y===t[e-2].y?0:-1),i.push("L ",r.x+s*n," ",r.y+l*n),i},createPath:function(t){var e=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray,originX:"center",originY:"center"}),i=new fabric.Point(e.left,e.top);return e.originX=fabric.Object.prototype.originX,e.originY=fabric.Object.prototype.originY,i=e.translateToGivenOrigin(i,"center","center",e.originX,e.originY),e.top=i.y,e.left=i.x,this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath();var t=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"!==t){var e=this.createPath(t);this.canvas.add(e),e.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:e})}else this.canvas.renderAll()}}),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop,n=this.canvas.viewportTransform;i.save(),i.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i.fillStyle=e.fill,i.beginPath(),i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.closePath(),i.fill(),i.restore()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.points.length;i<n;i++){var r=this.points[i],o=new fabric.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&o.setShadow(this.shadow),e.push(o)}var a=new fabric.Group(e,{originX:"center",originY:"center"});a.canvas=this.canvas,this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),i=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,n=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=n,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.sprayChunks.length;i<n;i++)for(var r=this.sprayChunks[i],o=0,a=r.length;o<a;o++){var s=new fabric.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&s.setShadow(this.shadow),e.push(s)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var l=new fabric.Group(e,{originX:"center",originY:"center"});l.canvas=this.canvas,this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},_getOptimizedRects:function(t){for(var e,i={},n=0,r=t.length;n<r;n++)i[e=t[n].left+""+t[n].top]||(i[e]=t[n]);var o=[];for(e in i)o.push(i[e]);return o},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color;var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]);for(var i=0,n=this.sprayChunkPoints.length;i<n;i++){var r=this.sprayChunkPoints[i];void 0!==r.opacity&&(t.globalAlpha=r.opacity),t.fillRect(r.x,r.y,r.width,r.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e,i,n,r=this.width/2,o=0;o<this.density;o++){e=fabric.util.getRandomInt(t.x-r,t.x+r),i=fabric.util.getRandomInt(t.y-r,t.y+r),n=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var a=new fabric.Point(e,i);a.width=n,this.randomOpacity&&(a.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=fabric.document.createElement("canvas"),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t),i=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-i.x,offsetY:-i.y}),e}}),function(){var l=fabric.util.getPointer,a=fabric.util.degreesToRadians,u=fabric.util.radiansToDegrees,f=Math.atan2,h=Math.abs,c=fabric.StaticCanvas.supports("setLineDash");for(var t in fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e=this.getActiveGroup(),i=this.getActiveObject(),n=[],r=[];if(!e&&!i||this.preserveObjectStacking)n=this._objects;else{for(var o=0,a=this._objects.length;o<a;o++)t=this._objects[o],e&&e.contains(t)||t===i?r.push(t):n.push(t);e&&(e._set("_objects",r),n.push(e)),i&&n.push(i)}return n},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection(t),this.fire("after:render"),this.contextTopDirty=!0,this},_resetCurrentTransform:function(){var t=this._currentTransform;t.target.set({scaleX:t.original.scaleX,scaleY:t.original.scaleY,skewX:t.original.skewX,skewY:t.original.skewY,left:t.original.left,top:t.original.top}),this._shouldCenterTransform(t.target)?"rotate"===t.action?this._setOriginToCenter(t.target):("center"!==t.originX&&("right"===t.originX?t.mouseXSign=-1:t.mouseXSign=1),"center"!==t.originY&&("bottom"===t.originY?t.mouseYSign=-1:t.mouseYSign=1),t.originX="center",t.originY="center"):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(t,e,i){var n,r=i||this.getPointer(t,!0);return n=e.group&&e.group===this.getActiveGroup()?this._normalizePointer(e.group,r):{x:r.x,y:r.y},e.containsPoint(n)||e._findTargetCorner(r)},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),n=fabric.util.invertTransform(i),r=this.restorePointerVpt(e);return fabric.util.transformPoint(r,n)},isTargetTransparent:function(t,e,i){var n=t.hasBorders,r=t.transparentCorners,o=this.contextCache,a=t.selectionBackgroundColor;t.hasBorders=t.transparentCorners=!1,t.selectionBackgroundColor="",o.save(),o.transform.apply(o,this.viewportTransform),t.render(o),o.restore(),t.active&&t._renderControls(o),t.hasBorders=n,t.transparentCorners=r,t.selectionBackgroundColor=a;var s=fabric.util.isTransparent(o,e,i,this.targetFindTolerance);return this.clearContext(o),s},_shouldClearSelection:function(t,e){var i=this.getActiveGroup(),n=this.getActiveObject();return!e||e&&i&&!i.contains(e)&&i!==e&&!t[this.selectionKey]||e&&!e.evented||e&&!e.selectable&&n&&n!==e},_shouldCenterTransform:function(t){if(t){var e,i=this._currentTransform;return"scale"===i.action||"scaleX"===i.action||"scaleY"===i.action?e=this.centeredScaling||t.centeredScaling:"rotate"===i.action&&(e=this.centeredRotation||t.centeredRotation),e?!i.altKey:i.altKey}},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e,i){if(!e)return"drag";switch(e){case"mtr":return"rotate";case"ml":case"mr":return i[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return i[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(t,e){if(e){var i=this.getPointer(t),n=e._findTargetCorner(this.getPointer(t,!0)),r=this._getActionFromCorner(e,n,t),o=this._getOriginFromCorner(e,n);this._currentTransform={target:e,action:r,corner:n,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:i.x-e.left,offsetY:i.y-e.top,originX:o.x,originY:o.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,left:e.left,top:e.top,theta:a(e.angle),width:e.width*e.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:t.shiftKey,altKey:t[this.centeredKey]},this._currentTransform.original={left:e.left,top:e.top,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,originX:o.x,originY:o.y},this._resetCurrentTransform()}},_translateObject:function(t,e){var i=this._currentTransform,n=i.target,r=t-i.offsetX,o=e-i.offsetY,a=!n.get("lockMovementX")&&n.left!==r,s=!n.get("lockMovementY")&&n.top!==o;return a&&n.set("left",r),s&&n.set("top",o),a||s},_changeSkewTransformOrigin:function(t,e,i){var n="originX",r={0:"center"},o=e.target.skewX,a="left",s="right",l="mt"===e.corner||"ml"===e.corner?1:-1,h=1;t=0<t?1:-1,"y"===i&&(o=e.target.skewY,a="top",s="bottom",n="originY"),r[-1]=a,r[1]=s,e.target.flipX&&(h*=-1),e.target.flipY&&(h*=-1),0===o?(e.skewSign=-l*t*h,e[n]=r[-t]):(o=0<o?1:-1,e.skewSign=o,e[n]=r[o*l*h])},_skewObject:function(t,e,i){var n,r=this._currentTransform,o=r.target,a=o.get("lockSkewingX"),s=o.get("lockSkewingY");if(a&&"x"===i||s&&"y"===i)return!1;var l,h,c=o.getCenterPoint(),u=o.toLocalPoint(new fabric.Point(t,e),"center","center")[i],f=o.toLocalPoint(new fabric.Point(r.lastX,r.lastY),"center","center")[i],d=o._getTransformedDimensions();return this._changeSkewTransformOrigin(u-f,r,i),l=o.toLocalPoint(new fabric.Point(t,e),r.originX,r.originY)[i],h=o.translateToOriginPoint(c,r.originX,r.originY),n=this._setObjectSkew(l,r,i,d),r.lastX=t,r.lastY=e,o.setPositionByOrigin(h,r.originX,r.originY),n},_setObjectSkew:function(t,e,i,n){var r,o,a,s,l,h,c,u,f,d,p=e.target,g=e.skewSign;return"x"===i?(l="y",h="Y",c="X",f=0,d=p.skewY):(l="x",h="X",c="Y",f=p.skewX,d=0),s=p._getTransformedDimensions(f,d),(u=2*Math.abs(t)-s[i])<=2?r=0:(r=g*Math.atan(u/p["scale"+c]/(s[l]/p["scale"+h])),r=fabric.util.radiansToDegrees(r)),o=p["skew"+c]!==r,p.set("skew"+c,r),0!==p["skew"+h]&&(a=p._getTransformedDimensions(),r=n[l]/a[l]*p["scale"+h],p.set("scale"+h,r)),o},_scaleObject:function(t,e,i){var n=this._currentTransform,r=n.target,o=r.get("lockScalingX"),a=r.get("lockScalingY"),s=r.get("lockScalingFlip");if(o&&a)return!1;var l,h=r.translateToOriginPoint(r.getCenterPoint(),n.originX,n.originY),c=r.toLocalPoint(new fabric.Point(t,e),n.originX,n.originY),u=r._getTransformedDimensions();return this._setLocalMouse(c,n),l=this._setObjectScale(c,n,o,a,i,s,u),r.setPositionByOrigin(h,n.originX,n.originY),l},_setObjectScale:function(t,e,i,n,r,o,a){var s,l,h,c,u=e.target,f=!1,d=!1,p=!1;return h=t.x*u.scaleX/a.x,c=t.y*u.scaleY/a.y,s=u.scaleX!==h,l=u.scaleY!==c,o&&h<=0&&h<u.scaleX&&(f=!0),o&&c<=0&&c<u.scaleY&&(d=!0),"equally"!==r||i||n?r?"x"!==r||u.get("lockUniScaling")?"y"!==r||u.get("lockUniScaling")||d||n||u.set("scaleY",c)&&(p=p||l):f||i||u.set("scaleX",h)&&(p=p||s):(f||i||u.set("scaleX",h)&&(p=p||s),d||n||u.set("scaleY",c)&&(p=p||l)):f||d||(p=this._scaleObjectEqually(t,u,e,a)),e.newScaleX=h,e.newScaleY=c,f||d||this._flipObject(e,r),p},_scaleObjectEqually:function(t,e,i,n){var r,o=t.y+t.x,a=n.y*i.original.scaleY/e.scaleY+n.x*i.original.scaleX/e.scaleX,s=t.x/Math.abs(t.x),l=t.y/Math.abs(t.y);return i.newScaleX=s*Math.abs(i.original.scaleX*o/a),i.newScaleY=l*Math.abs(i.original.scaleY*o/a),r=i.newScaleX!==e.scaleX||i.newScaleY!==e.scaleY,e.set("scaleX",i.newScaleX),e.set("scaleY",i.newScaleY),r},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var i=e.target,n=this.getZoom(),r=i.padding/n;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),h(t.x)>r?t.x<0?t.x+=r:t.x-=r:t.x=0,h(t.y)>r?t.y<0?t.y+=r:t.y-=r:t.y=0},_rotateObject:function(t,e){var i=this._currentTransform;if(i.target.get("lockRotation"))return!1;var n=f(i.ey-i.top,i.ex-i.left),r=f(e-i.top,t-i.left),o=u(r-n+i.theta),a=!0;if(0<i.target.snapAngle){var s=i.target.snapAngle,l=i.target.snapThreshold||s,h=Math.ceil(o/s)*s,c=Math.floor(o/s)*s;Math.abs(o-c)<l?o=c:Math.abs(o-h)<l&&(o=h)}return o<0&&(o=360+o),o%=360,i.target.angle===o?a=!1:i.target.angle=o,a},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.setAngle(0)},_drawSelection:function(t){var e=this._groupSelector,i=e.left,n=e.top,r=h(i),o=h(n);if(this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(0<i?0:-i),e.ey-(0<n?0:-n),r,o)),this.selectionLineWidth&&this.selectionBorderColor)if(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,1<this.selectionDashArray.length&&!c){var a=e.ex+.5-(0<i?0:r),s=e.ey+.5-(0<n?0:o);t.beginPath(),fabric.util.drawDashedLine(t,a,s,a+r,s,this.selectionDashArray),fabric.util.drawDashedLine(t,a,s+o-1,a+r,s+o-1,this.selectionDashArray),fabric.util.drawDashedLine(t,a,s,a,s+o,this.selectionDashArray),fabric.util.drawDashedLine(t,a+r-1,s,a+r-1,s+o,this.selectionDashArray),t.closePath(),t.stroke()}else fabric.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(e.ex+.5-(0<i?0:r),e.ey+.5-(0<n?0:o),r,o)},findTarget:function(t,e){if(!this.skipTargetFind){var i,n,r=this.getPointer(t,!0),o=this.getActiveGroup(),a=this.getActiveObject();if(this.targets=[],o&&!e&&o===this._searchPossibleTargets([o],r))return this._fireOverOutEvents(o,t),o;if(a&&a._findTargetCorner(r))return this._fireOverOutEvents(a,t),a;if(a&&a===this._searchPossibleTargets([a],r)){if(!this.preserveObjectStacking)return this._fireOverOutEvents(a,t),a;i=a,n=this.targets,this.targets=[]}var s=this._searchPossibleTargets(this._objects,r);return t[this.altSelectionKey]&&s&&i&&s!==i&&(s=i,this.targets=n),this._fireOverOutEvents(s,t),s}},_fireOverOutEvents:function(t,e){var i,n,r=this._hoveredTarget;r!==t&&(i={e:e,target:t,previousTarget:this._hoveredTarget},n={e:e,target:this._hoveredTarget,nextTarget:t},this._hoveredTarget=t),t?r!==t&&(r&&(this.fire("mouse:out",n),r.fire("mouseout",n)),this.fire("mouse:over",i),t.fire("mouseover",i)):r&&(this.fire("mouse:out",n),r.fire("mouseout",n))},_checkTarget:function(t,e){if(e&&e.visible&&e.evented&&this.containsPoint(null,e,t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,t.x,t.y))return!0}},_searchPossibleTargets:function(t,e){for(var i,n,r,o=t.length;o--;)if(this._checkTarget(e,t[o])){"group"===(i=t[o]).type&&i.subTargetCheck&&(n=this._normalizePointer(i,e),(r=this._searchPossibleTargets(i._objects,n))&&this.targets.push(r));break}return i},restorePointerVpt:function(t){return fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(t,e,i){i||(i=this.upperCanvasEl);var n,r=l(t),o=i.getBoundingClientRect(),a=o.width||0,s=o.height||0;return a&&s||("top"in o&&"bottom"in o&&(s=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(a=Math.abs(o.right-o.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,e||(r=this.restorePointerVpt(r)),n=0===a||0===s?{width:1,height:1}:{width:i.width/a,height:i.height/s},{x:r.x*n.width,y:r.y*n.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl?this.upperCanvasEl.className="":this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.getWidth()||t.width,i=this.getHeight()||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":"none"}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},_setActiveObject:function(t){var e=this._activeObject;e&&(e.set("active",!1),t!==e&&e.onDeselect&&"function"==typeof e.onDeselect&&e.onDeselect()),(this._activeObject=t).set("active",!0)},setActiveObject:function(t,e){var i=this.getActiveObject();return i&&i!==t&&i.fire("deselected",{e:e}),this._setActiveObject(t),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e}),this.renderAll(),this},getActiveObject:function(){return this._activeObject},_onObjectRemoved:function(t){this.getActiveObject()===t&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),this._hoveredTarget===t&&(this._hoveredTarget=null),this.callSuper("_onObjectRemoved",t)},_discardActiveObject:function(){var t=this._activeObject;t&&(t.set("active",!1),t.onDeselect&&"function"==typeof t.onDeselect&&t.onDeselect()),this._activeObject=null},discardActiveObject:function(t){var e=this._activeObject;return e&&(this.fire("before:selection:cleared",{target:e,e:t}),this._discardActiveObject(),this.fire("selection:cleared",{e:t}),e.fire("deselected",{e:t})),this},_setActiveGroup:function(t){(this._activeGroup=t)&&t.set("active",!0)},setActiveGroup:function(t,e){return this._setActiveGroup(t),t&&(this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e})),this},getActiveGroup:function(){return this._activeGroup},_discardActiveGroup:function(){var t=this.getActiveGroup();t&&t.destroy(),this.setActiveGroup(null)},discardActiveGroup:function(t){var e=this.getActiveGroup();return e&&(this.fire("before:selection:cleared",{e:t,target:e}),this._discardActiveGroup(),this.fire("selection:cleared",{e:t})),this},deactivateAll:function(){for(var t,e=this.getObjects(),i=0,n=e.length;i<n;i++)(t=e[i])&&t.set("active",!1);return this._discardActiveGroup(),this._discardActiveObject(),this},deactivateAllWithDispatch:function(t){for(var e,i=this.getObjects(),n=0,r=i.length;n<r;n++)(e=i[n])&&e.set("active",!1);return this.discardActiveGroup(t),this.discardActiveObject(t),this},dispose:function(){fabric.StaticCanvas.prototype.dispose.call(this);var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),delete this.upperCanvasEl,t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,this},clear:function(){return this.discardActiveGroup(),this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this.getActiveGroup();e?e._renderControls(t):this._drawObjectsControls(t)},_drawObjectsControls:function(t){for(var e=0,i=this._objects.length;e<i;++e)this._objects[e]&&this._objects[e].active&&this._objects[e]._renderControls(t)},_toObject:function(t,e,i){var n=this._realizeGroupTransformOnObject(t),r=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,n),r},_realizeGroupTransformOnObject:function(e){if(e.group&&e.group===this.getActiveGroup()){var i={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(t){i[t]=e[t]}),this.getActiveGroup().realizeTransform(e),i}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var n;n=this._realizeGroupTransformOnObject(e),this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,n)}}),fabric.StaticCanvas)"prototype"!==t&&(fabric.Canvas[t]=fabric.StaticCanvas[t]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var r={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},i=fabric.util.addListener,n=fabric.util.removeListener;function s(t,e){return"which"in t?t.which===e:t.button===e-1}fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this.removeListeners(),this._bindEvents(),i(fabric.window,"resize",this._onResize),i(this.upperCanvasEl,"mousedown",this._onMouseDown),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"mouseout",this._onMouseOut),i(this.upperCanvasEl,"mouseenter",this._onMouseEnter),i(this.upperCanvasEl,"wheel",this._onMouseWheel),i(this.upperCanvasEl,"contextmenu",this._onContextMenu),i(this.upperCanvasEl,"touchstart",this._onMouseDown,{passive:!1}),i(this.upperCanvasEl,"touchmove",this._onMouseMove,{passive:!1}),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this.eventsBinded||(this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this.eventsBinded=!0)},removeListeners:function(){n(fabric.window,"resize",this._onResize),n(this.upperCanvasEl,"mousedown",this._onMouseDown),n(this.upperCanvasEl,"mousemove",this._onMouseMove),n(this.upperCanvasEl,"mouseout",this._onMouseOut),n(this.upperCanvasEl,"mouseenter",this._onMouseEnter),n(this.upperCanvasEl,"wheel",this._onMouseWheel),n(this.upperCanvasEl,"contextmenu",this._onContextMenu),n(this.upperCanvasEl,"touchstart",this._onMouseDown),n(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t}),this._iTextInstances&&this._iTextInstances.forEach(function(t){t.isEditing&&t.hiddenTextarea.focus()})},_onMouseEnter:function(t){this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onMouseDown:function(t){this.__onMouseDown(t),i(fabric.document,"touchend",this._onMouseUp,{passive:!1}),i(fabric.document,"touchmove",this._onMouseMove,{passive:!1}),n(this.upperCanvasEl,"mousemove",this._onMouseMove),n(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===t.type?n(this.upperCanvasEl,"mousedown",this._onMouseDown):(i(fabric.document,"mouseup",this._onMouseUp),i(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(t){if(this.__onMouseUp(t),n(fabric.document,"mouseup",this._onMouseUp),n(fabric.document,"touchend",this._onMouseUp),n(fabric.document,"mousemove",this._onMouseMove),n(fabric.document,"touchmove",this._onMouseMove),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"touchmove",this._onMouseMove,{passive:!1}),"touchend"===t.type){var e=this;setTimeout(function(){i(e.upperCanvasEl,"mousedown",e._onMouseDown)},400)}},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var i=this.getActiveGroup()||this.getActiveObject();return(!i||!i.isEditing||t!==i)&&!!(t&&(t.isMoving||t!==i)||!t&&i||!t&&!i&&!this._groupSelector||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y))},__onMouseUp:function(t){var e;if(s(t,3))this.fireRightClick&&this._handleEvent(t,"up",e,3);else if(s(t,2))this.fireMiddleClick&&this._handleEvent(t,"up",e,2);else if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else{var i=!0,n=this._currentTransform,r=this._groupSelector,o=!r||0===r.left&&0===r.top;n&&(this._finalizeCurrentTransform(t),i=!n.actionPerformed),e=i?this.findTarget(t,!0):n.target;var a=this._shouldRender(e,this.getPointer(t));e||!o?this._maybeGroupObjects(t):(this._groupSelector=null,this._currentTransform=null),e&&(e.isMoving=!1),this._setCursorFromEvent(t,e),this._handleEvent(t,"up",e||null,1,o),e&&(e.__corner=0),a&&this.renderAll()}},_handleEvent:function(t,e,i,n,r){var o=void 0===i?this.findTarget(t):i,a=this.targets||[],s={e:t,target:o,subTargets:a,button:n||1,isClick:r||!1};this.fire("mouse:"+e,s),o&&o.fire("mouse"+e,s);for(var l=0;l<a.length;l++)a[l].fire("mouse"+e,s)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,i=e.target;i._scaling&&(i._scaling=!1),i.setCoords(),this._restoreOriginXY(i),(e.actionPerformed||this.stateful&&i.hasStateChanged())&&(this.fire("object:modified",{target:i,e:t}),i.fire("modified",{e:t}))},_restoreOriginXY:function(t){if(this._previousOriginX&&this._previousOriginY){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null}},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject(t).renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e)}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this._handleEvent(t,"up")},__onMouseDown:function(t){var e=this.findTarget(t);if(s(t,3))this.fireRightClick&&this._handleEvent(t,"down",e||null,3);else if(s(t,2))this.fireMiddleClick&&this._handleEvent(t,"down",e||null,2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(!this._currentTransform){var i=this.getPointer(t,!0);this._previousPointer=i;var n=this._shouldRender(e,i),r=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.deactivateAllWithDispatch(t):r&&(this._handleGrouping(t,e),e=this.getActiveGroup()),!this.selection||e&&(e.selectable||e.isEditing)||(this._groupSelector={ex:i.x,ey:i.y,top:0,left:0}),e){!e.selectable||!e.__corner&&r||(this._beforeTransform(t,e),this._setupCurrentTransform(t,e));var o=this.getActiveObject();e!==this.getActiveGroup()&&e!==o&&(this.deactivateAll(),e.selectable&&(o&&o.fire("deselected",{e:t}),this.setActiveObject(e,t)))}this._handleEvent(t,"down",e||null),n&&this.renderAll()}},_beforeTransform:function(t,e){this.stateful&&e.saveState(),e._findTargetCorner(this.getPointer(t))&&this.onBeforeScaleRotate(e)},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},_setCenterToOrigin:function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(t){var e,i;if(this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(!(void 0!==t.touches&&1<t.touches.length)){var n=this._groupSelector;n?(i=this.getPointer(t,!0),n.left=i.x-n.ex,n.top=i.y-n.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t),this._setCursorFromEvent(t,e)),this._handleEvent(t,"move",e||null)}},__onMouseWheel:function(t){this._handleEvent(t,"wheel")},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.target.isMoving=!0,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._beforeScaleTransform(t,i),this._performTransformAction(t,i,e),i.actionPerformed&&this.renderAll()},_performTransformAction:function(t,e,i){var n=i.x,r=i.y,o=e.target,a=e.action,s=!1;"rotate"===a?(s=this._rotateObject(n,r))&&this._fire("rotating",o,t):"scale"===a?(s=this._onScale(t,e,n,r))&&this._fire("scaling",o,t):"scaleX"===a?(s=this._scaleObject(n,r,"x"))&&this._fire("scaling",o,t):"scaleY"===a?(s=this._scaleObject(n,r,"y"))&&this._fire("scaling",o,t):"skewX"===a?(s=this._skewObject(n,r,"x"))&&this._fire("skewing",o,t):"skewY"===a?(s=this._skewObject(n,r,"y"))&&this._fire("skewing",o,t):(s=this._translateObject(n,r))&&(this._fire("moving",o,t),this.setCursor(o.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||s},_fire:function(t,e,i){this.fire("object:"+t,{target:e,e:i}),e.fire(t,{e:i})},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var i=this._shouldCenterTransform(e.target);(i&&("center"!==e.originX||"center"!==e.originY)||!i&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(),e.reset=!0)}},_onScale:function(t,e,i,n){return!t[this.uniScaleKey]&&!this.uniScaleTransform||e.target.get("lockUniScaling")?(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(),e.currentAction="scaleEqually",this._scaleObject(i,n,"equally")):(e.currentAction="scale",this._scaleObject(i,n))},_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,n=this.getActiveGroup(),r=e._findTargetCorner&&(!n||!n.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));return r?this._setCornerCursor(r,e,t):this.setCursor(i),!0},_setCornerCursor:function(t,e,i){if(t in r)this.setCursor(this._getRotatedCornerCursor(t,e,i));else{if("mtr"!==t||!e.hasRotatingPoint)return this.setCursor(this.defaultCursor),!1;this.setCursor(this.rotationCursor)}},_getRotatedCornerCursor:function(t,e,i){var n=Math.round(e.getAngle()%360/45);return n<0&&(n+=8),n+=r[t],i[this.altActionKey]&&r[t]%2==0&&(n+=2),n%=8,this.cursorMap[n]}})}(),L$c=Math.min,M$c=Math.max,fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var i=this.getActiveObject();return t[this.selectionKey]&&e&&e.selectable&&(this.getActiveGroup()||i&&i!==e)&&this.selection},_handleGrouping:function(t,e){var i=this.getActiveGroup();(e!==i||(e=this.findTarget(t,!0)))&&(i?this._updateActiveGroup(e,t):this._createActiveGroup(e,t),this._activeGroup&&this._activeGroup.saveCoords())},_updateActiveGroup:function(t,e){var i=this.getActiveGroup();if(i.contains(t)){if(i.removeWithUpdate(t),t.set("active",!1),1===i.size())return this.discardActiveGroup(e),void this.setActiveObject(i.item(0),e)}else i.addWithUpdate(t);this.fire("selection:created",{target:i,e:e}),i.set("active",!0)},_createActiveGroup:function(t,e){if(this._activeObject&&t!==this._activeObject){var i=this._createGroup(t);i.addWithUpdate(),this.setActiveGroup(i,e),this._activeObject=null,this.fire("selection:created",{target:i,e:e})}t.set("active",!0)},_createGroup:function(t){var e=this.getObjects(),i=e.indexOf(this._activeObject)<e.indexOf(t)?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.Group(i,{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects();1===e.length?this.setActiveObject(e[0],t):1<e.length&&((e=new fabric.Group(e.reverse(),{canvas:this})).addWithUpdate(),this.setActiveGroup(e,t),e.saveCoords(),this.fire("selection:created",{target:e,e:t}),this.renderAll())},_collectObjects:function(){for(var t,e=[],i=this._groupSelector.ex,n=this._groupSelector.ey,r=i+this._groupSelector.left,o=n+this._groupSelector.top,a=new fabric.Point(L$c(i,r),L$c(n,o)),s=new fabric.Point(M$c(i,r),M$c(n,o)),l=i===r&&n===o,h=this._objects.length;h--&&!((t=this._objects[h])&&t.selectable&&t.visible&&(t.intersectsWithRect(a,s)||t.isContainedWithinRect(a,s)||t.containsPoint(a)||t.containsPoint(s))&&(t.set("active",!0),e.push(t),l)););return e},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t);var e=this.getActiveGroup();e&&(e.setObjectsCoords().setCoords(),e.isMoving=!1,this.setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null}}),p_c=fabric.StaticCanvas.supports("toDataURLWithQuality"),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,n=t.multiplier||1,r={left:t.left||0,top:t.top||0,width:t.width||0,height:t.height||0};return this.__toDataURLWithMultiplier(e,i,r,n)},__toDataURLWithMultiplier:function(t,e,i,n){var r=this.getWidth(),o=this.getHeight(),a=(i.width||this.getWidth())*n,s=(i.height||this.getHeight())*n,l=this.getZoom()*n,h=this.viewportTransform,c=[l,0,0,l,(h[4]-i.left)*n,(h[5]-i.top)*n],u=this.interactive;this.viewportTransform=c,this.interactive&&(this.interactive=!1),r!==a||o!==s?this.setDimensions({width:a,height:s},{backstoreOnly:!0}):this.renderAll();var f=this.__toDataURL(t,e,i);return u&&(this.interactive=u),this.viewportTransform=h,this.setDimensions({width:r,height:o},{backstoreOnly:!0}),f},__toDataURL:function(t,e){var i=this.contextContainer.canvas;return"jpg"===t&&(t="jpeg"),p_c?i.toDataURL("image/"+t,e):i.toDataURL("image/"+t)},toDataURLWithMultiplier:function(t,e,i){return this.toDataURL({format:t,multiplier:e,quality:i})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,i){return this.loadFromJSON(t,e,i)},loadFromJSON:function(t,e,i){if(t){var n="string"==typeof t?JSON.parse(t):fabric.util.object.clone(t),r=this,o=this.renderOnAddRemove;return this.renderOnAddRemove=!1,this._enlivenObjects(n.objects,function(t){r.clear(),r._setBgOverlay(n,function(){t.forEach(function(t,e){r.insertAt(t,e)}),r.renderOnAddRemove=o,delete n.objects,delete n.backgroundImage,delete n.overlayImage,delete n.background,delete n.overlay,r._setOptions(n),r.renderAll(),e&&e()})},i),this}},_setBgOverlay:function(t,e){var i={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var n=function(){i.backgroundImage&&i.overlayImage&&i.backgroundColor&&i.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,i,n),this.__setBgOverlay("overlayImage",t.overlayImage,i,n),this.__setBgOverlay("backgroundColor",t.background,i,n),this.__setBgOverlay("overlayColor",t.overlay,i,n)}else e&&e()},__setBgOverlay:function(e,t,i,n){var r=this;if(!t)return i[e]=!0,void(n&&n());"backgroundImage"===e||"overlayImage"===e?fabric.util.enlivenObjects([t],function(t){r[e]=t[0],i[e]=!0,n&&n()}):this["set"+fabric.util.string.capitalize(e,!0)](t,function(){i[e]=!0,n&&n()})},_enlivenObjects:function(t,e,i){t&&0!==t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},null,i):e&&e([])},_toDataURL:function(e,i){this.clone(function(t){i(t.toDataURL(e))})},_toDataURLWithMultiplier:function(e,i,n){this.clone(function(t){n(t.toDataURLWithMultiplier(e,i))})},clone:function(e,t){var i=JSON.stringify(this.toJSON(t));this.cloneWithoutData(function(t){t.loadFromJSON(i,function(){e&&e(t)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.getWidth(),e.height=this.getHeight();var i=new fabric.Canvas(e);i.clipTo=this.clipTo,this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){"use strict";var x=t.fabric||(t.fabric={}),e=x.util.object.extend,s=x.util.object.clone,n=x.util.toFixed,i=x.util.string.capitalize,r=x.util.degreesToRadians,o=x.StaticCanvas.supports("setLineDash"),a=!x.isLikelyNode;x.Object||(x.Object=x.util.createClass(x.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:a,statefullCache:!1,noScaleCache:!0,dirty:!0,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height strokeLineCap strokeLineJoin strokeMiterLimit backgroundColor".split(" "),initialize:function(t){(t=t||{})&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=x.document.createElement("canvas"),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas()},_limitCacheSize:function(t){var e=x.perfLimitSizeTotal,i=t.width,n=t.height,r=x.maxCacheSideLimit,o=x.minCacheSideLimit;if(i<=r&&n<=r&&i*n<=e)return i<o&&(t.width=o),n<o&&(t.height=o),t;var a=i/n,s=x.util.limitDimsByArea(a,e),l=x.util.capValue,h=l(o,s.x,r),c=l(o,s.y,r);return h<i&&(t.zoomX/=i/h,t.width=h,t.capped=!0),c<n&&(t.zoomY/=n/c,t.height=c,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.canvas&&this.canvas.getZoom()||1,e=this.getObjectScaling(),i=this.canvas&&this.canvas._isRetinaScaling()?x.devicePixelRatio:1,n=this._getNonTransformedDimensions(),r=e.scaleX*t*i,o=e.scaleY*t*i;return{width:n.x*r+2,height:n.y*o+2,zoomX:r,zoomY:o,x:n.x,y:n.y}},_updateCacheCanvas:function(){if(this.noScaleCache&&this.canvas&&this.canvas._currentTransform){var t=this.canvas._currentTransform.target,e=this.canvas._currentTransform.action;if(this===t&&e.slice&&"scale"===e.slice(0,5))return!1}var i,n,r=this._cacheCanvas,o=this._limitCacheSize(this._getCacheCanvasDimensions()),a=x.minCacheSideLimit,s=o.width,l=o.height,h=o.zoomX,c=o.zoomY,u=s!==this.cacheWidth||l!==this.cacheHeight,f=this.zoomX!==h||this.zoomY!==c,d=u||f,p=0,g=0,v=!1;if(u){var m=this._cacheCanvas.width,y=this._cacheCanvas.height,_=m<s||y<l;v=_||(s<.9*m||l<.9*y)&&a<m&&a<y,_&&!o.capped&&(a<s||a<l)&&(p=.1*s,g=.1*l)}return!!d&&(v?(r.width=Math.ceil(s+p),r.height=Math.ceil(l+g)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,r.width,r.height)),i=o.x*h/2,n=o.y*c/2,this.cacheTranslationX=Math.round(r.width/2-i)+i,this.cacheTranslationY=Math.round(r.height/2-n)+n,this.cacheWidth=s,this.cacheHeight=l,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(h,c),this.zoomX=h,this.zoomY=c,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initClipping(t),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t,e){this.group&&!this.group._transformDone&&this.group===this.canvas._activeGroup&&this.group.transform(t);var i=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(i.x,i.y),this.angle&&t.rotate(r(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1)),this.skewX&&t.transform(1,0,Math.tan(r(this.skewX)),1,0,0),this.skewY&&t.transform(1,Math.tan(r(this.skewY)),0,1,0,0)},toObject:function(t){var e=x.Object.NUM_FRACTION_DIGITS,i={type:this.type,originX:this.originX,originY:this.originY,left:n(this.left,e),top:n(this.top,e),width:n(this.width,e),height:n(this.height,e),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,e),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:n(this.strokeMiterLimit,e),scaleX:n(this.scaleX,e),scaleY:n(this.scaleY,e),angle:n(this.getAngle(),e),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,e),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:n(this.skewX,e),skewY:n(this.skewY,e)};return x.util.populateWithProperties(this,i,t),this.includeDefaultValues||(i=this._removeDefaultValues(i)),i},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(e){var i=x.util.getKlass(e.type).prototype;return i.stateProperties.forEach(function(t){e[t]===i[t]&&delete e[t],"[object Array]"===Object.prototype.toString.call(e[t])&&"[object Array]"===Object.prototype.toString.call(i[t])&&0===e[t].length&&0===i[t].length&&delete e[t]}),e},toString:function(){return"#<fabric."+i(this.type)+">"},getObjectScaling:function(){var t=this.scaleX,e=this.scaleY;if(this.group){var i=this.group.getObjectScaling();t*=i.scaleX,e*=i.scaleY}return{scaleX:t,scaleY:e}},_set:function(t,e){var i="scaleX"===t||"scaleY"===t,n=this[t]!==e;return i&&(e=this._constrainScale(e)),"scaleX"===t&&e<0?(this.flipX=!this.flipX,e*=-1):"scaleY"===t&&e<0?(this.flipY=!this.flipY,e*=-1):"shadow"!==t||!e||e instanceof x.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",e):e=new x.Shadow(e),this[t]=e,n&&-1<this.cacheProperties.indexOf(t)&&(this.group&&this.group.set("dirty",!0),this.dirty=!0),n&&this.group&&-1<this.stateProperties.indexOf(t)&&this.group.set("dirty",!0),"width"!==t&&"height"!==t||(this.minScaleLimit=Math.min(.1,1/Math.max(this.width,this.height))),this},setOnGroup:function(){},setSourcePath:function(t){return this.sourcePath=t,this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:x.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||0===this.width&&0===this.height||!this.visible},render:function(t,e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),e||this.transform(t),this._setOpacity(t),this._setShadow(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.clipTo&&x.util.clipContext(this,t),this.shouldCache(e)?(this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty(e)&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,e),this.dirty=!1),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t,e),e&&this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),this.clipTo&&t.restore(),t.restore())},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},needsItsOwnCache:function(){return!1},shouldCache:function(t){return!t&&this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isCaching())},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawObject:function(t,e){this._renderBackground(t),this._setStrokeStyles(t),this._setFillStyles(t),this._render(t,e)},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!t){var e=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-i/2,e,i)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){t.globalAlpha*=this.opacity},_setStrokeStyles:function(t){this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t,this):this.stroke)},_setFillStyles:function(t){this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t,this):this.fill)},_setLineDash:function(t,e,i){e&&(1&e.length&&e.push.apply(e,e),o?t.setLineDash(e):i&&i(t))},_renderControls:function(t){if(this.active&&(!this.group||this.group===this.canvas.getActiveGroup())){var e,i=this.getViewportTransform(),n=this.calcTransformMatrix();n=x.util.multiplyTransformMatrices(i,n),e=x.util.qrDecompose(n),t.save(),t.translate(e.translateX,e.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.group&&this.group===this.canvas.getActiveGroup()?(t.rotate(r(e.angle)),this.drawBordersInGroup(t,e)):(t.rotate(r(this.angle)),this.drawBorders(t)),this.drawControls(t),t.restore()}},_setShadow:function(t){if(this.shadow){var e=this.canvas&&this.canvas.viewportTransform[0]||1,i=this.canvas&&this.canvas.viewportTransform[3]||1,n=this.getObjectScaling();this.canvas&&this.canvas._isRetinaScaling()&&(e*=x.devicePixelRatio,i*=x.devicePixelRatio),t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*(e+i)*(n.scaleX+n.scaleY)/4,t.shadowOffsetX=this.shadow.offsetX*e*n.scaleX,t.shadowOffsetY=this.shadow.offsetY*i*n.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(e.toLive){var i=e.gradientTransform||e.patternTransform;i&&t.transform.apply(t,i);var n=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;t.translate(n,r)}},_renderFill:function(t){this.fill&&(t.save(),this._applyPatternGradientTransform(t,this.fill),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){this.stroke&&0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this._applyPatternGradientTransform(t,this.stroke),t.stroke(),t.restore())},clone:function(t,e){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(e),t):new x.Object(this.toObject(e))},cloneAsImage:function(e,t){var i=this.toDataURL(t);return x.util.loadImage(i,function(t){e&&e(new x.Image(t))}),this},toDataURL:function(t){t||(t={});var e=x.util.createCanvasElement(),i=this.getBoundingRect();e.width=i.width,e.height=i.height,x.util.wrapElement(e,"div");var n=new x.StaticCanvas(e,{enableRetinaScaling:t.enableRetinaScaling});"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(n.backgroundColor="#fff");var r={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new x.Point(n.getWidth()/2,n.getHeight()/2),"center","center");var o=this.canvas;n.add(this);var a=n.toDataURL(t);return this.set(r).setCoords(),this.canvas=o,n.dispose(),n=null,a},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},setGradient:function(t,e){e||(e={});var i={colorStops:[]};return i.type=e.type||(e.r1||e.r2?"radial":"linear"),i.coords={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},(e.r1||e.r2)&&(i.coords.r1=e.r1,i.coords.r2=e.r2),i.gradientTransform=e.gradientTransform,x.Gradient.prototype.addColorStop.call(i,e.colorStops),this.set(t,x.Gradient.forObject(this,i))},setPatternFill:function(t){return this.set("fill",new x.Pattern(t))},setShadow:function(t){return this.set("shadow",t?new x.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},setAngle:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},remove:function(){return this.canvas&&(this.group&&this.group===this.canvas._activeGroup&&this.group.remove(this),this.canvas.remove(this)),this},getLocalPointer:function(t,e){e=e||this.canvas.getPointer(t);var i=new x.Point(e.x,e.y),n=this._getLeftTopCoords();return this.angle&&(i=x.util.rotatePoint(i,n,r(-this.angle))),{x:i.x-n.x,y:i.y-n.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),x.util.createAccessors(x.Object),x.Object.prototype.rotate=x.Object.prototype.setAngle,e(x.Object.prototype,x.Observable),x.Object.NUM_FRACTION_DIGITS=2,x.Object._fromObject=function(t,i,n,e,r){var o=x[t];if(i=s(i,!0),!e){var a=r?new o(i[r],i):new o(i);return n&&n(a),a}x.util.enlivenPatterns([i.fill,i.stroke],function(t){void 0!==t[0]&&(i.fill=t[0]),void 0!==t[1]&&(i.stroke=t[1]);var e=r?new o(i[r],i):new o(i);n&&n(e)})},x.Object.__uid=0)}(exports),k3c=fabric.util.degreesToRadians,l3c={left:-.5,center:0,right:.5},m3c={top:-.5,center:0,bottom:.5},fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(t,e,i,n,r){var o,a,s,l=t.x,h=t.y;return"string"==typeof e?e=l3c[e]:e-=.5,"string"==typeof n?n=l3c[n]:n-=.5,"string"==typeof i?i=m3c[i]:i-=.5,"string"==typeof r?r=m3c[r]:r-=.5,a=r-i,((o=n-e)||a)&&(s=this._getTransformedDimensions(),l=t.x+o*s.x,h=t.y+a*s.y),new fabric.Point(l,h)},translateToCenterPoint:function(t,e,i){var n=this.translateToGivenOrigin(t,e,i,"center","center");return this.angle?fabric.util.rotatePoint(n,t,k3c(this.angle)):n},translateToOriginPoint:function(t,e,i){var n=this.translateToGivenOrigin(t,"center","center",e,i);return this.angle?fabric.util.rotatePoint(n,t,k3c(this.angle)):n},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(t,e,i){var n,r,o=this.getCenterPoint();return n=void 0!==e&&void 0!==i?this.translateToGivenOrigin(o,"center","center",e,i):new fabric.Point(this.left,this.top),r=new fabric.Point(t.x,t.y),this.angle&&(r=fabric.util.rotatePoint(r,o,-k3c(this.angle))),r.subtractEquals(n)},setPositionByOrigin:function(t,e,i){var n=this.translateToCenterPoint(t,e,i),r=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(t){var e,i,n=k3c(this.angle),r=this.getWidth(),o=Math.cos(n)*r,a=Math.sin(n)*r;e="string"==typeof this.originX?l3c[this.originX]:this.originX-.5,i="string"==typeof t?l3c[t]:t-.5,this.left+=o*(i-e),this.top+=a*(i-e),this.setCoords(),this.originX=t},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")},onDeselect:function(){}}),c4c=fabric.util.degreesToRadians,d4c=fabric.util.multiplyTransformMatrices,fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,getCoords:function(t,e){this.oCoords||this.setCoords();var i,n=t?this.aCoords:this.oCoords;return i=e?this.calcCoords(t):n,[new fabric.Point(i.tl.x,i.tl.y),new fabric.Point(i.tr.x,i.tr.y),new fabric.Point(i.br.x,i.br.y),new fabric.Point(i.bl.x,i.bl.y)]},intersectsWithRect:function(t,e,i,n){var r=this.getCoords(i,n);return"Intersection"===fabric.Intersection.intersectPolygonRectangle(r,t,e).status},intersectsWithObject:function(t,e,i){return"Intersection"===fabric.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i)).status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var n=this.getCoords(e,i),r=0,o=t._getImageLines(i?t.calcCoords(e):e?t.aCoords:t.oCoords);r<4;r++)if(!t.containsPoint(n[r],o))return!1;return!0},isContainedWithinRect:function(t,e,i,n){var r=this.getBoundingRect(i,n);return r.left>=t.x&&r.left+r.width<=e.x&&r.top>=t.y&&r.top+r.height<=e.y},containsPoint:function(t,e,i,n){e=e||this._getImageLines(n?this.calcCoords(i):i?this.aCoords:this.oCoords);var r=this._findCrossPoints(t,e);return 0!==r&&r%2==1},isOnScreen:function(t){if(!this.canvas)return!1;for(var e,i=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br,r=this.getCoords(!0,t),o=0;o<4;o++)if((e=r[o]).x<=n.x&&e.x>=i.x&&e.y<=n.y&&e.y>=i.y)return!0;if(this.intersectsWithRect(i,n,!0))return!0;var a={x:(i.x+n.x)/2,y:(i.y+n.y)/2};return!!this.containsPoint(a,null,!0)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,n,r,o=0;for(var a in e)if(!((r=e[a]).o.y<t.y&&r.d.y<t.y||r.o.y>=t.y&&r.d.y>=t.y||(r.o.x===r.d.x&&r.o.x>=t.x?n=r.o.x:(i=(r.d.y-r.o.y)/(r.d.x-r.o.x),n=-(t.y-0*t.x-(r.o.y-i*r.o.x))/(0-i)),n>=t.x&&(o+=1),2!==o)))break;return o},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(t,e){var i=this.getCoords(t,e);return fabric.util.makeBoundingBoxFromPoints(i)},getWidth:function(){return this._getTransformedDimensions().x},getHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return(t=this._constrainScale(t))<0&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleX=t,this.scaleY=t,this.setCoords()},scaleToWidth:function(t){var e=this.getBoundingRect().width/this.getWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t){var e=this.getBoundingRect().height/this.getHeight();return this.scale(t/this.height/e)},calcCoords:function(t){var e=c4c(this.angle),i=this.getViewportTransform(),n=t?this._getTransformedDimensions():this._calculateCurrentDimensions(),r=n.x,o=n.y,a=Math.sin(e),s=Math.cos(e),l=0<r?Math.atan(o/r):0,h=r/Math.cos(l)/2,c=Math.cos(l+e)*h,u=Math.sin(l+e)*h,f=this.getCenterPoint(),d=t?f:fabric.util.transformPoint(f,i),p=new fabric.Point(d.x-c,d.y-u),g=new fabric.Point(p.x+r*s,p.y+r*a),v=new fabric.Point(p.x-o*a,p.y+o*s),m=new fabric.Point(d.x+c,d.y+u);if(!t)var y=new fabric.Point((p.x+v.x)/2,(p.y+v.y)/2),_=new fabric.Point((g.x+p.x)/2,(g.y+p.y)/2),x=new fabric.Point((m.x+g.x)/2,(m.y+g.y)/2),b=new fabric.Point((m.x+v.x)/2,(m.y+v.y)/2),w=new fabric.Point(_.x+a*this.rotatingPointOffset,_.y-s*this.rotatingPointOffset);return d={tl:p,tr:g,br:m,bl:v},t||(d.ml=y,d.mt=_,d.mr=x,d.mb=b,d.mtr=w),d},setCoords:function(t,e){return this.oCoords=this.calcCoords(t),e||(this.aCoords=this.calcCoords(!0)),t||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){if(this.angle){var t=c4c(this.angle),e=Math.cos(t),i=Math.sin(t);return 6123233995736766e-32!==e&&-18369701987210297e-32!==e||(e=0),[e,i,-i,e,0,0]}return fabric.iMatrix.concat()},calcTransformMatrix:function(t){var e,i,n=this.getCenterPoint(),r=[1,0,0,1,n.x,n.y],o=this._calcDimensionsTransformMatrix(this.skewX,this.skewY,!0);return i=this.group&&!t?d4c(this.group.calcTransformMatrix(),r):r,this.angle&&(e=this._calcRotateMatrix(),i=d4c(i,e)),i=d4c(i,o)},_calcDimensionsTransformMatrix:function(t,e,i){var n,r=[this.scaleX*(i&&this.flipX?-1:1),0,0,this.scaleY*(i&&this.flipY?-1:1),0,0];return t&&(n=[1,0,Math.tan(c4c(t)),1],r=d4c(r,n,!0)),e&&(n=[1,Math.tan(c4c(e)),0,1],r=d4c(r,n,!0)),r},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(t,e){void 0===t&&(t=this.skewX),void 0===e&&(e=this.skewY);var i,n,r=this._getNonTransformedDimensions(),o=r.x/2,a=r.y/2,s=[{x:-o,y:-a},{x:o,y:-a},{x:-o,y:a},{x:o,y:a}],l=this._calcDimensionsTransformMatrix(t,e,!1);for(i=0;i<s.length;i++)s[i]=fabric.util.transformPoint(s[i],l);return{x:(n=fabric.util.makeBoundingBoxFromPoints(s)).width,y:n.height}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return fabric.util.transformPoint(e,t,!0).scalarAdd(2*this.padding)}}),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),function(){function u(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var i=new fabric.Color(e),n=t+": "+i.toRgb()+"; ",r=i.getAlpha();return 1!==r&&(n+=t+"-opacity: "+r.toString()+"; "),n}return t+": none; "}fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(t){var e=this.fillRule,i=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):"none",r=this.strokeLineCap?this.strokeLineCap:"butt",o=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",s=void 0!==this.opacity?this.opacity:"1",l=this.visible?"":" visibility: hidden;",h=t?"":this.getSvgFilter(),c=u("fill",this.fill);return[u("stroke",this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",r,"; ","stroke-linejoin: ",o,"; ","stroke-miterlimit: ",a,"; ",c,"fill-rule: ",e,"; ","opacity: ",s,";",h,l].join("")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgId:function(){return this.id?'id="'+this.id+'" ':""},getSvgTransform:function(){if(this.group&&"path-group"===this.group.type)return"";var t=fabric.util.toFixed,e=this.getAngle(),i=this.getSkewX()%360,n=this.getSkewY()%360,r=this.getCenterPoint(),o=fabric.Object.NUM_FRACTION_DIGITS,a="path-group"===this.type?"":"translate("+t(r.x,o)+" "+t(r.y,o)+")",s=0!==e?" rotate("+t(e,o)+")":"",l=1===this.scaleX&&1===this.scaleY?"":" scale("+t(this.scaleX,o)+" "+t(this.scaleY,o)+")",h=0!==i?" skewX("+t(i,o)+")":"",c=0!==n?" skewY("+t(n,o)+")":"",u="path-group"===this.type?this.width:0,f=this.flipX?" matrix(-1 0 0 1 "+u+" 0) ":"",d="path-group"===this.type?this.height:0;return[a,s,l,f,this.flipY?" matrix(1 0 0 -1 0 "+d+")":"",h,c].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t}})}(),function(){var r=fabric.util.object.extend,n="stateProperties";function o(e,t,i){var n={};i.forEach(function(t){n[t]=e[t]}),r(e[t],n,!0)}fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(t){var e="_"+(t=t||n);return Object.keys(this[e]).length<this[t].length||!function t(e,i,n){if(e===i)return!0;if(Array.isArray(e)){if(e.length!==i.length)return!1;for(var r=0,o=e.length;r<o;r++)if(!t(e[r],i[r]))return!1;return!0}if(e&&"object"==typeof e){var a,s=Object.keys(e);if(!n&&s.length!==Object.keys(i).length)return!1;for(r=0,o=s.length;r<o;r++)if(!t(e[a=s[r]],i[a]))return!1;return!0}}(this[e],this,!0)},saveState:function(t){var e=t&&t.propertySet||n,i="_"+e;return this[i]?(o(this,i,this[e]),t&&t.stateProperties&&o(this,i,t.stateProperties),this):this.setupState(t)},setupState:function(t){var e=(t=t||{}).propertySet||n;return this["_"+(t.propertySet=e)]={},this.saveState(t),this}})}(),q7c=fabric.util.degreesToRadians,fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||!this.active)return!1;var e,i,n=t.x,r=t.y;for(var o in this.__corner=0,this.oCoords)if(this.isControlVisible(o)&&("mtr"!==o||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==o&&"mr"!==o&&"mb"!==o&&"ml"!==o)&&(i=this._getImageLines(this.oCoords[o].corner),0!==(e=this._findCrossPoints({x:n,y:r},i))&&e%2==1))return this.__corner=o;return!1},_setCornerCoords:function(){var t,e,i=this.oCoords,n=q7c(45-this.angle),r=.707106*this.cornerSize,o=r*Math.cos(n),a=r*Math.sin(n);for(var s in i)t=i[s].x,e=i[s].y,i[s].corner={tl:{x:t-a,y:e-o},tr:{x:t+o,y:e-a},bl:{x:t-o,y:e+a},br:{x:t+a,y:e+o}}},drawSelectionBackground:function(t){if(!this.selectionBackgroundColor||this.group||!this.active||this.canvas&&!this.canvas.interactive)return this;t.save();var e=this.getCenterPoint(),i=this._calculateCurrentDimensions(),n=this.canvas.viewportTransform;return t.translate(e.x,e.y),t.scale(1/n[0],1/n[3]),t.rotate(q7c(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-i.x/2,-i.y/2,i.x,i.y),t.restore(),this},drawBorders:function(t){if(!this.hasBorders)return this;var e=this._calculateCurrentDimensions(),i=1/this.borderScaleFactor,n=e.x+i,r=e.y+i;if(t.save(),t.strokeStyle=this.borderColor,this._setLineDash(t,this.borderDashArray,null),t.strokeRect(-n/2,-r/2,n,r),this.hasRotatingPoint&&this.isControlVisible("mtr")&&!this.get("lockRotation")&&this.hasControls){var o=-r/2;t.beginPath(),t.moveTo(0,o),t.lineTo(0,o-this.rotatingPointOffset),t.closePath(),t.stroke()}return t.restore(),this},drawBordersInGroup:function(t,e){if(!this.hasBorders)return this;var i=this._getNonTransformedDimensions(),n=fabric.util.customTransformMatrix(e.scaleX,e.scaleY,e.skewX),r=fabric.util.transformPoint(i,n),o=1/this.borderScaleFactor,a=r.x+o,s=r.y+o;return t.save(),this._setLineDash(t,this.borderDashArray,null),t.strokeStyle=this.borderColor,t.strokeRect(-a/2,-s/2,a,s),t.restore(),this},drawControls:function(t){if(!this.hasControls)return this;var e=this._calculateCurrentDimensions(),i=e.x,n=e.y,r=this.cornerSize,o=-(i+r)/2,a=-(n+r)/2,s=this.transparentCorners?"stroke":"fill";return t.save(),t.strokeStyle=t.fillStyle=this.cornerColor,this.transparentCorners||(t.strokeStyle=this.cornerStrokeColor),this._setLineDash(t,this.cornerDashArray,null),this._drawControl("tl",t,s,o,a),this._drawControl("tr",t,s,o+i,a),this._drawControl("bl",t,s,o,a+n),this._drawControl("br",t,s,o+i,a+n),this.get("lockUniScaling")||(this._drawControl("mt",t,s,o+i/2,a),this._drawControl("mb",t,s,o+i/2,a+n),this._drawControl("mr",t,s,o+i,a+n/2),this._drawControl("ml",t,s,o,a+n/2)),this.hasRotatingPoint&&this._drawControl("mtr",t,s,o+i/2,a-this.rotatingPointOffset),t.restore(),this},_drawControl:function(t,e,i,n,r){if(this.isControlVisible(t)){var o=this.cornerSize,a=!this.transparentCorners&&this.cornerStrokeColor;switch(this.cornerStyle){case"circle":e.beginPath(),e.arc(n+o/2,r+o/2,o/2,0,2*Math.PI,!1),e[i](),a&&e.stroke();break;default:"undefined"!=typeof G_vmlCanvasManager||this.transparentCorners||e.clearRect(n,r,o,o),e[i+"Rect"](n,r,o,o),a&&e.strokeRect(n,r,o,o)}}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){var i=function(){},n=(t=t||{}).onComplete||i,r=t.onChange||i,o=this;return fabric.util.animate({startValue:e.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(t){e.set("left",t),o.renderAll(),r()},onComplete:function(){e.setCoords(),n()}}),this},fxCenterObjectV:function(e,t){var i=function(){},n=(t=t||{}).onComplete||i,r=t.onChange||i,o=this;return fabric.util.animate({startValue:e.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(t){e.set("top",t),o.renderAll(),r()},onComplete:function(){e.setCoords(),n()}}),this},fxRemove:function(e,t){var i=function(){},n=(t=t||{}).onComplete||i,r=t.onChange||i,o=this;return fabric.util.animate({startValue:e.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){e.set("active",!1)},onChange:function(t){e.set("opacity",t),o.renderAll(),r()},onComplete:function(){o.remove(e),n()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,i=[];for(t in arguments[0])i.push(t);for(var n=0,r=i.length;n<r;n++)t=i[n],e=n!==r-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(n,t,r,o){var a,s=this;t=t.toString(),r=r?fabric.util.object.clone(r):{},~n.indexOf(".")&&(a=n.split("."));var e=a?this.get(a[0])[a[1]]:this.get(n);"from"in r||(r.from=e),t=~t.indexOf("=")?e+parseFloat(t.replace("=","")):parseFloat(t),fabric.util.animate({startValue:r.from,endValue:t,byValue:r.by,easing:r.easing,duration:r.duration,abort:r.abort&&function(){return r.abort.call(s)},onChange:function(t,e,i){a?s[a[0]][a[1]]=t:s.set(n,t),o||r.onChange&&r.onChange(t,e,i)},onComplete:function(t,e,i){o||(s.setCoords(),r.onComplete&&r.onComplete(t,e,i))}})}}),function(t){"use strict";var o=t.fabric||(t.fabric={}),r=o.util.object.extend,a=o.util.object.clone,i={x1:1,x2:1,y1:1,y2:1},s=o.StaticCanvas.supports("setLineDash");function e(t,e){var i=t.origin,n=t.axis1,r=t.axis2,o=t.dimension,a=e.nearest,s=e.center,l=e.farthest;return function(){switch(this.get(i)){case a:return Math.min(this.get(n),this.get(r));case s:return Math.min(this.get(n),this.get(r))+.5*this.get(o);case l:return Math.max(this.get(n),this.get(r))}}}o.Line?o.warn("fabric.Line is already defined"):(o.Line=o.util.createClass(o.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:o.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),void 0!==i[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t,e){if(t.beginPath(),e){var i=this.getCenterPoint(),n=this.strokeWidth/2;t.translate(i.x-("butt"===this.strokeLineCap&&0===this.height?0:n),i.y-("butt"===this.strokeLineCap&&0===this.width?0:n))}if(!this.strokeDashArray||this.strokeDashArray&&s){var r=this.calcLinePoints();t.moveTo(r.x1,r.y1),t.lineTo(r.x2,r.y2)}t.lineWidth=this.strokeWidth;var o=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=o},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),o.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},toObject:function(t){return r(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,n=e*this.height*.5;return{x1:i,x2:t*this.width*-.5,y1:n,y2:e*this.height*-.5}},toSVG:function(t){var e=this._createBaseSVGMarkup(),i={x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};return this.group&&"path-group"===this.group.type||(i=this.calcLinePoints()),e.push("<line ",this.getSvgId(),'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")}}),o.Line.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),o.Line.fromElement=function(t,e){e=e||{};var i=o.parseAttributes(t,o.Line.ATTRIBUTE_NAMES),n=[i.x1||0,i.y1||0,i.x2||0,i.y2||0];return e.originX="left",e.originY="top",new o.Line(n,r(i,e))},o.Line.fromObject=function(t,e,i){var n=a(t,!0);n.points=[t.x1,t.y1,t.x2,t.y2];var r=o.Object._fromObject("Line",n,function(t){delete t.points,e&&e(t)},i,"points");return r&&delete r.points,r})}(exports),function(t){"use strict";var o=t.fabric||(t.fabric={}),c=Math.PI,a=o.util.object.extend;o.Circle?o.warn("fabric.Circle is already defined."):(o.Circle=o.util.createClass(o.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*c,cacheProperties:o.Object.prototype.cacheProperties.concat("radius"),initialize:function(t){this.callSuper("initialize",t),this.set("radius",t&&t.radius||0)},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,n=0,r=(this.endAngle-this.startAngle)%(2*c);if(0===r)this.group&&"path-group"===this.group.type&&(i=this.left+this.radius,n=this.top+this.radius),e.push("<circle ",this.getSvgId(),'cx="'+i+'" cy="'+n+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');else{var o=Math.cos(this.startAngle)*this.radius,a=Math.sin(this.startAngle)*this.radius,s=Math.cos(this.endAngle)*this.radius,l=Math.sin(this.endAngle)*this.radius,h=c<r?"1":"0";e.push('<path d="M '+o+" "+a," A "+this.radius+" "+this.radius," 0 ",+h+" 1"," "+s+" "+l,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n')}return t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.arc(e?this.left+this.radius:0,e?this.top+this.radius:0,this.radius,this.startAngle,this.endAngle,!1),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),o.Circle.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),o.Circle.fromElement=function(t,e){e||(e={});var i,n=o.parseAttributes(t,o.Circle.ATTRIBUTE_NAMES);if(!("radius"in(i=n)&&0<=i.radius))throw new Error("value of `r` attribute is required and can not be negative");n.left=n.left||0,n.top=n.top||0;var r=new o.Circle(a(n,e));return r.left-=r.radius,r.top-=r.radius,r},o.Circle.fromObject=function(t,e,i){return o.Object._fromObject("Circle",t,e,i)})}(exports),function(t){"use strict";var n=t.fabric||(t.fabric={});n.Triangle?n.warn("fabric.Triangle is already defined"):(n.Triangle=n.util.createClass(n.Object,{type:"triangle",initialize:function(t){this.callSuper("initialize",t),this.set("width",t&&t.width||100).set("height",t&&t.height||100)},_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),n.util.drawDashedLine(t,-e,i,0,-i,this.strokeDashArray),n.util.drawDashedLine(t,0,-i,e,i,this.strokeDashArray),n.util.drawDashedLine(t,e,i,-e,i,this.strokeDashArray),t.closePath()},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.width/2,n=this.height/2,r=[-i+" "+n,"0 "+-n,i+" "+n].join(",");return e.push("<polygon ",this.getSvgId(),'points="',r,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t?t(e.join("")):e.join("")}}),n.Triangle.fromObject=function(t,e,i){return n.Object._fromObject("Triangle",t,e,i)})}(exports),function(t){"use strict";var r=t.fabric||(t.fabric={}),i=2*Math.PI,o=r.util.object.extend;r.Ellipse?r.warn("fabric.Ellipse is already defined."):(r.Ellipse=r.util.createClass(r.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,n=0;return this.group&&"path-group"===this.group.type&&(i=this.left+this.rx,n=this.top+this.ry),e.push("<ellipse ",this.getSvgId(),'cx="',i,'" cy="',n,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(e?this.left+this.rx:0,e?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,i,!1),t.restore(),this._renderFill(t),this._renderStroke(t)}}),r.Ellipse.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),r.Ellipse.fromElement=function(t,e){e||(e={});var i=r.parseAttributes(t,r.Ellipse.ATTRIBUTE_NAMES);i.left=i.left||0,i.top=i.top||0;var n=new r.Ellipse(o(i,e));return n.top-=n.ry,n.left-=n.rx,n},r.Ellipse.fromObject=function(t,e,i){return r.Object._fromObject("Ellipse",t,e,i)})}(exports),function(t){"use strict";var o=t.fabric||(t.fabric={}),r=o.util.object.extend;o.Rect?o.warn("fabric.Rect is already defined"):(o.Rect=o.util.createClass(o.Object,{stateProperties:o.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t,e){if(1!==this.width||1!==this.height){var i=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,o=this.height,a=e?this.left:-this.width/2,s=e?this.top:-this.height/2,l=0!==i||0!==n,h=.4477152502;t.beginPath(),t.moveTo(a+i,s),t.lineTo(a+r-i,s),l&&t.bezierCurveTo(a+r-h*i,s,a+r,s+h*n,a+r,s+n),t.lineTo(a+r,s+o-n),l&&t.bezierCurveTo(a+r,s+o-h*n,a+r-h*i,s+o,a+r-i,s+o),t.lineTo(a+i,s+o),l&&t.bezierCurveTo(a+h*i,s+o,a,s+o-h*n,a,s+o-n),t.lineTo(a,s+n),l&&t.bezierCurveTo(a,s+h*n,a+h*i,s,a+i,s),t.closePath(),this._renderFill(t),this._renderStroke(t)}else t.fillRect(-.5,-.5,1,1)},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,n=this.width,r=this.height;t.beginPath(),o.util.drawDashedLine(t,e,i,e+n,i,this.strokeDashArray),o.util.drawDashedLine(t,e+n,i,e+n,i+r,this.strokeDashArray),o.util.drawDashedLine(t,e+n,i+r,e,i+r,this.strokeDashArray),o.util.drawDashedLine(t,e,i+r,e,i,this.strokeDashArray),t.closePath()},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.left,n=this.top;return this.group&&"path-group"===this.group.type||(i=-this.width/2,n=-this.height/2),e.push("<rect ",this.getSvgId(),'x="',i,'" y="',n,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")}}),o.Rect.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),o.Rect.fromElement=function(t,e){if(!t)return null;e=e||{};var i=o.parseAttributes(t,o.Rect.ATTRIBUTE_NAMES);i.left=i.left||0,i.top=i.top||0;var n=new o.Rect(r(e?o.util.object.clone(e):{},i));return n.visible=n.visible&&0<n.width&&0<n.height,n},o.Rect.fromObject=function(t,e,i){return o.Object._fromObject("Rect",t,e,i)})}(exports),function(t){"use strict";var o=t.fabric||(t.fabric={}),e=o.util.object.extend,a=o.util.array.min,s=o.util.array.max,l=o.util.toFixed,h=o.Object.NUM_FRACTION_DIGITS;o.Polyline?o.warn("fabric.Polyline is already defined"):(o.Polyline=o.util.createClass(o.Object,{type:"polyline",points:null,minX:0,minY:0,cacheProperties:o.Object.prototype.cacheProperties.concat("points"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._calcDimensions(),"top"in e||(this.top=this.minY),"left"in e||(this.left=this.minX),this.pathOffset={x:this.minX+this.width/2,y:this.minY+this.height/2}},_calcDimensions:function(){var t=this.points,e=a(t,"x"),i=a(t,"y"),n=s(t,"x"),r=s(t,"y");this.width=n-e||0,this.height=r-i||0,this.minX=e||0,this.minY=i||0},toObject:function(t){return e(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(t){var e=[],i=0,n=0,r=this._createBaseSVGMarkup();this.group&&"path-group"===this.group.type||(i=this.pathOffset.x,n=this.pathOffset.y);for(var o=0,a=this.points.length;o<a;o++)e.push(l(this.points[o].x-i,h),",",l(this.points[o].y-n,h)," ");return r.push("<",this.type," ",this.getSvgId(),'points="',e.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n'),t?t(r.join("")):r.join("")},commonRender:function(t,e){var i,n=this.points.length,r=e?0:this.pathOffset.x,o=e?0:this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-r,this.points[0].y-o);for(var a=0;a<n;a++)i=this.points[a],t.lineTo(i.x-r,i.y-o);return!0},_render:function(t,e){this.commonRender(t,e)&&(this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){var e,i;t.beginPath();for(var n=0,r=this.points.length;n<r;n++)e=this.points[n],i=this.points[n+1]||e,o.util.drawDashedLine(t,e.x,e.y,i.x,i.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),o.Polyline.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polyline.fromElement=function(t,e){if(!t)return null;e||(e={});var i=o.parsePointsAttribute(t.getAttribute("points")),n=o.parseAttributes(t,o.Polyline.ATTRIBUTE_NAMES);return new o.Polyline(i,o.util.object.extend(n,e))},o.Polyline.fromObject=function(t,e,i){return o.Object._fromObject("Polyline",t,e,i,"points")})}(exports),function(t){"use strict";var r=t.fabric||(t.fabric={}),o=r.util.object.extend;r.Polygon?r.warn("fabric.Polygon is already defined"):(r.Polygon=r.util.createClass(r.Polyline,{type:"polygon",_render:function(t,e){this.commonRender(t,e)&&(t.closePath(),this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){this.callSuper("_renderDashedStroke",t),t.closePath()}}),r.Polygon.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polygon.fromElement=function(t,e){if(!t)return null;e||(e={});var i=r.parsePointsAttribute(t.getAttribute("points")),n=r.parseAttributes(t,r.Polygon.ATTRIBUTE_NAMES);return new r.Polygon(i,o(n,e))},r.Polygon.fromObject=function(t,e,i){return r.Object._fromObject("Polygon",t,e,i,"points")})}(exports),function(t){"use strict";var m=t.fabric||(t.fabric={}),y=m.util.array.min,_=m.util.array.max,r=m.util.object.extend,n=Object.prototype.toString,g=m.util.drawArc,x={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},b={m:"l",M:"L"};m.Path?m.warn("fabric.Path is already defined"):(m.Path=m.util.createClass(m.Object,{type:"path",path:null,minX:0,minY:0,cacheProperties:m.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:m.Object.prototype.stateProperties.concat("path"),initialize:function(t,e){e=e||{},this.callSuper("initialize",e),t||(t=[]);var i="[object Array]"===n.call(t);this.path=i?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(i||(this.path=this._parsePath()),this._setPositionDimensions(e))},_setPositionDimensions:function(t){var e=this._parseDimensions();this.minX=e.left,this.minY=e.top,this.width=e.width,this.height=e.height,void 0===t.left&&(this.left=e.left+("center"===this.originX?this.width/2:"right"===this.originX?this.width:0)),void 0===t.top&&(this.top=e.top+("center"===this.originY?this.height/2:"bottom"===this.originY?this.height:0)),this.pathOffset=this.pathOffset||{x:this.minX+this.width/2,y:this.minY+this.height/2}},_renderPathCommands:function(t){var e,i,n,r=null,o=0,a=0,s=0,l=0,h=0,c=0,u=-this.pathOffset.x,f=-this.pathOffset.y;this.group&&"path-group"===this.group.type&&(f=u=0),t.beginPath();for(var d=0,p=this.path.length;d<p;++d){switch((e=this.path[d])[0]){case"l":s+=e[1],l+=e[2],t.lineTo(s+u,l+f);break;case"L":s=e[1],l=e[2],t.lineTo(s+u,l+f);break;case"h":s+=e[1],t.lineTo(s+u,l+f);break;case"H":s=e[1],t.lineTo(s+u,l+f);break;case"v":l+=e[1],t.lineTo(s+u,l+f);break;case"V":l=e[1],t.lineTo(s+u,l+f);break;case"m":o=s+=e[1],a=l+=e[2],t.moveTo(s+u,l+f);break;case"M":o=s=e[1],a=l=e[2],t.moveTo(s+u,l+f);break;case"c":i=s+e[5],n=l+e[6],h=s+e[3],c=l+e[4],t.bezierCurveTo(s+e[1]+u,l+e[2]+f,h+u,c+f,i+u,n+f),s=i,l=n;break;case"C":s=e[5],l=e[6],h=e[3],c=e[4],t.bezierCurveTo(e[1]+u,e[2]+f,h+u,c+f,s+u,l+f);break;case"s":i=s+e[3],n=l+e[4],null===r[0].match(/[CcSs]/)?(h=s,c=l):(h=2*s-h,c=2*l-c),t.bezierCurveTo(h+u,c+f,s+e[1]+u,l+e[2]+f,i+u,n+f),h=s+e[1],c=l+e[2],s=i,l=n;break;case"S":i=e[3],n=e[4],null===r[0].match(/[CcSs]/)?(h=s,c=l):(h=2*s-h,c=2*l-c),t.bezierCurveTo(h+u,c+f,e[1]+u,e[2]+f,i+u,n+f),s=i,l=n,h=e[1],c=e[2];break;case"q":i=s+e[3],n=l+e[4],h=s+e[1],c=l+e[2],t.quadraticCurveTo(h+u,c+f,i+u,n+f),s=i,l=n;break;case"Q":i=e[3],n=e[4],t.quadraticCurveTo(e[1]+u,e[2]+f,i+u,n+f),s=i,l=n,h=e[1],c=e[2];break;case"t":i=s+e[1],n=l+e[2],null===r[0].match(/[QqTt]/)?(h=s,c=l):(h=2*s-h,c=2*l-c),t.quadraticCurveTo(h+u,c+f,i+u,n+f),s=i,l=n;break;case"T":i=e[1],n=e[2],null===r[0].match(/[QqTt]/)?(h=s,c=l):(h=2*s-h,c=2*l-c),t.quadraticCurveTo(h+u,c+f,i+u,n+f),s=i,l=n;break;case"a":g(t,s+u,l+f,[e[1],e[2],e[3],e[4],e[5],e[6]+s+u,e[7]+l+f]),s+=e[6],l+=e[7];break;case"A":g(t,s+u,l+f,[e[1],e[2],e[3],e[4],e[5],e[6]+u,e[7]+f]),s=e[6],l=e[7];break;case"z":case"Z":s=o,l=a,t.closePath()}r=e}},_render:function(t){this._renderPathCommands(t),this._renderFill(t),this._renderStroke(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return r(this.callSuper("toObject",["sourcePath","pathOffset"].concat(t)),{path:this.path.map(function(t){return t.slice()}),top:this.top,left:this.left})},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.path=this.sourcePath),delete e.sourcePath,e},toSVG:function(t){for(var e=[],i=this._createBaseSVGMarkup(),n="",r=0,o=this.path.length;r<o;r++)e.push(this.path[r].join(" "));var a=e.join(" ");return this.group&&"path-group"===this.group.type||(n=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),i.push("<path ",this.getSvgId(),'d="',a,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),n,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n"),t?t(i.join("")):i.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,i,n,r,o=[],a=[],s=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,l=0,h=this.path.length;l<h;l++){for(n=(t=this.path[l]).slice(1).trim(),a.length=0;i=s.exec(n);)a.push(i[0]);r=[t.charAt(0)];for(var c=0,u=a.length;c<u;c++)e=parseFloat(a[c]),isNaN(e)||r.push(e);var f=r[0],d=x[f.toLowerCase()],p=b[f]||f;if(r.length-1>d)for(var g=1,v=r.length;g<v;g+=d)o.push([f].concat(r.slice(g,g+d))),f=p;else o.push(r)}return o},_parseDimensions:function(){for(var t,e,i,n,r=[],o=[],a=null,s=0,l=0,h=0,c=0,u=0,f=0,d=0,p=this.path.length;d<p;++d){switch((t=this.path[d])[0]){case"l":h+=t[1],c+=t[2],n=[];break;case"L":h=t[1],c=t[2],n=[];break;case"h":h+=t[1],n=[];break;case"H":h=t[1],n=[];break;case"v":c+=t[1],n=[];break;case"V":c=t[1],n=[];break;case"m":s=h+=t[1],l=c+=t[2],n=[];break;case"M":s=h=t[1],l=c=t[2],n=[];break;case"c":e=h+t[5],i=c+t[6],u=h+t[3],f=c+t[4],n=m.util.getBoundsOfCurve(h,c,h+t[1],c+t[2],u,f,e,i),h=e,c=i;break;case"C":u=t[3],f=t[4],n=m.util.getBoundsOfCurve(h,c,t[1],t[2],u,f,t[5],t[6]),h=t[5],c=t[6];break;case"s":e=h+t[3],i=c+t[4],null===a[0].match(/[CcSs]/)?(u=h,f=c):(u=2*h-u,f=2*c-f),n=m.util.getBoundsOfCurve(h,c,u,f,h+t[1],c+t[2],e,i),u=h+t[1],f=c+t[2],h=e,c=i;break;case"S":e=t[3],i=t[4],null===a[0].match(/[CcSs]/)?(u=h,f=c):(u=2*h-u,f=2*c-f),n=m.util.getBoundsOfCurve(h,c,u,f,t[1],t[2],e,i),h=e,c=i,u=t[1],f=t[2];break;case"q":e=h+t[3],i=c+t[4],u=h+t[1],f=c+t[2],n=m.util.getBoundsOfCurve(h,c,u,f,u,f,e,i),h=e,c=i;break;case"Q":u=t[1],f=t[2],n=m.util.getBoundsOfCurve(h,c,u,f,u,f,t[3],t[4]),h=t[3],c=t[4];break;case"t":e=h+t[1],i=c+t[2],null===a[0].match(/[QqTt]/)?(u=h,f=c):(u=2*h-u,f=2*c-f),n=m.util.getBoundsOfCurve(h,c,u,f,u,f,e,i),h=e,c=i;break;case"T":e=t[1],i=t[2],null===a[0].match(/[QqTt]/)?(u=h,f=c):(u=2*h-u,f=2*c-f),n=m.util.getBoundsOfCurve(h,c,u,f,u,f,e,i),h=e,c=i;break;case"a":n=m.util.getBoundsOfArc(h,c,t[1],t[2],t[3],t[4],t[5],t[6]+h,t[7]+c),h+=t[6],c+=t[7];break;case"A":n=m.util.getBoundsOfArc(h,c,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),h=t[6],c=t[7];break;case"z":case"Z":h=s,c=l}a=t,n.forEach(function(t){r.push(t.x),o.push(t.y)}),r.push(h),o.push(c)}var g=y(r)||0,v=y(o)||0;return{left:g,top:v,width:(_(r)||0)-g,height:(_(o)||0)-v}}}),m.Path.fromObject=function(i,n,t){var r;if("string"!=typeof i.path)return m.Object._fromObject("Path",i,n,t,"path");m.loadSVGFromURL(i.path,function(t){var e=i.path;r=t[0],delete i.path,r.setOptions(i),r.setSourcePath(e),n&&n(r)})},m.Path.ATTRIBUTE_NAMES=m.SHARED_ATTRIBUTES.concat(["d"]),m.Path.fromElement=function(t,e,i){var n=m.parseAttributes(t,m.Path.ATTRIBUTE_NAMES);e&&e(new m.Path(n.d,r(n,i)))},m.Path.async=!0)}(exports),function(t){"use strict";var u=t.fabric||(t.fabric={}),e=u.util.object.extend;u.PathGroup?u.warn("fabric.PathGroup is already defined"):(u.PathGroup=u.util.createClass(u.Object,{type:"path-group",fill:"",cacheProperties:[],initialize:function(t,e){e=e||{},this.paths=t||[];for(var i=this.paths.length;i--;)this.paths[i].group=this;e.toBeParsed&&(this.parseDimensionsFromPaths(e),delete e.toBeParsed),this.setOptions(e),this.setCoords()},parseDimensionsFromPaths:function(t){for(var e,i,n,r,o,a,s=[],l=[],h=this.paths.length;h--;){r=(n=this.paths[h]).height+n.strokeWidth,o=n.width+n.strokeWidth,e=[{x:n.left,y:n.top},{x:n.left+o,y:n.top},{x:n.left,y:n.top+r},{x:n.left+o,y:n.top+r}],a=this.paths[h].transformMatrix;for(var c=0;c<e.length;c++)i=e[c],a&&(i=u.util.transformPoint(i,a,!1)),s.push(i.x),l.push(i.y)}t.width=Math.max.apply(null,s),t.height=Math.max.apply(null,l)},drawObject:function(t){t.save(),t.translate(-this.width/2,-this.height/2);for(var e=0,i=this.paths.length;e<i;++e)this.paths[e].render(t,!0);t.restore()},shouldCache:function(){var t=this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isCaching());if(this.caching=t)for(var e=0,i=this.paths.length;e<i;e++)if(this.paths[e].willDrawShadow())return this.caching=!1;return t},willDrawShadow:function(){if(this.shadow)return!0;for(var t=0,e=this.paths.length;t<e;t++)if(this.paths[t].willDrawShadow())return!0;return!1},isCaching:function(){return this.caching||this.group&&this.group.isCaching()},isCacheDirty:function(){if(this.callSuper("isCacheDirty"))return!0;if(!this.statefullCache)return!1;for(var t=0,e=this.paths.length;t<e;t++)if(this.paths[t].isCacheDirty(!0)){if(this._cacheCanvas){var i=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-i/2,-n/2,i,n)}return!0}return!1},_set:function(t,e){if("fill"===t&&e&&this.isSameColor())for(var i=this.paths.length;i--;)this.paths[i]._set(t,e);return this.callSuper("_set",t,e)},toObject:function(n){var t=this.paths.map(function(t){var e=t.includeDefaultValues;t.includeDefaultValues=t.group.includeDefaultValues;var i=t.toObject(n);return t.includeDefaultValues=e,i});return e(this.callSuper("toObject",["sourcePath"].concat(n)),{paths:t})},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.paths=this.sourcePath),e},toSVG:function(t){var e=this.getObjects(),i=this.getPointByOrigin("left","top"),n="translate("+i.x+" "+i.y+")",r=this._createBaseSVGMarkup();r.push("<g ",this.getSvgId(),'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransformMatrix(),n,this.getSvgTransform(),'" ',">\n");for(var o=0,a=e.length;o<a;o++)r.push("\t",e[o].toSVG(t));return r.push("</g>\n"),t?t(r.join("")):r.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var i=this.getObjects()[0].get("fill")||"";return"string"==typeof i&&(i=i.toLowerCase(),this.getObjects().every(function(t){var e=t.get("fill")||"";return"string"==typeof e&&e.toLowerCase()===i}))},complexity:function(){return this.paths.reduce(function(t,e){return t+(e&&e.complexity?e.complexity():0)},0)},getObjects:function(){return this.paths}}),u.PathGroup.fromObject=function(n,r){var o=n.paths;delete n.paths,"string"==typeof o?u.loadSVGFromURL(o,function(t){var e=o,i=u.util.groupSVGElements(t,n,e);n.paths=o,r(i)}):u.util.enlivenObjects(o,function(t){var e=new u.PathGroup(t,n);n.paths=o,r(e)})},u.PathGroup.async=!0)}(exports),function(t){"use strict";var a=t.fabric||(t.fabric={}),e=a.util.object.extend,s=a.util.array.min,l=a.util.array.max;if(!a.Group){var n={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};a.Group=a.util.createClass(a.Object,a.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),i?(this._updateObjectsCoords(!0),this._updateObjectsACoords()):(this._calcBounds(),this._updateObjectsCoords(),this.callSuper("initialize",e)),this.setCoords(),this.saveCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(!0,!0)},_updateObjectsCoords:function(t){for(var e=this.getCenterPoint(),i=this._objects.length;i--;)this._updateObjectCoords(this._objects[i],e,t)},_updateObjectCoords:function(t,e,i){if(t.__origHasControls=t.hasControls,t.hasControls=!1,!i){var n=t.getLeft(),r=t.getTop();t.set({left:n-e.x,top:r-e.y}),t.setCoords(!0,!0)}},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),a.util.resetObjectTransform(this),t&&(this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_setObjectActive:function(t){t.set("active",!0),t.group=this},removeWithUpdate:function(t){return this._restoreObjectsState(),a.util.resetObjectTransform(this),this.forEachObject(this._setObjectActive,this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group,t.set("active",!1)},delegatedProperties:{fill:!0,stroke:!0,strokeWidth:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(t,e){var i=this._objects.length;if(this.delegatedProperties[t]||"canvas"===t)for(;i--;)this._objects[i].set(t,e);else for(;i--;)this._objects[i].setOnGroup(t,e);this.callSuper("_set",t,e)},toObject:function(n){var t=this.getObjects().map(function(t){var e=t.includeDefaultValues;t.includeDefaultValues=t.group.includeDefaultValues;var i=t.toObject(n);return t.includeDefaultValues=e,i});return e(this.callSuper("toObject",n),{objects:t})},toDatalessObject:function(n){var t=this.getObjects().map(function(t){var e=t.includeDefaultValues;t.includeDefaultValues=t.group.includeDefaultValues;var i=t.toDatalessObject(n);return t.includeDefaultValues=e,i});return e(this.callSuper("toDatalessObject",n),{objects:t})},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isCaching());if(this.caching=t)for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].willDrawShadow())return this.caching=!1;return t},willDrawShadow:function(){if(this.callSuper("willDrawShadow"))return!0;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isCaching:function(){return this.caching||this.group&&this.group.isCaching()},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._renderObject(this._objects[e],t)},isCacheDirty:function(){if(this.callSuper("isCacheDirty"))return!0;if(!this.statefullCache)return!1;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].isCacheDirty(!0)){if(this._cacheCanvas){var i=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-i/2,-n/2,i,n)}return!0}return!1},_renderControls:function(t,e){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e);for(var i=0,n=this._objects.length;i<n;i++)this._objects[i]._renderControls(t);t.restore()},_renderObject:function(t,e){if(t.visible){var i=t.hasRotatingPoint;t.hasRotatingPoint=!1,t.render(e),t.hasRotatingPoint=i}},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){var e=t.calcTransformMatrix(),i=a.util.qrDecompose(e),n=new a.Point(i.translateX,i.translateY);return t.flipX=!1,t.flipY=!1,t.set("scaleX",i.scaleX),t.set("scaleY",i.scaleY),t.skewX=i.skewX,t.skewY=i.skewY,t.angle=i.angle,t.setPositionByOrigin(n,"center","center"),t},_restoreObjectState:function(t){return this.realizeTransform(t),t.setCoords(),t.hasControls=t.__origHasControls,delete t.__origHasControls,t.set("active",!1),delete t.group,this},destroy:function(){return this._objects.forEach(function(t){t.set("dirty",!0)}),this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords(!0,!0)}),this},_calcBounds:function(t){for(var e,i,n,r=[],o=[],a=["tr","br","bl","tl"],s=0,l=this._objects.length,h=a.length;s<l;++s)for((e=this._objects[s]).setCoords(!0),n=0;n<h;n++)i=a[n],r.push(e.oCoords[i].x),o.push(e.oCoords[i].y);this.set(this._getBounds(r,o,t))},_getBounds:function(t,e,i){var n=new a.Point(s(t),s(e)),r=new a.Point(l(t),l(e)),o={width:r.x-n.x||0,height:r.y-n.y||0};return i||(o.left=n.x||0,o.top=n.y||0,"center"===this.originX&&(o.left+=o.width/2),"right"===this.originX&&(o.left+=o.width),"center"===this.originY&&(o.top+=o.height/2),"bottom"===this.originY&&(o.top+=o.height)),o},toSVG:function(t){var e=this._createBaseSVGMarkup();e.push("<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'" style="',this.getSvgFilter(),'">\n');for(var i=0,n=this._objects.length;i<n;i++)e.push("\t",this._objects[i].toSVG(t));return e.push("</g>\n"),t?t(e.join("")):e.join("")},get:function(t){if(t in n){if(this[t])return this[t];for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e][t])return!0;return!1}return t in this.delegatedProperties?this._objects[0]&&this._objects[0].get(t):this[t]}}),a.Group.fromObject=function(i,n){a.util.enlivenObjects(i.objects,function(t){var e=a.util.object.clone(i,!0);delete e.objects,n&&n(new a.Group(t,e,!0))})},a.Group.async=!0}}(exports),function(t){"use strict";var a=fabric.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",alignX:"none",alignY:"none",meetOrSlice:"meet",strokeWidth:0,_lastScaleX:1,_lastScaleY:1,minimumScaleTrigger:.5,stateProperties:fabric.Object.prototype.stateProperties.concat("alignX","alignY","meetOrSlice"),objectCaching:!1,initialize:function(t,e,i){e||(e={}),this.filters=[],this.resizeFilters=[],this.callSuper("initialize",e),this._initElement(t,e,i)},getElement:function(){return this._element},setElement:function(t,e,i){var n,r;return this._element=t,this._originalElement=t,this._initConfig(i),0===this.resizeFilters.length?n=e:(r=this,n=function(){r.applyFilters(e,r.resizeFilters,r._filteredEl||r._originalElement,!0)}),0!==this.filters.length?this.applyFilters(n):n&&n(this),this},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,n=this.width,r=this.height;t.save(),this._setStrokeStyles(t),t.beginPath(),fabric.util.drawDashedLine(t,e,i,e+n,i,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i,e+n,i+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i+r,e,i+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e,i+r,e,i,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var e=[],i=[],n=1,r=1;this.filters.forEach(function(t){t&&("Resize"===t.type&&(n*=t.scaleX,r*=t.scaleY),e.push(t.toObject()))}),this.resizeFilters.forEach(function(t){t&&i.push(t.toObject())});var o=a(this.callSuper("toObject",["crossOrigin","alignX","alignY","meetOrSlice"].concat(t)),{src:this.getSrc(),filters:e,resizeFilters:i});return o.width/=n,o.height/=r,o},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=-this.width/2,n=-this.height/2,r="none";if(this.group&&"path-group"===this.group.type&&(i=this.left,n=this.top),"none"!==this.alignX&&"none"!==this.alignY&&(r="x"+this.alignX+"Y"+this.alignY+" "+this.meetOrSlice),e.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',"<image ",this.getSvgId(),'xlink:href="',this.getSvgSrc(!0),'" x="',i,'" y="',n,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="',r,'"',"></image>\n"),this.stroke||this.strokeDashArray){var o=this.fill;this.fill=null,e.push("<rect ",'x="',i,'" y="',n,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=o}return e.push("</g>\n"),t?t(e.join("")):e.join("")},getSrc:function(t){var e=t?this._element:this._originalElement;return e?fabric.isLikelyNode?e._src:e.src:this.src||""},setSrc:function(t,e,i){fabric.util.loadImage(t,function(t){return this.setElement(t,e,i)},this,i&&i.crossOrigin)},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyFilters:function(t,e,i,n){if(e=e||this.filters,i=i||this._originalElement){var r,o,a=fabric.util.createImage(),s=this.canvas?this.canvas.getRetinaScaling():fabric.devicePixelRatio,l=this.minimumScaleTrigger/s,h=this;if(0===e.length)return this._element=i,t&&t(this),i;var c=fabric.util.createCanvasElement();return c.width=i.width,c.height=i.height,c.getContext("2d").drawImage(i,0,0,i.width,i.height),e.forEach(function(t){t&&(n?(r=h.scaleX<l?h.scaleX:1,o=h.scaleY<l?h.scaleY:1,r*s<1&&(r*=s),o*s<1&&(o*=s)):(r=t.scaleX,o=t.scaleY),t.applyTo(c,r,o),n||"Resize"!==t.type||(h.width*=t.scaleX,h.height*=t.scaleY))}),a.width=c.width,a.height=c.height,fabric.isLikelyNode?(a.src=c.toBuffer(void 0,fabric.Image.pngCompression),h._element=a,!n&&(h._filteredEl=a),t&&t(h)):(a.onload=function(){h._element=a,!n&&(h._filteredEl=a),t&&t(h),a.onload=c=null},a.src=c.toDataURL("image/png")),c}},_render:function(t,e){var i,n,r,o=this._findMargins();i=e?this.left:-this.width/2,n=e?this.top:-this.height/2,"slice"===this.meetOrSlice&&(t.beginPath(),t.rect(i,n,this.width,this.height),t.clip()),!1===this.isMoving&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,r=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):r=this._element,r&&t.drawImage(r,i+o.marginX,n+o.marginY,o.width,o.height),this._stroke(t),this._renderStroke(t)},_needsResize:function(){return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_findMargins:function(){var t,e,i=this.width,n=this.height,r=0,o=0;return"none"===this.alignX&&"none"===this.alignY||(t=[this.width/this._element.width,this.height/this._element.height],e="meet"===this.meetOrSlice?Math.min.apply(null,t):Math.max.apply(null,t),i=this._element.width*e,n=this._element.height*e,"Mid"===this.alignX&&(r=(this.width-i)/2),"Max"===this.alignX&&(r=this.width-i),"Mid"===this.alignY&&(o=(this.height-n)/2),"Max"===this.alignY&&(o=this.height-n)),{width:i,height:n,marginX:r,marginY:o}},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t,e,i){this.setElement(fabric.util.getById(t),i,e),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement()&&this.getElement().width||0,this.height="height"in t?t.height:this.getElement()&&this.getElement().height||0}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(i,n){fabric.util.loadImage(i.src,function(e,t){t?n&&n(null,t):fabric.Image.prototype._initFilters.call(i,i.filters,function(t){i.filters=t||[],fabric.Image.prototype._initFilters.call(i,i.resizeFilters,function(t){return i.resizeFilters=t||[],new fabric.Image(e,i,n)})})},null,i.crossOrigin)},fabric.Image.fromURL=function(t,e,i){fabric.util.loadImage(t,function(t){e&&e(new fabric.Image(t,i))},null,i&&i.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),fabric.Image.fromElement=function(t,e,i){var n,r=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES);r.preserveAspectRatio&&(n=fabric.util.parsePreserveAspectRatioAttribute(r.preserveAspectRatio),a(r,n)),fabric.Image.fromURL(r["xlink:href"],e,a(i?fabric.util.object.clone(i):{},r))},fabric.Image.async=!0,fabric.Image.pngCompression=1)}(exports),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.getAngle()%360;return 0<t?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.setAngle(this._getAngleValueForStraighten()),this},fxStraighten:function(t){var e=function(){},i=(t=t||{}).onComplete||e,n=t.onChange||e,r=this;return fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){r.setAngle(t),n()},onComplete:function(){r.setCoords(),i()},onStart:function(){r.set("active",!1)}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.renderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.renderAll.bind(this)}),this}}),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),fabric.Image.filters.BaseFilter.fromObject=function(t,e){var i=new fabric.Image.filters[t.type](t);return e&&e(i),i},function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.Brightness=r(n.BaseFilter,{type:"Brightness",initialize:function(t){t=t||{},this.brightness=t.brightness||0},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,r=this.brightness,o=0,a=n.length;o<a;o+=4)n[o]+=r,n[o+1]+=r,n[o+2]+=r;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{brightness:this.brightness})}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.Convolute=r(n.BaseFilter,{type:"Convolute",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,0,0,0,1,0,0,0,0]},applyTo:function(t){for(var e,i,n,r,o,a,s,l,h,c=this.matrix,u=t.getContext("2d"),f=u.getImageData(0,0,t.width,t.height),d=Math.round(Math.sqrt(c.length)),p=Math.floor(d/2),g=f.data,v=f.width,m=f.height,y=u.createImageData(v,m),_=y.data,x=this.opaque?1:0,b=0;b<m;b++)for(var w=0;w<v;w++){o=4*(b*v+w);for(var C=r=n=i=e=0;C<d;C++)for(var S=0;S<d;S++)a=w+S-p,(s=b+C-p)<0||m<s||a<0||v<a||(l=4*(s*v+a),h=c[C*d+S],e+=g[l]*h,i+=g[l+1]*h,n+=g[l+2]*h,r+=g[l+3]*h);_[o]=e,_[o+1]=i,_[o+2]=n,_[o+3]=r+x*(255-r)}u.putImageData(y,0,0)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.GradientTransparency=r(n.BaseFilter,{type:"GradientTransparency",initialize:function(t){t=t||{},this.threshold=t.threshold||100},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,r=this.threshold,o=n.length,a=0,s=n.length;a<s;a+=4)n[a+3]=r+255*(o-a)/o;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold})}}),e.Image.filters.GradientTransparency.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var i=t.fabric||(t.fabric={}),e=i.Image.filters,n=i.util.createClass;e.Grayscale=n(e.BaseFilter,{type:"Grayscale",applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=n.width*n.height*4,a=0;a<o;)e=(r[a]+r[a+1]+r[a+2])/3,r[a]=e,r[a+1]=e,r[a+2]=e,a+=4;i.putImageData(n,0,0)}}),i.Image.filters.Grayscale.fromObject=function(t,e){return(t=t||{}).type="Grayscale",i.Image.filters.BaseFilter.fromObject(t,e)}}(exports),function(t){"use strict";var i=t.fabric||(t.fabric={}),e=i.Image.filters,n=i.util.createClass;e.Invert=n(e.BaseFilter,{type:"Invert",applyTo:function(t){var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=r.length;for(e=0;e<o;e+=4)r[e]=255-r[e],r[e+1]=255-r[e+1],r[e+2]=255-r[e+2];i.putImageData(n,0,0)}}),i.Image.filters.Invert.fromObject=function(t,e){return(t=t||{}).type="Invert",i.Image.filters.BaseFilter.fromObject(t,e)}}(exports),function(t){"use strict";var c=t.fabric||(t.fabric={}),e=c.util.object.extend,i=c.Image.filters,n=c.util.createClass;i.Mask=n(i.BaseFilter,{type:"Mask",initialize:function(t){t=t||{},this.mask=t.mask,this.channel=-1<[0,1,2,3].indexOf(t.channel)?t.channel:0},applyTo:function(t){if(this.mask){var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=this.mask.getElement(),a=c.util.createCanvasElement(),s=this.channel,l=n.width*n.height*4;a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(o,0,0,t.width,t.height);var h=a.getContext("2d").getImageData(0,0,t.width,t.height).data;for(e=0;e<l;e+=4)r[e+3]=h[e+s];i.putImageData(n,0,0)}},toObject:function(){return e(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),c.Image.filters.Mask.fromObject=function(e,i){c.util.loadImage(e.mask.src,function(t){return e.mask=new c.Image(t,e.mask),c.Image.filters.BaseFilter.fromObject(e,i)})},c.Image.filters.Mask.async=!0}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.Noise=r(n.BaseFilter,{type:"Noise",initialize:function(t){t=t||{},this.noise=t.noise||0},applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=this.noise,a=0,s=r.length;a<s;a+=4)e=(.5-Math.random())*o,r[a]+=e,r[a+1]+=e,r[a+2]+=e;i.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.Pixelate=r(n.BaseFilter,{type:"Pixelate",initialize:function(t){t=t||{},this.blocksize=t.blocksize||4},applyTo:function(t){var e,i,n,r,o,a,s,l=t.getContext("2d"),h=l.getImageData(0,0,t.width,t.height),c=h.data,u=h.height,f=h.width;for(i=0;i<u;i+=this.blocksize)for(n=0;n<f;n+=this.blocksize){r=c[e=4*i*f+4*n],o=c[e+1],a=c[e+2],s=c[e+3];for(var d=i,p=i+this.blocksize;d<p;d++)for(var g=n,v=n+this.blocksize;g<v;g++)c[e=4*d*f+4*g]=r,c[e+1]=o,c[e+2]=a,c[e+3]=s}l.putImageData(h,0,0)},toObject:function(){return i(this.callSuper("toObject"),{blocksize:this.blocksize})}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.RemoveWhite=r(n.BaseFilter,{type:"RemoveWhite",initialize:function(t){t=t||{},this.threshold=t.threshold||30,this.distance=t.distance||20},applyTo:function(t){for(var e,i,n,r=t.getContext("2d"),o=r.getImageData(0,0,t.width,t.height),a=o.data,s=this.threshold,l=this.distance,h=255-s,c=Math.abs,u=0,f=a.length;u<f;u+=4)e=a[u],i=a[u+1],n=a[u+2],h<e&&h<i&&h<n&&c(e-i)<l&&c(e-n)<l&&c(i-n)<l&&(a[u+3]=0);r.putImageData(o,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),e.Image.filters.RemoveWhite.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var i=t.fabric||(t.fabric={}),e=i.Image.filters,n=i.util.createClass;e.Sepia=n(e.BaseFilter,{type:"Sepia",applyTo:function(t){var e,i,n=t.getContext("2d"),r=n.getImageData(0,0,t.width,t.height),o=r.data,a=o.length;for(e=0;e<a;e+=4)i=.3*o[e]+.59*o[e+1]+.11*o[e+2],o[e]=i+100,o[e+1]=i+50,o[e+2]=i+255;n.putImageData(r,0,0)}}),i.Image.filters.Sepia.fromObject=function(t,e){return(t=t||{}).type="Sepia",new i.Image.filters.BaseFilter.fromObject(t,e)}}(exports),function(t){"use strict";var i=t.fabric||(t.fabric={}),e=i.Image.filters,n=i.util.createClass;e.Sepia2=n(e.BaseFilter,{type:"Sepia2",applyTo:function(t){var e,i,n,r,o=t.getContext("2d"),a=o.getImageData(0,0,t.width,t.height),s=a.data,l=s.length;for(e=0;e<l;e+=4)i=s[e],n=s[e+1],r=s[e+2],s[e]=(.393*i+.769*n+.189*r)/1.351,s[e+1]=(.349*i+.686*n+.168*r)/1.203,s[e+2]=(.272*i+.534*n+.131*r)/2.14;o.putImageData(a,0,0)}}),i.Image.filters.Sepia2.fromObject=function(t,e){return(t=t||{}).type="Sepia2",new i.Image.filters.BaseFilter.fromObject(t,e)}}(exports),function(t){"use strict";var p=t.fabric||(t.fabric={}),e=p.util.object.extend,i=p.Image.filters,n=p.util.createClass;i.Tint=n(i.BaseFilter,{type:"Tint",initialize:function(t){t=t||{},this.color=t.color||"#000000",this.opacity=void 0!==t.opacity?t.opacity:new p.Color(this.color).getAlpha()},applyTo:function(t){var e,i,n,r,o,a,s,l,h,c=t.getContext("2d"),u=c.getImageData(0,0,t.width,t.height),f=u.data,d=f.length;for(i=(h=new p.Color(this.color).getSource())[0]*this.opacity,n=h[1]*this.opacity,r=h[2]*this.opacity,l=1-this.opacity,e=0;e<d;e+=4)o=f[e],a=f[e+1],s=f[e+2],f[e]=i+o*l,f[e+1]=n+a*l,f[e+2]=r+s*l;c.putImageData(u,0,0)},toObject:function(){return e(this.callSuper("toObject"),{color:this.color,opacity:this.opacity})}}),p.Image.filters.Tint.fromObject=p.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var s=t.fabric||(t.fabric={}),e=s.util.object.extend,i=s.Image.filters,n=s.util.createClass;i.Multiply=n(i.BaseFilter,{type:"Multiply",initialize:function(t){t=t||{},this.color=t.color||"#000000"},applyTo:function(t){var e,i,n=t.getContext("2d"),r=n.getImageData(0,0,t.width,t.height),o=r.data,a=o.length;for(i=new s.Color(this.color).getSource(),e=0;e<a;e+=4)o[e]*=i[0]/255,o[e+1]*=i[1]/255,o[e+2]*=i[2]/255;n.putImageData(r,0,0)},toObject:function(){return e(this.callSuper("toObject"),{color:this.color})}}),s.Image.filters.Multiply.fromObject=s.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var _=t.fabric,e=_.Image.filters,i=_.util.createClass;e.Blend=i(e.BaseFilter,{type:"Blend",initialize:function(t){t=t||{},this.color=t.color||"#000",this.image=t.image||!1,this.mode=t.mode||"multiply",this.alpha=t.alpha||1},applyTo:function(t){var e,i,n,r,o,a,s,l,h,c,u=t.getContext("2d"),f=u.getImageData(0,0,t.width,t.height),d=f.data,p=!1;if(this.image){p=!0;var g=_.util.createCanvasElement();g.width=this.image.width,g.height=this.image.height;var v=new _.StaticCanvas(g);v.add(this.image),c=v.getContext("2d").getImageData(0,0,v.width,v.height).data}else e=(c=new _.Color(this.color).getSource())[0]*this.alpha,i=c[1]*this.alpha,n=c[2]*this.alpha;for(var m=0,y=d.length;m<y;m+=4)switch(r=d[m],o=d[m+1],a=d[m+2],p&&(e=c[m]*this.alpha,i=c[m+1]*this.alpha,n=c[m+2]*this.alpha),this.mode){case"multiply":d[m]=r*e/255,d[m+1]=o*i/255,d[m+2]=a*n/255;break;case"screen":d[m]=1-(1-r)*(1-e),d[m+1]=1-(1-o)*(1-i),d[m+2]=1-(1-a)*(1-n);break;case"add":d[m]=Math.min(255,r+e),d[m+1]=Math.min(255,o+i),d[m+2]=Math.min(255,a+n);break;case"diff":case"difference":d[m]=Math.abs(r-e),d[m+1]=Math.abs(o-i),d[m+2]=Math.abs(a-n);break;case"subtract":s=r-e,l=o-i,h=a-n,d[m]=s<0?0:s,d[m+1]=l<0?0:l,d[m+2]=h<0?0:h;break;case"darken":d[m]=Math.min(r,e),d[m+1]=Math.min(o,i),d[m+2]=Math.min(a,n);break;case"lighten":d[m]=Math.max(r,e),d[m+1]=Math.max(o,i),d[m+2]=Math.max(a,n)}u.putImageData(f,0,0)},toObject:function(){return{color:this.color,image:this.image,mode:this.mode,alpha:this.alpha}}}),_.Image.filters.Blend.fromObject=_.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var m=t.fabric||(t.fabric={}),I=Math.pow,P=Math.floor,E=Math.sqrt,L=Math.abs,y=Math.max,l=Math.round,r=Math.sin,j=Math.ceil,e=m.Image.filters,i=m.util.createClass;e.Resize=i(e.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,applyTo:function(t,e,i){if(1!==e||1!==i){this.rcpScaleX=1/e,this.rcpScaleY=1/i;var n,r=t.width,o=t.height,a=l(r*e),s=l(o*i);"sliceHack"===this.resizeType&&(n=this.sliceByTwo(t,r,o,a,s)),"hermite"===this.resizeType&&(n=this.hermiteFastResize(t,r,o,a,s)),"bilinear"===this.resizeType&&(n=this.bilinearFiltering(t,r,o,a,s)),"lanczos"===this.resizeType&&(n=this.lanczosResize(t,r,o,a,s)),t.width=a,t.height=s,t.getContext("2d").putImageData(n,0,0)}},sliceByTwo:function(t,e,i,n,r){var o,a=t.getContext("2d"),s=.5,l=.5,h=1,c=1,u=!1,f=!1,d=e,p=i,g=m.util.createCanvasElement(),v=g.getContext("2d");for(n=P(n),r=P(r),g.width=y(n,e),g.height=y(r,i),e<n&&(s=2,h=-1),i<r&&(l=2,c=-1),o=a.getImageData(0,0,e,i),t.width=y(n,e),t.height=y(r,i),a.putImageData(o,0,0);!u||!f;)i=p,n*h<P((e=d)*s*h)?d=P(d*s):(d=n,u=!0),r*c<P(p*l*c)?p=P(p*l):(p=r,f=!0),o=a.getImageData(0,0,e,i),v.putImageData(o,0,0),a.clearRect(0,0,d,p),a.drawImage(g,0,0,e,i,0,0,d,p);return a.getImageData(0,0,n,r)},lanczosResize:function(t,p,g,v,m){var i,e=t.getContext("2d"),n=e.getImageData(0,0,p,g),y=e.getImageData(0,0,v,m),_=n.data,x=y.data,b=(i=this.lanczosLobes,function(t){if(i<t)return 0;if(t*=Math.PI,L(t)<1e-16)return 1;var e=t/i;return r(t)*r(e)/t/e}),w=this.rcpScaleX,C=this.rcpScaleY,S=2/this.rcpScaleX,T=2/this.rcpScaleY,O=j(w*this.lanczosLobes/2),k=j(C*this.lanczosLobes/2),A={},M={},D={};return function t(e){var i,n,r,o,a,s,l,h,c,u,f;for(M.x=(e+.5)*w,D.x=P(M.x),i=0;i<m;i++){for(M.y=(i+.5)*C,D.y=P(M.y),c=h=l=s=a=0,n=D.x-O;n<=D.x+O;n++)if(!(n<0||p<=n)){u=P(1e3*L(n-M.x)),A[u]||(A[u]={});for(var d=D.y-k;d<=D.y+k;d++)d<0||g<=d||(f=P(1e3*L(d-M.y)),A[u][f]||(A[u][f]=b(E(I(u*S,2)+I(f*T,2))/1e3)),0<(r=A[u][f])&&(a+=r,s+=r*_[o=4*(d*p+n)],l+=r*_[o+1],h+=r*_[o+2],c+=r*_[o+3]))}x[o=4*(i*v+e)]=s/a,x[o+1]=l/a,x[o+2]=h/a,x[o+3]=c/a}return++e<v?t(e):y}(0)},bilinearFiltering:function(t,e,i,n,r){var o,a,s,l,h,c,u,f,d,p=0,g=this.rcpScaleX,v=this.rcpScaleY,m=t.getContext("2d"),y=4*(e-1),_=m.getImageData(0,0,e,i).data,x=m.getImageData(0,0,n,r),b=x.data;for(s=0;s<r;s++)for(l=0;l<n;l++)for(h=g*l-(o=P(g*l)),c=v*s-(a=P(v*s)),d=4*(a*e+o),u=0;u<4;u++)f=_[d+u]*(1-h)*(1-c)+_[d+4+u]*h*(1-c)+_[d+y+u]*c*(1-h)+_[d+y+4+u]*h*c,b[p++]=f;return x},hermiteFastResize:function(t,e,i,n,r){for(var o=this.rcpScaleX,a=this.rcpScaleY,s=j(o/2),l=j(a/2),h=t.getContext("2d"),c=h.getImageData(0,0,e,i).data,u=h.getImageData(0,0,n,r),f=u.data,d=0;d<r;d++)for(var p=0;p<n;p++){for(var g=4*(p+d*n),v=0,m=0,y=0,_=0,x=0,b=0,w=0,C=(d+.5)*a,S=P(d*a);S<(d+1)*a;S++)for(var T=L(C-(S+.5))/l,O=(p+.5)*o,k=T*T,A=P(p*o);A<(p+1)*o;A++){var M=L(O-(A+.5))/s,D=E(k+M*M);1<D&&D<-1||0<(v=2*D*D*D-3*D*D+1)&&(w+=v*c[(M=4*(A+S*e))+3],y+=v,c[M+3]<255&&(v=v*c[M+3]/250),_+=v*c[M],x+=v*c[M+1],b+=v*c[M+2],m+=v)}f[g]=_/m,f[g+1]=x/m,f[g+2]=b/m,f[g+3]=w/y}return u},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),m.Image.filters.Resize.fromObject=m.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.ColorMatrix=r(n.BaseFilter,{type:"ColorMatrix",initialize:function(t){t||(t={}),this.matrix=t.matrix||[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]},applyTo:function(t){var e,i,n,r,o,a=t.getContext("2d"),s=a.getImageData(0,0,t.width,t.height),l=s.data,h=l.length,c=this.matrix;for(e=0;e<h;e+=4)i=l[e],n=l[e+1],r=l[e+2],o=l[e+3],l[e]=i*c[0]+n*c[1]+r*c[2]+o*c[3]+c[4],l[e+1]=i*c[5]+n*c[6]+r*c[7]+o*c[8]+c[9],l[e+2]=i*c[10]+n*c[11]+r*c[12]+o*c[13]+c[14],l[e+3]=i*c[15]+n*c[16]+r*c[17]+o*c[18]+c[19];a.putImageData(s,0,0)},toObject:function(){return i(this.callSuper("toObject"),{type:this.type,matrix:this.matrix})}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.Contrast=r(n.BaseFilter,{type:"Contrast",initialize:function(t){t=t||{},this.contrast=t.contrast||0},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,r=259*(this.contrast+255)/(255*(259-this.contrast)),o=0,a=n.length;o<a;o+=4)n[o]=r*(n[o]-128)+128,n[o+1]=r*(n[o+1]-128)+128,n[o+2]=r*(n[o+2]-128)+128;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{contrast:this.contrast})}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.Saturate=r(n.BaseFilter,{type:"Saturate",initialize:function(t){t=t||{},this.saturate=t.saturate||0},applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=.01*-this.saturate,a=0,s=r.length;a<s;a+=4)e=Math.max(r[a],r[a+1],r[a+2]),r[a]+=e!==r[a]?(e-r[a])*o:0,r[a+1]+=e!==r[a+1]?(e-r[a+1])*o:0,r[a+2]+=e!==r[a+2]?(e-r[a+2])*o:0;i.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{saturate:this.saturate})}}),e.Image.filters.Saturate.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var d=t.fabric||(t.fabric={}),p=d.util.toFixed,g=d.Object.NUM_FRACTION_DIGITS;d.Text?d.warn("fabric.Text is already defined"):(d.Text=d.util.createClass(d.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.16,textBackgroundColor:"",stateProperties:d.Object.prototype.stateProperties.concat("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing"),cacheProperties:d.Object.prototype.cacheProperties.concat("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),stroke:null,shadow:null,_fontSizeFraction:.25,_fontSizeMult:1.13,charSpacing:0,initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.__skipDimension=!1,this._initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},_initDimensions:function(t){this.__skipDimension||(t||(t=d.util.createCanvasElement().getContext("2d"),this._setTextStyles(t)),this._textLines=this._splitTextIntoLines(),this._clearCache(),this.width=this._getTextWidth(t)||this.cursorWidth||2,this.height=this._getTextHeight(t),this.setCoords())},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){this._setTextStyles(t),this.group&&"path-group"===this.group.type&&t.translate(this.left,this.top),this._renderTextLinesBackground(t),this._renderText(t),this._renderTextDecoration(t)},_renderText:function(t){this._renderTextFill(t),this._renderTextStroke(t)},_setTextStyles:function(t){t.textBaseline="alphabetic",t.font=this._getFontDeclaration()},_getTextHeight:function(){return this._getHeightOfSingleLine()+(this._textLines.length-1)*this._getHeightOfLine()},_getTextWidth:function(t){for(var e=this._getLineWidth(t,0),i=1,n=this._textLines.length;i<n;i++){var r=this._getLineWidth(t,i);e<r&&(e=r)}return e},_renderChars:function(t,e,i,n,r){var o,a,s=t.slice(0,-4);if(this[s].toLive){var l=-this.width/2+this[s].offsetX||0,h=-this.height/2+this[s].offsetY||0;e.save(),e.translate(l,h),n-=l,r-=h}if(0!==this.charSpacing)for(var c=this._getWidthOfCharSpacing(),u=0,f=(i=i.split("")).length;u<f;u++)o=i[u],a=e.measureText(o).width+c,e[t](o,n,r),n+=0<a?a:0;else e[t](i,n,r);this[s].toLive&&e.restore()},_renderTextLine:function(t,e,i,n,r,o){r-=this.fontSize*this._fontSizeFraction;var a=this._getLineWidth(e,o);if("justify"!==this.textAlign||this.width<a)this._renderChars(t,e,i,n,r,o);else for(var s,l=i.split(/\s+/),h=0,c=this._getWidthOfWords(e,l.join(" "),o,0),u=this.width-c,f=l.length-1,d=0<f?u/f:0,p=0,g=0,v=l.length;g<v;g++){for(;" "===i[h]&&h<i.length;)h++;s=l[g],this._renderChars(t,e,s,n+p,r,o,h),p+=this._getWidthOfWords(e,s,o,h)+d,h+=s.length}},_getWidthOfWords:function(t,e){var i=t.measureText(e).width;return 0!==this.charSpacing&&(i+=e.split("").length*this._getWidthOfCharSpacing()),0<i?i:0},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},isEmptyStyles:function(){return!0},_renderTextCommon:function(t,e){for(var i=0,n=this._getLeftOffset(),r=this._getTopOffset(),o=0,a=this._textLines.length;o<a;o++){var s=this._getHeightOfLine(t,o),l=s/this.lineHeight,h=this._getLineWidth(t,o),c=this._getLineLeftOffset(h);this._renderTextLine(e,t,this._textLines[o],n+c,r+i+l,o),i+=s}},_renderTextFill:function(t){!this.fill&&this.isEmptyStyles()||this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_getHeightOfLine:function(){return this._getHeightOfSingleLine()*this.lineHeight},_getHeightOfSingleLine:function(){return this.fontSize*this._fontSizeMult},_renderTextLinesBackground:function(t){if(this.textBackgroundColor){var e,i,n,r=0,o=t.fillStyle;t.fillStyle=this.textBackgroundColor;for(var a=0,s=this._textLines.length;a<s;a++)e=this._getHeightOfLine(t,a),0<(i=this._getLineWidth(t,a))&&(n=this._getLineLeftOffset(i),t.fillRect(this._getLeftOffset()+n,this._getTopOffset()+r,i,e/this.lineHeight)),r+=e;t.fillStyle=o,this._removeShadow(t)}},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.saveState({propertySet:"_dimensionAffectingProps"}),this.dirty=!0),t},_getLineWidth:function(t,e){if(this.__lineWidths[e])return-1===this.__lineWidths[e]?this.width:this.__lineWidths[e];var i,n=this._textLines[e];return i=""===n?0:this._measureLine(t,e),(this.__lineWidths[e]=i)&&"justify"===this.textAlign&&1<n.split(/\s+/).length&&(this.__lineWidths[e]=-1),i},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},_measureLine:function(t,e){var i,n=this._textLines[e],r=t.measureText(n).width,o=0;return 0!==this.charSpacing&&(o=(n.split("").length-1)*this._getWidthOfCharSpacing()),0<(i=r+o)?i:0},_renderTextDecoration:function(h){if(this.textDecoration){var c=this.height/2,u=this,t=[];-1<this.textDecoration.indexOf("underline")&&t.push(.85),-1<this.textDecoration.indexOf("line-through")&&t.push(.43),-1<this.textDecoration.indexOf("overline")&&t.push(-.12),0<t.length&&function(t){var e,i,n,r,o,a,s,l=0;for(e=0,i=u._textLines.length;e<i;e++){for(o=u._getLineWidth(h,e),a=u._getLineLeftOffset(o),s=u._getHeightOfLine(h,e),n=0,r=t.length;n<r;n++)h.fillRect(u._getLeftOffset()+a,l+(u._fontSizeMult-1+t[n])*u.fontSize-c,o,u.fontSize/15);l+=s}}(t)}},_getFontDeclaration:function(){return[d.isLikelyNode?this.fontWeight:this.fontStyle,d.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",d.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(t,e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&(this._setTextStyles(t),this._initDimensions(t)),this.callSuper("render",t,e)))},_splitTextIntoLines:function(){return this.text.split(this._reNewline)},toObject:function(t){var e=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","textDecoration","textAlign","textBackgroundColor","charSpacing"].concat(t);return this.callSuper("toObject",e)},toSVG:function(t){this.ctx||(this.ctx=d.util.createCanvasElement().getContext("2d"));var e=this._createBaseSVGMarkup(),i=this._getSVGLeftTopOffsets(this.ctx),n=this._getSVGTextAndBg(i.textTop,i.textLeft);return this._wrapSVGTextAndBg(e,n),t?t(e.join("")):e.join("")},_getSVGLeftTopOffsets:function(t){var e=this._getHeightOfLine(t,0);return{textLeft:-this.width/2+(this.group&&"path-group"===this.group.type?this.left:0),textTop:0+(this.group&&"path-group"===this.group.type?-this.top:0),lineTop:e}},_wrapSVGTextAndBg:function(t,e){var i=this.getSvgFilter(),n=""===i?"":' style="'+i+'"';t.push("\t<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"',n,">\n",e.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(!0),'" >\n',e.textSpans.join(""),"\t\t</text>\n","\t</g>\n")},getSvgStyles:function(t){return d.Object.prototype.getSvgStyles.call(this,t)+" white-space: pre;"},_getSVGTextAndBg:function(t,e){var i=[],n=[],r=0;this._setSVGBg(n);for(var o=0,a=this._textLines.length;o<a;o++)this.textBackgroundColor&&this._setSVGTextLineBg(n,o,e,t,r),this._setSVGTextLineText(o,i,r,e,t,n),r+=this._getHeightOfLine(this.ctx,o);return{textSpans:i,textBgRects:n}},_setSVGTextLineText:function(t,e,i,n,r){var o=this.fontSize*(this._fontSizeMult-this._fontSizeFraction)-r+i-this.height/2;"justify"!==this.textAlign?e.push('\t\t\t<tspan x="',p(n+this._getLineLeftOffset(this._getLineWidth(this.ctx,t)),g),'" ','y="',p(o,g),'" ',this._getFillAttributes(this.fill),">",d.util.string.escapeXml(this._textLines[t]),"</tspan>\n"):this._setSVGTextLineJustifed(t,e,o,n)},_setSVGTextLineJustifed:function(t,e,i,n){var r=d.util.createCanvasElement().getContext("2d");this._setTextStyles(r);var o,a,s=this._textLines[t].split(/\s+/),l=this._getWidthOfWords(r,s.join("")),h=this.width-l,c=s.length-1,u=0<c?h/c:0,f=this._getFillAttributes(this.fill);for(n+=this._getLineLeftOffset(this._getLineWidth(r,t)),t=0,a=s.length;t<a;t++)o=s[t],e.push('\t\t\t<tspan x="',p(n,g),'" ','y="',p(i,g),'" ',f,">",d.util.string.escapeXml(o),"</tspan>\n"),n+=this._getWidthOfWords(r,o)+u},_setSVGTextLineBg:function(t,e,i,n,r){t.push("\t\t<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',p(i+this._getLineLeftOffset(this._getLineWidth(this.ctx,e)),g),'" y="',p(r-this.height/2,g),'" width="',p(this._getLineWidth(this.ctx,e),g),'" height="',p(this._getHeightOfLine(this.ctx,e)/this.lineHeight,g),'"></rect>\n')},_setSVGBg:function(t){this.backgroundColor&&t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',p(-this.width/2,g),'" y="',p(-this.height/2,g),'" width="',p(this.width,g),'" height="',p(this.height,g),'"></rect>\n')},_getFillAttributes:function(t){var e=t&&"string"==typeof t?new d.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_set:function(t,e){this.callSuper("_set",t,e),-1<this._dimensionAffectingProps.indexOf(t)&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),d.Text.ATTRIBUTE_NAMES=d.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),d.Text.DEFAULT_SVG_FONT_SIZE=16,d.Text.fromElement=function(t,e){if(!t)return null;var i=d.parseAttributes(t,d.Text.ATTRIBUTE_NAMES);(e=d.util.object.extend(e?d.util.object.clone(e):{},i)).top=e.top||0,e.left=e.left||0,"dx"in i&&(e.left+=i.dx),"dy"in i&&(e.top+=i.dy),"fontSize"in e||(e.fontSize=d.Text.DEFAULT_SVG_FONT_SIZE),e.originX||(e.originX="left");var n="";"textContent"in t?n=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(n=t.firstChild.data),n=n.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var r=new d.Text(n,e),o=r.getHeight()/r.height,a=((r.height+r.strokeWidth)*r.lineHeight-r.height)*o,s=r.getHeight()+a,l=0;return"left"===r.originX&&(l=r.getWidth()/2),"right"===r.originX&&(l=-r.getWidth()/2),r.set({left:r.getLeft()+l,top:r.getTop()-s/2+r.fontSize*(.18+r._fontSizeFraction)/r.lineHeight}),r},d.Text.fromObject=function(t,e,i){return d.Object._fromObject("Text",t,e,i,"text")},d.util.createAccessors(d.Text))}(exports),vud=fabric.util.object.clone,fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,styles:null,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],initialize:function(t,e){this.styles=e&&e.styles||{},this.callSuper("initialize",t,e),this.initBehavior()},_clearCache:function(){this.callSuper("_clearCache"),this.__widthOfSpace=[]},isEmptyStyles:function(){if(!this.styles)return!0;var t=this.styles;for(var e in t)for(var i in t[e])for(var n in t[e][i])return!1;return!0},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},getSelectionStyles:function(t,e){if(2===arguments.length){for(var i=[],n=t;n<e;n++)i.push(this.getSelectionStyles(n));return i}var r=this.get2DCursorLocation(t);return this._getStyleDeclaration(r.lineIndex,r.charIndex)||{}},setSelectionStyles:function(t){if(this.selectionStart===this.selectionEnd)this._extendStyles(this.selectionStart,t);else for(var e=this.selectionStart;e<this.selectionEnd;e++)this._extendStyles(e,t);return this._forceClearCache=!0,this},_extendStyles:function(t,e){var i=this.get2DCursorLocation(t);this._getLineStyle(i.lineIndex)||this._setLineStyle(i.lineIndex,{}),this._getStyleDeclaration(i.lineIndex,i.charIndex)||this._setStyleDeclaration(i.lineIndex,i.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(i.lineIndex,i.charIndex),e)},_initDimensions:function(t){t||this.clearContextTop(),this.callSuper("_initDimensions",t)},render:function(t,e){this.clearContextTop(),this.callSuper("render",t,e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t),this.ctx=t},clearContextTop:function(){if(this.active&&this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this.canvas.contextTop;t.save(),t.transform.apply(t,this.canvas.viewportTransform),this.transform(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this._clearTextArea(t),t.restore()}},renderCursorOrSelection:function(){if(this.active&&this.isEditing){var t,e,i=this.text.split("");this.canvas&&this.canvas.contextTop?((e=this.canvas.contextTop).save(),e.transform.apply(e,this.canvas.viewportTransform),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this._clearTextArea(e)):(e=this.ctx).save(),this.selectionStart===this.selectionEnd?(t=this._getCursorBoundaries(i,"cursor"),this.renderCursor(t,e)):(t=this._getCursorBoundaries(i,"selection"),this.renderSelection(i,t,e)),e.restore()}},_clearTextArea:function(t){var e=this.width+4,i=this.height+4;t.clearRect(-e/2,-i/2,e,i)},get2DCursorLocation:function(t){void 0===t&&(t=this.selectionStart);for(var e=this._textLines.length,i=0;i<e;i++){if(t<=this._textLines[i].length)return{lineIndex:i,charIndex:t};t-=this._textLines[i].length+1}return{lineIndex:i-1,charIndex:this._textLines[i-1].length<t?this._textLines[i-1].length:t}},getCurrentCharStyle:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return{fontSize:i&&i.fontSize||this.fontSize,fill:i&&i.fill||this.fill,textBackgroundColor:i&&i.textBackgroundColor||this.textBackgroundColor,textDecoration:i&&i.textDecoration||this.textDecoration,fontFamily:i&&i.fontFamily||this.fontFamily,fontWeight:i&&i.fontWeight||this.fontWeight,fontStyle:i&&i.fontStyle||this.fontStyle,stroke:i&&i.stroke||this.stroke,strokeWidth:i&&i.strokeWidth||this.strokeWidth}},getCurrentCharFontSize:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return i&&i.fontSize?i.fontSize:this.fontSize},getCurrentCharColor:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return i&&i.fill?i.fill:this.cursorColor},_getCursorBoundaries:function(t,e){var i=Math.round(this._getLeftOffset()),n=this._getTopOffset(),r=this._getCursorBoundariesOffsets(t,e);return{left:i,top:n,leftOffset:r.left+r.lineLeft,topOffset:r.top}},_getCursorBoundariesOffsets:function(t,e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;for(var i,n=0,r=0,o=0,a=0,s=0,l=0;l<this.selectionStart;l++)"\n"===t[l]?(s=0,a+=this._getHeightOfLine(this.ctx,r),r++,o=0):(s+=this._getWidthOfChar(this.ctx,t[l],r,o),o++),n=this._getLineLeftOffset(this._getLineWidth(this.ctx,r));return"cursor"===e&&(a+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,r)/this.lineHeight-this.getCurrentCharFontSize(r,o)*(1-this._fontSizeFraction)),0!==this.charSpacing&&o===this._textLines[r].length&&(s-=this._getWidthOfCharSpacing()),i={top:a,left:0<s?s:0,lineLeft:n},this.cursorOffsetCache=i,this.cursorOffsetCache},renderCursor:function(t,e){var i=this.get2DCursorLocation(),n=i.lineIndex,r=i.charIndex,o=this.getCurrentCharFontSize(n,r),a=t.leftOffset,s=this.scaleX*this.canvas.getZoom(),l=this.cursorWidth/s;e.fillStyle=this.getCurrentCharColor(n,r),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+a-l/2,t.top+t.topOffset,l,o)},renderSelection:function(t,e,i){i.fillStyle=this.selectionColor;for(var n=this.get2DCursorLocation(this.selectionStart),r=this.get2DCursorLocation(this.selectionEnd),o=n.lineIndex,a=r.lineIndex,s=o;s<=a;s++){var l,h=this._getLineLeftOffset(this._getLineWidth(i,s))||0,c=this._getHeightOfLine(this.ctx,s),u=0,f=this._textLines[s];if(s===o){for(var d=0,p=f.length;d<p;d++)d>=n.charIndex&&(s!==a||d<r.charIndex)&&(u+=this._getWidthOfChar(i,f[d],s,d)),d<n.charIndex&&(h+=this._getWidthOfChar(i,f[d],s,d));d===f.length&&(u-=this._getWidthOfCharSpacing())}else if(o<s&&s<a)u+=this._getLineWidth(i,s)||5;else if(s===a){for(var g=0,v=r.charIndex;g<v;g++)u+=this._getWidthOfChar(i,f[g],s,g);r.charIndex===f.length&&(u-=this._getWidthOfCharSpacing())}l=c,(this.lineHeight<1||s===a&&1<this.lineHeight)&&(c/=this.lineHeight),i.fillRect(e.left+h,e.top+e.topOffset,0<u?u:0,c),e.topOffset+=l}},_renderChars:function(t,e,i,n,r,o,a){if(this.isEmptyStyles())return this._renderCharsFast(t,e,i,n,r);a=a||0;var s,l,h=this._getHeightOfLine(e,o),c="";e.save(),r-=h/this.lineHeight*this._fontSizeFraction;for(var u=a,f=i.length+a;u<=f;u++)s=s||this.getCurrentCharStyle(o,u),l=this.getCurrentCharStyle(o,u+1),(this._hasStyleChanged(s,l)||u===f)&&(this._renderChar(t,e,o,u-1,c,n,r,h),c="",s=l),c+=i[u-a];e.restore()},_renderCharsFast:function(t,e,i,n,r){"fillText"===t&&this.fill&&this.callSuper("_renderChars",t,e,i,n,r),"strokeText"===t&&(this.stroke&&0<this.strokeWidth||this.skipFillStrokeCheck)&&this.callSuper("_renderChars",t,e,i,n,r)},_renderChar:function(t,e,i,n,r,o,a,s){var l,h,c,u,f,d,p,g,v,m=this._getStyleDeclaration(i,n);if(m?(h=this._getHeightOfChar(e,r,i,n),u=m.stroke,c=m.fill,d=m.textDecoration):h=this.fontSize,u=(u||this.stroke)&&"strokeText"===t,c=(c||this.fill)&&"fillText"===t,m&&e.save(),l=this._applyCharStylesGetWidth(e,r,i,n,m||null),d=d||this.textDecoration,m&&m.textBackgroundColor&&this._removeShadow(e),0!==this.charSpacing){g=this._getWidthOfCharSpacing();for(var y,_=l=0,x=(p=r.split("")).length;_<x;_++)y=p[_],c&&e.fillText(y,o+l,a),u&&e.strokeText(y,o+l,a),l+=0<(v=e.measureText(y).width+g)?v:0}else c&&e.fillText(r,o,a),u&&e.strokeText(r,o,a);(d||""!==d)&&(f=this._fontSizeFraction*s/this.lineHeight,this._renderCharDecoration(e,d,o,a,f,l,h)),m&&e.restore(),e.translate(l,0)},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.fontSize!==e.fontSize||t.textBackgroundColor!==e.textBackgroundColor||t.textDecoration!==e.textDecoration||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth},_renderCharDecoration:function(t,e,i,n,r,o,a){if(e){var s,l,h=a/15,c={underline:n+a/10,"line-through":n-a*(this._fontSizeFraction+this._fontSizeMult-1)+h,overline:n-(this._fontSizeMult-this._fontSizeFraction)*a},u=["underline","line-through","overline"];for(s=0;s<u.length;s++)l=u[s],-1<e.indexOf(l)&&t.fillRect(i,c[l],o,h)}},_renderTextLine:function(t,e,i,n,r,o){this.isEmptyStyles()||(r+=this.fontSize*(this._fontSizeFraction+.03)),this.callSuper("_renderTextLine",t,e,i,n,r,o)},_renderTextDecoration:function(t){if(this.isEmptyStyles())return this.callSuper("_renderTextDecoration",t)},_renderTextLinesBackground:function(t){this.callSuper("_renderTextLinesBackground",t);var e,i,n,r,o,a,s,l,h,c,u=0,f=this._getLeftOffset(),d=this._getTopOffset(),p="";t.save();for(var g=0,v=this._textLines.length;g<v;g++)if(e=this._getHeightOfLine(t,g),""!==(r=this._textLines[g])&&this.styles&&this._getLineStyle(g)){i=this._getLineWidth(t,g),n=this._getLineLeftOffset(i),s=l=h=c=0;for(var m=0,y=r.length;m<y;m++)p!==(a=this._getStyleDeclaration(g,m)||{}).textBackgroundColor&&(c&&h&&(t.fillStyle=p,t.fillRect(s,l,h,c)),s=l=h=c=0,p=a.textBackgroundColor||""),a.textBackgroundColor?(o=r[m],p===a.textBackgroundColor&&(p=a.textBackgroundColor,s||(s=f+n+this._getWidthOfCharsAt(t,g,m)),l=d+u,h+=this._getWidthOfChar(t,o,g,m),c=e/this.lineHeight)):p="";c&&h&&(t.fillStyle=p,t.fillRect(s,l,h,c),s=l=h=c=0),u+=e}else u+=e;t.restore()},_getCacheProp:function(t,e){return t+e.fontSize+e.fontWeight+e.fontStyle},_getFontCache:function(t){return fabric.charWidthsCache[t]||(fabric.charWidthsCache[t]={}),fabric.charWidthsCache[t]},_applyCharStylesGetWidth:function(t,e,i,n,r){var o,a,s,l=r||this._getStyleDeclaration(i,n),h=vud(l);if(this._applyFontStyles(h),s=this._getFontCache(h.fontFamily),a=this._getCacheProp(e,h),!l&&s[a]&&this.caching)return s[a];"string"==typeof h.shadow&&(h.shadow=new fabric.Shadow(h.shadow));var c=h.fill||this.fill;return t.fillStyle=c.toLive?c.toLive(t,this):c,h.stroke&&(t.strokeStyle=h.stroke&&h.stroke.toLive?h.stroke.toLive(t,this):h.stroke),t.lineWidth=h.strokeWidth||this.strokeWidth,t.font=this._getFontDeclaration.call(h),h.shadow&&(h.scaleX=this.scaleX,h.scaleY=this.scaleY,h.canvas=this.canvas,h.getObjectScaling=this.getObjectScaling,this._setShadow.call(h,t)),this.caching&&s[a]?s[a]:(o=t.measureText(e).width,this.caching&&(s[a]=o),o)},_applyFontStyles:function(t){t.fontFamily||(t.fontFamily=this.fontFamily),t.fontSize||(t.fontSize=this.fontSize),t.fontWeight||(t.fontWeight=this.fontWeight),t.fontStyle||(t.fontStyle=this.fontStyle)},_getStyleDeclaration:function(t,e,i){return i?this.styles[t]&&this.styles[t][e]?vud(this.styles[t][e]):{}:this.styles[t]&&this.styles[t][e]?this.styles[t][e]:null},_setStyleDeclaration:function(t,e,i){this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return this.styles[t]},_setLineStyle:function(t,e){this.styles[t]=e},_deleteLineStyle:function(t){delete this.styles[t]},_getWidthOfChar:function(t,e,i,n){if(!this._isMeasuring&&"justify"===this.textAlign&&this._reSpacesAndTabs.test(e))return this._getWidthOfSpace(t,i);t.save();var r=this._applyCharStylesGetWidth(t,e,i,n);return 0!==this.charSpacing&&(r+=this._getWidthOfCharSpacing()),t.restore(),0<r?r:0},_getHeightOfChar:function(t,e,i){var n=this._getStyleDeclaration(e,i);return n&&n.fontSize?n.fontSize:this.fontSize},_getWidthOfCharsAt:function(t,e,i){var n,r,o=0;for(n=0;n<i;n++)r=this._textLines[e][n],o+=this._getWidthOfChar(t,r,e,n);return o},_measureLine:function(t,e){this._isMeasuring=!0;var i=this._getWidthOfCharsAt(t,e,this._textLines[e].length);return 0!==this.charSpacing&&(i-=this._getWidthOfCharSpacing()),this._isMeasuring=!1,0<i?i:0},_getWidthOfSpace:function(t,e){if(this.__widthOfSpace[e])return this.__widthOfSpace[e];var i=this._textLines[e],n=this._getWidthOfWords(t,i,e,0),r=this.width-n,o=i.length-i.replace(this._reSpacesAndTabs,"").length,a=Math.max(r/o,t.measureText(" ").width);return this.__widthOfSpace[e]=a},_getWidthOfWords:function(t,e,i,n){for(var r=0,o=0;o<e.length;o++){var a=e[o];a.match(/\s/)||(r+=this._getWidthOfChar(t,a,i,o+n))}return r},_getHeightOfLine:function(t,e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var i=this._textLines[e],n=this._getHeightOfChar(t,e,0),r=1,o=i.length;r<o;r++){var a=this._getHeightOfChar(t,e,r);n<a&&(n=a)}return this.__lineHeights[e]=n*this.lineHeight*this._fontSizeMult,this.__lineHeights[e]},_getTextHeight:function(t){for(var e,i=0,n=0,r=this._textLines.length;n<r;n++)e=this._getHeightOfLine(t,n),i+=n===r-1?e/this.lineHeight:e;return i},toObject:function(t){return fabric.util.object.extend(this.callSuper("toObject",t),{styles:vud(this.styles,!0)})}}),fabric.IText.fromObject=function(t,e,i){return fabric.Object._fromObject("IText",t,e,i,"text")},Syd=fabric.util.object.clone,fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1,this.callSuper("onDeselect")},initAddedHandler:function(){var e=this;this.on("added",function(){var t=e.canvas;t&&(t._hasITextHandlers||(t._hasITextHandlers=!0,e._initCanvasHandlers(t)),t._iTextInstances=t._iTextInstances||[],t._iTextInstances.push(e))})},initRemovedHandler:function(){var e=this;this.on("removed",function(){var t=e.canvas;t&&(t._iTextInstances=t._iTextInstances||[],fabric.util.removeFromArray(t._iTextInstances,e),0===t._iTextInstances.length&&(t._hasITextHandlers=!1,e._removeCanvasHandlers(t)))})},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.__isMousedown=!1})}.bind(this),t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,i,n){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:i,onComplete:function(){r.isAborted||t[n]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,i=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},i)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&this.canvas&&this.canvas.clearContext(this.canvas.contextTop||this.ctx)},selectAll:function(){this.selectionStart=0,this.selectionEnd=this.text.length,this._fireSelectionChanged(),this._updateTextarea()},getSelectedText:function(){return this.text.slice(this.selectionStart,this.selectionEnd)},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i--;for(;/\S/.test(this.text.charAt(i))&&-1<i;)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i++;for(;/\S/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,i=t-1;!/\n/.test(this.text.charAt(i))&&-1<i;)e++,i--;return t-e},findLineBoundaryRight:function(t){for(var e=0,i=t;!/\n/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},getNumNewLinesInSelectedText:function(){for(var t=this.getSelectedText(),e=0,i=0,n=t.length;i<n;i++)"\n"===t[i]&&e++;return e},searchWordBoundary:function(t,e){for(var i=this._reSpace.test(this.text.charAt(t))?t-1:t,n=this.text.charAt(i),r=/[ \n\.,;!\?\-]/;!r.test(n)&&0<i&&i<this.text.length;)i+=e,n=this.text.charAt(i);return r.test(n)&&"\n"!==n&&(i+=1===e?0:1),i},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),i=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea()},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.selected=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.renderAll()),this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),i=this.selectionStart,n=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&i!==n||i!==e&&n!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===n||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},_updateTextarea:function(){if(this.hiddenTextarea&&!this.inCompositionMode&&(this.cursorOffsetCache={},this.hiddenTextarea.value=this.text,this.hiddenTextarea.selectionStart=this.selectionStart,this.hiddenTextarea.selectionEnd=this.selectionEnd,this.selectionStart===this.selectionEnd)){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top,this.hiddenTextarea.style.fontSize=t.fontSize}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.text.split(""),e=this._getCursorBoundaries(t,"cursor"),i=this.get2DCursorLocation(),n=i.lineIndex,r=i.charIndex,o=this.getCurrentCharFontSize(n,r),a=e.leftOffset,s=this.calcTransformMatrix(),l={x:e.left+a,y:e.top+e.topOffset+o},h=this.canvas.upperCanvasEl,c=h.width-o,u=h.height-o;return l=fabric.util.transformPoint(l,s),(l=fabric.util.transformPoint(l,this.canvas.viewportTransform)).x<0&&(l.x=0),l.x>c&&(l.x=c),l.y<0&&(l.y=0),l.y>u&&(l.y=u),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.overCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text;return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&(this.hiddenTextarea.blur&&this.hiddenTextarea.blur(),this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null),this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},_removeCharsFromTo:function(t,e){for(;e!==t;)this._removeSingleCharAndStyle(t+1),e--;this.selectionStart=t,this.selectionEnd=t},_removeSingleCharAndStyle:function(t){var e="\n"===this.text[t-1],i=e?t:t-1;this.removeStyleObject(e,i),this.text=this.text.slice(0,t-1)+this.text.slice(t),this._textLines=this._splitTextIntoLines()},insertChars:function(t,e){var i;if(1<this.selectionEnd-this.selectionStart&&this._removeCharsFromTo(this.selectionStart,this.selectionEnd),e||!this.isEmptyStyles())for(var n=0,r=t.length;n<r;n++)e&&(i=fabric.util.object.clone(fabric.copiedTextStyle[n],!0)),this.insertChar(t[n],n<r-1,i);else this.insertChar(t,!1)},insertChar:function(t,e,i){var n="\n"===this.text[this.selectionStart];this.text=this.text.slice(0,this.selectionStart)+t+this.text.slice(this.selectionEnd),this._textLines=this._splitTextIntoLines(),this.insertStyleObjects(t,n,i),this.selectionStart+=t.length,this.selectionEnd=this.selectionStart,e||(this._updateTextarea(),this.setCoords(),this._fireSelectionChanged(),this.fire("changed"),this.restartCursorIfNeeded(),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.renderAll()))},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(t,e,i){this.shiftLineStyles(t,1);var n={},r={};if(this.styles[t]&&this.styles[t][e-1]&&(n=this.styles[t][e-1]),i&&n)r[0]=Syd(n),this.styles[t+1]=r;else{var o=!1;for(var a in this.styles[t]){var s=parseInt(a,10);e<=s&&(o=!0,r[s-e]=this.styles[t][a],delete this.styles[t][a])}o&&(this.styles[t+1]=r)}this._forceClearCache=!0},insertCharStyleObject:function(t,e,i){var n=this.styles[t],r=Syd(n);for(var o in 0!==e||i||(e=1),r){var a=parseInt(o,10);e<=a&&(n[a+1]=r[a],r[a-1]||delete n[a])}var s=i||Syd(n[e-1]);s&&(this.styles[t][e]=s),this._forceClearCache=!0},insertStyleObjects:function(t,e,i){var n=this.get2DCursorLocation(),r=n.lineIndex,o=n.charIndex;this._getLineStyle(r)||this._setLineStyle(r,{}),"\n"===t?this.insertNewlineStyleObject(r,o,e):this.insertCharStyleObject(r,o,i)},shiftLineStyles:function(t,e){var i=Syd(this.styles);for(var n in i)(r=parseInt(n,10))<=t&&delete i[r];for(var n in this.styles){var r;t<(r=parseInt(n,10))&&(this.styles[r+e]=i[r],i[r-e]||delete this.styles[r])}},removeStyleObject:function(t,e){var i=this.get2DCursorLocation(e),n=i.lineIndex,r=i.charIndex;this._removeStyleObject(t,i,n,r)},_getTextOnPreviousLine:function(t){return this._textLines[t-1]},_removeStyleObject:function(t,e,i,n){if(t){var r=this._getTextOnPreviousLine(e.lineIndex),o=r?r.length:0;for(n in this.styles[i-1]||(this.styles[i-1]={}),this.styles[i])this.styles[i-1][parseInt(n,10)+o]=this.styles[i][n];this.shiftLineStyles(e.lineIndex,-1)}else{var a=this.styles[i];a&&delete a[n];var s=Syd(a);for(var l in s){var h=parseInt(l,10);n<=h&&0!==h&&(a[h-1]=s[h],delete a[h])}}},insertNewline:function(){this.insertChars("\n")},setSelectionStartEndWithShift:function(t,e,i){i<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=i):t<i&&i<e?"right"===this._selectionDirection?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=i)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}}),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(t){this.__newClickTime=+new Date;var e=this.canvas.getPointer(t.e);this.isTripleClick(e,t.e)?(this.fire("tripleclick",t),this._stopEvent(t.e)):this.isDoubleClick(e)&&(this.fire("dblclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isDoubleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y&&this.__lastIsEditing},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("dblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},initMousedownHandler:function(){this.on("mousedown",function(t){if(this.editable&&(!t.e.button||1===t.e.button)){var e=this.canvas.getPointer(t.e);this.__mousedownX=e.x,this.__mousedownY=e.y,this.__isMousedown=!0,this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())}})},_isObjectMoved:function(t){var e=this.canvas.getPointer(t);return this.__mousedownX!==e.x||this.__mousedownY!==e.y},initMouseupHandler:function(){this.on("mouseup",function(t){this.__isMousedown=!1,!this.editable||this._isObjectMoved(t.e)||t.e.button&&1!==t.e.button||(this.__lastSelected&&!this.__corner&&(this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()),this.selected=!0)})},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),i=this.selectionStart,n=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,n,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,i=this.getLocalPointer(t),n=0,r=0,o=0,a=0,s=0,l=this._textLines.length;s<l;s++){e=this._textLines[s],o+=this._getHeightOfLine(this.ctx,s)*this.scaleY;var h=this._getLineWidth(this.ctx,s);r=this._getLineLeftOffset(h)*this.scaleX;for(var c=0,u=e.length;c<u;c++){if(n=r,r+=this._getWidthOfChar(this.ctx,e[c],s,this.flipX?u-c:c)*this.scaleX,!(o<=i.y||r<=i.x))return this._getNewSelectionStartFromOffset(i,n,r,a+s,u);a++}if(i.y<o)return this._getNewSelectionStartFromOffset(i,n,r,a+s-1,u)}return this.text.length},_getNewSelectionStartFromOffset:function(t,e,i,n,r){var o=n+(t.x-e<i-t.x?0:1);return this.flipX&&(o=r-o),o>this.text.length&&(o=this.text.length),o}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; line-height: 1px; paddingｰtop: "+t.fontSize+";",fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.cut.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{8:"removeChars",9:"exitEditing",27:"exitEditing",13:"insertNewline",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown",46:"forwardDelete"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){if(t.keyCode in this.keysMap)this[this.keysMap[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown&&(t.ctrlKey||t.metaKey)))return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),33<=t.keyCode&&t.keyCode<=40?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.renderAll()}},onKeyUp:function(t){this.isEditing&&!this._copyDone?t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.renderAll()):this._copyDone=!1},onInput:function(t){if(this.isEditing&&!this.inCompositionMode){var e,i,n,r=this.selectionStart||0,o=this.selectionEnd||0,a=this.text.length,s=this.hiddenTextarea.value.length;a<s?(n="left"===this._selectionDirection?o:r,e=s-a,i=this.hiddenTextarea.value.slice(n,n+e)):(e=s-a+o-r,i=this.hiddenTextarea.value.slice(r,r+e)),this.insertChars(i),t.stopPropagation()}},onCompositionStart:function(){this.inCompositionMode=!0,this.prevCompositionLength=0,this.compositionStart=this.selectionStart},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){var e=t.data;this.selectionStart=this.compositionStart,this.selectionEnd=this.selectionEnd===this.selectionStart?this.compositionStart+this.prevCompositionLength:this.selectionEnd,this.insertChars(e,!1),this.prevCompositionLength=e.length},forwardDelete:function(t){if(this.selectionStart===this.selectionEnd){if(this.selectionStart===this.text.length)return;this.moveCursorRight(t)}this.removeChars(t)},copy:function(t){if(this.selectionStart!==this.selectionEnd){var e=this.getSelectedText(),i=this._getClipboardData(t);i&&i.setData("text",e),fabric.copiedText=e,fabric.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd),t.stopImmediatePropagation(),t.preventDefault(),this._copyDone=!0}},paste:function(t){var e=null,i=this._getClipboardData(t),n=!0;i?(e=i.getData("text").replace(/\r/g,""),fabric.copiedTextStyle&&fabric.copiedText===e||(n=!1)):e=fabric.copiedText,e&&this.insertChars(e,n),t.stopImmediatePropagation(),t.preventDefault()},cut:function(t){this.selectionStart!==this.selectionEnd&&(this.copy(t),this.removeChars(t))},_getClipboardData:function(t){return t&&t.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(t,e){for(var i,n=this._textLines[t].slice(0,e),r=this._getLineWidth(this.ctx,t),o=this._getLineLeftOffset(r),a=0,s=n.length;a<s;a++)i=n[a],o+=this._getWidthOfChar(this.ctx,i,t,a);return o},getDownCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),r=n.lineIndex;if(r===this._textLines.length-1||t.metaKey||34===t.keyCode)return this.text.length-i;var o=n.charIndex,a=this._getWidthBeforeCursor(r,o),s=this._getIndexOnLine(r+1,a);return this._textLines[r].slice(o).length+s+2},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),r=n.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return-i;var o=n.charIndex,a=this._getWidthBeforeCursor(r,o),s=this._getIndexOnLine(r-1,a),l=this._textLines[r].slice(0,o);return-this._textLines[r-1].length+s-l.length},_getIndexOnLine:function(t,e){for(var i,n=this._getLineWidth(this.ctx,t),r=this._textLines[t],o=this._getLineLeftOffset(n),a=0,s=0,l=r.length;s<l;s++){var h=r[s],c=this._getWidthOfChar(this.ctx,h,t,s);if(e<(o+=c)){i=!0;var u=o-c,f=o,d=Math.abs(u-e);a=Math.abs(f-e)<d?s:s-1;break}}return i||(a=r.length-1),a},moveCursorDown:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var i=this["get"+t+"CursorOffset"](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),0!==i&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,i){var n;if(t.altKey)n=this["findWordBoundary"+i](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===i?-1:1,!0;n=this["findLineBoundary"+i](this[e])}if(void 0!==typeof n&&this[e]!==n)return this[e]=n,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var i="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?i+="Shift":i+="outShift",this[i](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this.text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t){this.selectionStart===this.selectionEnd?this._removeCharsNearCursor(t):this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.set("dirty",!0),this.setSelectionEnd(this.selectionStart),this._removeExtraneousStyles(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},_removeCharsNearCursor:function(t){if(0!==this.selectionStart)if(t.metaKey){var e=this.findLineBoundaryLeft(this.selectionStart);this._removeCharsFromTo(e,this.selectionStart),this.setSelectionStart(e)}else if(t.altKey){var i=this.findWordBoundaryLeft(this.selectionStart);this._removeCharsFromTo(i,this.selectionStart),this.setSelectionStart(i)}else this._removeSingleCharAndStyle(this.selectionStart),this.setSelectionStart(this.selectionStart-1)}}),ODd=fabric.util.toFixed,PDd=fabric.Object.NUM_FRACTION_DIGITS,fabric.util.object.extend(fabric.IText.prototype,{_setSVGTextLineText:function(t,e,i,n,r,o){this._getLineStyle(t)?this._setSVGTextLineChars(t,e,i,n,o):fabric.Text.prototype._setSVGTextLineText.call(this,t,e,i,n,r)},_setSVGTextLineChars:function(t,e,i,n,r){for(var o=this._textLines[t],a=0,s=this._getLineLeftOffset(this._getLineWidth(this.ctx,t))-this.width/2,l=this._getSVGLineTopOffset(t),h=this._getHeightOfLine(this.ctx,t),c=0,u=o.length;c<u;c++){var f=this._getStyleDeclaration(t,c)||{};e.push(this._createTextCharSpan(o[c],f,s,l.lineTop+l.offset,a));var d=this._getWidthOfChar(this.ctx,o[c],t,c);f.textBackgroundColor&&r.push(this._createTextCharBg(f,s,l.lineTop,h,d,a)),a+=d}},_getSVGLineTopOffset:function(t){for(var e,i=0,n=0;n<t;n++)i+=this._getHeightOfLine(this.ctx,n);return e=this._getHeightOfLine(this.ctx,n),{lineTop:i,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},_createTextCharBg:function(t,e,i,n,r,o){return['\t\t<rect fill="',t.textBackgroundColor,'" x="',ODd(e+o,PDd),'" y="',ODd(i-this.height/2,PDd),'" width="',ODd(r,PDd),'" height="',ODd(n/this.lineHeight,PDd),'"></rect>\n'].join("")},_createTextCharSpan:function(t,e,i,n,r){var o=this.getSvgStyles.call(fabric.util.object.extend({visible:!0,fill:this.fill,stroke:this.stroke,type:"text",getSvgFilter:fabric.Object.prototype.getSvgFilter},e));return['\t\t\t<tspan x="',ODd(i+r,PDd),'" y="',ODd(n-this.height/2,PDd),'" ',e.fontFamily?'font-family="'+e.fontFamily.replace(/"/g,"'")+'" ':"",e.fontSize?'font-size="'+e.fontSize+'" ':"",e.fontStyle?'font-style="'+e.fontStyle+'" ':"",e.fontWeight?'font-weight="'+e.fontWeight+'" ':"",e.textDecoration?'text-decoration="'+e.textDecoration+'" ':"",'style="',o,'">',fabric.util.string.escapeXml(t),"</tspan>\n"].join("")}}),function(t){"use strict";var n=t.fabric||(t.fabric={});n.Textbox=n.util.createClass(n.IText,n.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingY:!0,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:n.Text.prototype._dimensionAffectingProps.concat("width"),initialize:function(t,e){this.callSuper("initialize",t,e),this.setControlsVisibility(n.Textbox.getTextboxControlVisibility()),this.ctx=this.objectCaching?this._cacheContext:n.util.createCanvasElement().getContext("2d")},_initDimensions:function(t){this.__skipDimension||(t||(t=n.util.createCanvasElement().getContext("2d"),this._setTextStyles(t),this.clearContextTop()),this.dynamicMinWidth=0,this._textLines=this._splitTextIntoLines(t),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this._clearCache(),this.height=this._getTextHeight(t),this.setCoords())},_generateStyleMap:function(){for(var t=0,e=0,i=0,n={},r=0;r<this._textLines.length;r++)"\n"===this.text[i]&&0<r?(e=0,i++,t++):" "===this.text[i]&&0<r&&(e++,i++),n[r]={line:t,offset:e},i+=this._textLines[r].length,e+=this._textLines[r].length;return n},_getStyleDeclaration:function(t,e,i){if(this._styleMap){var n=this._styleMap[t];if(!n)return i?{}:null;t=n.line,e=n.offset+e}return this.callSuper("_getStyleDeclaration",t,e,i)},_setStyleDeclaration:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){var i=this._styleMap[t];t=i.line,e=i.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return this.styles[e.line]},_setLineStyle:function(t,e){var i=this._styleMap[t];this.styles[i.line]=e},_deleteLineStyle:function(t){var e=this._styleMap[t];delete this.styles[e.line]},_wrapText:function(t,e){var i,n=e.split(this._reNewline),r=[];for(i=0;i<n.length;i++)r=r.concat(this._wrapLine(t,n[i],i));return r},_measureText:function(t,e,i,n){var r=0;n=n||0;for(var o=0,a=e.length;o<a;o++)r+=this._getWidthOfChar(t,e[o],i,o+n);return r},_wrapLine:function(t,e,i){for(var n=0,r=[],o="",a=e.split(" "),s="",l=0,h=0,c=0,u=0,f=!0,d=this._getWidthOfCharSpacing(),p=0;p<a.length;p++)s=a[p],h=this._measureText(t,s,i,l),l+=s.length,(n+=c+h-d)>=this.width&&!f?(r.push(o),n=h,f=!(o="")):n+=d,f||(o+=" "),o+=s,c=this._measureText(t," ",i,l),l++,f=!1,u<h&&(u=h);return p&&r.push(o),u>this.dynamicMinWidth&&(this.dynamicMinWidth=u-d),r},_splitTextIntoLines:function(t){t=t||this.ctx;var e=this.textAlign;this._styleMap=null,t.save(),this._setTextStyles(t),this.textAlign="left";var i=this._wrapText(t,this.text);return this.textAlign=e,t.restore(),this._textLines=i,this._styleMap=this._generateStyleMap(),i},setOnGroup:function(t,e){"scaleX"===t&&(this.set("scaleX",Math.abs(1/e)),this.set("width",this.get("width")*e/(void 0===this.__oldScaleX?1:this.__oldScaleX)),this.__oldScaleX=e)},get2DCursorLocation:function(t){void 0===t&&(t=this.selectionStart);for(var e=this._textLines.length,i=0,n=0;n<e;n++){var r=this._textLines[n].length;if(t<=i+r)return{lineIndex:n,charIndex:t-i};i+=r,"\n"!==this.text[i]&&" "!==this.text[i]||i++}return{lineIndex:e-1,charIndex:this._textLines[e-1].length}},_getCursorBoundariesOffsets:function(t,e){for(var i=0,n=0,r=this.get2DCursorLocation(),o=this._textLines[r.lineIndex].split(""),a=this._getLineLeftOffset(this._getLineWidth(this.ctx,r.lineIndex)),s=0;s<r.charIndex;s++)n+=this._getWidthOfChar(this.ctx,o[s],r.lineIndex,s);for(s=0;s<r.lineIndex;s++)i+=this._getHeightOfLine(this.ctx,s);return"cursor"===e&&(i+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,r.lineIndex)/this.lineHeight-this.getCurrentCharFontSize(r.lineIndex,r.charIndex)*(1-this._fontSizeFraction)),{top:i,left:n,lineLeft:a}},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},toObject:function(t){return this.callSuper("toObject",["minWidth"].concat(t))}}),n.Textbox.fromObject=function(t,e,i){return n.Object._fromObject("Textbox",t,e,i,"text")},n.Textbox.getTextboxControlVisibility=function(){return{tl:!1,tr:!1,br:!1,bl:!1,ml:!0,mt:!1,mr:!0,mb:!1,mtr:!0}}}(exports),XFd=fabric.Canvas.prototype._setObjectScale,fabric.Canvas.prototype._setObjectScale=function(t,e,i,n,r,o,a){var s=e.target;if(!(s instanceof fabric.Textbox))return XFd.call(fabric.Canvas.prototype,t,e,i,n,r,o,a);var l=s.width*(t.x/e.scaleX/(s.width+s.strokeWidth));return l>=s.getMinWidth()?(s.set("width",l),!0):void 0},fabric.Group.prototype._refreshControlsVisibility=function(){if(void 0!==fabric.Textbox)for(var t=this._objects.length;t--;)if(this._objects[t]instanceof fabric.Textbox)return void this.setControlsVisibility(fabric.Textbox.getTextboxControlVisibility())},fabric.util.object.extend(fabric.Textbox.prototype,{_removeExtraneousStyles:function(){for(var t in this._styleMap)this._textLines[t]||delete this.styles[this._styleMap[t].line]},insertCharStyleObject:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,fabric.IText.prototype.insertCharStyleObject.apply(this,[t,e,i])},insertNewlineStyleObject:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,fabric.IText.prototype.insertNewlineStyleObject.apply(this,[t,e,i])},shiftLineStyles:function(t,e){t=this._styleMap[t].line,fabric.IText.prototype.shiftLineStyles.call(this,t,e)},_getTextOnPreviousLine:function(t){for(var e=this._textLines[t-1];this._styleMap[t-2]&&this._styleMap[t-2].line===this._styleMap[t-1].line;)e=this._textLines[t-2]+e,t--;return e},removeStyleObject:function(t,e){var i=this.get2DCursorLocation(e),n=this._styleMap[i.lineIndex],r=n.line,o=n.offset+i.charIndex;this._removeStyleObject(t,i,r,o)}}),AGd=fabric.IText.prototype._getNewSelectionStartFromOffset,fabric.IText.prototype._getNewSelectionStartFromOffset=function(t,e,i,n,r){n=AGd.call(this,t,e,i,n,r);for(var o=0,a=0,s=0;s<this._textLines.length&&!(n<=(o+=this._textLines[s].length)+a);s++)"\n"!==this.text[o+a]&&" "!==this.text[o+a]||a++;return n-s+a},function(){if("undefined"==typeof document||"undefined"==typeof window){var DOMParser=__webpack_require__(1036).DOMParser,URL=__webpack_require__(876),HTTP=__webpack_require__(886),HTTPS=__webpack_require__(1051),Canvas=__webpack_require__(875),Image=__webpack_require__(875).Image;fabric.util.loadImage=function(e,i,n){function t(t){t?(r.src=new Buffer(t,"binary"),r._src=e,i&&i.call(n,r)):(r=null,i&&i.call(n,null,!0))}var r=new Image;e&&(e instanceof Buffer||0===e.indexOf("data"))?(r.src=r._src=e,i&&i.call(n,r)):e&&0!==e.indexOf("http")?requestFs(e,t):e?request(e,"binary",t):i&&i.call(n,e)},fabric.loadSVGFromURL=function(t,e,i){0!==(t=t.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim()).indexOf("http")?requestFs(t,function(t){fabric.loadSVGFromString(t.toString(),e,i)}):request(t,"",function(t){fabric.loadSVGFromString(t,e,i)})},fabric.loadSVGFromString=function(t,i,e){var n=(new DOMParser).parseFromString(t);fabric.parseSVGDocument(n.documentElement,function(t,e){i&&i(t,e)},e)},fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body),callback&&callback()})},fabric.createCanvasForNode=function(t,e,i,n){n=n||i;var r=fabric.document.createElement("canvas"),o=new Canvas(t||600,e||600,n),a=new Canvas(t||600,e||600,n);r.style={},r.width=o.width,r.height=o.height,(i=i||{}).nodeCanvas=o,i.nodeCacheCanvas=a;var s=new(fabric.Canvas||fabric.StaticCanvas)(r,i);return s.nodeCanvas=o,s.nodeCacheCanvas=a,s.contextContainer=o.getContext("2d"),s.contextCache=a.getContext("2d"),s.Font=Canvas.Font,s};var originaInitStatic=fabric.StaticCanvas.prototype._initStatic;fabric.StaticCanvas.prototype._initStatic=function(t,e){t=t||fabric.document.createElement("canvas"),this.nodeCanvas=new Canvas(t.width,t.height),this.nodeCacheCanvas=new Canvas(t.width,t.height),originaInitStatic.call(this,t,e),this.contextContainer=this.nodeCanvas.getContext("2d"),this.contextCache=this.nodeCacheCanvas.getContext("2d"),this.Font=Canvas.Font},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){return this.nodeCanvas.createJPEGStream(t)},fabric.StaticCanvas.prototype._initRetinaScaling=function(){if(this._isRetinaScaling())return this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.nodeCanvas.width=this.width*fabric.devicePixelRatio,this.nodeCanvas.height=this.height*fabric.devicePixelRatio,this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio),this},fabric.Canvas&&(fabric.Canvas.prototype._initRetinaScaling=fabric.StaticCanvas.prototype._initRetinaScaling);var origSetBackstoreDimension=fabric.StaticCanvas.prototype._setBackstoreDimension;fabric.StaticCanvas.prototype._setBackstoreDimension=function(t,e){return origSetBackstoreDimension.call(this,t,e),this.nodeCanvas[t]=e,this},fabric.Canvas&&(fabric.Canvas.prototype._setBackstoreDimension=fabric.StaticCanvas.prototype._setBackstoreDimension)}function request(t,n,r){var e=URL.parse(t);e.port||(e.port=0===e.protocol.indexOf("https:")?443:80);var i=(0===e.protocol.indexOf("https:")?HTTPS:HTTP).request({hostname:e.hostname,port:e.port,path:e.path,method:"GET"},function(e){var i="";n&&e.setEncoding(n),e.on("end",function(){r(i)}),e.on("data",function(t){200===e.statusCode&&(i+=t)})});i.on("error",function(t){t.errno===process.ECONNREFUSED?fabric.log("ECONNREFUSED: connection refused to "+e.hostname+":"+e.port):fabric.log(t.message),r(null)}),i.end()}function requestFs(t,i){__webpack_require__(1052).readFile(t,function(t,e){if(t)throw fabric.log(t),t;i(e)})}}()}).call(exports,__webpack_require__(801).Buffer,__webpack_require__(126))},function(t,e){},function(t,e,i){"use strict";var E=i(1037),L=i(1038);function k(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=o,e.resolve=function(t,e){return o(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?o(t,!1,!0).resolveObject(e):e},e.format=function(t){L.isString(t)&&(t=o(t));return t instanceof k?t.format():k.prototype.format.call(t)},e.Url=k;var j=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,R=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),B=["'"].concat(r),F=["%","/","?",";","#"].concat(B),N=["/","?","#"],z=/^[+a-z0-9A-Z_-]{0,63}$/,H=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,W={javascript:!0,"javascript:":!0},G={javascript:!0,"javascript:":!0},X={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Y=i(1039);function o(t,e,i){if(t&&L.isObject(t)&&t instanceof k)return t;var n=new k;return n.parse(t,e,i),n}k.prototype.parse=function(t,e,i){if(!L.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),r=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(r);o[0]=o[0].replace(/\\/g,"/");var a=t=o.join(r);if(a=a.trim(),!i&&1===t.split("#").length){var s=R.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?Y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=j.exec(a);if(l){var h=(l=l[0]).toLowerCase();this.protocol=h,a=a.substr(l.length)}if(i||l||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===a.substr(0,2);!c||l&&G[l]||(a=a.substr(2),this.slashes=!0)}if(!G[l]&&(c||l&&!X[l])){for(var u,f,d=-1,p=0;p<N.length;p++){-1!==(g=a.indexOf(N[p]))&&(-1===d||g<d)&&(d=g)}-1!==(f=-1===d?a.lastIndexOf("@"):a.lastIndexOf("@",d))&&(u=a.slice(0,f),a=a.slice(f+1),this.auth=decodeURIComponent(u)),d=-1;for(p=0;p<F.length;p++){var g;-1!==(g=a.indexOf(F[p]))&&(-1===d||g<d)&&(d=g)}-1===d&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var m=this.hostname.split(/\./),y=(p=0,m.length);p<y;p++){var _=m[p];if(_&&!_.match(z)){for(var x="",b=0,w=_.length;b<w;b++)127<_.charCodeAt(b)?x+="x":x+=_[b];if(!x.match(z)){var C=m.slice(0,p),S=m.slice(p+1),T=_.match(H);T&&(C.push(T[1]),S.unshift(T[2])),S.length&&(a="/"+S.join(".")+a),this.hostname=C.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=E.toASCII(this.hostname));var O=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+O,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!W[h])for(p=0,y=B.length;p<y;p++){var A=B[p];if(-1!==a.indexOf(A)){var M=encodeURIComponent(A);M===A&&(M=escape(A)),a=a.split(A).join(M)}}var D=a.indexOf("#");-1!==D&&(this.hash=a.substr(D),a=a.slice(0,D));var I=a.indexOf("?");if(-1!==I?(this.search=a.substr(I),this.query=a.substr(I+1),e&&(this.query=Y.parse(this.query)),a=a.slice(0,I)):e&&(this.search="",this.query={}),a&&(this.pathname=a),X[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){O=this.pathname||"";var P=this.search||"";this.path=O+P}return this.href=this.format(),this},k.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&L.isObject(this.query)&&Object.keys(this.query).length&&(o=Y.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||X[e])&&!1!==r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+r+(i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+n},k.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},k.prototype.resolveObject=function(t){if(L.isString(t)){var e=new k;e.parse(t,!1,!0),t=e}for(var i=new k,n=Object.keys(this),r=0;r<n.length;r++){var o=n[r];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),s=0;s<a.length;s++){var l=a[s];"protocol"!==l&&(i[l]=t[l])}return X[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!X[t.protocol]){for(var h=Object.keys(t),c=0;c<h.length;c++){var u=h[c];i[u]=t[u]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||G[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var d=i.pathname||"",p=i.search||"";i.path=d+p}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var g=i.pathname&&"/"===i.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=v||g||i.host&&t.pathname,y=m,_=i.pathname&&i.pathname.split("/")||[],x=(f=t.pathname&&t.pathname.split("/")||[],i.protocol&&!X[i.protocol]);if(x&&(i.hostname="",i.port=null,i.host&&(""===_[0]?_[0]=i.host:_.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),m=m&&(""===f[0]||""===_[0])),v)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,_=f;else if(f.length)_||(_=[]),_.pop(),_=_.concat(f),i.search=t.search,i.query=t.query;else if(!L.isNullOrUndefined(t.search)){if(x)i.hostname=i.host=_.shift(),(T=!!(i.host&&0<i.host.indexOf("@"))&&i.host.split("@"))&&(i.auth=T.shift(),i.host=i.hostname=T.shift());return i.search=t.search,i.query=t.query,L.isNull(i.pathname)&&L.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!_.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var b=_.slice(-1)[0],w=(i.host||t.host||1<_.length)&&("."===b||".."===b)||""===b,C=0,S=_.length;0<=S;S--)"."===(b=_[S])?_.splice(S,1):".."===b?(_.splice(S,1),C++):C&&(_.splice(S,1),C--);if(!m&&!y)for(;C--;C)_.unshift("..");!m||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),w&&"/"!==_.join("/").substr(-1)&&_.push("");var T,O=""===_[0]||_[0]&&"/"===_[0].charAt(0);x&&(i.hostname=i.host=O?"":_.length?_.shift():"",(T=!!(i.host&&0<i.host.indexOf("@"))&&i.host.split("@"))&&(i.auth=T.shift(),i.host=i.hostname=T.shift()));return(m=m||i.host&&_.length)&&!O&&_.unshift(""),_.length?i.pathname=_.join("/"):(i.pathname=null,i.path=null),L.isNull(i.pathname)&&L.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},k.prototype.parseHost=function(){var t=this.host,e=n.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},,,,,,,,,function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,i,r){(function(l){var h=r(1042),t=r(888),c=r(1049),e=r(1050),u=r(876),n=i;n.request=function(t,e){t="string"==typeof t?u.parse(t):c(t);var i=-1===l.location.protocol.search(/^https?:$/)?"http:":"",n=t.protocol||i,r=t.hostname||t.host,o=t.port,a=t.path||"/";r&&-1!==r.indexOf(":")&&(r="["+r+"]"),t.url=(r?n+"//"+r:"")+(o?":"+o:"")+a,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var s=new h(t);return e&&s.on("response",e),s},n.get=function(t,e){var i=n.request(t,e);return i.end(),i},n.ClientRequest=h,n.IncomingMessage=t.IncomingMessage,n.Agent=function(){},n.Agent.defaultMaxSockets=4,n.globalAgent=new n.Agent,n.STATUS_CODES=e,n.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(i,r(48))},function(t,s,e){(function(t){s.fetch=a(t.fetch)&&a(t.ReadableStream),s.writableStream=a(t.WritableStream),s.abortController=a(t.AbortController),s.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),s.blobConstructor=!0}catch(t){}var e;function i(){if(void 0!==e)return e;if(t.XMLHttpRequest){e=new t.XMLHttpRequest;try{e.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){e=null}}else e=null;return e}function n(t){var e=i();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var r=void 0!==t.ArrayBuffer,o=r&&a(t.ArrayBuffer.prototype.slice);function a(t){return"function"==typeof t}s.arraybuffer=s.fetch||r&&n("arraybuffer"),s.msstream=!s.fetch&&o&&n("ms-stream"),s.mozchunkedarraybuffer=!s.fetch&&r&&n("moz-chunked-arraybuffer"),s.overrideMimeType=s.fetch||!!i()&&a(i().overrideMimeType),s.vbArray=a(t.VBArray),e=null}).call(s,e(48))},function(t,i,n){(function(h,c,u){var f=n(887),t=n(793),d=n(889),s=i.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},e=i.IncomingMessage=function(t,e,i,n){var r=this;if(d.Readable.call(r),r._mode=i,r.headers={},r.rawHeaders=[],r.trailers={},r.rawTrailers=[],r.on("end",function(){h.nextTick(function(){r.emit("close")})}),"fetch"===i){if(r._fetchResponse=e,r.url=e.url,r.statusCode=e.status,r.statusMessage=e.statusText,e.headers.forEach(function(t,e){r.headers[e.toLowerCase()]=t,r.rawHeaders.push(e,t)}),f.writableStream){var o=new WritableStream({write:function(i){return new Promise(function(t,e){r._destroyed?e():r.push(new c(i))?t():r._resumeFetch=t})},close:function(){u.clearTimeout(n),r._destroyed||r.push(null)},abort:function(t){r._destroyed||r.emit("error",t)}});try{return void e.body.pipeTo(o).catch(function(t){u.clearTimeout(n),r._destroyed||r.emit("error",t)})}catch(t){}}var a=e.body.getReader();!function e(){a.read().then(function(t){if(!r._destroyed){if(t.done)return u.clearTimeout(n),void r.push(null);r.push(new c(t.value)),e()}}).catch(function(t){u.clearTimeout(n),r._destroyed||r.emit("error",t)})}()}else{if(r._xhr=t,r._pos=0,r.url=t.responseURL,r.statusCode=t.status,r.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var i=e[1].toLowerCase();"set-cookie"===i?(void 0===r.headers[i]&&(r.headers[i]=[]),r.headers[i].push(e[2])):void 0!==r.headers[i]?r.headers[i]+=", "+e[2]:r.headers[i]=e[2],r.rawHeaders.push(e[1],e[2])}}),r._charset="x-user-defined",!f.overrideMimeType){var s=r.rawHeaders["mime-type"];if(s){var l=s.match(/;\s*charset=([^;])(;|$)/);l&&(r._charset=l[1].toLowerCase())}r._charset||(r._charset="utf-8")}}};t(e,d.Readable),e.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},e.prototype._onXHRProgress=function(){var e=this,t=e._xhr,i=null;switch(e._mode){case"text:vbarray":if(t.readyState!==s.DONE)break;try{i=new u.VBArray(t.responseBody).toArray()}catch(t){}if(null!==i){e.push(new c(i));break}case"text":try{i=t.responseText}catch(t){e._mode="text:vbarray";break}if(i.length>e._pos){var n=i.substr(e._pos);if("x-user-defined"===e._charset){for(var r=new c(n.length),o=0;o<n.length;o++)r[o]=255&n.charCodeAt(o);e.push(r)}else e.push(n,e._charset);e._pos=i.length}break;case"arraybuffer":if(t.readyState!==s.DONE||!t.response)break;i=t.response,e.push(new c(new Uint8Array(i)));break;case"moz-chunked-arraybuffer":if(i=t.response,t.readyState!==s.LOADING||!i)break;e.push(new c(new Uint8Array(i)));break;case"ms-stream":if(i=t.response,t.readyState!==s.LOADING)break;var a=new u.MSStreamReader;a.onprogress=function(){a.result.byteLength>e._pos&&(e.push(new c(new Uint8Array(a.result.slice(e._pos)))),e._pos=a.result.byteLength)},a.onload=function(){e.push(null)},a.readAsArrayBuffer(i)}e._xhr.readyState===s.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(i,n(126),n(801).Buffer,n(48))},function(t,e,i){(((e=t.exports=i(890)).Stream=e).Readable=e).Writable=i(894),e.Duplex=i(802),e.Transform=i(896),e.PassThrough=i(1047)},function(E,t,L){"use strict";(function(t,v){var m=L(837);E.exports=f;var a,y=L(885);f.ReadableState=o;L(891).EventEmitter;var _=function(t,e){return t.listeners(e).length},r=L(892),h=L(838).Buffer,c=t.Uint8Array||function(){};var e=L(818);e.inherits=L(793);var i=L(1043),x=void 0;x=i&&i.debuglog?i.debuglog("stream"):function(){};var s,l=L(1044),n=L(893);e.inherits(f,r);var u=["error","close","destroy","pause","resume"];function o(t,e){t=t||{};var i=e instanceof(a=a||L(802));this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,r=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(r||0===r)?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s||(s=L(895).StringDecoder),this.decoder=new s(t.encoding),this.encoding=t.encoding)}function f(t){if(a=a||L(802),!(this instanceof f))return new f(t);this._readableState=new o(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),r.call(this)}function d(t,e,i,n,r){var o,a,s,l=t._readableState;null===e?(l.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,w(t)}(t,l)):(r||(o=function(t,e){var i;n=e,h.isBuffer(n)||n instanceof c||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));var n;return i}(l,e)),o?t.emit("error",o):l.objectMode||e&&0<e.length?("string"==typeof e||l.objectMode||Object.getPrototypeOf(e)===h.prototype||(a=e,e=h.from(a)),n?l.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):p(t,l,e,!0):l.ended?t.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,l.decoder&&!i?(e=l.decoder.write(e),l.objectMode||0!==e.length?p(t,l,e,!1):S(t,l)):p(t,l,e,!1))):n||(l.reading=!1));return!(s=l).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}function p(t,e,i,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,n?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&w(t)),S(t,e)}Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),f.prototype.destroy=n.destroy,f.prototype._undestroy=n.undestroy,f.prototype._destroy=function(t,e){this.push(null),e(t)},f.prototype.push=function(t,e){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=h.from(t,e),e=""),i=!0),d(this,t,e,!1,i)},f.prototype.unshift=function(t){return d(this,t,null,!0,!1)},f.prototype.isPaused=function(){return!1===this._readableState.flowing},f.prototype.setEncoding=function(t){return s||(s=L(895).StringDecoder),this._readableState.decoder=new s(t),this._readableState.encoding=t,this};var g=8388608;function b(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=(g<=(i=t)?i=g:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0));var i}function w(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(x("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?m.nextTick(C,t):C(t))}function C(t){x("emit readable"),t.emit("readable"),A(t)}function S(t,e){e.readingMore||(e.readingMore=!0,m.nextTick(T,t,e))}function T(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(x("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function O(t){x("readable nexttick read 0"),t.read(0)}function k(t,e){e.reading||(x("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),A(t),e.flowing&&!e.reading&&t.read(0)}function A(t){var e=t._readableState;for(x("flow",e.flowing);e.flowing&&null!==t.read(););}function M(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,n=1,r=i.data;t-=r.length;for(;i=i.next;){var o=i.data,a=t>o.length?o.length:t;if(a===o.length?r+=o:r+=o.slice(0,t),0===(t-=a)){a===o.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i).data=o.slice(a);break}++n}return e.length-=n,r}(t,e):function(t,e){var i=h.allocUnsafe(t),n=e.head,r=1;n.data.copy(i),t-=n.data.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(o.copy(i,i.length-t,0,a),0===(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n).data=o.slice(a);break}++r}return e.length-=r,i}(t,e);return n}(t,e.buffer,e.decoder),i);var i}function D(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,m.nextTick(I,e,t))}function I(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function P(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}f.prototype.read=function(t){x("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return x("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?D(this):w(this),null;if(0===(t=b(t,e))&&e.ended)return 0===e.length&&D(this),null;var n,r=e.needReadable;return x("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&x("length less than watermark",r=!0),e.ended||e.reading?x("reading or ended",r=!1):r&&(x("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=b(i,e))),null===(n=0<t?M(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&D(this)),null!==n&&this.emit("data",n),n},f.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},f.prototype.pipe=function(i,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=i;break;case 1:r.pipes=[r.pipes,i];break;default:r.pipes.push(i)}r.pipesCount+=1,x("pipe count=%d opts=%j",r.pipesCount,t);var e=(!t||!1!==t.end)&&i!==v.stdout&&i!==v.stderr?a:g;function o(t,e){x("onunpipe"),t===n&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,x("cleanup"),i.removeListener("close",d),i.removeListener("finish",p),i.removeListener("drain",l),i.removeListener("error",f),i.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",g),n.removeListener("data",u),h=!0,!r.awaitDrain||i._writableState&&!i._writableState.needDrain||l())}function a(){x("onend"),i.end()}r.endEmitted?m.nextTick(e):n.once("end",e),i.on("unpipe",o);var s,l=(s=n,function(){var t=s._readableState;x("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&_(s,"data")&&(t.flowing=!0,A(s))});i.on("drain",l);var h=!1;var c=!1;function u(t){x("ondata"),(c=!1)!==i.write(t)||c||((1===r.pipesCount&&r.pipes===i||1<r.pipesCount&&-1!==P(r.pipes,i))&&!h&&(x("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,c=!0),n.pause())}function f(t){x("onerror",t),g(),i.removeListener("error",f),0===_(i,"error")&&i.emit("error",t)}function d(){i.removeListener("finish",p),g()}function p(){x("onfinish"),i.removeListener("close",d),g()}function g(){x("unpipe"),n.unpipe(i)}return n.on("data",u),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?y(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(i,"error",f),i.once("close",d),i.once("finish",p),i.emit("pipe",n),r.flowing||(x("pipe resume"),n.resume()),i},f.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++)n[o].emit("unpipe",this,i);return this}var a=P(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},f.prototype.addListener=f.prototype.on=function(t,e){var i=r.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&w(this):m.nextTick(O,this))}return i},f.prototype.resume=function(){var t,e,i=this._readableState;return i.flowing||(x("resume"),i.flowing=!0,t=this,(e=i).resumeScheduled||(e.resumeScheduled=!0,m.nextTick(k,t,e))),this},f.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(e){var i=this,n=this._readableState,r=!1;for(var t in e.on("end",function(){if(x("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),e.on("data",function(t){(x("wrapped data"),n.decoder&&(t=n.decoder.write(t)),n.objectMode&&null==t)||(n.objectMode||t&&t.length)&&(i.push(t)||(r=!0,e.pause()))}),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var o=0;o<u.length;o++)e.on(u[o],this.emit.bind(this,u[o]));return this._read=function(t){x("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(f.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),f._fromList=M}).call(t,L(48),L(126))},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function l(t){return"function"==typeof t}function h(t){return"object"==typeof t&&null!==t}function c(t){return void 0===t}((t.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,i,n,r,o,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||h(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var s=new Error('Uncaught, unspecified "error" event. ('+e+")");throw s.context=e,s}if(c(i=this._events[t]))return!1;if(l(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),i.apply(this,r)}else if(h(i))for(r=Array.prototype.slice.call(arguments,1),n=(a=i.slice()).length,o=0;o<n;o++)a[o].apply(this,r);return!0},n.prototype.on=n.prototype.addListener=function(t,e){var i;if(!l(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,l(e.listener)?e.listener:e),this._events[t]?h(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,h(this._events[t])&&!this._events[t].warned&&(i=c(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&0<i&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(t,e){if(!l(e))throw TypeError("listener must be a function");var i=!1;function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var i,n,r,o;if(!l(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=(i=this._events[t]).length,n=-1,i===e||l(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(h(i)){for(o=r;0<o--;)if(i[o]===e||i[o].listener&&i[o].listener===e){n=o;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(l(i=this._events[t]))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?l(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(l(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){t.exports=i(891).EventEmitter},function(t,e,i){"use strict";var o=i(837);function a(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,n=this._readableState&&this._readableState.destroyed,r=this._writableState&&this._writableState.destroyed;return n||r?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||o.nextTick(a,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(o.nextTick(a,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(C,t,S){"use strict";(function(t,e,i){var m=S(837);function u(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var n=t.entry;t.entry=null;for(;n;){var r=n.callback;e.pendingcb--,r(i),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}C.exports=c;var s,f=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?e:m.nextTick;c.WritableState=h;var n=S(818);n.inherits=S(793);var r={deprecate:S(1046)},o=S(892),y=S(838).Buffer,_=i.Uint8Array||function(){};var a,l=S(893);function x(){}function h(t,e){s=s||S(802),t=t||{};var i=e instanceof s;this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,r=t.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(r||0===r)?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,n=i.sync,r=i.writecb;if(u=i,u.writing=!1,u.writecb=null,u.length-=u.writelen,u.writelen=0,e)a=t,s=i,l=n,h=e,c=r,--s.pendingcb,l?(m.nextTick(c,h),m.nextTick(w,a,s),a._writableState.errorEmitted=!0,a.emit("error",h)):(c(h),a._writableState.errorEmitted=!0,a.emit("error",h),w(a,s));else{var o=g(i);o||i.corked||i.bufferProcessing||!i.bufferedRequest||p(t,i),n?f(d,t,i,o,r):d(t,i,o,r)}var a,s,l,h,c;var u}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function c(t){if(s=s||S(802),!(a.call(c,this)||this instanceof s))return new c(t);this._writableState=new h(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function b(t,e,i,n,r,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,i?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function d(t,e,i,n){var r,o;i||(r=t,0===(o=e).length&&o.needDrain&&(o.needDrain=!1,r.emit("drain"))),e.pendingcb--,n(),w(t,e)}function p(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var n=e.bufferedRequestCount,r=new Array(n),o=e.corkedRequestsFree;o.entry=i;for(var a=0,s=!0;i;)(r[a]=i).isBuf||(s=!1),i=i.next,a+=1;r.allBuffers=s,b(t,e,!0,e.length,r,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new u(e),e.bufferedRequestCount=0}else{for(;i;){var l=i.chunk,h=i.encoding,c=i.callback;if(b(t,e,!1,e.objectMode?1:l.length,l,h,c),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function g(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function v(e,i){e._final(function(t){i.pendingcb--,t&&e.emit("error",t),i.prefinished=!0,e.emit("prefinish"),w(e,i)})}function w(t,e){var i,n,r=g(e);return r&&(i=t,(n=e).prefinished||n.finalCalled||("function"==typeof i._final?(n.pendingcb++,n.finalCalled=!0,m.nextTick(v,i,n)):(n.prefinished=!0,i.emit("prefinish"))),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}n.inherits(c,o),h.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(h.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(t){return!!a.call(this,t)||this===c&&(t&&t._writableState instanceof h)}})):a=function(t){return t instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},c.prototype.write=function(t,e,i){var n,r,o,a,s,l,h,c,u,f,d,p=this._writableState,g=!1,v=!p.objectMode&&(n=t,y.isBuffer(n)||n instanceof _);return v&&!y.isBuffer(t)&&(r=t,t=y.from(r)),"function"==typeof e&&(i=e,e=null),v?e="buffer":e||(e=p.defaultEncoding),"function"!=typeof i&&(i=x),p.ended?(u=this,f=i,d=new Error("write after end"),u.emit("error",d),m.nextTick(f,d)):(v||(o=this,a=p,l=i,c=!(h=!0),null===(s=t)?c=new TypeError("May not write null values to stream"):"string"==typeof s||void 0===s||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c&&(o.emit("error",c),m.nextTick(l,c),h=!1),h))&&(p.pendingcb++,g=function(t,e,i,n,r,o){if(!i){var a=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=y.from(e,i));return e}(e,n,r);n!==a&&(i=!0,r="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:r,isBuf:i,callback:o,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,s,n,r,o);return l}(this,p,v,t,e,i)),g},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||p(this,t))},c.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(t,e,i){var n=this._writableState;"function"==typeof t?(i=t,e=t=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,i){e.ending=!0,w(t,e),i&&(e.finished?m.nextTick(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,n,i)},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),c.prototype.destroy=l.destroy,c.prototype._undestroy=l.undestroy,c.prototype._destroy=function(t,e){this.end(),e(t)}}).call(t,S(126),S(319).setImmediate,S(48))},function(t,e,i){"use strict";var n=i(838).Buffer,r=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=h,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=u,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var n=i.charCodeAt(i.length-1);if(55296<=n&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function c(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function u(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}(e.StringDecoder=o).prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var i=function(t,e,i){var n=e.length-1;if(n<i)return 0;var r=a(e[n]);if(0<=r)return 0<r&&(t.lastNeed=r-1),r;if(--n<i||-2===r)return 0;if(0<=(r=a(e[n])))return 0<r&&(t.lastNeed=r-2),r;if(--n<i||-2===r)return 0;if(0<=(r=a(e[n])))return 0<r&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var n=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,i){"use strict";t.exports=o;var n=i(802),r=i(818);function o(t){if(!(this instanceof o))return new o(t);n.call(this,t),this._transformState={afterTransform:function(t,e){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,(i.writecb=null)!=e&&this.push(e),n(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var i=this;"function"==typeof this._flush?this._flush(function(t,e){s(i,t,e)}):s(this,null,null)}function s(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=i(793),r.inherits(o,n),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,i){var n=this._transformState;if(n.writecb=i,n.writechunk=t,n.writeencoding=e,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var i=this;n.prototype._destroy.call(this,t,function(t){e(t),i.emit("close")})}},function(t,e,i){var n=i(304)(i(1065),i(1067),function(t){i(1063)},"data-v-6e5110fa",null);t.exports=n.exports},function(t,e,i){var n=i(304)(i(1078),i(1079),null,null,null);t.exports=n.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){var n=i(1027);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(590)("0a2e6358",n,!0,{})},function(t,e,i){(t.exports=i(589)()).push([t.i,".drawCameraArea{position:absolute;z-index:100;border:1px solid red}.store-hot{background-color:#fff;position:relative}.store-hot-header{overflow:hidden;background:#fff;border-bottom:.5px solid #DEE1E2}.store-hot-header p{height:50px;line-height:50px}.store-hot .store-hot-header-title{width:100px;float:left;padding-left:30px;font-size:16px}.store-hot .store-hot-content{margin-bottom:30px}.store-hot .store-hot-content .store-hot-content-area{border:1px solid #DDD;margin:0 30px;padding-bottom:30px;position:relative}.store-hot .store-hot-content .store-hot-content-area-option{height:50px;line-height:50px;color:#0098CC;position:absolute;top:-50px;right:10px}.store-hot .store-hot-content .store-hot-content-area-option span{cursor:pointer}.store-hot .store-hot-content .store-hot-content-area-content{overflow:hidden;display:flex;justify-content:center}.store-hot .store-hot-content .store-hot-content-area-content-map{width:700px;margin-top:50px}.store-hot .store-hot-content .store-hot-content-area-content .all-area-data{width:260px;height:376px;float:right;padding:0 15px}.store-hot .store-hot-content .all-area-data .ivu-switch-checked{border-color:#17B4D7;background-color:#17B4D7}.store-hot .store-hot-content .all-area-data .ivu-row{height:32px;line-height:32px}.all-area-data .ivu-row .ivu-col-span-6,.store-hot .store-hot-content .all-area-data .ivu-row .ivu-col-span-7{text-align:center}.all-area-data .ivu-row .ivu-col-span-6.upColor{color:#F4858F}.all-area-data .ivu-row .ivu-col-span-6.downColor{color:#83CFBD}.store-hot .store-hot-content .all-area-data .all-area-data-title{font-size:14px;height:40px;line-height:40px}.store-hot .heatMapChart-content{position:relative;min-height:30px;padding:30px 0}.store-hot .store-hot-content #heatMapChart{margin:30px auto 0}.store-hot .store-hot-content #heatmap{width:100%;background-size:cover;z-index:10}.store-hot .store-hot-content #heatmap .heatmap-canvas{width:100%;height:100%!important}.store-hot .store-hot-content-type{position:absolute;top:10px;right:22px}.store-hot .store-hot-content-title{width:100%;height:50px;line-height:50px;text-align:left;padding-left:30px;font-size:16px}.store-hot .store-hot-content-title.detail-info{border-bottom:.5px solid #DEE1E2}.store-hot-content .sliderBar{padding:0 30px}.store-hot-content .ivu-slider-button{width:6px;height:6px;border:0;background-color:#FF401E;margin-top:-10px}.store-hot-content .ivu-slider-bar{background:#F87676}.store-hot .camera-tab.ivu-tabs{padding-top:14px}.store-hot .downData{color:#5FBBA7}.store-hot .upData{color:#F76D6D}.store-hot .detail-data .ivu-tabs .ivu-tabs-bar{padding-left:80px}.store-hot .detail-data .ivu-tabs-bar{border-bottom:0}.store-hot .detail-data .ivu-tabs-ink-bar{height:0}.store-people-pandect-content{padding-bottom:16px}.store-hot-area-tabs{overflow:hidden;margin:16px 30px 0;padding:20px 0;border:1px solid #F1F1F1}.store-hot-area-tabs.hotDataChild{margin-top:35px}.store-hot-area-tabs-content-title{height:30px;line-height:30px;font-size:16px;padding-left:30px}.store-hot-area-tabs-content-list{width:20%;float:left;border-right:1px solid #DDD}.store-hot-area-tabs-content-list:last-child{border-right:0}.store-hot-area-tabs-content-list p{font-size:12px;height:30px;line-height:30px;text-align:center}.store-hot-area-tabs-content-list p.store-hot-area-tabs-content-list-data{font-size:30px;height:40px;line-height:40px;text-align:center;font-family:'Helvetica Neue',Tahoma,Helvetica,Arial,'Microsoft YaHei'}.store-hot .detail-data .heatMapChart-content .loadingContent{height:300px;line-height:300px}.add-modal .ivu-modal-header{border-bottom:0;padding:20px 30px 4px}.add-modal .ivu-modal-close{right:30px}.add-modal .ivu-modal-footer{border-top:0;padding:24px 18px 44px}.add-modal-content{overflow:hidden}.add-modal-content .content{width:700px;height:auto;border:1px solid #ddd;float:left}.add-modal-content .library{width:350px;height:400px;border:1px solid #ddd;float:right;padding:0 20px;overflow:auto;scrollbar-face-color:#DDD;scrollbar-highlight-color:#09C}.add-modal-content .library::-webkit-scrollbar{background-color:#DDD;width:3px}.add-modal-content .library::-webkit-scrollbar-thumb{background-color:#09C;border-radius:2px}.add-modal-content .library .ivu-checkbox-checked .ivu-checkbox-inner{border-color:#09C;background-color:#09C}.add-modal-content .library .title{font-size:14px;height:30px;line-height:30px}.add-SKU-modal-content .goods-library .goods-library-title{font-size:12px;height:30px;line-height:30px}.add-SKU-modal-content .goods-library .goods-library-content p{margin-top:10px;margin-bottom:4px;font-size:12px}.add-SKU-modal-content .goods-library .goods-library-content .ivu-checkbox-group{padding-left:10px}.add-SKU-modal-content .goods-library .ivu-checkbox-group .ivu-checkbox-group-item{margin-right:14px}.material-library-row-content{overflow:hidden}.material-library-row-content .material-library-row-content-col{float:left}.material-library-row-content .material-library-row-content-col p{height:30px;line-height:30px;text-align:center}.show-current-goods-sku{position:fixed;z-index:10000;display:none;width:180px;height:220px;background-color:#fff;box-shadow:0 2px 4px 0 rgba(0,0,0,.2);border-radius:4px}.show-current-goods-sku .area-sku-list-title{text-align:center;font-size:14px}.show-current-goods-sku-list{width:50%;float:left;line-height:30px;font-size:14px}.store-hot-content-area-content .intensity{width:300px;height:42px;padding:6px;position:absolute;top:-44px;left:10px;z-index:999;overflow:hidden;background-color:#fff}.store-hot-content-area-content .intensity li{float:left;list-style:none;width:14.2%;text-align:center}.store-hot-content-area-content .intensity li .intensity-style{height:10px;width:100%;margin-top:3px}.store-hot-content-area-content .intensity li .intensity-style-one{background-color:red}.store-hot-content-area-content .intensity li .intensity-style-two{background-color:#ff7300}.store-hot-content-area-content .intensity li .intensity-style-three{background-color:#ff0}.store-hot-content-area-content .intensity li .intensity-style-four{background-color:#0f0}.store-hot-content-area-content .intensity li .intensity-style-five{background-color:#00f}.store-hot-content-area-content .intensity li .intensity-num{font-size:12px}",""])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(305),r=i.n(n),o=i(306),a=i.n(o),s=i(87),l=i.n(s),h=i(784),c=i.n(h),u=i(311),f=i.n(u),d=i(312),p=i(1),g=i.n(p),v=i(1029),m=i.n(v),y=i(1074),_=i.n(y),x=i(1081),b=i.n(x),w=i(1091),C=i(122);i(82);e.default={mixins:[w.a],data:function(){return{dateRange:{text:"",value:"0",range:[g()().subtract(0,"days"),g()().subtract(0,"days")],dateType:"day",compare:[g()().subtract(1,"days"),g()().subtract(1,"days")]},requestParamKeys:["avg_stay_time","heat_map","trace_count","trace_count_g_hour","avg_stay_time_g_camera","trace_count_g_camera","stay_time_g_camera","trace_count_g_hour_g_camera","heat_map_origin_g_camera"],isRenderStoreHeapMap:!1,isNoticeUser:!0}},computed:f()({},Object(d.c)(["heatmapDateRangeList","getHeatmapDateRangeTextByValue","getHeatmapDateRangeValueByText"]),{selectTimeRangeUTC:function(){return C.a.timeRangeUtc.apply(C.a,c()(this.dateRange.range))},compareTimeRangeUTC:function(){return C.a.timeRangeUtc.apply(C.a,c()(this.dateRange.compare))},bindDateRangeText:{get:function(){return this.dateRange.range[0].format("YYYY-MM-DD")+" ~ "+this.dateRange.range[1].format("YYYY-MM-DD")},set:function(t){this.dateRange.range=C.a.getDateRangeMomentByValue(t,!1),this.dateRange.compare=C.a.getDateRangeMomentByValue(t,!0)}}}),components:{AppStoreHeatmap:m.a,AppCameraDetailInfo:_.a,AppCameraHeatMap:b.a},created:function(){this.getDataAndRefresh()},mounted:function(){var t=[this.$store.dispatch("loadStateList")];l.a.all(t).then(function(){})},methods:{getHeatMapAllData:function(){var e=this;return a()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getInStoreHeatmap(e.selectTimeRangeUTC,e.compareTimeRangeUTC,e.requestParamKeys);case 2:case"end":return t.stop()}},t,e)}))()},getDataAndRefresh:function(){var e=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"0";return a()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.bindDateRangeText=i,t.next=3,e.getHeatMapAllData();case 3:"30"===i&&e.isNoticeUser&&(e.$Message.info({content:"首次计算时间较长，请稍等，再重新选择",duration:3}),e.isNoticeUser=!1),e.isRenderStoreHeapMap&&e.$bus.$emit("getHeatMapData"),e.isRenderStoreHeapMap=!0;case 6:case"end":return t.stop()}},t,e)}))()}}}},function(t,e,i){var n=i(304)(i(1032),i(1073),function(t){i(1030)},null,null);t.exports=n.exports},function(t,e,i){var n=i(1031);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(590)("4b84d17f",n,!0,{})},function(t,e,i){(t.exports=i(589)()).push([t.i,"div.storehot-loading{width:100%;height:500px!important;line-height:500px!important}.store-hot-content-area-content{display:flex;justify-content:center}",""])},function(t,M,D){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),function(n){var t=D(769),r=D.n(t),e=D(84),o=D.n(e),i=D(87),a=D.n(i),s=D(305),l=D.n(s),h=D(306),c=D.n(h),u=D(677),f=D.n(u),d=D(874),p=D.n(d),g=D(1053),v=D.n(g),m=D(1058),y=D.n(m),_=D(897),x=D.n(_),b=D(307),w=D(83),C=(D(122),D(82)),S=D(839),T=D(673),O=D.n(T),k=D(1068),A=D.n(k);M.default={mixins:[S.a],components:{Loading:O.a,AppAddSkuModal:v.a,AppFloorPlanModal:y.a,AppHeatMap:x.a,AppHotAreaTable:A.a},data:function(){return{storeCanvas:"",storeInfo:{online_json_canvas:"",height:0,width:0,store_img:"",store_sku:""},addSKUModal:{state:!1},addFloorPlanModal:{state:!1},targetSKUList:[],requestParamKeys:[C.a.ATTR_HEAT_MAP],canvasHeight:0,canvasWidth:700,heatData:[]}},props:{storeAttributeData:{type:Array,default:function(){return[]}},dateRange:{type:Object,default:function(){return{}}}},computed:{hasStoreImage:function(){return!n.isEmpty(this.storeInfo.store_img)},hasJsonCanvas:function(){return!n.isEmpty(this.jsonCanvas)},jsonCanvas:{get:function(){return this.storeInfo.online_json_canvas},set:function(t){this.storeInfo.online_json_canvas=t}},store_sku:function(){return this.storeInfo.store_sku?JSON.parse(this.storeInfo.store_sku):{}},heatmapData:function(){var t=[];for(var e in this.storeAttributeData){var i={},n=!0,r=!1,o=void 0;try{for(var a,s=f()(this.requestParamKeys);!(n=(a=s.next()).done);n=!0){var l=a.value;i[l]=this.storeAttributeData[e][l]}}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}t.push(i)}return t}},watch:{storeAttributeData:{handler:"updateHeatData",deep:!0}},created:function(){this.initHeatMapData(),this.$bus.$on("getHeatMapData",this.initHeatMapData)},mounted:function(){var t=this;this.storeCanvas=new p.a.fabric.Canvas("background-plan"),this.canvasMouseMove(),this.initData().then(function(){t.drawStoreCanvas()})},methods:{updateHeatData:function(){this.heatData.length=0;var t=n.isEmpty(this.heatmapData)?[]:this.heatmapData[0][C.a.ATTR_HEAT_MAP],e=!n.isEmpty(t)&&!n.isEmpty(t[0]);e&&t[0].length,e&&t[0][0].length;this.heatData.push({heat_map:t})},initHeatMapData:function(){this.updateHeatData()},initData:function(){var e=this;return c()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getStoreHotList();case 2:case"end":return t.stop()}},t,e)}))()},getCanvasHeight:function(){var i=this;return this.hasStoreImage?new a.a(function(t){var e=new Image;e.onload=function(){t(n.floor(e.height*i.canvasWidth/e.width))},e.src=w.a.ImgSrc+i.storeInfo.store_img}):0},getHeatMapDataByHour:function(){this.heatMapDataByHour=this.getDataByKeys()},setJsonOnlineCanvas:function(){var t=JSON.parse(this.jsonCanvas);t.backgroundImage.src=w.a.ImgSrc+this.storeInfo.store_img,this.jsonCanvas=o()(t)},loadCanvas:function(){var i=this;return c()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getCanvasHeight();case 2:if(i.canvasHeight=t.sent,!i.hasJsonCanvas){t.next=8;break}return i.setJsonOnlineCanvas(),t.abrupt("return",new a.a(function(t){i.storeCanvas.loadFromJSON(i.jsonCanvas,function(){i.storeCanvas.setHeight(i.canvasHeight),i.storeCanvas.setWidth(i.canvasWidth),i.storeCanvas.renderAll(),t()})}));case 8:if(!i.hasStoreImage){t.next=10;break}return t.abrupt("return",new a.a(function(e){p.a.fabric.Image.fromURL(w.a.ImgSrc+i.storeInfo.store_img,function(t){i.storeCanvas.add(t),i.storeCanvas.setHeight(i.canvasHeight),i.storeCanvas.setWidth(i.canvasWidth),i.jsonCanvas=o()(i.storeCanvas),i.storeCanvas.renderAll(),e()})}));case 10:case"end":return t.stop()}},t,i)}))()},drawStoreCanvas:function(){var e=this;return c()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadCanvas();case 2:e.setStoreCanvas();case 3:case"end":return t.stop()}},t,e)}))()},setStoreCanvas:function(){var t=document.getElementsByClassName("upper-canvas")[0];t&&(t.style.zIndex=21),n.forEach(this.storeCanvas._objects,function(t){t.lockMovementX=!0,t.lockMovementY=!0,t.hasControls=!1})},getStoreHotList:function(){var i=this;return c()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b._22(r()(i.storeInfo));case 2:(e=t.sent)&&200===e.code&&(i.storeInfo=e.data);case 4:case"end":return t.stop()}},t,i)}))()},adjustFloorPlan:function(){this.addFloorPlanModal.state=!0},adjustSKU:function(){this.addSKUModal.state=!0},format:function(t){return t+":00"},canvasMouseMove:function(){var e=this;this.storeCanvas.on("mouse:move",function(t){!t.target||t.target&&!t.target.id?e.$refs.SKUData.style.display="none":(e.$refs.SKUData.style.display="block",e.$refs.SKUData.style.top=t.e.clientY+10+"px",e.$refs.SKUData.style.left=t.e.clientX+10+"px",e.showMouseMoveSKU(t.target.id))})},showMouseMoveSKU:function(t){this.targetSKUList=this.store_sku[t.toString()]||[]},reDrawStoreAndObject:function(t){this.jsonCanvas=t,this.storeCanvas.clear(),this.drawStoreCanvas(),this.addSKUModal.state=!0}}}}.call(M,D(123))},function(t,e,i){"use strict";e.byteLength=function(t){var e=d(t),i=e[0],n=e[1];return 3*(i+n)/4-n},e.toByteArray=function(t){for(var e,i=d(t),n=i[0],r=i[1],o=new f((h=n,c=r,3*(h+c)/4-c)),a=0,s=0<r?n-4:n,l=0;l<s;l+=4)e=u[t.charCodeAt(l)]<<18|u[t.charCodeAt(l+1)]<<12|u[t.charCodeAt(l+2)]<<6|u[t.charCodeAt(l+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;var h,c;2===r&&(e=u[t.charCodeAt(l)]<<2|u[t.charCodeAt(l+1)]>>4,o[a++]=255&e);1===r&&(e=u[t.charCodeAt(l)]<<10|u[t.charCodeAt(l+1)]<<4|u[t.charCodeAt(l+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e);return o},e.fromByteArray=function(t){for(var e,i=t.length,n=i%3,r=[],o=0,a=i-n;o<a;o+=16383)r.push(l(t,o,a<o+16383?a:o+16383));1===n?(e=t[i-1],r.push(s[e>>2]+s[e<<4&63]+"==")):2===n&&(e=(t[i-2]<<8)+t[i-1],r.push(s[e>>10]+s[e>>4&63]+s[e<<2&63]+"="));return r.join("")};for(var s=[],u=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=n.length;r<o;++r)s[r]=n[r],u[n.charCodeAt(r)]=r;function d(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function l(t,e,i){for(var n,r,o=[],a=e;a<i;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(s[(r=n)>>18&63]+s[r>>12&63]+s[r>>6&63]+s[63&r]);return o.join("")}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,i,n,r){var o,a,s=8*r-n-1,l=(1<<s)-1,h=l>>1,c=-7,u=i?r-1:0,f=i?-1:1,d=t[e+u];for(u+=f,o=d&(1<<-c)-1,d>>=-c,c+=s;0<c;o=256*o+t[e+u],u+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;0<c;a=256*a+t[e+u],u+=f,c-=8);if(0===o)o=1-h;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=h}return(d?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,i,n,r,o){var a,s,l,h=8*o-r-1,c=(1<<h)-1,u=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+u?f/l:f*Math.pow(2,1-u))*l&&(a++,l/=2),c<=a+u?(s=0,a=c):1<=a+u?(s=(e*l-1)*Math.pow(2,r),a+=u):(s=e*Math.pow(2,u-1)*Math.pow(2,r),a=0));8<=r;t[i+d]=255&s,d+=p,s/=256,r-=8);for(a=a<<r|s,h+=r;0<h;t[i+d]=255&a,d+=p,a/=256,h-=8);t[i+d-p]|=128*g}},function(t,e){},function(t,e){},function(t,I,P){(function(p,g){var v;!function(t){"object"==typeof I&&I&&I.nodeType,"object"==typeof p&&p&&p.nodeType;var e="object"==typeof g&&g;e.global!==e&&e.window!==e&&e.self;var i,m=2147483647,y=36,_=1,x=26,r=38,o=700,b=72,w=128,C="-",n=/^xn--/,a=/[^\x20-\x7E]/,s=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=y-_,S=Math.floor,T=String.fromCharCode;function O(t){throw new RangeError(l[t])}function c(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function u(t,e){var i=t.split("@"),n="";return 1<i.length&&(n=i[0]+"@",t=i[1]),n+c((t=t.replace(s,".")).split("."),e).join(".")}function k(t){for(var e,i,n=[],r=0,o=t.length;r<o;)55296<=(e=t.charCodeAt(r++))&&e<=56319&&r<o?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function A(t){return c(t,function(t){var e="";return 65535<t&&(e+=T((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=T(t)}).join("")}function M(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function D(t,e,i){var n=0;for(t=i?S(t/o):t>>1,t+=S(t/e);h*x>>1<t;n+=y)t=S(t/h);return S(n+(h+1)*t/(t+r))}function f(t){var e,i,n,r,o,a,s,l,h,c,u,f=[],d=t.length,p=0,g=w,v=b;for((i=t.lastIndexOf(C))<0&&(i=0),n=0;n<i;++n)128<=t.charCodeAt(n)&&O("not-basic"),f.push(t.charCodeAt(n));for(r=0<i?i+1:0;r<d;){for(o=p,a=1,s=y;d<=r&&O("invalid-input"),u=t.charCodeAt(r++),(y<=(l=u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:y)||l>S((m-p)/a))&&O("overflow"),p+=l*a,!(l<(h=s<=v?_:v+x<=s?x:s-v));s+=y)a>S(m/(c=y-h))&&O("overflow"),a*=c;v=D(p-o,e=f.length+1,0==o),S(p/e)>m-g&&O("overflow"),g+=S(p/e),p%=e,f.splice(p++,0,g)}return A(f)}function d(t){var e,i,n,r,o,a,s,l,h,c,u,f,d,p,g,v=[];for(f=(t=k(t)).length,e=w,o=b,a=i=0;a<f;++a)(u=t[a])<128&&v.push(T(u));for(n=r=v.length,r&&v.push(C);n<f;){for(s=m,a=0;a<f;++a)e<=(u=t[a])&&u<s&&(s=u);for(s-e>S((m-i)/(d=n+1))&&O("overflow"),i+=(s-e)*d,e=s,a=0;a<f;++a)if((u=t[a])<e&&++i>m&&O("overflow"),u==e){for(l=i,h=y;!(l<(c=h<=o?_:o+x<=h?x:h-o));h+=y)g=l-c,p=y-c,v.push(T(M(c+g%p,0))),l=S(g/p);v.push(T(M(l,0))),o=D(i,d,n==r),i=0,++n}++i,++e}return v.join("")}i={version:"1.4.1",ucs2:{decode:k,encode:A},decode:f,encode:d,toASCII:function(t){return u(t,function(t){return a.test(t)?"xn--"+d(t):t})},toUnicode:function(t){return u(t,function(t){return n.test(t)?f(t.slice(4).toLowerCase()):t})}},void 0===(v=function(){return i}.call(I,P,I,p))||(p.exports=v)}()}).call(I,P(130)(t),P(48))},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(1040),e.encode=e.stringify=i(1041)},function(t,e,i){"use strict";t.exports=function(t,e,i,n){e=e||"&",i=i||"=";var r={};if("string"!=typeof t||0===t.length)return r;var o=/\+/g;t=t.split(e);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var s,l,h=t.length;0<a&&a<h&&(h=a);for(var c=0;c<h;++c){var u,f,d,p,g=t[c].replace(o,"%20"),v=g.indexOf(i);0<=v?(u=g.substr(0,v),f=g.substr(v+1)):(u=g,f=""),d=decodeURIComponent(u),p=decodeURIComponent(f),s=r,l=d,Object.prototype.hasOwnProperty.call(s,l)?m(r[d])?r[d].push(p):r[d]=[r[d],p]:r[d]=p}return r};var m=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(i,n,r,t){return n=n||"&",r=r||"=",null===i&&(i=void 0),"object"==typeof i?s(l(i),function(t){var e=encodeURIComponent(o(t))+r;return a(i[t])?s(i[t],function(t){return e+encodeURIComponent(o(t))}).join(n):e+encodeURIComponent(o(i[t]))}).join(n):t?encodeURIComponent(o(t))+r+encodeURIComponent(o(i)):""};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var l=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(o,t,s){(function(l,h,c){var u=s(887),t=s(793),e=s(888),a=s(889),f=s(1048),i=e.IncomingMessage,d=e.readyStates;var n=o.exports=function(e){var t,i=this;a.Writable.call(i),i._opts=e,i._body=[],i._headers={},e.auth&&i.setHeader("Authorization","Basic "+new l(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){i.setHeader(t,e.headers[t])});var n,r,o=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!u.abortController)t=!(o=!1);else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!u.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}i._mode=(n=t,r=o,u.fetch&&r?"fetch":u.mozchunkedarraybuffer?"moz-chunked-arraybuffer":u.msstream?"ms-stream":u.arraybuffer&&n?"arraybuffer":u.vbArray&&n?"text:vbarray":"text"),i._fetchTimer=null,i.on("finish",function(){i._onFinish()})};t(n,a.Writable),n.prototype.setHeader=function(t,e){var i=t.toLowerCase();-1===r.indexOf(i)&&(this._headers[i]={name:t,value:e})},n.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},n.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},n.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,n=e._headers,i=null;"GET"!==t.method&&"HEAD"!==t.method&&(i=u.arraybuffer?f(l.concat(e._body)):u.blobConstructor?new h.Blob(e._body.map(function(t){return f(t)}),{type:(n["content-type"]||{}).value||""}):l.concat(e._body).toString());var r=[];if(Object.keys(n).forEach(function(t){var e=n[t].name,i=n[t].value;Array.isArray(i)?i.forEach(function(t){r.push([e,t])}):r.push([e,i])}),"fetch"===e._mode){var o=null;if(u.abortController){var a=new AbortController;o=a.signal,e._fetchAbortController=a,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=h.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},t.requestTimeout))}h.fetch(e._opts.url,{method:e._opts.method,headers:r,body:i||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:o}).then(function(t){e._fetchResponse=t,e._connect()},function(t){h.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)})}else{var s=e._xhr=new h.XMLHttpRequest;try{s.open(e._opts.method,e._opts.url,!0)}catch(t){return void c.nextTick(function(){e.emit("error",t)})}"responseType"in s&&(s.responseType=e._mode.split(":")[0]),"withCredentials"in s&&(s.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(s.timeout=t.requestTimeout,s.ontimeout=function(){e.emit("requestTimeout")}),r.forEach(function(t){s.setRequestHeader(t[0],t[1])}),e._response=null,s.onreadystatechange=function(){switch(s.readyState){case d.LOADING:case d.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(s.onprogress=function(){e._onXHRProgress()}),s.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{s.send(i)}catch(t){return void c.nextTick(function(){e.emit("error",t)})}}}},n.prototype._onXHRProgress=function(){(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},n.prototype._connect=function(){var e=this;e._destroyed||(e._response=new i(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},n.prototype._write=function(t,e,i){this._body.push(t),i()},n.prototype.abort=n.prototype.destroy=function(){this._destroyed=!0,h.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},n.prototype.end=function(t,e,i){"function"==typeof t&&(i=t,t=void 0),a.Writable.prototype.end.call(this,t,e,i)},n.prototype.flushHeaders=function(){},n.prototype.setTimeout=function(){},n.prototype.setNoDelay=function(){},n.prototype.setSocketKeepAlive=function(){};var r=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(t,s(801).Buffer,s(48),s(126))},function(t,e){},function(t,e,i){"use strict";var s=i(838).Buffer,n=i(1045);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var e,i,n,r=s.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,i=r,n=a,e.copy(i,n),a+=o.data.length,o=o.next;return r},t}(),n&&n.inspect&&n.inspect.custom&&(t.exports.prototype[n.inspect.custom]=function(){var t=n.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,i){(function(i){function n(t){try{if(!i.localStorage)return!1}catch(t){return!1}var e=i.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}}}).call(e,i(48))},function(t,e,i){"use strict";t.exports=o;var n=i(896),r=i(818);function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}r.inherits=i(793),r.inherits(o,n),o.prototype._transform=function(t,e,i){i(null,t)}},function(t,e,i){var r=i(801).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(r.isBuffer(t)){for(var e=new Uint8Array(t.length),i=t.length,n=0;n<i;n++)e[n]=t[n];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)r.call(i,n)&&(t[n]=i[n])}return t};var r=Object.prototype.hasOwnProperty},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,i){var n=i(886),r=i(876),o=t.exports;for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);function s(t){if("string"==typeof t&&(t=r.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}o.request=function(t,e){return t=s(t),n.request.call(this,t,e)},o.get=function(t,e){return t=s(t),n.get.call(this,t,e)}},function(t,e){},function(t,e,i){var n=i(304)(i(1056),i(1057),function(t){i(1054)},"data-v-59c24f88",null);t.exports=n.exports},function(t,e,i){var n=i(1055);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(590)("97bd8d3a",n,!0,{})},function(t,e,i){(t.exports=i(589)()).push([t.i,"",""])},function(t,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),function(t){var e=u(84),n=u.n(e),i=u(305),r=u.n(i),o=u(306),a=u.n(o),s=u(307),l=u(874),h=u.n(l);u(122);c.default={data:function(){return{skuCanvas:"",searchValue:"",storeSku:[],TModal:[],currSelectedTargetId:-1,prevSelectedTargetId:-1,selectedSku:{}}},props:["addSKUModal","storeInfo","jsonCanvas","canvasWidth","canvasHeight"],computed:{isTargetSelected:function(){return 0<=this.prevSelectedTargetId},isCurrTargetValid:function(){return 0<=this.currSelectedTargetId},currTargetSku:{get:function(){return this.selectedSku[this.currSelectedTargetId.toString()]},set:function(t){this.isCurrTargetValid&&(this.selectedSku[this.currSelectedTargetId.toString()]=t)}}},watch:{addSKUModal:{handler:"drawSkuCanvas",deep:!0}},mounted:function(){this.skuCanvas=new h.a.fabric.Canvas("sku"),this.initData(),this.getSkuList()},methods:{initData:function(){this.prevSelectedTargetId=-1,this.currSelectedTargetId=-1,this.selectedSku=this.storeInfo.store_sku?JSON.parse(this.storeInfo.store_sku):{},this.TModal=[]},getSkuList:function(){var i=this;return a()(r.a.mark(function t(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s._20();case 2:(e=t.sent)&&200===e.code&&(i.storeSku=e.data);case 4:case"end":return t.stop()}},t,i)}))()},drawSkuCanvas:function(){var t=this;this.addSKUModal.state&&(this.initData(),this.skuCanvas.loadFromJSON(this.jsonCanvas,function(){t.skuCanvas.setWidth(t.canvasWidth),t.skuCanvas.setHeight(t.canvasHeight),t.skuCanvas.renderAll(),t.setObjectAction(),t.setEventListener()}))},setObjectAction:function(){t.forEach(this.skuCanvas._objects,function(t){t.hasControls=!1,t.lockMovementX=t.lockMovementY=!0})},setEventListener:function(){this.addObjectSelectListener()},searchGoodsLibrary:function(){},confirmAddSKU:function(){this.currTargetSku=this.TModal,this.saveStoreInfo()},saveStoreInfo:function(){var i=this;return a()(r.a.mark(function t(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s._61({store_sku:n()(i.selectedSku)});case 2:(e=t.sent)&&200===e.code&&(i.storeInfo.store_sku=n()(i.selectedSku),i.$Message.success("添加成功"),i.addSKUModal.state=!1);case 4:case"end":return t.stop()}},t,i)}))()},addObjectSelectListener:function(){var e=this;this.skuCanvas.on("mouse:down",function(t){null!==t.target&&(e.prevSelectedTargetId=e.currSelectedTargetId,e.savePrevTargetSku(),e.currSelectedTargetId=t.target.id,e.showCurrTargetSku())})},savePrevTargetSku:function(){this.isTargetSelected&&(this.selectedSku[this.prevSelectedTargetId.toString()]=this.TModal,this.TModal=[])},showCurrTargetSku:function(){this.TModal=this.currTargetSku},cancelAddSKU:function(){this.addSKUModal.state=!1}}}}.call(c,u(123))},function(t,e){t.exports={render:function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("Modal",{staticClass:"add-SKU add-modal",attrs:{title:"添加SKU",width:"1130","mask-closable":!1},model:{value:i.addSKUModal.state,callback:function(t){i.$set(i.addSKUModal,"state",t)},expression:"addSKUModal.state"}},[n("div",{staticClass:"add-SKU-modal-content add-modal-content"},[n("div",{staticClass:"add-SKU-content content"},[n("canvas",{attrs:{id:"sku"}})]),i._v(" "),n("div",{staticClass:"goods-library library"},[n("p",{staticClass:"PingFangSC-Medium-font title"},[i._v("商品库")]),i._v(" "),n("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"搜索"},on:{"on-enter":i.searchGoodsLibrary},model:{value:i.searchValue,callback:function(t){i.searchValue=t},expression:"searchValue"}}),i._v(" "),i._l(i.storeSku,function(t,e){return n("div",{staticClass:"goods-library-content"},[n("p",[i._v(i._s(e))]),i._v(" "),n("CheckboxGroup",{model:{value:i.TModal,callback:function(t){i.TModal=t},expression:"TModal"}},i._l(t,function(t,e){return n("Checkbox",{key:e,attrs:{label:t}})}))],1)})],2)]),i._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary"},on:{click:i.confirmAddSKU}},[i._v("确认")]),i._v(" "),n("Button",{staticStyle:{"margin-left":"30px","margin-right":"40%"},attrs:{type:"ghost"},on:{click:i.cancelAddSKU}},[i._v("取消")])],1)])},staticRenderFns:[]}},function(t,e,i){var n=i(304)(i(1061),i(1062),function(t){i(1059)},"data-v-27fd231e",null);t.exports=n.exports},function(t,e,i){var n=i(1060);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(590)("492285c4",n,!0,{})},function(t,e,i){(t.exports=i(589)()).push([t.i,"",""])},function(t,f,d){"use strict";Object.defineProperty(f,"__esModule",{value:!0}),function(t){var e=d(785),a=d.n(e),i=d(84),o=d.n(i),n=d(305),s=d.n(n),r=d(306),l=d.n(r),h=d(874),c=d.n(h),u=d(307);d(122);f.default={data:function(){return{floorPlanCanvas:"",storeMaterial:[],addSKUModal:{state:!1}}},props:["addFloorPlanModal","jsonCanvas","storeInfo","canvasHeight","canvasWidth"],computed:{existCanvasObjects:function(){return!t.isEmpty(this.floorPlanCanvas)&&!t.isEmpty(this.floorPlanCanvas._objects)},canvasObjects:function(){return this.existCanvasObjects?this.floorPlanCanvas._objects:[]},targetId:{get:function(){return this.existCanvasObjects?t.maxBy(this.canvasObjects,"id").id+1:0}}},watch:{addFloorPlanModal:{handler:"drawFloorPlan",deep:!0}},created:function(){},mounted:function(){var t;c.a.fabric.Object.prototype.toObject=(t=c.a.fabric.Object.prototype.toObject,function(){return c.a.fabric.util.object.extend(t.call(this),{id:this.id})}),this.floorPlanCanvas=new c.a.fabric.Canvas("floor-plan"),this.getMaterial()},methods:{initData:function(){},drawFloorPlan:function(){var t=this;this.addFloorPlanModal.state&&(this.floorPlanCanvas.loadFromJSON(this.jsonCanvas,function(){t.floorPlanCanvas.setWidth(t.canvasWidth),t.floorPlanCanvas.setHeight(t.canvasHeight),t.floorPlanCanvas.renderAll()}),this.setEventListener())},setEventListener:function(){this.dbClickDeleteObject()},dbClickDeleteObject:function(){var i=this;this.floorPlanCanvas.on("mouse:down",function(e){document.onkeydown=function(t){8===t.keyCode&&e.target&&i.floorPlanCanvas.remove(e.target)}})},getMaterial:function(){var i=this;return l()(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u._13();case 2:(e=t.sent)&&200===e.code&&(i.storeMaterial=e.data);case 4:case"end":return t.stop()}},t,i)}))()},confirmAddFloorPlan:function(){this.saveHotStoreInfo()},cancelAddFloorPlan:function(){this.addFloorPlanModal.state=!1},getUpdateJsonSku:function(){var e=this.storeInfo.store_sku?JSON.parse(this.storeInfo.store_sku):{},i={};return t.forEach(this.floorPlanCanvas._objects,function(t){i[t.id.toString()]=e[t.id.toString()]||[]}),o()(i)},saveHotStoreInfo:function(){var r=this;return l()(s.a.mark(function t(){var e,i,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=o()(r.floorPlanCanvas),i=r.getUpdateJsonSku(),t.next=4,u._61({online_json_canvas:e,store_sku:i});case 4:(n=t.sent)&&200===n.code?(r.$emit("modifyStoreCanvas",o()(r.floorPlanCanvas)),r.storeInfo.store_sku=i,r.$Message.success("添加成功")):r.$Message.error("添加失败"),r.addFloorPlanModal.state=!1;case 7:case"end":return t.stop()}},t,r)}))()},allowDrop:function(t){t.preventDefault()},dragStart:function(t){this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.img=new Image,this.img.src=t.target.currentSrc},drop:function(t){for(var e in this.allowDrop(t),this.addCanvasObject(t),this.floorPlanCanvas._objects)this.floorPlanCanvas.item(e).lockUniScaling=!0;this.limitObjectArea()},getDropPoint:function(t){var e=t.layerX-this.offsetX,i=t.layerY-this.offsetY,n=document.getElementById("floor-plan"),r=this.img.height,o=this.img.width;return e<0?e=0:e+o>n.width&&(e=n.width-o),i<0?i=0:i+r>n.height&&(i=n.height-r),[e,i]},addCanvasObject:function(t){var e=this.getDropPoint(t),i=a()(e,2),n=i[0],r=i[1],o=new c.a.fabric.Image(this.img,{left:n,top:r});o.id=this.targetId,this.floorPlanCanvas.add(o)},limitObjectArea:function(){var n=document.getElementById("floor-plan");this.floorPlanCanvas.on("object:moving",function(t){var e=t.target.aCoords.br.y-t.target.aCoords.tr.y,i=t.target.aCoords.br.x-t.target.aCoords.bl.x;t.target.left<0?t.target.left=0:t.target.left+i>n.width&&(t.target.left=n.width-i),t.target.top<0?t.target.top=0:t.target.top+e>n.height&&(t.target.top=n.height-e)})}}}}.call(f,d(123))},function(t,e){t.exports={render:function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("Modal",{staticClass:"add-floor-plan add-modal",attrs:{title:"添加平面图",width:"1130","mask-closable":!1},model:{value:i.addFloorPlanModal.state,callback:function(t){i.$set(i.addFloorPlanModal,"state",t)},expression:"addFloorPlanModal.state"}},[n("div",{staticClass:"add-FloorPlan-modal-content add-modal-content"},[n("div",{staticClass:"floor-plan-content content",on:{drop:function(t){i.drop(t)},dragover:i.allowDrop}},[n("canvas",{attrs:{id:"floor-plan"}})]),i._v(" "),n("div",{staticClass:"material-library library"},[n("p",{staticClass:"PingFangSC-Medium-font title"},[i._v("素材库")]),i._v(" "),n("div",{staticClass:"material-library-content"},[n("div",{staticClass:"material-library-row-content"},i._l(i.storeMaterial,function(t,e){return n("div",{staticClass:"material-library-row-content-col",attrs:{draggable:"true"},on:{dragstart:function(t){return"button"in t||!i._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?"button"in t&&0!==t.button?null:void i.dragStart(t):null}}},[n("img",{attrs:{src:t}}),i._v(" "),n("p",[i._v(i._s(e))])])}))])])]),i._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary"},on:{click:i.confirmAddFloorPlan}},[i._v("下一步")]),i._v(" "),n("Button",{staticStyle:{"margin-left":"30px","margin-right":"40%"},attrs:{type:"ghost"},on:{click:i.cancelAddFloorPlan}},[i._v("取消\n        ")])],1)])},staticRenderFns:[]}},function(t,e,i){var n=i(1064);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(590)("57ddd5f9",n,!0,{})},function(t,e,i){(t.exports=i(589)()).push([t.i,"",""])},function(t,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),function(h,e){var t=s(784),a=s.n(t),i=s(1066),n=s.n(i),r=s(122);o.default={data:function(){return{intervalList:[0,30,1800,3600,7200],colorList:["rgb(0,0,255)","rgb(0,255,0)","rgb(255,255,0)","rgb(255,115,0)","rgb(255,0,0)"],heatmapInstance:null,storeHeatmap:{max:0,heatmapPoints:[]},maxValue:0,cellNoX:0,cellNoY:0,cellWidth:0,cellHeight:0,hotzoneData:[],gradient:{},height:0,heatmapId:"heatmap"+this.local_camera_id}},props:["heatMapImgHeight","heatData","dateRange","local_camera_id"],watch:{heatData:{handler:"getHotzoneData",deep:!0,immediate:!0},hotzoneData:{handler:"drawHeatMap",deep:!0}},computed:{days:function(){return r.a.dayDiff(this.dateRange.range)}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.drawHeatMap()})},methods:{getHotzoneData:function(){this.heatData&&!h.isEmpty(this.heatData)&&(this.hotzoneData=this.heatData[0].heat_map)},initData:function(){h.isEmpty(this.hotzoneData)||(this.gradient=this.getGradient(),this.height=this.getHeight(),this.cellNoX=this.getCellNoX(),this.cellNoY=this.getCellNoY(),this.cellWidth=this.getCellWidth(),this.cellHeight=this.getCellHeight(),this.maxValue=this.getHeatMapDataMax(),this.storeHeatmap.heatmapPoints=this.getHeatMapPoints())},createHeatMapInstance:function(){var t=e("#"+this.heatmapId);t.empty(),t.length&&(t.css({height:this.heatMapImgHeight,width:"700px"}),this.heatmapInstance=n.a.create({container:t[0],radius:22,maxOpacity:.8,minOpacity:0,blur:.95}))},setHeatMapInstance:function(){var t={max:this.maxValue/this.days,min:1,data:this.storeHeatmap.heatmapPoints};this.heatmapInstance.setData(t)},drawHeatMap:function(){this.initData(),this.createHeatMapInstance(),this.setHeatMapInstance()},getHeatMapPoints:function(){var t=[];for(var e in this.hotzoneData){var i=this.cellHeight*e;for(var n in this.hotzoneData[e]){var r=this.cellWidth*n,o=(this.local_camera_id,this.hotzoneData[e][n]/this.days);t.push.apply(t,a()(this.getCellPoints(r,i,o)))}}return t},getCellPoints:function(t,e,i){for(var n=[],r=this.cellHeight/2,o=this.cellWidth/5,a=0;a<this.cellHeight;a+=r)for(var s=0;s<this.cellWidth;s+=o){var l={x:h.floor(t+Math.random()*o+s),y:h.floor(e+Math.random()*r+a),value:h.floor(i)};0<l.value&&n.push(l)}return n},getHeatMapMax:function(){return h.last(this.intervalList)},getHeatMapDataMax:function(){return h.max(h.flattenDeep(this.hotzoneData))},getHeight:function(){return this.heatMapImgHeight},getScaleHeatInterval:function(){var e=this;return h.map(this.intervalList,function(t){return(t/e.storeHeatmap.max).toFixed(3)})},getGradient:function(){this.storeHeatmap.max=this.getHeatMapMax();var t=this.getScaleHeatInterval();return t=[.2,.6,.7,.8,.99],h.zipObject(t,this.colorList)},getCellNoX:function(){return this.hotzoneData[0].length},getCellNoY:function(){return this.hotzoneData.length},getCellWidth:function(){return h.floor(700/this.cellNoX)},getCellHeight:function(){return h.floor(this.height/this.cellNoY)}}}}.call(o,s(123),s(847))},function(t,e,i){var n,r,o;o=function(){var t,u,e,l={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},h=(t=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},u=l.defaultRadius,t.prototype={_organiseData:function(t,e){var i=t[this._xField],n=t[this._yField],r=this._radi,o=this._data,a=this._max,s=this._min,l=t[this._valueField]||1,h=t.radius||this._cfgRadius||u;o[i]||(o[i]=[],r[i]=[]),o[i][n]?o[i][n]+=l:(o[i][n]=l,r[i][n]=h);var c=o[i][n];return a<c?(e?this.setDataMax(c):this._max=c,!1):c<s?(e?this.setDataMin(c):this._min=c,!1):{x:i,y:n,value:l,radius:h,min:s,max:a}},_unOrganizeData:function(){var t=[],e=this._data,i=this._radi;for(var n in e)for(var r in e[n])t.push({x:n,y:r,radius:i[n][r],value:e[n][r]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(0<arguments[0].length)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var i=this._organiseData(arguments[0],!0);i&&(0===this._data.length&&(this._min=this._max=i.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[i]}))}return this},setData:function(t){var e=t.data,i=e.length;this._data=[],this._radi=[];for(var n=0;n<i;n++)this._organiseData(e[n],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},t),i=function(){var o=function(t){var e=t.gradient||t.defaultGradient,i=document.createElement("canvas"),n=i.getContext("2d");i.width=256,i.height=1;var r=n.createLinearGradient(0,0,256,1);for(var o in e)r.addColorStop(o,e[o]);return n.fillStyle=r,n.fillRect(0,0,256,1),n.getImageData(0,0,256,1).data},g=function(t,e){var i=document.createElement("canvas"),n=i.getContext("2d"),r=t,o=t;if(i.width=i.height=2*t,1==e)n.beginPath(),n.arc(r,o,t,0,2*Math.PI,!1),n.fillStyle="rgba(0,0,0,1)",n.fill();else{var a=n.createRadialGradient(r,o,t*e,r,o,t);a.addColorStop(0,"rgba(0,0,0,1)"),a.addColorStop(1,"rgba(0,0,0,0)"),n.fillStyle=a,n.fillRect(0,0,2*t,2*t)}return i};function t(t){var e=t.container,i=this.shadowCanvas=document.createElement("canvas"),n=this.canvas=t.canvas||document.createElement("canvas"),r=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(t.container)||{});n.className="heatmap-canvas",this._width=n.width=i.width=t.width||+r.width.replace(/px/,""),this._height=n.height=i.height=t.height||+r.height.replace(/px/,""),this.shadowCtx=i.getContext("2d"),this.ctx=n.getContext("2d"),n.style.cssText=i.style.cssText="position:absolute;left:0;top:0;",e.style.position="relative",e.appendChild(n),this._palette=o(t),this._templates={},this._setStyles(t)}return t.prototype={renderPartial:function(t){0<t.data.length&&(this._drawAlpha(t),this._colorize())},renderAll:function(t){this._clear(),0<t.data.length&&(this._drawAlpha(function(t){for(var e=[],i=t.min,n=t.max,r=t.radi,o=(t=t.data,Object.keys(t)),a=o.length;a--;)for(var s=o[a],l=Object.keys(t[s]),h=l.length;h--;){var c=l[h],u=t[s][c],f=r[s][c];e.push({x:s,y:c,value:u,radius:f})}return{min:i,max:n,data:e}}(t)),this._colorize())},_updateGradient:function(t){this._palette=o(t)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=t.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=t.height||this._height,this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var e=this._min=t.min,i=this._max=t.max,n=(t=t.data||[]).length,r=1-this._blur;n--;){var o,a=t[n],s=a.x,l=a.y,h=a.radius,c=Math.min(a.value,i),u=s-h,f=l-h,d=this.shadowCtx;this._templates[h]?o=this._templates[h]:this._templates[h]=o=g(h,r);var p=(c-e)/(i-e);d.globalAlpha=p<.01?.01:p,d.drawImage(o,u,f),u<this._renderBoundaries[0]&&(this._renderBoundaries[0]=u),f<this._renderBoundaries[1]&&(this._renderBoundaries[1]=f),u+2*h>this._renderBoundaries[2]&&(this._renderBoundaries[2]=u+2*h),f+2*h>this._renderBoundaries[3]&&(this._renderBoundaries[3]=f+2*h)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],i=this._renderBoundaries[2]-t,n=this._renderBoundaries[3]-e,r=this._width,o=this._height,a=this._opacity,s=this._maxOpacity,l=this._minOpacity,h=this._useGradientOpacity;t<0&&(t=0),e<0&&(e=0),r<t+i&&(i=r-t),o<e+n&&(n=o-e);for(var c=this.shadowCtx.getImageData(t,e,i,n),u=c.data,f=u.length,d=this._palette,p=3;p<f;p+=4){var g,v=u[p],m=4*v;if(m)g=0<a?a:v<s?v<l?l:v:s,u[p-3]=d[m],u[p-2]=d[m+1],u[p-1]=d[m+2],u[p]=h?d[m+3]:g}c.data=u,this.ctx.putImageData(c,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e=this.shadowCtx.getImageData(t.x,t.y,1,1).data[3],i=this._max,n=this._min;return Math.abs(i-n)*(e/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},t}(),c=(e=!1,"canvas2d"===l.defaultRenderer&&(e=i),e),f=function(){for(var t={},e=arguments.length,i=0;i<e;i++){var n=arguments[i];for(var r in n)t[r]=n[r]}return t},n=function(){var s=function(){function t(){this.cStore={}}return t.prototype={on:function(t,e,i){var n=this.cStore;n[t]||(n[t]=[]),n[t].push(function(t){return e.call(i,t)})},emit:function(t,e){var i=this.cStore;if(i[t])for(var n=i[t].length,r=0;r<n;r++){(0,i[t][r])(e)}}},t}();function t(){var e,t,i,n,r=this._config=f(l,arguments[0]||{});if(this._coordinator=new s,r.plugin){var o=r.plugin;if(!l.plugins[o])throw new Error("Plugin '"+o+"' not found. Maybe it was not registered.");var a=l.plugins[o];this._renderer=new a.renderer(r),this._store=new a.store(r)}else this._renderer=new c(r),this._store=new h(r);t=(e=this)._renderer,i=e._coordinator,n=e._store,i.on("renderpartial",t.renderPartial,t),i.on("renderall",t.renderAll,t),i.on("extremachange",function(t){e._config.onExtremaChange&&e._config.onExtremaChange({min:t.min,max:t.max,gradient:e._config.gradient||e._config.defaultGradient})}),n.setCoordinator(i)}return t.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=f(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},t}();return{create:function(t){return new n(t)},register:function(t,e){l.plugins[t]=e}}},void 0!==t&&t.exports?t.exports=o():void 0===(r="function"==typeof(n=o)?n.call(e,i,e,t):n)||(t.exports=r)},function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{style:"height:"+this.storeHeatmap.heatMapImgHeight+";",attrs:{id:this.heatmapId}})])},staticRenderFns:[]}},function(t,e,i){var n=i(304)(i(1071),i(1072),function(t){i(1069)},"data-v-ce522066",null);t.exports=n.exports},function(t,e,i){var n=i(1070);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(590)("285ca8ce",n,!0,{})},function(t,e,i){(t.exports=i(589)()).push([t.i,".hot-area-table[data-v-ce522066]{width:300px;margin-left:40px}.hot-area-title[data-v-ce522066]{font-size:14px;padding:20px 10px}.hot-area-list[data-v-ce522066]{height:350px;overflow:scroll}.hot-area-cell[data-v-ce522066]{padding:10px}.hot-area-cell.index[data-v-ce522066]{padding:10px 0}",""])},function(t,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),function(r){var t=u(305),n=u.n(t),e=u(306),o=u.n(e),a=u(307),i=u(82),s=u(122),l=u(673),h=u.n(l);c.default={props:{storeAttributeData:{type:Array,default:[]}},components:{Loading:h.a},data:function(){return{requestCameras:[]}},computed:{cameraInfoList:{get:function(){return r.map(this.requestCameras,function(t){return{id:t.id.toString(),name:t.name,local_camera_id:t.local_camera_id.toString()}})}},bindHotAreaBoard:function(){var i=this,n=0;return 0!==this.totalStayTime&&(n=1/this.totalStayTime*100),r.map(this.cameraInfoList,function(t){var e=r.result(i.stayTimeObject,t.id,0);return{order:e*n,name:t.name+" - "+t.local_camera_id,percentage:(e*n).toFixed(2)+"%",stayTime:s.a.formatSeconds(e)}}).sort(function(t,e){return e.order-t.order})},stayTimeObject:function(){var t="0."+i.a.ATTR_STAY_TIME_G_CAMERA;return r.result(this.storeAttributeData,t,{})},totalStayTime:function(){return r.isEmpty(this.stayTimeObject)?0:r.sum(r.values(this.stayTimeObject))}},created:function(){this.initData()},methods:{initData:function(){this.getCameraList()},getCameraList:function(){var i=this;return o()(n.a.mark(function t(){var e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.W();case 2:(e=t.sent)&&200===e.code&&(i.requestCameras=e.data);case 4:case"end":return t.stop()}},t,i)}))()}}}}.call(c,u(123))},function(t,e){t.exports={render:function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"hot-area-table"},[n("p",{staticClass:"hot-area-title PingFangSC-Medium-font"},[i._v("热门区域列表")]),i._v(" "),n("Row",{staticClass:"hot-area-header"},[n("Col",{staticClass:"hot-area-cell index",attrs:{span:"3"}},[n("span",{staticClass:"PingFangSC-Medium-font"},[i._v("序号")])]),i._v(" "),n("Col",{staticClass:"hot-area-cell",attrs:{span:"7"}},[n("span",{staticClass:"PingFangSC-Medium-font"},[i._v("摄像头名称")])]),i._v(" "),n("Col",{staticClass:"hot-area-cell",attrs:{span:"7"}},[n("span",{staticClass:"PingFangSC-Medium-font"},[i._v("停留百分比")])]),i._v(" "),n("Col",{staticClass:"hot-area-cell",attrs:{span:"7"}},[n("span",{staticClass:"PingFangSC-Medium-font"},[i._v("停留总时间")])])],1),i._v(" "),n("loading",{attrs:{height:"350px",loadingState:!i.requestCameras.length}}),i._v(" "),n("div",{staticClass:"hot-area-list"},i._l(i.bindHotAreaBoard,function(t,e){return i.bindHotAreaBoard.length?n("Row",{key:e,staticClass:"hot-area-item"},[n("Col",{staticClass:"hot-area-cell",attrs:{span:"3"}},[n("span",[i._v(i._s(e+1))])]),i._v(" "),n("Col",{staticClass:"hot-area-cell",attrs:{span:"7"}},[n("span",[i._v(i._s(t.name))])]),i._v(" "),n("Col",{staticClass:"hot-area-cell",attrs:{span:"7"}},[n("span",[i._v(i._s(t.percentage))])]),i._v(" "),n("Col",{staticClass:"hot-area-cell",attrs:{span:"7"}},[n("span",[i._v(i._s(t.stayTime))])])],1):i._e()}))],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",[n("div",{staticClass:"store-hot-content"},[n("p",{staticClass:"store-hot-content-title PingFangSC-Medium-font"},[i._v("热力区域")]),i._v(" "),n("div",{staticClass:"store-hot-content-area"},[n("div",{staticClass:"store-hot-content-area-content"},[n("div",{ref:"hotAreaCon",staticClass:"store-hot-content-area-content-map",staticStyle:{position:"relative"}},[i._m(0),i._v(" "),n("p",{staticClass:"store-hot-content-area-option"},[n("span",{staticStyle:{"margin-right":"60px"},on:{click:i.adjustFloorPlan}},[i._v("调整平面图")]),i._v(" "),n("span",{on:{click:i.adjustSKU}},[i._v("调整货架SKU")])]),i._v(" "),n("loading",{attrs:{loadingState:!i.canvasHeight,classname:"storehot-loading"}}),i._v(" "),i._m(1),i._v(" "),i.canvasHeight?n("div",[n("AppHeatMap",{attrs:{storeAttributeData:i.storeAttributeData,heatMapImgHeight:i.canvasHeight,heatData:i.heatData,dateRange:i.dateRange}})],1):i._e()],1),i._v(" "),n("div",{staticClass:"store-hot-content-area-content__area"},[n("app-hot-area-table",{attrs:{storeAttributeData:i.storeAttributeData}})],1)])])]),i._v(" "),n("div",{ref:"SKUData",staticClass:"show-current-goods-sku"},[n("p",{staticClass:"PingFangSC-Medium-font area-sku-list-title"},[i._v("区域SKU列表")]),i._v(" "),n("div",{staticStyle:{overflow:"hidden",padding:"0 18px"}},i._l(i.targetSKUList,function(t,e){return n("p",{key:e,staticClass:"show-current-goods-sku-list"},[i._v("\n                "+i._s(t)+"\n            ")])}))]),i._v(" "),n("AppAddSkuModal",{attrs:{canvasHeight:i.canvasHeight,canvasWidth:i.canvasWidth,jsonCanvas:i.jsonCanvas,addSKUModal:i.addSKUModal,storeInfo:i.storeInfo}}),i._v(" "),n("AppFloorPlanModal",{attrs:{canvasHeight:i.canvasHeight,canvasWidth:i.canvasWidth,addFloorPlanModal:i.addFloorPlanModal,jsonCanvas:i.jsonCanvas,storeInfo:i.storeInfo},on:{modifyStoreCanvas:function(t){i.reDrawStoreAndObject(t)}}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"intensity"},[i("li",[t._v("稀疏")]),t._v(" "),i("li",[i("p",{staticClass:"intensity-style intensity-style-five"}),t._v(" "),i("p",{staticClass:"intensity-num"},[t._v("0-30")])]),t._v(" "),i("li",[i("p",{staticClass:"intensity-style intensity-style-four"}),t._v(" "),i("p",{staticClass:"intensity-num"},[t._v("30-50")])]),t._v(" "),i("li",[i("p",{staticClass:"intensity-style intensity-style-three"}),t._v(" "),i("p",{staticClass:"intensity-num"},[t._v("50-95")])]),t._v(" "),i("li",[i("p",{staticClass:"intensity-style intensity-style-two"}),t._v(" "),i("p",{staticClass:"intensity-num"},[t._v("95-150")])]),t._v(" "),i("li",[i("p",{staticClass:"intensity-style intensity-style-one"}),t._v(" "),i("p",{staticClass:"intensity-num"},[t._v("150+")])]),t._v(" "),i("li",[t._v("密集")]),t._v(" "),i("li",[t._v("(分钟)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{position:"absolute",top:"0",left:"0"}},[e("canvas",{attrs:{id:"background-plan"}})])}]}},function(t,e,i){var n=i(304)(i(1077),i(1080),function(t){i(1075)},"data-v-40f07106",null);t.exports=n.exports},function(t,e,i){var n=i(1076);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(590)("cae8bfe0",n,!0,{})},function(t,e,i){(t.exports=i(589)()).push([t.i,"",""])},function(t,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),function(e){var t=f(305),n=f.n(t),i=f(306),r=f.n(i),o=f(307),a=f(898),s=f.n(a),l=f(839),h=f(82),c=f(122);u.default={mixins:[l.a],data:function(){return{requestCameras:[],chartSelector:{currentLabel:"分时段趋势图",format:{"分时段趋势图":function(t){return t},"时段累计图":function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(i){var n=Array(i.length);return e.forEach(i,function(t,e){n[e]=0<e?i[e]+n[e-1]:i[e]}),n})}},cameraDetailData:[{name:"zone_customer",title:"区域顾客数",data:"-",weekBefore:"-",filter:function(t){return t},ifup:!0,active:!1},{name:h.a.ATTR_TRACE_COUNT_G_CAMERA,title:"区域客流数",data:"-",weekBefore:"-",filter:function(t){return t},ifup:!0,active:!0},{name:h.a.ATTR_STAY_TIME_G_CAMERA,title:"区域停留时长",data:"-",weekBefore:"-",filter:function(t){return c.a.formatSeconds(t)},ifup:!0,active:!0},{name:"zone_male",title:"区域男性顾客",data:"-",weekBefore:"-",filter:function(t){return t},ifup:!0,active:!1},{name:"zone_female",title:"区域女性顾客",data:"-",weekBefore:"-",filter:function(t){return t},ifup:!1,active:!1}],cameraDetailDataChild:[{name:"zone_stop_rate",title:"区域驻足率",data:"-",weekBefore:"-",ifup:!0},{name:"zone_child",title:"儿童顾客",data:"-",weekBefore:"-",ifup:!0},{name:"zone_young",title:"青年顾客",data:"-",weekBefore:"-",ifup:!0},{name:"zone_midlife",title:"中年顾客",data:"-",weekBefore:"-",ifup:!0},{name:"zone_old",title:"老年顾客",data:"-",weekBefore:"-",ifup:!0}]}},computed:{dataByCamera:function(){return this.getDataByKeys()},cameraInfoList:{get:function(){return e.map(this.requestCameras,function(t){return{id:t.id.toString(),name:t.name,local_camera_id:t.local_camera_id.toString()}})}},requestParamKeys:function(){return e.chain(this.cameraDetailData).filter({active:!0}).map(function(t){return t.name}).value()},isActiveValid:function(){return!e.isEmpty(this.activeData)},activeData:function(){return e.isEmpty(this.dataByCamera)?{}:this.dataByCamera[0]},compareActiveData:function(){return e.isEmpty(this.dataByCamera)?{}:this.dataByCamera[1]},compareData:function(){var r=this;if(e.isEmpty(this.activeData)||e.isEmpty(this.compareActiveData))return{};var o={};return e.forEach(this.activeData,function(t,n){o[n]={},e.forEach(t,function(t,e){var i=r.compareActiveData[n];o[n][e]=c.a.calculateGrowthRate(t,i[e])})}),o}},components:{heatMapChart:s.a},props:["storeAttributeData","dateRange"],watch:{},mounted:function(){this.initData()},methods:{initData:function(){this.getCameraList()},getCameraList:function(){var i=this;return r()(n.a.mark(function t(){var e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.W();case 2:(e=t.sent)&&e.data&&(i.requestCameras=e.data);case 4:case"end":return t.stop()}},t,i)}))()}}}}.call(u,f(123))},function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(t){var e=s(769),i=s.n(e),n=s(839),r=s(82),o=s(600);s(674),s(670),s(671),s(672),a.default={mixins:[n.a],props:{className:{type:String,default:"heatMapChart"},id:{type:String,default:"heatMapChart"},width:{type:String,default:"100%"},height:{type:String,default:"100%"},chartSelector:{},storeAttributeData:{}},data:function(){return{myChart:"",requestParamKeys:[r.a.ATTR_TRACE_COUNT_G_HOUR_G_CAMERA]}},computed:{heatMapChartData:function(){return this.chartSelector.format[this.chartSelector.currentLabel](t.at(this.heatMapChartDataRaw,t.sortedUniq(i()(this.heatMapChartDataRaw))))},heatMapChartDataAll:function(){return this.getDataByKeys()},heatMapChartDataRaw:function(){return t.isEmpty(this.heatMapChartDataAll)?[]:this.heatMapChartDataAll[0][r.a.ATTR_TRACE_COUNT_G_HOUR_G_CAMERA][this.id]}},watch:{chartSelector:{handler:"initChart",deep:!0}},mounted:function(){this.initChart()},methods:{menuSizeChange:function(){this.myChart.resize()},initChart:function(){var t=document.getElementById(this.id),e=o.init(t);this.myChart=e;for(var i=[],n=0;n<24;n++)i[n]=n+":00";var r={backgroundColor:"white",tooltip:{trigger:"axis",formatter:function(t){t[0].name=t[0].name.split(":")[0];var e='<p style="height: 22px;line-height: 22px;">'+t[0].name+":00-"+t[0].name+':59</p><div style="background-color:#F5F7F9;font-size:12px;padding:6px;">';return t.forEach(function(t){e+='<p style="height: 22px;line-height: 22px;"><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+t.color+'"></span>',e+=t.seriesName+"：",e+=isNaN(t.value)?0:t.value+"</p>"}),e+="</div>"},backgroundColor:"rgba(255,255,255,1)",padding:[10,10],extraCssText:"box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);",axisPointer:{lineStyle:{color:"#ccc"}},textStyle:{color:"#000",lineHeight:"100px"}},grid:{left:"30px",right:"30px",bottom:"40px",top:"10px"},xAxis:[{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#57617B"}},textStyle:{fontSize:10,color:"#4A4A4A"},data:i}],yAxis:[{type:"value",axisLine:{show:!1,lineStyle:{color:"#57617B"}},axisTick:{show:!1},axisLabel:{show:!1,margin:10,textStyle:{fontSize:14}},splitLine:{lineStyle:{color:"#F1F4F8"}},max:function(t){return t.max+Math.ceil(t.max/5)}}],series:[{name:"区域客流数",type:"line",smooth:!0,symbol:"circle",symbolSize:5,showSymbol:!1,lineStyle:{normal:{width:2}},itemStyle:{normal:{color:"rgb(237,163,58)",borderColor:"rgba(237,163,58, 1)",borderWidth:1}},data:this.heatMapChartData}]};e.setOption(r),window.addEventListener("resize",function(){e.resize()})}}}}.call(a,s(123))},function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,style:{height:this.height,width:"100%"},attrs:{id:this.id}})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var n=this,t=n.$createElement,r=n._self._c||t;return r("div",{staticClass:"detail-data"},[r("p",{staticClass:"store-hot-content-title PingFangSC-Medium-font detail-info"},[n._v("详细数据")]),n._v(" "),r("Tabs",{staticClass:"camera-tab",attrs:{animated:!1}},n._l(n.cameraInfoList,function(i,t){return r("TabPane",{key:t,attrs:{label:i.name+" - "+i.local_camera_id,name:i.local_camera_id}},[r("div",{staticClass:"store-hot-area-tabs"},n._l(n.cameraDetailData,function(t,e){return r("div",{key:e,staticClass:"store-hot-area-tabs-content-list"},[r("div",[r("p",[n._v(n._s(t.title))]),n._v(" "),t.active&&n.isActiveValid?r("p",{staticClass:"store-hot-area-tabs-content-list-data"},[n._v("\n                            "+n._s(t.filter(n.activeData[t.name][i.local_camera_id.toString()]))+"\n                            ")]):r("p",{staticClass:"store-hot-area-tabs-content-list-data"},[n._v(n._s(t.data))]),n._v(" "),r("p",[n._v("较前"+n._s(n.dateRange.value)+"天\n                            "),t.active&&n.isActiveValid&&n.compareData?r("span",{class:t.ifup?"upData":"downData"},[n._v("\n                                "+n._s(n.compareData[t.name][i.local_camera_id.toString()])+"\n                            ")]):r("span",{class:t.ifup?"upData":"downData"},[n._v("\n                                "+n._s("-")+"\n                            ")])])])])})),n._v(" "),r("div",{staticClass:"store-hot-area-tabs hotDataChild"},n._l(n.cameraDetailDataChild,function(t,e){return r("div",{key:e,staticClass:"store-hot-area-tabs-content-list store-hot-data-children"},[r("div",[r("p",[n._v(n._s(t.title))]),n._v(" "),t.active?r("p",{staticClass:"store-hot-area-tabs-content-list-data"},[n._v("\n                            "+n._s(t.data)+"\n                            "),r("span",{staticStyle:{"font-size":"12px"}},[n._v("分")])]):r("p",{staticClass:"store-hot-area-tabs-content-list-data"},[n._v(n._s(t.data))]),n._v(" "),r("p",[n._v("较前"+n._s(n.dateRange.value)+"天\n                            "),r("span",{class:t.ifup?"upData":"downData"},[n._v("\n                                "+n._s(t.weekBefore)+"\n                            ")])])])])})),n._v(" "),r("div",{staticClass:"heatMapChart-content"},[r("Radio-group",{staticClass:"store-hot-content-type",model:{value:n.chartSelector.currentLabel,callback:function(t){n.$set(n.chartSelector,"currentLabel",t)},expression:"chartSelector.currentLabel"}},n._l(n.chartSelector.format,function(t,e){return r("Radio",{key:e,attrs:{label:e}})})),n._v(" "),r("heatMapChart",{staticClass:"heatMapChart",attrs:{height:"350px",width:"100%",id:i.local_camera_id,chartSelector:n.chartSelector,storeAttributeData:n.storeAttributeData}})],1)])}))],1)},staticRenderFns:[]}},function(t,e,i){var n=i(304)(i(1084),i(1090),function(t){i(1082)},"data-v-13cc5004",null);t.exports=n.exports},function(t,e,i){var n=i(1083);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(590)("2e06bab3",n,!0,{})},function(t,e,i){(t.exports=i(589)()).push([t.i,".camera-heatmap-container[data-v-13cc5004]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;padding:0 10px}.camera-heatmap__draw[data-v-13cc5004]{width:700px;padding:0;margin:0}",""])},function(t,m,y){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),function(o){var t=y(305),n=y.n(t),e=y(306),r=y.n(e),i=y(87),a=y.n(i),s=y(307),l=y(898),h=y.n(l),c=y(839),u=y(897),f=y.n(u),d=y(82),p=y(83),g=(y(122),y(1085)),v=y.n(g);m.default={mixins:[c.a],data:function(){return{requestCameras:null,canvasWidth:700,canvasHeight:0,selected_local_camera_id:-1}},computed:{cameraInfoList:{get:function(){return o.map(this.requestCameras,function(t){return{id:t.id.toString(),name:t.name,local_camera_id:t.local_camera_id.toString(),big_image:p.a.ImgSrc+t.big_image,canvasHeight:392}})}},heatDataList:function(){var t=this.storeAttributeData[0][d.a.ATTR_HEAT_MAP_ORIGIN_G_CAMERA],i={};return o.forEach(t,function(t,e){i[e]=[{heat_map:t}]}),i}},components:{heatMapChart:h.a,AppHeatMap:f.a,CameraHeatmapData:v.a},props:["storeAttributeData","dateRange"],watch:{},mounted:function(){this.initData()},methods:{drawHeatMap:function(t){this.selected_local_camera_id=t},getCanvasHeight:function(n){var r=this;return o.isEmpty(n)?0:new a.a(function(t){var e="?"+(new Date).getTime(),i=new Image;i.onload=function(){t(o.floor(i.height*r.canvasWidth/i.width))},i.src=p.a.ImgSrc+n+e})},initData:function(){var e=this;return r()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCameraList();case 2:case"end":return t.stop()}},t,e)}))()},getCameraList:function(){var i=this;return r()(n.a.mark(function t(){var e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.W();case 2:(e=t.sent)&&200===e.code&&(i.requestCameras=e.data,i.selected_local_camera_id=i.cameraInfoList[0].id.toString());case 4:case"end":return t.stop()}},t,i)}))()}}}}.call(m,y(123))},function(t,e,i){var n=i(304)(i(1088),i(1089),function(t){i(1086)},"data-v-8c1bb870",null);t.exports=n.exports},function(t,e,i){var n=i(1087);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(590)("994fc586",n,!0,{})},function(t,e,i){(t.exports=i(589)()).push([t.i,".camera-heatmap__data[data-v-8c1bb870]{height:392px;width:calc(100% - 720px)}.camera-heatmap__data__grid[data-v-8c1bb870]{display:flex;flex-wrap:wrap;flex-direction:row;height:50%;align-items:center;border:1px solid #DDD}.grid-border[data-v-8c1bb870]{border-top:none}.camera-heatmap__data__box[data-v-8c1bb870]{width:50%;height:80%;border-right:1px solid #DDD;display:flex;flex-direction:column;justify-content:center;align-items:center}.camera-heatmap__data__box[data-v-8c1bb870]:last-child{border-right:none}.camera-heatmap__data__box p.data-compare[data-v-8c1bb870],.camera-heatmap__data__box p.data-title[data-v-8c1bb870]{text-align:center;height:20%}.camera-heatmap__data__box p.data-value[data-v-8c1bb870]{font-size:30px;font-family:'Helvetica Neue',Tahoma,Helvetica,Arial,'Microsoft YaHei';text-align:center;height:40%}.data-compare .up-data[data-v-8c1bb870]{color:#F76D6D}.data-compare .down-data[data-v-8c1bb870]{color:#5FBBA7}",""])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(s){var l=i(122),t=i(82);e.default={data:function(){return{firstBoard:[{title:"区域客流数",value:"-",isActive:!0,path:t.a.ATTR_TRACE_COUNT_G_CAMERA,proportion:"-",isUp:!0},{title:"区域顾客数",value:"-",isActive:!1,path:"",proportion:"-",isUp:!0}],secondBoard:[{title:"区域总停留时长",value:"-",isActive:!0,path:t.a.ATTR_STAY_TIME_G_CAMERA,proportion:"-",isUp:!0},{title:"区域平均停留时长",value:"-",isActive:!0,path:t.a.ATTR_AVG_STAY_TIME_G_CAMERA,proportion:"-",isUp:!0}]}},computed:{days:function(){return l.a.dayDiff(this.dateRange.range)},firstBoardValues:function(){var a=this;return s.forEach(this.firstBoard,function(t,e){var i=s.join(["0",t.path,a.selected_local_camera_id],"."),n=s.join(["1",t.path,a.selected_local_camera_id],"."),r=s.result(a.storeAttributeData,i,"-"),o=s.result(a.storeAttributeData,n,"-");t.value=r,t.proportion=l.a.calculateGrowthRate(t.value,o,!0),t.isUp=0<=t.proportion,t.proportion+="%"}),this.firstBoard},secondBoardValues:function(){var o=this;return s.forEach(this.secondBoard,function(t,e){var i=s.join(["0",t.path,o.selected_local_camera_id],"."),n=s.join(["1",t.path,o.selected_local_camera_id],".");t.value=s.result(o.storeAttributeData,i,"-");var r=s.result(o.storeAttributeData,n,"-");t.proportion=l.a.calculateGrowthRate(t.value,r,!0),t.value=l.a.formatSeconds(t.value),t.isUp=0<=t.proportion,t.proportion+="%"}),this.secondBoard}},props:["storeAttributeData","dateRange","selected_local_camera_id"]}}.call(e,i(123))},function(t,e){t.exports={render:function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"camera-heatmap__data"},[n("div",{staticClass:"camera-heatmap__data__grid"},i._l(i.firstBoardValues,function(t,e){return n("div",{key:e,staticClass:"camera-heatmap__data__box"},[n("p",{staticClass:"data-title"},[i._v(i._s(t.title))]),i._v(" "),n("p",{staticClass:"data-value"},[i._v(i._s(t.value))]),i._v(" "),n("p",{staticClass:"data-compare"},[n("span",[i._v("较前"+i._s(i.days)+"天")]),i._v(" "),n("span",{class:t.isUp?"up-data":"down-data"},[i._v("\n                    "+i._s(t.proportion)+"\n                ")])])])})),i._v(" "),n("div",{staticClass:"camera-heatmap__data__grid grid-border"},i._l(i.secondBoardValues,function(t,e){return n("div",{key:e,staticClass:"camera-heatmap__data__box"},[n("p",{staticClass:"data-title"},[i._v(i._s(t.title))]),i._v(" "),n("p",{staticClass:"data-value"},[i._v(i._s(t.value))]),i._v(" "),n("p",{staticClass:"data-compare"},[n("span",[i._v("较前"+i._s(i.days)+"天")]),i._v(" "),n("span",{class:t.isUp?"up-data":"down-data"},[i._v("\n                    "+i._s(t.proportion)+"\n                ")])])])}))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"detail-data"},[n("p",{staticClass:"store-hot-content-title PingFangSC-Medium-font detail-info"},[i._v("详细数据")]),i._v(" "),n("Tabs",{staticClass:"camera-tab",attrs:{animated:!1},on:{"on-click":function(t){i.drawHeatMap(t)}}},i._l(i.cameraInfoList,function(t,e){return n("TabPane",{key:e,attrs:{label:t.name+" - "+t.local_camera_id,name:t.id}},[n("div",{staticClass:"camera-heatmap-container"},[n("div",{staticClass:"camera-heatmap__draw"},[t.canvasHeight&&i.selected_local_camera_id===t.id?n("div",{style:"background: url("+t.big_image+"); background-repeat: no-repeat;background-size: 700px 392px"},[n("AppHeatMap",{attrs:{storeAttributeData:i.storeAttributeData,heatMapImgHeight:t.canvasHeight,heatData:i.heatDataList[t.id],local_camera_id:t.id,dateRange:i.dateRange}})],1):i._e()]),i._v(" "),n("CameraHeatmapData",{attrs:{storeAttributeData:i.storeAttributeData,dateRange:i.dateRange,selected_local_camera_id:i.selected_local_camera_id}})],1)])}))],1)},staticRenderFns:[]}},function(t,r,h){"use strict";(function(o){h.d(r,"a",function(){return n});var t=h(305),a=h.n(t),e=h(306),s=h.n(e),i=h(781),l=h(82),n={extends:i.a,created:function(){},computed:{},methods:{getInStoreHeatmap:function(e,i){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[l.a.ATTR_HEAT_MAP,l.a.ATTR_AVG_STAY_TIME,l.a.ATTR_TRACE_COUNT,l.a.ATTR_TRACE_COUNT_G_HOUR,l.a.ATTR_AVG_STAY_TIME_G_CAMERA,l.a.ATTR_TRACE_COUNT_G_CAMERA];return s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.isString(r)?[r]:r,t.next=3,n.getStoreAttributeDataAction([e,i],r);case 3:case"end":return t.stop()}},t,n)}))()}}}}).call(r,h(123))},function(t,e){t.exports={render:function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"store-hot"},[n("div",{staticClass:"store-hot-header"},[n("p",{staticClass:"store-hot-header-title PingFangSC-Medium-font"},[i._v("店铺热区")]),i._v(" "),n("p",{staticStyle:{float:"right","margin-right":"28px"}},[i._v(i._s(i.bindDateRangeText))]),i._v(" "),n("p",{staticStyle:{width:"100px",float:"right","margin-right":"28px"}},[n("Select",{on:{"on-change":i.getDataAndRefresh},model:{value:i.dateRange.value,callback:function(t){i.$set(i.dateRange,"value",t)},expression:"dateRange.value"}},i._l(i.heatmapDateRangeList,function(t,e){return n("Option",{key:e,attrs:{value:t.value}},[i._v("\n                    "+i._s(t.text)+"\n                ")])}))],1)]),i._v(" "),i.isRenderStoreHeapMap?n("div",[n("AppStoreHeatmap",{attrs:{storeAttributeData:i.storeAttributeData,dateRange:i.dateRange}})],1):i._e(),i._v(" "),n("div",{staticClass:"interval"}),i._v(" "),i.isRenderStoreHeapMap?n("div",[n("AppCameraHeatMap",{attrs:{storeAttributeData:i.storeAttributeData,dateRange:i.dateRange}})],1):i._e()])},staticRenderFns:[]}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){var n=i(304)(i(1028),i(1092),function(t){i(1026)},null,null);t.exports=n.exports}]));