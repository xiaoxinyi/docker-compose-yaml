webpackJsonp([16],{1108:function(t,e,a){var i=a(1109);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(590)("70aabef6",i,!0,{})},1109:function(t,e,a){(t.exports=a(589)()).push([t.i,".i-want-Fetch-background-title{width:100%;height:8%;border-bottom:.5px solid #DEE1E2}.i-want-Fetch-background-title-p{width:100%;height:50px;line-height:50px;font-size:16px;padding-left:30px}.i-want-Fetch-form-title.ive-btn,.selfService .i-want-Fetch-form-title{min-height:40px;line-height:40px}.position-relative{position:relative;margin-right:18px;margin-bottom:18px;min-width:88px;height:35px;float:left}.deletelabel{position:absolute;top:-6px;right:-6px;display:inline-block;background:url("+a(799)+") center center no-repeat;width:14px;height:14px;z-index:999;cursor:pointer;background-size:cover}.i-want-Fetch-form{height:100%;padding:33px 30px}.i-want-Fetch-form-list-select-date .ivu-btn-text.ivu-btn{position:relative;text-align:left;font-size:14px}.i-want-Fetch-form-list-select-date .ivu-btn-text.ivu-btn.selected:before{content:url("+a(782)+");display:inline-block;width:6px;height:6px;background:right center no-repeat;background-size:6px;position:absolute;top:5px;opacity:1}.i-want-Fetch-form .ivu-btn.ivu-btn-text{position:relative;text-align:left;color:#4A4A4A;cursor:default}.i-want-Fetch-form .ivu-btn.select:before{content:url("+a(877)+");display:inline-block;width:6px;height:6px;background:right center no-repeat;background-size:6px;position:absolute;top:7px}.selfService .i-want-Fetch-form-date,.selfService .i-want-Fetch-form-title{width:93px;display:inline-block;text-align:left;margin:0!important;font-size:14px;font-weight:regular}.i-want-Fetch-form-title.ive-btn{display:inline-block;width:105px;text-align:left;margin:0!important;font-size:14px;font-weight:regular}.i-want-Fetch-form-list-selected-title .choosed-num{color:#5295C7;font-size:20px}.i-want-Checkbox-group{width:50%;float:left;padding-left:4px}.i-want-Fetch-form-title.to{width:40px;text-align:center}.i-want-Fetch-form-search{float:right;margin-right:30px}.i-want-Fetch-form-list{min-height:200px;margin-top:1%;margin-left:98px;border:.5px solid #DEE1E2;padding-top:25px;padding-left:30px;margin-right:30px}.i-want-Fetch-form-search-content{overflow:hidden;position:relative}.i-want-Fetch-form-search-content .ivu-icon.ivu-icon-ios-close-outline{position:absolute;top:11px;right:36px;font-size:12px;color:#C4CBD5;cursor:pointer}.i-want-Fetch-form-buttongroup{overflow:hidden;margin-top:3%;height:100%}.i-want-Fetch-form-data-list-button{text-align:center;margin:0 3%;float:left;cursor:pointer}.i-want-Fetch-form-data-list-button.selected{background-color:#187CE5;border-radius:4px;color:#fff}p.i-want-Fetch-form-data-list-button{padding:4px}.disable{color:#9B9B9B}.page-position{position:relative}.i-want-Fetch-form-data-list-page{position:absolute;bottom:10px;right:10px}.i-want-Fetch-form-list-selected-title{margin-left:98px}.i-want-Fetch-form-list-selected-title p{width:100%;height:60px;line-height:60px;text-align:left}.i-want-Fetch-form-list-selected-data{margin-left:98px;padding-top:6px;overflow:hidden}.i-want-Fetch-form-buttongroup-preview-data{float:left;margin-left:98px}.i-want-Fetch-form-buttongroup-join-excel,.i-want-Fetch-form-buttongroup-reset{float:left;margin-left:3%}.i-want-Fetch-form .ivu-btn-primary,.i-want-Fetch-form .ivu-btn-primary:hover,.i-want-Fetch-form-data-list-page .ivu-page-item-active,.i-want-Fetch-form-title .ivu-checkbox-checked .ivu-checkbox-inner{background-color:#0098CC;border-color:#0098CC}.ivu-modal-confirm-body-icon.ivu-modal-confirm-body-icon-info{top:-5px}.ivu-modal-content .ivu-modal-body{padding:30px}.i-want-Fetch-form-title .ivu-input-type .ivu-input-icon{width:32px;height:32px;line-height:32px;font-size:16px;text-align:center;color:#80848f;position:absolute;right:0;top:5px;z-index:3}",""])},1110:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(305),n=a.n(i),r=a(306),o=a.n(r),s=a(819),l=a.n(s),c=a(829),p=a.n(c),h=a(794),u=a.n(h),d=a(307);e.default={data:function(){return{targetType:["1","2"],createReport:{},startDate:"",endDate:"",allTargetButton:[],allTargetLabel:[],allTargetInput:[],storeId:"",selectedNum:0,searchInput:!0,selectedday:!0,selectedweek:!1,selectedmonth:!1,indicators:"",showDate:!0,optionsstart:{disabledDate:function(t){return t&&t.valueOf()>Date.now()-864e5}},optionsend:{disabledDate:function(t){return t&&t.valueOf()>Date.now()-864e5}},shopList:[{value:"1",label:"1号店"},{value:"2",label:"2号店"},{value:"3",label:"3号店"},{value:"4",label:"4号店"}]}},components:{previewExcel:l.a,completeExcelInfo:p.a,selfServieNavi:u.a},mounted:function(){this.storeId=window.sessionStorage.getItem("storeId"),this.initDate(),this.initAllReportTargetPort(),this.createReport={cycle:"day",cycleTitle:"自然日",dimension:"店内",startDate:this.startDate,endDate:this.endDate,targetsTitle:[],targets:[]}},methods:{initDate:function(){this.startDate=new Date,this.endDate=new Date,this.startDate.setHours(0,0,0,0),this.endDate.setHours(23,59,59,999),this.startDate.setDate(this.startDate.getDate()-1),this.endDate.setDate(this.endDate.getDate()-1)},handleChangeStart:function(t){this.createReport.startDate=new Date(new Date(t).setHours(0,0,0,0))},handleChangeEnd:function(t){this.createReport.endDate=new Date(new Date(t).setHours(23,59,59,999))},selectTargetType:function(t){this.initAllReportTargetPort()},judgeSelectedTarget:function(){for(var t=0;t<this.allTargetLabel.length;t++){for(var e=0,a=0,i=0;i<this.allTargetButton.length;i++)this.allTargetButton[i].target_name===this.allTargetLabel[t].username&&(e+=1,a=i);0!==e&&(this.allTargetButton[a].buttonshow=!0)}},initAllReportTargetPort:function(){var s=this;return o()(n.a.mark(function t(){var e,a,i,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.i(s.targetType);case 2:if(e=t.sent){for(s.searchInput=!0,s.allTargetButton=[],a=e.data,i=0;i<a.length;i++)r={target_name:a[i].target_name,target_str:a[i].target_str,mouseover:!1,buttonshow:!1},s.allTargetButton.push(r);s.judgeSelectedTarget()}case 4:case"end":return t.stop()}},t,s)}))()},inputKeyUp:function(){this.allTargetInput=[];for(var t=0;t<this.allTargetButton.length;t++)if(-1!==this.allTargetButton[t].target_name.indexOf(this.indicators)){var e={target_name:this.allTargetButton[t].target_name,target_str:this.allTargetButton[t].target_str,mouseover:!1,buttonshow:this.allTargetButton[t].buttonshow};this.allTargetInput.push(e)}0<this.indicators.length&&(this.searchInput=!1)},dataselected:function(t){this.startDate="",this.endDate="","day"===t?(this.initDate(),this.selectedday=!0,this.selectedweek=!1,this.selectedmonth=!1,this.createReport.cycleTitle="自然日",this.createReport.cycle="day",this.showDate=!0):"month"===t&&(this.selectedmonth=!0,this.selectedweek=!1,this.selectedday=!1,this.createReport.cycleTitle="自然月",this.createReport.cycle="month",this.showDate=!1)},reset:function(){for(var t in this.selectedNum=0,this.initDate(),this.selectedday=!0,this.selectedmonth=!1,this.indicators="",this.searchInput=!0,this.allTargetLabel=[],this.allTargetButton)this.allTargetButton[t].buttonshow=!1},clearinput:function(){this.indicators="",this.searchInput=!0,this.allTargetInput=[]},selectLabel:function(t){if(this.searchInput){if(!this.allTargetButton[t].buttonshow){this.allTargetButton[t].buttonshow=!0,this.allTargetInput=this.allTargetButton;var e={username:this.allTargetButton[t].target_name,clearLabel:!0};this.allTargetLabel.push(e),this.selectedNum=this.selectedNum+1,this.createReport.targetsTitle.push(this.allTargetButton[t].target_name),this.createReport.targets.push(this.allTargetButton[t].target_str)}}else if(!this.allTargetInput[t].buttonshow){this.allTargetInput[t].buttonshow=!0;for(var a=0;a<this.allTargetButton.length;a++)this.allTargetInput[t].target_name===this.allTargetButton[a].target_name&&(this.allTargetButton[a].buttonshow=!0);var i={username:this.allTargetInput[t].target_name,clearLabel:!0};this.allTargetLabel.push(i),this.selectedNum=this.selectedNum+1,this.createReport.targetsTitle.push(this.allTargetInput[t].target_name),this.createReport.targets.push(this.allTargetInput[t].target_str)}},deleteLabelClear:function(t){if(this.allTargetLabel[t].clearLabel=!1,this.searchInput)for(var e=0;e<this.allTargetButton.length;e++)this.allTargetLabel[t].username===this.allTargetButton[e].target_name&&(this.allTargetButton[e].buttonshow=!1,this.selectedNum=this.selectedNum-1);else for(var a=0;a<this.allTargetInput.length;a++)if(this.allTargetLabel[t].username===this.allTargetInput[a].target_name){for(var i=0;i<this.allTargetButton.length;i++)this.allTargetLabel[t].username===this.allTargetButton[i].target_name&&(this.allTargetButton[i].buttonshow=!1);this.allTargetInput[a].buttonshow=!1,this.selectedNum=this.selectedNum-1}for(var r=0;r<this.createReport.targets.length;r++)this.createReport.targetsTitle[r]===this.allTargetLabel[t].username&&(this.createReport.targetsTitle.splice(r,1),this.createReport.targets.splice(r,1))},over:function(t){this.searchInput?this.allTargetButton[t].mouseover=!0:this.allTargetInput[t].mouseover=!0},out:function(t){this.searchInput?this.allTargetButton[t].mouseover=!1:this.allTargetInput[t].mouseover=!1}}}},1111:function(t,e){t.exports={render:function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{staticClass:"selfService"},[a._m(0),a._v(" "),i("div",{staticClass:"i-want-Fetch-form"},[a._m(1),a._v(" "),i("div",{staticClass:"i-want-Fetch-form-list-select-date"},[i("p",{staticClass:"i-want-Fetch-form-title"},[a._v("汇总周期：")]),a._v(" "),i("Button",{staticClass:"i-want-Fetch-form-title",class:a.selectedday?"selected":"select",attrs:{type:"text"},on:{click:function(t){a.dataselected("day")}}},[a._v("自然天\n            ")])],1),a._v(" "),i("div",[a.showDate?i("p",[i("span",{staticClass:"i-want-Fetch-form-title"},[a._v("查询日期：")]),a._v(" "),i("Date-picker",{staticClass:"i-want-Fetch-form-date",staticStyle:{width:"120px"},attrs:{options:a.optionsstart,type:"date",placeholder:"选择日期",clearable:!1},on:{"on-change":a.handleChangeStart},model:{value:a.startDate,callback:function(t){a.startDate=t},expression:"startDate"}}),a._v(" "),i("span",{staticClass:"i-want-Fetch-form-title to"},[a._v(" 到 ")]),a._v(" "),i("Date-picker",{staticClass:"i-want-Fetch-form-date",staticStyle:{width:"120px"},attrs:{options:a.optionsend,type:"date",placeholder:"选择日期",clearable:!1},on:{"on-change":a.handleChangeEnd},model:{value:a.endDate,callback:function(t){a.endDate=t},expression:"endDate"}})],1):a._e()]),a._v(" "),i("div",{staticClass:"i-want-Fetch-form-search-content"},[i("p",{staticClass:"i-want-Fetch-form-title",staticStyle:{float:"left"}},[a._v("选择指标：")]),a._v(" "),i("Checkbox-group",{staticClass:"i-want-Checkbox-group",on:{"on-change":a.selectTargetType},model:{value:a.targetType,callback:function(t){a.targetType=t},expression:"targetType"}},[i("Checkbox",{staticClass:"i-want-Fetch-form-title",staticStyle:{"padding-left":"4px"},attrs:{label:"1"}},[a._v("人流")]),a._v(" "),i("Checkbox",{staticClass:"i-want-Fetch-form-title",attrs:{label:"2"}},[a._v("交易")])],1),a._v(" "),i("Input",{staticClass:"i-want-Fetch-form-search",staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字搜索指标"},on:{"on-change":a.inputKeyUp},model:{value:a.indicators,callback:function(t){a.indicators=t},expression:"indicators"}}),a._v(" "),i("i",{staticClass:"ivu-icon ivu-icon-ios-close-outline",on:{click:a.clearinput}})],1),a._v(" "),i("div",{staticClass:"i-want-Fetch-form-list page-position"},[i("Row",[a._l(a.allTargetButton,function(t,e){return a.searchInput?i("Col",{key:e,attrs:{span:"4"}},[i("p",{staticClass:"i-want-Fetch-form-data-list-button",class:{selected:t.mouseover,disable:t.buttonshow},on:{click:function(t){a.selectLabel(e)},mouseover:function(t){a.over(e)},mouseout:function(t){a.out(e)}}},[a._v(a._s(t.target_name))])]):a._e()}),a._v(" "),a._l(a.allTargetInput,function(t,e){return a.searchInput?a._e():i("Col",{key:e,attrs:{span:"4"}},[i("p",{staticClass:"i-want-Fetch-form-data-list-button",class:{selected:t.mouseover,disable:t.buttonshow},on:{click:function(t){a.selectLabel(e)},mouseover:function(t){a.over(e)},mouseout:function(t){a.out(e)}}},[a._v(a._s(t.target_name))])])})],2),a._v(" "),i("div",{staticClass:"i-want-Fetch-form-data-list-page"},[i("Page",{attrs:{total:1,size:"small"}})],1)],1),a._v(" "),i("div",{staticClass:"i-want-Fetch-form-list-selected-title"},[i("p",[a._v("已选择"),i("span",{staticClass:"choosed-num"},[a._v(a._s(a.selectedNum))]),a._v("个")])]),a._v(" "),i("div",{staticClass:"i-want-Fetch-form-list-selected-data"},a._l(a.allTargetLabel,function(t,e){return t.clearLabel?i("div",{key:e,staticClass:"position-relative"},[i("Button",{staticStyle:{width:"100%",padding:"6px 8px"},attrs:{type:"dashed"}},[a._v(a._s(t.username))]),a._v(" "),i("i",{staticClass:"deletelabel",on:{click:function(t){a.deleteLabelClear(e)}}})],1):a._e()})),a._v(" "),i("div",{staticClass:"i-want-Fetch-form-buttongroup"},[i("previewExcel",{staticClass:"i-want-Fetch-form-buttongroup-preview-data",attrs:{createReport:a.createReport}}),a._v(" "),i("completeExcelInfo",{staticClass:"i-want-Fetch-form-buttongroup-join-excel",attrs:{createReport:a.createReport}}),a._v(" "),i("Button",{staticClass:"i-want-Fetch-form-buttongroup-reset",attrs:{type:"ghost"},on:{click:a.reset}},[a._v("重置")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"i-want-Fetch-background-title"},[e("p",{staticClass:"i-want-Fetch-background-title-p PingFangSC-Medium-font"},[this._v("我要取数")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",{staticClass:"i-want-Fetch-form-title"},[t._v("分析维度：")]),t._v(" "),a("span",{staticClass:"i-want-Fetch-form-title"},[t._v("店内")])])}]}},1370:function(t,e,a){var i=a(304)(a(1110),a(1111),function(t){a(1108)},null,null);t.exports=i.exports},782:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAE1JREFUCB1j1F71n+3N3bdN/xj+xzEAARMD4yIRZeE6FqhgOUgQBIAKyoFiDEwwlRBhCAkSY0IWQGYzgcxEFgCxQWIsIItAZsKMhFkOAOdQIQbJH0Z/AAAAAElFTkSuQmCC"},794:function(t,e,a){var i=a(304)(a(797),a(798),function(t){a(795)},null,null);t.exports=i.exports},795:function(t,e,a){var i=a(796);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(590)("597e8af1",i,!0,{})},796:function(t,e,a){(t.exports=a(589)()).push([t.i,".businessNavi-background{background-color:#fff;margin-right:20px}.vue-menu-light{background-image:none;background-color:red}.left-list-background{width:100%;height:100%}.ivu-menu-light .ivu-menu-item.nav-Analyze{padding:0 0 0 33px;height:60px;line-height:60px;text-align:left;border-right:0!important}.selfServieNavi .ivu-menu-item-selected{position:relative;color:#2488DC}.selfServieNavi .ivu-menu-item-selected:before{content:url("+a(782)+");display:inline-block;width:6px;height:100%;background:right center no-repeat;background-size:6px;position:absolute;top:-2px;left:10%}.ivu-menu-vertical.ivu-menu-light:after{width:0}.selfServieNavi .ivu-menu-vertical .ivu-menu-submenu-title{padding:14px 32px}.selfServieNavi .ivu-menu-vertical .ivu-menu-submenu .ivu-menu-item{padding-left:40px}",""])},797:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(122);e.default={data:function(){return{activeMenu:i.a.getRouteName(this.$route.path,2),selected:!1}},methods:{handleSelect:function(t){"myExcel"===t?this.$router.push("/selfServiceFetch/myExcel"):this.$router.push("/selfServiceFetch")}}}},798:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"selfServieNavi"},[a("div",{staticClass:"left-list-background"},[a("Menu",{attrs:{width:"100%","active-name":""==t.activeMenu?"selfServiceFetch":t.activeMenu},on:{"on-select":t.handleSelect}},[a("Menu-item",{staticClass:"nav-Analyze",attrs:{name:"selfServiceFetch"}},[t._v("\n                我要取数\n            ")]),t._v(" "),a("Menu-item",{staticClass:"nav-Analyze",attrs:{name:"myExcel",id:"myReport"}},[t._v("\n                我的报表\n            ")])],1)],1)])},staticRenderFns:[]}},799:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAtNJREFUSA29lr9rU1EUx895SWMRBYuKUCcRtIODLa10KV1URBwEBcHBoeo/4OwiKDgpCOJgm8HBQRR00EUXyVCxsTpJUxAXm05FwcFi2xzP96Yn3neT9/JeLF4I98c79/vJub/OYcpQRqdleIMaZ5l5QoT265TBzWl1ZloSkUqBoufVK/yxmxynGYyW5XxD5KYKHk6zs2/6h2oR8/XqFD+1sbDuCDz2SA6s/5bHQjIeTsjSZ+J3xRJffH+Jv4b2bcCxskxuiDxTr3aHxnn66u1Kgfnc3BS/9efFgA7WkNfqWZ9v1GtbPV0rRHzCh7aAbhnXZO5fPRvoJ/q1TrSqPxR4WuzjMVveqDlM5PbMW8Z7J5nKZ5h2qUDWMq7n9+UFpgenWn4QHIC2aTggTmN4QHaUiI7uY3p4OhsUsLvHmfqLTNVlk2/W0AYDPQfE0Y+bEF17I/Tlu9DBge5Qg21T2JPPQvc/SChHxuDNSz3fZqEDWE54CCjgV18J/ViNW4aw27PtMJuhj8NIhBfEBsIa4oAkeZoHBm2w9GHgiRDk95OgeWHQBIuHpxs1IjnkQzq1/eWt/xTas52oVGjuWdoyxrV4EYfGHuL4t6BnngI2uJMd7MWiUHaYExxs3cNAv2N3SB87eGblyN7mwbJ+t1ojiwBY72aI77ZnWEZ4lnSQ0rQ0tC3roaGlNCMfZvfsRqV5RfJCwYr06amkAc0zg9me2Z7mgYIVIVInAZNgZp8XCpZ7ZUdmGgtKj0X1bjCDovavDDzu9CLpHazNX46G3ClFWuALIMTc0Yc4XEbfxm+Hnt6a/BstzM4YDogcBGmBfUQ8q60QzXzKfs8MOvtNaEHn+gXalue0/spWBWAfhHZiAEZERg6CtCCc1GvfpRiqadEeOrGXBrkHchD8q14hNg8aYT7TBsQAoMhB/D01kaw15kLDT55sbmsPbcCv/1si7EPR3spU/w+eXYFn9MGe/wAAAABJRU5ErkJggg=="},819:function(t,e,a){var i=a(304)(a(822),a(828),function(t){a(820)},null,null);t.exports=i.exports},820:function(t,e,a){var i=a(821);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(590)("6c70457e",i,!0,{})},821:function(t,e,a){(t.exports=a(589)()).push([t.i,".statistical-data p,.statistical-data p.statisticalDate{height:35px;line-height:35px}.statistical-data p{text-align:left;margin-right:0}.excel-footer p{height:40px;line-height:40px;text-align:left}.excel-footer span.excel-data-num{font-size:18px;color:#7DB1E1}.i-want-Fetch-form-list-buttongroup .preview-data.ivu-btn.ivu-btn-primary{background-color:#0098CA;border-color:#0098CA}.vertical-center-modal{display:flex;align-items:center;justify-content:center}.vertical-center-modal .ivu-modal{top:0}",""])},822:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(305),p=a.n(i),r=a(306),s=a.n(r),h=a(83),n=a(823),o=a.n(n),u=a(307);e.default={data:function(){return{isDisabled:!1,showPreviewExcelModal:!1,downloadUrl:"",previewReports:{},previewDateList:[],exitsId:!1,targets:"",startTime:"",endTime:"",startTimeStamp:"",endTimeStamp:"",cycle:"",dataNum:0,ifcreateReport:!1,percentItem:["老顾客占比","转化率","连带率","新顾客占比"],previewItemTitle:{"顾客数":"顾客数(人)","客流数":"客流数(人)","男性":"男性(人)","女性":"女性(人)","儿童":"儿童(人)","青年":"青年(人)","中年":"中年(人)","老年":"老年(人)","停留时长":"停留时长","新顾客数":"新顾客数(人)","老顾客数":"老顾客数(人)","新顾客占比":"新顾客占比","老顾客占比":"老顾客占比","销售金额":"销售金额(元)","客单价":"客单价(元)","成交笔数":"成交笔数(笔)","订单数":"订单数(条)","人均购买商品件数":"人均购买商品件数(件)","转化率":"转化率","连带率":"连带率"}}},props:["createReport","reportId"],components:{excel:o.a},mounted:function(){0<this.createReport.length&&(this.exitsId=!0)},methods:{downloadReport:function(t){this.download(t)},instance:function(){var t=this.addReportTitle,e=this.addReportContent;this.$Modal.info({title:t,content:e})},download:function(l){var c=this;return s()(p.a.mark(function t(){var e,a,i,r,s,n,o;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c.requireData(l),t.next=3,u.H(c.targets,"0",c.startTime,c.endTime,c.cycle);case 3:(e=t.sent)&&(a=document.getElementById("alink"),i=new Blob([e],{type:"application/vnd.ms-excel"}),c.downloadUrl=window.URL.createObjectURL(i),a.setAttribute("href",c.downloadUrl),r=window.sessionStorage.getItem("userName"),s=new Date,n=s.toLocaleDateString(),o=h.a.AppName+"-"+r+n+".xls",a.setAttribute("download",o),a.click());case 5:case"end":return t.stop()}},t,c)}))()},requireData:function(t){if(this.startTime=new Date((new Date).setHours(0,0,0,0)),this.endTime=new Date((new Date).setHours(23,59,59,999)),this.cycle=this.createReport.cycle,this.targets=[],this.exitsId){this.ifcreateReport=!0;for(var e=0;e<this.createReport.length;e++)this.createReport[e].id===t&&(this.endTime.setTime(this.endTime.getTime()-864e5),1===this.createReport[e].last_days&&this.startTime.setTime(this.startTime.getTime()-864e5),7===this.createReport[e].last_days&&this.startTime.setTime(this.startTime.getTime()-6048e5),30===this.createReport[e].last_days&&this.startTime.setTime(this.startTime.getTime()-2592e6),this.startTime=Number(Date.parse(this.startTime))/1e3,this.endTime=Number(Date.parse(this.endTime))/1e3,this.cycle=this.createReport[e].cycle,this.targets=this.createReport[e].targets.split(","))}else this.startTime=Number(Date.parse(this.createReport.startDate))/1e3,this.endTime=Number(Date.parse(this.createReport.endDate))/1e3,this.targets=this.createReport.targets,0<this.targets.length?this.ifcreateReport=!0:(this.ifcreateReport=!1,this.addReportTitle="错误提示",this.addReportContent="请先选择指标后再次预览",this.instance())},previewReportHandler:function(t){t.data_arr=t.data_arr.reverse(),t.date_arr=t.date_arr.reverse();var e=t.title.indexOf("停留时长");if(-1!==e)for(var a=0;a<t.date_arr.length;a++){var i=t.data_arr[a][e],r=parseInt(i/60),s=i%60;t.data_arr[a][e]=String(r)+"小时"+String(s)+"分钟"}for(var n in this.percentItem){var o=t.title.indexOf(this.percentItem[n]);if(-1!==o)for(var l=0;l<t.date_arr.length;l++)t.data_arr[l][o]=parseInt(100*t.data_arr[l][o])+"%"}for(var c in t.title)t.title[c]=this.previewItemTitle[t.title[c]];return t},previewReport:function(){var r=this;return s()(p.a.mark(function t(){var e,a,i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.reportId,r.previewDateList=[],r.requireData(e),!r.ifcreateReport){t.next=9;break}return r.isDisabled=!0,t.next=7,u._41(r.targets,"0",r.startTime,r.endTime,r.cycle);case 7:if((a=t.sent)&&200===a.code)for(r.isDisabled=!1,r.showPreviewExcelModal=!0,r.dataNum=a.data.data_arr.length,r.previewReports=a.data,r.previewReports=r.previewReportHandler(r.previewReports),10<r.previewReports.data_arr.length&&r.showTenDayData(),i=0;i<r.previewReports.date_arr.length;i++)r.previewDateList.push(r.previewReports.date_arr[i].substring(0,4)+"-"+r.previewReports.date_arr[i].substring(4,6)+"-"+r.previewReports.date_arr[i].substring(6,8));else r.isDisabled=!1;case 9:case"end":return t.stop()}},t,r)}))()},showTenDayData:function(){this.previewReports.data_arr=this.previewReports.data_arr.slice(0,10),this.previewReports.date_arr=this.previewReports.date_arr.slice(0,10)}}}},823:function(t,e,a){var i=a(304)(a(826),a(827),function(t){a(824)},null,null);t.exports=i.exports},824:function(t,e,a){var i=a(825);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(590)("c1ccc844",i,!0,{})},825:function(t,e,a){(t.exports=a(589)()).push([t.i,".ivu-table .demo-table-info-row td{background-color:#E3F1FE}.ivu-table.ivu-table-border td,.ivu-table.ivu-table-border th{height:35px}",""])},826:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(84),r=a.n(i);e.default={data:function(){return{previewReport:{},columnsArr:[],dataArr:[]}},props:["previewReports"],mounted:function(){this.previewReport=JSON.parse(r()(this.previewReports));for(var t=0;t<this.previewReport.title.length;t++){var e={title:this.previewReports.title[t],key:this.previewReport.key[t],width:120};this.columnsArr.push(e)}for(var a=0;a<this.previewReport.data_arr.length;a++)this.dataArr.push(this.previewReport.data_arr[a])},methods:{rowClassName:function(t,e){if(e%2==0)return"demo-table-info-row"}}}},827:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Table",{attrs:{border:"","row-class-name":t.rowClassName,columns:t.columnsArr,data:t.dataArr}})],1)},staticRenderFns:[]}},828:function(t,e){t.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.exitsId?a("Button",{staticClass:"preview-data",attrs:{type:"primary",disabled:e.isDisabled},on:{click:e.previewReport}},[e._v("预览数据")]):e._e(),e._v(" "),e.exitsId?e._e():a("Button",{staticClass:"preview-data",attrs:{type:"primary",disabled:e.isDisabled},on:{click:e.previewReport}},[e._v("预览数据")]),e._v(" "),a("Modal",{attrs:{title:"预览数据","mask-closable":!1,width:"945","class-name":"vertical-center-modal"},model:{value:e.showPreviewExcelModal,callback:function(t){e.showPreviewExcelModal=t},expression:"showPreviewExcelModal"}},[a("Row",[a("Col",{staticClass:"statistical-data",attrs:{span:"2"}},[a("p",[e._v("统计日期")]),e._v(" "),e._l(e.previewDateList,function(t){return a("p",{staticClass:"statisticalDate"},[e._v(e._s(t))])})],2),e._v(" "),e.showPreviewExcelModal?a("Col",{attrs:{span:"22"}},[a("excel",{attrs:{previewReports:e.previewReports}})],1):e._e()],1),e._v(" "),a("Row",{staticClass:"excel-footer",attrs:{slot:"footer"},slot:"footer"},[a("Col",{attrs:{span:"19"}},[a("p",[e._v("共"),a("span",{staticClass:"excel-data-num"},[e._v(e._s(e.dataNum))]),e._v("条数据,预览最多显示前10条数据,下载数据可以查看更多")])]),e._v(" "),a("Col",{attrs:{span:"5"}},[a("Button",{attrs:{size:"large"},on:{click:function(t){e.downloadReport(e.reportId)}}},[e._v("下载全部数据")]),e._v(" "),a("a",{attrs:{id:"alink"}})],1)],1)],1)],1)},staticRenderFns:[]}},829:function(t,e,a){var i=a(304)(a(832),a(833),function(t){a(830)},null,null);t.exports=i.exports},830:function(t,e,a){var i=a(831);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(590)("5ddb5f9a",i,!0,{})},831:function(t,e,a){(t.exports=a(589)()).push([t.i,".i-want-Fetch-form-content{padding-bottom:10px}.reportAdd .i-want-Fetch-form-title{display:inline-block;width:93px;min-height:40px;line-height:40px;text-align:left;margin:0!important;font-size:14px}.i-want-Fetch-form-title.to{width:40px;text-align:center}.ivu-btn.ivu-btn-dashed span{font-size:14px;font-weight:regular}",""])},832:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=a(305),s=a.n(r),n=a(306),o=a.n(n),l=a(307);e.default={data:function(){return{userId:"",modal1:!1,indicators:"",createReports:{},addReportTitle:"",addReportContent:"",startDate:"",endDate:"",selectvalue:"1",dateType:"",dateList:[{value:"1",label:"最近1天"},{value:"7",label:"最近7天"},{value:"30",label:"最近30天"}]}},props:["createReport"],mounted:function(){},methods:{addMyReport:function(){this.createReport.targets.length<=0?(this.addReportTitle="错误提示",this.addReportContent="请先选择指标后再点击创建报表",this.instance()):this.modal1=!0},instance:function(){var t=this.addReportTitle,e=this.addReportContent;this.$Modal.info({title:t,content:e})},cancel:function(t){this.modal1=!1},handleChange:function(){"1"===this.selectvalue&&(this.dateType="1"),"7"===this.selectvalue&&(this.dateType="7"),"30"===this.selectvalue&&(this.dateType="30")},initCreateReport:(i=o()(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0<this.indicators.length)){t.next=7;break}return t.next=3,l.s(this.createReport.targets,this.indicators,"0",this.createReport.cycle,this.dateType);case 3:(e=t.sent).data?(this.addReportTitle="添加报表成功",this.addReportContent="你添加的报表名称为《"+e.data.report_name+"》的报表已成功添加",this.createReports=e.data,this.modal1=!1,this.$router.push({name:"myExcel",params:{update:e.data.update_time}})):(this.addReportTitle="错误信息",this.addReportContent=e.error_msg),t.next=9;break;case 7:this.addReportTitle="错误提示",this.addReportContent="报表名称不能为空，请先输入报表名称后再次添加";case 9:this.instance();case 10:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})}}},833:function(t,e){t.exports={render:function(){var i=this,t=i.$createElement,r=i._self._c||t;return r("div",[r("Button",{attrs:{type:"primary"},on:{click:i.addMyReport}},[i._v("加入我的报表")]),i._v(" "),r("Modal",{attrs:{title:"完善报表信息","mask-closable":!1},model:{value:i.modal1,callback:function(t){i.modal1=t},expression:"modal1"}},[r("div",{staticClass:"i-want-Fetch-form reportAdd"},[r("div",{staticClass:"i-want-Fetch-form-content"},[r("p",{staticClass:"i-want-Fetch-form-title"},[i._v("报表名称：")]),i._v(" "),r("Input",{staticClass:"i-want-Fetch-form-title",staticStyle:{width:"200px"},attrs:{maxlength:15,placeholder:"请输入..."},model:{value:i.indicators,callback:function(t){i.indicators=t},expression:"indicators"}})],1),i._v(" "),r("div",{staticClass:"i-want-Fetch-form-content"},[r("p",{staticClass:"i-want-Fetch-form-title"},[i._v("分析维度：")]),i._v(" "),r("p",{staticClass:"i-want-Fetch-form-title"},[i._v(i._s(i.createReport.dimension))])]),i._v(" "),r("div",{staticClass:"i-want-Fetch-form-content"},[r("p",{staticClass:"i-want-Fetch-form-title"},[i._v("汇总周期：")]),i._v(" "),r("p",{staticClass:"i-want-Fetch-form-title"},[i._v(i._s(i.createReport.cycleTitle))])]),i._v(" "),r("div",{staticClass:"i-want-Fetch-form-content"},[r("p",{staticClass:"i-want-Fetch-form-title"},[i._v("更新至：")]),i._v(" "),r("Select",{staticStyle:{width:"200px"},on:{"on-change":i.handleChange},model:{value:i.selectvalue,callback:function(t){i.selectvalue=t},expression:"selectvalue"}},i._l(i.dateList,function(t,e){return r("Option",{key:e,attrs:{value:t.value}},[i._v(i._s(t.label)+"\n                    ")])}))],1),i._v(" "),r("div",{staticClass:"i-want-Fetch-form-content"},[r("p",{staticClass:"i-want-Fetch-form-title"},[i._v("查询指标：")]),i._v(" "),i._l(i.createReport.targetsTitle,function(t,e,a){return r("Button",{key:a,staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"dashed"}},[i._v(i._s(t)+"\n                ")])})],2)]),i._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:i.initCreateReport}},[r("span",[i._v("确定")])]),i._v(" "),r("Button",{staticStyle:{"margin-left":"8px","margin-right":"15px"},attrs:{type:"ghost"},on:{click:i.cancel}},[i._v("取消")])],1)]),i._v(" "),r("Modal")],1)},staticRenderFns:[]}},877:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAE9JREFUCB1jvHr1P9uH79eb/jMwxDEAASMDwyIBTs06FrDg///lIEEQACooB4oxMMFUQoQhJEiMCVkAmc0EMhNZAMQGibGALAKZCTMSZjkAMk8d5c3whRcAAAAASUVORK5CYII="}});