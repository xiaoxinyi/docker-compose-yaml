webpackJsonp([40],{1341:function(t,e,s){var a=s(1342);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(590)("0c929f72",a,!0,{})},1342:function(t,e,s){(t.exports=s(589)()).push([t.i,".data-contrast{padding:0 35px 20px}.data-contrast-title{height:50px;line-height:50px;font-size:16px}.data-contrast-content{border:1px solid #DDD;padding:0 35px 35px}.data-contrast-content .selected-store-content{overflow:hidden;padding-top:30px;padding-bottom:30px}.data-contrast-content .selected-store{font-size:14px;float:left}.data-contrast-content .select-store-checkbox{float:left}.data-contrast-content .selected-store-content .ivu-checkbox-wrapper{margin-top:0}.data-contrast-content .select-contrast-time-content{margin-bottom:35px;overflow:hidden}.data-contrast-content .select-contrast-time{font-size:14px;float:left;margin-top:6px}.data-contrast-content .contrast-btn{float:right}",""])},1343:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,o=s(305),n=s.n(o),i=s(306),r=s.n(i),c=s(307),l=s(122);e.default={data:function(){return{dateValue:"",selectDateValue:"",beforeToday:{disabledDate:function(t){return t&&t.valueOf()>Date.now()-864e5}},storeList:[],storeHistoryData:[],storeIdList:[],selectedStoreList:[],storeListModel:[],columnsContrast:[],stateList:["到店顾客数","客流量","女性人数","男性人数","平均停留时间","老顾客数","成交金额","新顾客数","转化率"],dataContrast:[]}},mounted:function(){this.init()},methods:{init:function(){this.storeList=JSON.parse(window.sessionStorage.getItem("storesList")),this.dateValue=new Date,this.dateValue.setTime(this.dateValue.getTime()-864e5),this.selectDateValue=new Date(this.dateValue),this.initStoresData(this.storeList.length)},initStoresData:function(t){this.columnsContrast=[],this.dataContrast=[];this.columnsContrast.push({title:"状态",key:"state"});for(var e=0;e<t;e++){var s={title:"待加入对比店铺",key:"stores_"+this.storeList[e].store_id};this.storeIdList.push(this.storeList[e].store_id),this.columnsContrast.push(s)}for(var a=0;a<this.stateList.length;a++){var o={};o.state=this.stateList[a];for(var n=1;n<=t;n++)o[this.columnsContrast[n].key]="-";this.dataContrast.push(o)}},selectedStore:function(t){var e=this,s=[],a=[];for(var o in t)a.push(this.storeIdList.indexOf(t[o]));a.sort(),a.forEach(function(t){s.push(e.storeIdList[t])}),this.selectedStoreList=s,this.storesDataContrast()},selectDate:function(t){this.selectDateValue=new Date(t),0<this.selectedStoreList.length&&this.storesDataContrast()},storesDataContrast:(a=r()(n.a.mark(function t(){var e,s,a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.columnsContrast=[],this.dataContrast=[],e=parseInt(this.selectDateValue.getTime()/1e3),t.next=5,c._24(this.selectedStoreList,e);case 5:(s=t.sent)&&200===s.code&&(0<s.data[1].length?(this.columnsContrast=s.data[0],this.dataContrast=s.data[1],this.conversionData(this.dataContrast),a=this.storeList.length-this.selectedStoreList.length,this.addDefaultData(a)):this.initStoresData(this.storeList.length));case 7:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)}),conversionData:function(t){var e=this;t.forEach(function(t){e.formatData(t,"平均停留时间"),e.formatData(t,"转化率")})},formatData:function(t,e){if(t.state===e)for(var s in t)t[s]!==e&&(t[s]="平均停留时间"===e?this.conversionTime(t[s]):l.a.decimalToPercent(t[s],1))},conversionTime:function(t){return parseInt(t/60)+"分"},addDefaultData:function(t){for(var e=0;e<t;e++){var s={title:"待加入对比店铺",key:"stores_"+this.storeList[e].store_id};this.columnsContrast.push(s)}for(var a=this.columnsContrast.length,o=this.dataContrast.length,n=0;n<o;n++)for(var i=this.dataContrast[n],r=a-t;r<a;r++)i[this.columnsContrast[r].key]="-"}}}},1344:function(t,e){t.exports={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"data-contrast"},[a("p",{staticClass:"data-contrast-title PingFangSC-Medium-font"},[s._v("店铺数据对比")]),s._v(" "),a("div",{staticClass:"data-contrast-content"},[a("p",{staticClass:"selected-store-content"},[a("span",{staticClass:"selected-store PingFangSC-Medium-font"},[s._v("选择店铺：")]),s._v(" "),a("CheckboxGroup",{staticClass:"select-store-checkbox",on:{"on-change":s.selectedStore},model:{value:s.storeListModel,callback:function(t){s.storeListModel=t},expression:"storeListModel"}},s._l(s.storeList,function(t,e){return a("Checkbox",{key:e,attrs:{label:t.store_id}},[s._v("\n                    "+s._s(t.store_name)+"\n                ")])}))],1),s._v(" "),a("p",{staticClass:"select-contrast-time-content"},[a("span",{staticClass:"select-contrast-time PingFangSC-Medium-font"},[s._v("选择时间：")]),s._v(" "),a("DatePicker",{staticClass:"select-contrast-datapicker",staticStyle:{width:"200px",float:"left"},attrs:{value:s.dateValue,type:"date",editable:!1,placeholder:"选择店铺对比时间",format:"yyyy-MM-dd",options:s.beforeToday,clearable:!1},on:{"on-change":s.selectDate}})],1),s._v(" "),a("Table",{attrs:{stripe:"",columns:s.columnsContrast,data:s.dataContrast}})],1)])},staticRenderFns:[]}},1413:function(t,e,s){var a=s(304)(s(1343),s(1344),function(t){s(1341)},null,null);t.exports=a.exports}});