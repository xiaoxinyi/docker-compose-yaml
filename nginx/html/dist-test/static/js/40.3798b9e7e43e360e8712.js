webpackJsonp([40],{1342:function(t,e,s){var n=s(1343);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);s(589)("f5dd9002",n,!1,{})},1343:function(t,e,s){(t.exports=s(588)()).push([t.i,"\n.data-contrast {\n    padding: 0 35px 20px;\n}\n.data-contrast-title {\n    height: 50px;\n    line-height: 50px;\n    font-size: 16px;\n}\n.data-contrast-content {\n    border: 1px solid #DDD;\n    padding: 0 35px 35px;\n}\n\n/* select store checkbox */\n.data-contrast-content .selected-store-content {\n    overflow: hidden;\n    padding-top: 30px;\n    padding-bottom: 30px;\n}\n.data-contrast-content .selected-store {\n    font-size: 14px;\n    float: left;\n}\n.data-contrast-content .select-store-checkbox {\n    float: left;\n}\n.data-contrast-content .selected-store-content .ivu-checkbox-wrapper {\n    margin-top: 0;\n}\n\n/* select store time */\n.data-contrast-content .select-contrast-time-content {\n    margin-bottom: 35px;\n    overflow: hidden;\n}\n.data-contrast-content .select-contrast-time {\n    font-size: 14px;\n    float: left;\n    margin-top: 6px;\n}\n.data-contrast-content .contrast-btn {\n    float: right;\n}\n",""])},1344:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=s(305),o=s.n(a),r=s(306),i=s.n(r),c=s(307),l=s(121);e.default={data:function(){return{dateValue:"",selectDateValue:"",beforeToday:{disabledDate:function(t){return t&&t.valueOf()>Date.now()-864e5}},storeList:[],storeHistoryData:[],storeIdList:[],selectedStoreList:[],storeListModel:[],columnsContrast:[],stateList:["到店顾客数","客流量","女性人数","男性人数","平均停留时间","老顾客数","成交金额","新顾客数","转化率"],dataContrast:[]}},mounted:function(){this.init()},methods:{init:function(){this.storeList=JSON.parse(window.sessionStorage.getItem("storesList")),this.dateValue=new Date,this.dateValue.setTime(this.dateValue.getTime()-864e5),this.selectDateValue=new Date(this.dateValue),this.initStoresData(this.storeList.length)},initStoresData:function(t){this.columnsContrast=[],this.dataContrast=[];this.columnsContrast.push({title:"状态",key:"state"});for(var e=0;e<t;e++){var s={title:"待加入对比店铺",key:"stores_"+this.storeList[e].store_id};this.storeIdList.push(this.storeList[e].store_id),this.columnsContrast.push(s)}for(var n=0;n<this.stateList.length;n++){var a={};a.state=this.stateList[n];for(var o=1;o<=t;o++)a[this.columnsContrast[o].key]="-";this.dataContrast.push(a)}},selectedStore:function(t){var e=this,s=[],n=[];for(var a in t)n.push(this.storeIdList.indexOf(t[a]));n.sort(),n.forEach(function(t){s.push(e.storeIdList[t])}),this.selectedStoreList=s,this.storesDataContrast()},selectDate:function(t){this.selectDateValue=new Date(t),0<this.selectedStoreList.length&&this.storesDataContrast()},storesDataContrast:(n=i()(o.a.mark(function t(){var e,s,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.columnsContrast=[],this.dataContrast=[],e=parseInt(this.selectDateValue.getTime()/1e3),t.next=5,c._25(this.selectedStoreList,e);case 5:(s=t.sent)&&200===s.code&&(0<s.data[1].length?(this.columnsContrast=s.data[0],this.dataContrast=s.data[1],this.conversionData(this.dataContrast),n=this.storeList.length-this.selectedStoreList.length,this.addDefaultData(n)):this.initStoresData(this.storeList.length));case 7:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)}),conversionData:function(t){var e=this;t.forEach(function(t){e.formatData(t,"平均停留时间"),e.formatData(t,"转化率")})},formatData:function(t,e){if(t.state===e)for(var s in t)t[s]!==e&&(t[s]="平均停留时间"===e?this.conversionTime(t[s]):l.a.decimalToPercent(t[s],1))},conversionTime:function(t){return parseInt(t/60)+"分"},addDefaultData:function(t){for(var e=0;e<t;e++){var s={title:"待加入对比店铺",key:"stores_"+this.storeList[e].store_id};this.columnsContrast.push(s)}for(var n=this.columnsContrast.length,a=this.dataContrast.length,o=0;o<a;o++)for(var r=this.dataContrast[o],i=n-t;i<n;i++)r[this.columnsContrast[i].key]="-"}}}},1345:function(t,e,s){t.exports={render:function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"data-contrast"},[n("p",{staticClass:"data-contrast-title PingFangSC-Medium-font"},[s._v("店铺数据对比")]),s._v(" "),n("div",{staticClass:"data-contrast-content"},[n("p",{staticClass:"selected-store-content"},[n("span",{staticClass:"selected-store PingFangSC-Medium-font"},[s._v("选择店铺：")]),s._v(" "),n("CheckboxGroup",{staticClass:"select-store-checkbox",on:{"on-change":s.selectedStore},model:{value:s.storeListModel,callback:function(t){s.storeListModel=t},expression:"storeListModel"}},s._l(s.storeList,function(t,e){return n("Checkbox",{key:e,attrs:{label:t.store_id}},[s._v("\n                    "+s._s(t.store_name)+"\n                ")])}))],1),s._v(" "),n("p",{staticClass:"select-contrast-time-content"},[n("span",{staticClass:"select-contrast-time PingFangSC-Medium-font"},[s._v("选择时间：")]),s._v(" "),n("DatePicker",{staticClass:"select-contrast-datapicker",staticStyle:{width:"200px",float:"left"},attrs:{value:s.dateValue,type:"date",editable:!1,placeholder:"选择店铺对比时间",format:"yyyy-MM-dd",options:s.beforeToday,clearable:!1},on:{"on-change":s.selectDate}})],1),s._v(" "),n("Table",{attrs:{stripe:"",columns:s.columnsContrast,data:s.dataContrast}})],1)])},staticRenderFns:[]},t.exports.render._withStripped=!0},1414:function(t,e,s){var n=!1;var a=s(304)(s(1344),s(1345),function(t){n||s(1342)},null,null);a.options.__file="/Users/zhouqichao/Desktop/sxkj/shangu_online/src/components/views/dataOverview/children/dataContrast.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] dataContrast.vue: functional components are not supported with templates, they should use render functions."),t.exports=a.exports}});