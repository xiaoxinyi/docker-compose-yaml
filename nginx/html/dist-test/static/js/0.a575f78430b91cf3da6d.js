webpackJsonp([0],Array(597).concat([function(t,e){var s={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},l={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},h=Object.prototype.toString,n=Array.prototype,a=n.forEach,c=n.filter,i=n.slice,u=n.map,f=n.reduce,r={};function d(t){if(null==t||"object"!=typeof t)return t;var e=t,n=h.call(t);if("[object Array]"===n){e=[];for(var i=0,r=t.length;i<r;i++)e[i]=d(t[i])}else if(l[n]){var o=t.constructor;if(t.constructor.from)e=o.from(t);else{e=new o(t.length);for(i=0,r=t.length;i<r;i++)e[i]=d(t[i])}}else if(!s[n]&&!C(t)&&!w(t))for(var a in e={},t)t.hasOwnProperty(a)&&(e[a]=d(t[a]));return e}function p(t,e,n){if(!x(e)||!x(t))return n?d(e):t;for(var i in e)if(e.hasOwnProperty(i)){var r=t[i],o=e[i];!x(o)||!x(r)||_(o)||_(r)||w(o)||w(r)||b(o)||b(r)||C(o)||C(r)?!n&&i in t||(t[i]=d(e[i])):p(r,o,n)}return t}function o(t,e,n){for(var i in e)e.hasOwnProperty(i)&&(n?null!=e[i]:null==t[i])&&(t[i]=e[i]);return t}var g,v=function(){return r.createCanvas()};function m(t,e,n){if(t&&e)if(t.forEach&&t.forEach===a)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function y(t,e){var n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}function _(t){return"[object Array]"===h.call(t)}function x(t){var e=typeof t;return"function"===e||!!t&&"object"==e}function b(t){return!!s[h.call(t)]}function w(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}r.createCanvas=function(){return document.createElement("canvas")};var S="__ec_primitive__";function C(t){return t[S]}function T(t){t&&m(t,function(t,e){this.set(e,t)},this)}var k="_ec_";T.prototype={constructor:T,get:function(t){return this[k+t]},set:function(t,e){return this[k+t]=e},each:function(t,e){for(var n in void 0!==e&&(t=y(t,e)),this)this.hasOwnProperty(n)&&t(this[n],n.slice(4))},removeKey:function(t){delete this[k+t]}},e.$override=function(t,e){r[t]=e},e.clone=d,e.merge=p,e.mergeAll=function(t,e){for(var n=t[0],i=1,r=t.length;i<r;i++)n=p(n,t[i],e);return n},e.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},e.defaults=o,e.createCanvas=v,e.getContext=function(){return g||(g=v().getContext("2d")),g},e.indexOf=function(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n}return-1},e.inherits=function(t,e){var n=t.prototype;function i(){}for(var r in i.prototype=e.prototype,t.prototype=new i,n)t.prototype[r]=n[r];(t.prototype.constructor=t).superClass=e},e.mixin=function(t,e,n){o(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,n)},e.isArrayLike=function(t){if(t)return"string"!=typeof t&&"number"==typeof t.length},e.each=m,e.map=function(t,e,n){if(t&&e){if(t.map&&t.map===u)return t.map(e,n);for(var i=[],r=0,o=t.length;r<o;r++)i.push(e.call(n,t[r],r,t));return i}},e.reduce=function(t,e,n,i){if(t&&e){if(t.reduce&&t.reduce===f)return t.reduce(e,n,i);for(var r=0,o=t.length;r<o;r++)n=e.call(i,n,t[r],r,t);return n}},e.filter=function(t,e,n){if(t&&e){if(t.filter&&t.filter===c)return t.filter(e,n);for(var i=[],r=0,o=t.length;r<o;r++)e.call(n,t[r],r,t)&&i.push(t[r]);return i}},e.find=function(t,e,n){if(t&&e)for(var i=0,r=t.length;i<r;i++)if(e.call(n,t[i],i,t))return t[i]},e.bind=y,e.curry=function(t){var e=i.call(arguments,1);return function(){return t.apply(this,e.concat(i.call(arguments)))}},e.isArray=_,e.isFunction=function(t){return"function"==typeof t},e.isString=function(t){return"[object String]"===h.call(t)},e.isObject=x,e.isBuiltInObject=b,e.isDom=w,e.eqNaN=function(t){return t!=t},e.retrieve=function(t){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]},e.retrieve2=function(t,e){return null!=t?t:e},e.retrieve3=function(t,e,n){return null!=t?t:null!=e?e:n},e.slice=function(){return Function.call.apply(i,arguments)},e.normalizeCssArray=function(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t},e.assert=function(t,e){if(!t)throw new Error(e)},e.setAsPrimitive=function(t){t[S]=!0},e.isPrimitive=C,e.createHashMap=function(t){return new T(t)},e.noop=function(){}},function(t,e,n){var g=n(597),a=n(694),i=n(617),r=n(614),s=n(601),o=n(603),l=n(645),h=n(652);e.Image=h;var c=n(620);e.Group=c;var u=n(701);e.Text=u;var f=n(702);e.Circle=f;var d=n(703);e.Sector=d;var p=n(704);e.Ring=p;var v=n(705);e.Polygon=v;var m=n(708);e.Polyline=m;var y=n(709);e.Rect=y;var _=n(710);e.Line=_;var x=n(711);e.BezierCurve=x;var b=n(712);e.Arc=b;var w=n(713);e.CompoundPath=w;var S=n(714);e.LinearGradient=S;var C=n(715);e.RadialGradient=C;var T=n(607);e.BoundingRect=T;var k=Math.round,O=Math.max,A=Math.min,M={};function D(t,e,n,i){var r=a.createFromString(t,e),o=r.getBoundingRect();return n&&("center"===i&&(n=I(n,o)),E(r,n)),r}function I(t,e){var n,i=e.width/e.height,r=t.height*i;return n=r<=t.width?t.height:(r=t.width)/i,{x:t.x+t.width/2-r/2,y:t.y+t.height/2-n/2,width:r,height:n}}var P=a.mergePath;function E(t,e){if(t.applyTransform){var n=t.getBoundingRect().calculateTransform(e);t.applyTransform(n)}}function L(t,e,n){var i=k(2*t);return(i+k(e))%2==0?i/2:(i+(n?1:-1))/2}function j(t){return null!=t&&"none"!=t}function R(t){return"string"==typeof t?i.lift(t,-.1):t}function B(t){if(t.__hoverStlDirty){var e=t.style.stroke,n=t.style.fill,i=t.__hoverStl;i.fill=i.fill||(j(n)?R(n):null),i.stroke=i.stroke||(j(e)?R(e):null);var r={};for(var o in i)null!=i[o]&&(r[o]=t.style[o]);t.__normalStl=r,t.__hoverStlDirty=!1}}function F(t){if(!t.__isHover){if(B(t),t.useHoverLayer)t.__zr&&t.__zr.addHover(t,t.__hoverStl);else{var e=t.style,n=e.insideRollbackOpt;n&&((r=(i=e).insideRollback)&&(i.textFill=r.textFill,i.textStroke=r.textStroke,i.textStrokeWidth=r.textStrokeWidth)),e.extendFrom(t.__hoverStl),n&&(Z(e,e.insideOriginalTextPosition,n),null==e.textFill&&(e.textFill=n.autoColor)),t.dirty(!1),t.z2+=1}var i,r;t.__isHover=!0}}function N(t){if(t.__isHover){var e=t.__normalStl;t.useHoverLayer?t.__zr&&t.__zr.removeHover(t):(e&&t.setStyle(e),t.z2-=1),t.__isHover=!1}}function z(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&F(t)}):F(t)}function H(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&N(t)}):N(t)}function W(t,e){t.__hoverStl=t.hoverStyle||e||{},t.__hoverStlDirty=!0,t.__isHover&&B(t)}function G(t){this.__hoverSilentOnTouch&&t.zrByTouch||!this.__isEmphasis&&z(this)}function U(t){this.__hoverSilentOnTouch&&t.zrByTouch||!this.__isEmphasis&&H(this)}function X(){this.__isEmphasis=!0,z(this)}function Y(){this.__isEmphasis=!1,H(this)}function V(t,e,n,i,r){return q(t,e,i,r),n&&g.extend(t,n),t.host&&t.host.dirty&&t.host.dirty(!1),t}function q(t,e,n,i){if((n=n||M).isRectText){var r=e.getShallow("position")||(i?null:"inside");"outside"===r&&(r="top"),t.textPosition=r,t.textOffset=e.getShallow("offset");var o=e.getShallow("rotate");null!=o&&(o*=Math.PI/180),t.textRotation=o,t.textDistance=g.retrieve2(e.getShallow("distance"),i?null:5)}var a,s=e.ecModel,l=s&&s.option.textStyle,h=function(t){var e;for(;t&&t!==t.ecModel;){var n=(t.option||M).rich;if(n)for(var i in e=e||{},n)n.hasOwnProperty(i)&&(e[i]=1);t=t.parentModel}return e}(e);if(h)for(var c in a={},h)if(h.hasOwnProperty(c)){var u=e.getModel(["rich",c]);$(a[c]={},u,l,n,i)}return t.rich=a,$(t,e,l,n,i,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),t}function $(t,e,n,i,r,o){if(n=!r&&n||M,t.textFill=K(e.getShallow("color"),i)||n.color,t.textStroke=K(e.getShallow("textBorderColor"),i)||n.textBorderColor,t.textStrokeWidth=g.retrieve2(e.getShallow("textBorderWidth"),n.textBorderWidth),!r){if(o){var a=t.textPosition;t.insideRollback=Z(t,a,i),t.insideOriginalTextPosition=a,t.insideRollbackOpt=i}null==t.textFill&&(t.textFill=i.autoColor)}t.fontStyle=e.getShallow("fontStyle")||n.fontStyle,t.fontWeight=e.getShallow("fontWeight")||n.fontWeight,t.fontSize=e.getShallow("fontSize")||n.fontSize,t.fontFamily=e.getShallow("fontFamily")||n.fontFamily,t.textAlign=e.getShallow("align"),t.textVerticalAlign=e.getShallow("verticalAlign")||e.getShallow("baseline"),t.textLineHeight=e.getShallow("lineHeight"),t.textWidth=e.getShallow("width"),t.textHeight=e.getShallow("height"),t.textTag=e.getShallow("tag"),o&&i.disableBox||(t.textBackgroundColor=K(e.getShallow("backgroundColor"),i),t.textPadding=e.getShallow("padding"),t.textBorderColor=K(e.getShallow("borderColor"),i),t.textBorderWidth=e.getShallow("borderWidth"),t.textBorderRadius=e.getShallow("borderRadius"),t.textBoxShadowColor=e.getShallow("shadowColor"),t.textBoxShadowBlur=e.getShallow("shadowBlur"),t.textBoxShadowOffsetX=e.getShallow("shadowOffsetX"),t.textBoxShadowOffsetY=e.getShallow("shadowOffsetY")),t.textShadowColor=e.getShallow("textShadowColor")||n.textShadowColor,t.textShadowBlur=e.getShallow("textShadowBlur")||n.textShadowBlur,t.textShadowOffsetX=e.getShallow("textShadowOffsetX")||n.textShadowOffsetX,t.textShadowOffsetY=e.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function K(t,e){return"auto"!==t?t:e&&e.autoColor?e.autoColor:null}function Z(t,e,n){var i,r=n.useInsideStyle;return null==t.textFill&&!1!==r&&(!0===r||n.isRectText&&e&&"string"==typeof e&&0<=e.indexOf("inside"))&&(i={textFill:null,textStroke:t.textStroke,textStrokeWidth:t.textStrokeWidth},t.textFill="#fff",null==t.textStroke&&(t.textStroke=n.autoColor,null==t.textStrokeWidth&&(t.textStrokeWidth=2))),i}function J(t,e,n,i,r,o){if("function"==typeof r&&(o=r,r=null),i&&i.isAnimationEnabled()){var a=t?"Update":"",s=i.getShallow("animationDuration"+a),l=i.getShallow("animationEasing"+a),h=i.getShallow("animationDelay"+a);"function"==typeof h&&(h=h(r,i.getAnimationDelayParams?i.getAnimationDelayParams(e,r):null)),"function"==typeof s&&(s=s(r)),0<s?e.animateTo(n,s,h||0,l,o,!!o):(e.stopAnimation(),e.attr(n),o&&o())}else e.stopAnimation(),e.attr(n),o&&o()}function Q(t,e,n,i,r){J(!0,t,e,n,i,r)}function tt(t,e,n){return e&&!g.isArrayLike(e)&&(e=l.getLocalTransform(e)),n&&(e=r.invert([],e)),s.applyTransform([],t,e)}e.extendShape=function(t){return o.extend(t)},e.extendPath=function(t,e){return a.extendFromString(t,e)},e.makePath=D,e.makeImage=function(t,n,i){var r=new h({style:{image:t,x:n.x,y:n.y,width:n.width,height:n.height},onload:function(t){if("center"===i){var e={width:t.width,height:t.height};r.setStyle(I(n,e))}}});return r},e.mergePath=P,e.resizePath=E,e.subPixelOptimizeLine=function(t){var e=t.shape,n=t.style.lineWidth;return k(2*e.x1)===k(2*e.x2)&&(e.x1=e.x2=L(e.x1,n,!0)),k(2*e.y1)===k(2*e.y2)&&(e.y1=e.y2=L(e.y1,n,!0)),t},e.subPixelOptimizeRect=function(t){var e=t.shape,n=t.style.lineWidth,i=e.x,r=e.y,o=e.width,a=e.height;return e.x=L(e.x,n,!0),e.y=L(e.y,n,!0),e.width=Math.max(L(i+o,n,!1)-e.x,0===o?0:1),e.height=Math.max(L(r+a,n,!1)-e.y,0===a?0:1),t},e.subPixelOptimize=L,e.setHoverStyle=function(t,e,n){t.__hoverSilentOnTouch=n&&n.hoverSilentOnTouch,"group"===t.type?t.traverse(function(t){"group"!==t.type&&W(t,e)}):W(t,e),t.on("mouseover",G).on("mouseout",U),t.on("emphasis",X).on("normal",Y)},e.setLabelStyle=function(t,e,n,i,r,o,a){var s=(r=r||M).labelFetcher,l=r.labelDataIndex,h=r.labelDimIndex,c=n.getShallow("show"),u=i.getShallow("show"),f=c||u?g.retrieve2(s?s.getFormattedLabel(l,"normal",null,h):null,r.defaultText):null,d=c?f:null,p=u?g.retrieve2(s?s.getFormattedLabel(l,"emphasis",null,h):null,f):null;null==d&&null==p||(V(t,n,o,r),V(e,i,a,r,!0)),t.text=d,e.text=p},e.setTextStyle=V,e.setText=function(t,e,n){var i,r={isRectText:!0};!1===n?i=!0:r.autoColor=n,q(t,e,r,i),t.host&&t.host.dirty&&t.host.dirty(!1)},e.getFont=function(t,e){var n=e||e.getModel("textStyle");return[t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" ")},e.updateProps=Q,e.initProps=function(t,e,n,i,r){J(!1,t,e,n,i,r)},e.getTransform=function(t,e){for(var n=r.identity([]);t&&t!==e;)r.mul(n,t.getLocalTransform(),n),t=t.parent;return n},e.applyTransform=tt,e.transformDirection=function(t,e,n){var i=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),o=["left"===t?-i:"right"===t?i:0,"top"===t?-r:"bottom"===t?r:0];return o=tt(o,e,n),Math.abs(o[0])>Math.abs(o[1])?0<o[0]?"right":"left":0<o[1]?"bottom":"top"},e.groupTransition=function(t,e,i,n){if(t&&e){var r,o=(r={},t.traverse(function(t){!t.isGroup&&t.anid&&(r[t.anid]=t)}),r);e.traverse(function(t){if(!t.isGroup&&t.anid){var e=o[t.anid];if(e){var n=a(t);t.attr(a(e)),Q(t,n,i,t.dataIndex)}}})}function a(t){var e={position:s.clone(t.position),rotation:t.rotation};return t.shape&&(e.shape=g.extend({},t.shape)),e}},e.clipPointsByRect=function(t,i){return g.map(t,function(t){var e=t[0];e=O(e,i.x),e=A(e,i.x+i.width);var n=t[1];return n=O(n,i.y),[e,n=A(n,i.y+i.height)]})},e.clipRectByRect=function(t,e){var n=O(t.x,e.x),i=A(t.x+t.width,e.x+e.width),r=O(t.y,e.y),o=A(t.y+t.height,e.y+e.height);if(n<=i&&r<=o)return{x:n,y:r,width:i-n,height:o-r}},e.createIcon=function(t,e,n){var i=(e=g.extend({rectHover:!0},e)).style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(i.image=t.slice(8),g.defaults(i,n),new h(e)):D(t.replace("path://",""),e,n,"center")}},function(t,e,n){n(604).__DEV__;var p=n(642),g=n(597),l=n(617),v=n(605),s=n(628),h=n(616),a=n(690),c=n(719),u=n(626),f=n(720),d=n(721),i=n(610),r=n(634),m=n(723),y=n(638),_=n(598),x=n(600),b=n(633).throttle,o=n(724),w=n(725),S=g.each,C=i.parseClassType,T=1e3,k=1e3,O=3e3,A={PROCESSOR:{FILTER:T,STATISTIC:5e3},VISUAL:{LAYOUT:k,GLOBAL:2e3,CHART:O,COMPONENT:4e3,BRUSH:5e3}},M="__flagInMainProcess",D="__hasGradientOrPatternBg",I="__optionUpdated",P=/^[a-zA-Z0-9_]+$/;function E(i){return function(t,e,n){t=t&&t.toLowerCase(),h.prototype[i].call(this,t,e,n)}}function L(){h.call(this)}function j(t,e,n){n=n||{},"string"==typeof e&&(e=nt[e]),this.id,this.group,this._dom=t;var i,r,o=this._zr=p.init(t,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});function a(t,e){return t.prio-e.prio}this._throttledZrFlush=b(g.bind(o.flush,o),17),(e=g.clone(e))&&d(e,!0),this._theme=e,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new u,this._api=(r=(i=this)._coordSysMgr,g.extend(new c(i),{getCoordinateSystems:g.bind(r.getCoordinateSystems,r),getComponentByElement:function(t){for(;t;){var e=t.__ecComponentInfo;if(null!=e)return i._model.getComponent(e.mainType,e.index);t=t.parent}}})),h.call(this),this._messageCenter=new L,this._initEvents(),this.resize=g.bind(this.resize,this),this._pendingActions=[],s(et,a),s(J,a),o.animation.on("frame",this._onframe,this),g.setAsPrimitive(this)}L.prototype.on=E("on"),L.prototype.off=E("off"),L.prototype.one=E("one"),g.mixin(L,h);var R=j.prototype;function B(t,e,n){var i,r=this._model,o=this._coordSysMgr.getCoordinateSystems();e=x.parseFinder(r,e);for(var a=0;a<o.length;a++){var s=o[a];if(s[t]&&null!=(i=s[t](r,e,n)))return i}}R._onframe=function(){if(this[I]){var t=this[I].silent;this[M]=!0,F.prepareAndUpdate.call(this),this[M]=!1,this[I]=!1,H.call(this,t),W.call(this,t)}},R.getDom=function(){return this._dom},R.getZr=function(){return this._zr},R.setOption=function(t,e,n){var i;if(g.isObject(e)&&(n=e.lazyUpdate,i=e.silent,e=e.notMerge),this[M]=!0,!this._model||e){var r=new f(this._api),o=this._theme;(this._model=new a(null,null,o,r)).init(null,null,o,r)}this._model.setOption(t,Q),n?(this[I]={silent:i},this[M]=!1):(F.prepareAndUpdate.call(this),this._zr.flush(),this[I]=!1,this[M]=!1,H.call(this,i),W.call(this,i))},R.setTheme=function(){console.log("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},R.getModel=function(){return this._model},R.getOption=function(){return this._model&&this._model.getOption()},R.getWidth=function(){return this._zr.getWidth()},R.getHeight=function(){return this._zr.getHeight()},R.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},R.getRenderedCanvas=function(t){if(v.canvasSupported){(t=t||{}).pixelRatio=t.pixelRatio||1,t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor");var e=this._zr,n=e.storage.getDisplayList();return g.each(n,function(t){t.stopAnimation(!0)}),e.painter.getRenderedCanvas(t)}},R.getSvgDataUrl=function(){if(v.svgSupported){var t=this._zr,e=t.storage.getDisplayList();return g.each(e,function(t){t.stopAnimation(!0)}),t.painter.pathToSvg()}},R.getDataURL=function(t){var e=(t=t||{}).excludeComponents,n=this._model,i=[],r=this;S(e,function(t){n.eachComponent({mainType:t},function(t){var e=r._componentsMap[t.__viewId];e.group.ignore||(i.push(e),e.group.ignore=!0)})});var o="svg"===this._zr.painter.getType()?this.getSvgDataUrl():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return S(i,function(t){t.group.ignore=!1}),o},R.getConnectedDataURL=function(r){if(v.canvasSupported){var o=this.group,a=Math.min,s=Math.max;if(ot[o]){var l=1/0,h=1/0,c=-1/0,u=-1/0,f=[],n=r&&r.pixelRatio||1;g.each(rt,function(t,e){if(t.group===o){var n=t.getRenderedCanvas(g.clone(r)),i=t.getDom().getBoundingClientRect();l=a(i.left,l),h=a(i.top,h),c=s(i.right,c),u=s(i.bottom,u),f.push({dom:n,left:i.left,top:i.top})}});var t=(c*=n)-(l*=n),e=(u*=n)-(h*=n),i=g.createCanvas();i.width=t,i.height=e;var d=p.init(i);return S(f,function(t){var e=new _.Image({style:{x:t.left*n-l,y:t.top*n-h,image:t.dom}});d.add(e)}),d.refreshImmediately(),i.toDataURL("image/"+(r&&r.type||"png"))}return this.getDataURL(r)}},R.convertToPixel=g.curry(B,"convertToPixel"),R.convertFromPixel=g.curry(B,"convertFromPixel"),R.containPixel=function(t,r){var o,e=this._model;return t=x.parseFinder(e,t),g.each(t,function(t,i){0<=i.indexOf("Models")&&g.each(t,function(t){var e=t.coordinateSystem;if(e&&e.containPoint)o|=!!e.containPoint(r);else if("seriesModels"===i){var n=this._chartsMap[t.__viewId];n&&n.containPoint&&(o|=n.containPoint(r,t))}},this)},this),!!o},R.getVisual=function(t,e){var n=this._model,i=(t=x.parseFinder(n,t,{defaultMainType:"series"})).seriesModel.getData(),r=t.hasOwnProperty("dataIndexInside")?t.dataIndexInside:t.hasOwnProperty("dataIndex")?i.indexOfRawIndex(t.dataIndex):null;return null!=r?i.getItemVisual(r,e):i.getVisual(e)},R.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},R.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var F={update:function(t){var e=this._model,n=this._api,i=this._coordSysMgr,r=this._zr;if(e){e.restoreData(),i.create(this._model,this._api),function(e,n){S(J,function(t){t.func(e,n)})}.call(this,e,n),function(t){var r={};t.eachSeries(function(t){var e=t.get("stack"),n=t.getData();if(e&&"list"===n.type){var i=r[e];r.hasOwnProperty(e)&&i&&(n.stackedOn=i),r[e]=n}})}.call(this,e),i.update(e,n),X.call(this,e,t),function(i,r){var o=this._api;S(this._componentsViews,function(t){var e=t.__model;t.render(e,i,o,r),$(e,t)},this),S(this._chartsViews,function(t){t.__alive=!1},this),i.eachSeries(function(t,e){var n=this._chartsMap[t.__viewId];n.__alive=!0,n.render(t,i,o,r),n.group.silent=!!t.get("silent"),$(t,n),q(t,n)},this),V(this._zr,i),S(this._chartsViews,function(t){t.__alive||t.remove(i,o)},this)}.call(this,e,t);var o=e.get("backgroundColor")||"transparent",a=r.painter;if(a.isSingleCanvas&&a.isSingleCanvas())r.configLayer(0,{clearColor:o});else{if(!v.canvasSupported){var s=l.parse(o);o=l.stringify(s,"rgb"),0===s[3]&&(o="transparent")}o.colorStops||o.image?(r.configLayer(0,{clearColor:o}),this[D]=!0,this._dom.style.background="transparent"):(this[D]&&r.configLayer(0,{clearColor:null}),this[D]=!1,this._dom.style.background=o)}S(tt,function(t){t(e,n)})}},updateView:function(t){var e=this._model;e&&(e.eachSeries(function(t){t.getData().clearAllVisual()}),X.call(this,e,t),G.call(this,"updateView",e,t))},updateVisual:function(t){var e=this._model;e&&(e.eachSeries(function(t){t.getData().clearAllVisual()}),X.call(this,e,t,!0),G.call(this,"updateVisual",e,t))},updateLayout:function(t){var e=this._model;e&&(function(e,n){var i=this._api;S(et,function(t){t.isLayout&&t.func(e,i,n)})}.call(this,e,t),G.call(this,"updateLayout",e,t))},prepareAndUpdate:function(t){var e=this._model;U.call(this,"component",e),U.call(this,"chart",e),F.update.call(this,t)}};function N(n,e,i,r,t){var o=n._model;if(r){var a={};a[r+"Id"]=i[r+"Id"],a[r+"Index"]=i[r+"Index"],a[r+"Name"]=i[r+"Name"];var s={mainType:r,query:a};t&&(s.subType=t),o&&o.eachComponent(s,function(t,e){l(n["series"===r?"_chartsMap":"_componentsMap"][t.__viewId])},n)}else S(n._componentsViews.concat(n._chartsViews),l);function l(t){t&&t.__alive&&t[e]&&t[e](t.__model,o,n._api,i)}}function z(e,t){var n=e.type,i=e.escapeConnect,r=K[n],o=r.actionInfo,a=(o.update||"update").split(":"),s=a.pop();a=null!=a[0]&&C(a[0]),this[M]=!0;var l=[e],h=!1;e.batch&&(h=!0,l=g.map(e.batch,function(t){return(t=g.defaults(g.extend({},t),e)).batch=null,t}));var c,u=[],f="highlight"===n||"downplay"===n;S(l,function(t){(c=(c=r.action(t,this._model,this._api))||g.extend({},t)).type=o.event||c.type,u.push(c),f?N(this,s,t,"series"):a&&N(this,s,t,a.main,a.sub)},this),"none"===s||f||a||(this[I]?(F.prepareAndUpdate.call(this,e),this[I]=!1):F[s].call(this,e)),c=h?{type:o.event||n,escapeConnect:i,batch:u}:u[0],this[M]=!1,!t&&this._messageCenter.trigger(c.type,c)}function H(t){for(var e=this._pendingActions;e.length;){var n=e.shift();z.call(this,n,t)}}function W(t){!t&&this.trigger("updated")}function G(i,r,o){var a=this._api;S(this._componentsViews,function(t){var e=t.__model;t[i](e,r,a,o),$(e,t)},this),r.eachSeries(function(t,e){var n=this._chartsMap[t.__viewId];n[i](t,r,a,o),$(t,n),q(t,n)},this),V(this._zr,r),S(tt,function(t){t(r,a)})}function U(t,a){for(var s="component"===t,l=s?this._componentsViews:this._chartsViews,h=s?this._componentsMap:this._chartsMap,c=this._zr,e=0;e<l.length;e++)l[e].__alive=!1;a[s?"eachComponent":"eachSeries"](function(t,e){if(s){if("series"===t)return}else e=t;var n="_ec_"+e.id+"_"+e.type,i=h[n];if(!i){var r=C(e.type),o=s?m.getClass(r.main,r.sub):y.getClass(r.sub);if(!o)return;(i=new o).init(a,this._api),h[n]=i,l.push(i),c.add(i.group)}e.__viewId=i.__id=n,i.__alive=!0,i.__model=e,i.group.__ecComponentInfo={mainType:e.mainType,index:e.componentIndex}},this);for(e=0;e<l.length;){var n=l[e];n.__alive?e++:(c.remove(n.group),n.dispose(a,this._api),l.splice(e,1),delete h[n.__id],n.__id=n.group.__ecComponentInfo=null)}}function X(e,n,i){var r=this._api;e.clearColorPalette(),e.eachSeries(function(t){t.clearColorPalette()}),S(et,function(t){(!i||!t.isLayout)&&t.func(e,r,n)})}R.resize=function(t){this[M]=!0,this._zr.resize(t);var e=this._model&&this._model.resetOption("media");F[e?"prepareAndUpdate":"update"].call(this),this._loadingFX&&this._loadingFX.resize(),this[M]=!1;var n=t&&t.silent;H.call(this,n),W.call(this,n)},R.showLoading=function(t,e){if(g.isObject(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),it[t]){var n=it[t](this._api,e),i=this._zr;this._loadingFX=n,i.add(n)}},R.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},R.makeActionFromEvent=function(t){var e=g.extend({},t);return e.type=Z[t.type],e},R.dispatchAction=function(t,e){g.isObject(e)||(e={silent:!!e}),K[t.type]&&this._model&&(this[M]?this._pendingActions.push(t):(z.call(this,t,e.silent),e.flush?this._zr.flush(!0):!1!==e.flush&&v.browser.weChat&&this._throttledZrFlush(),H.call(this,e.silent),W.call(this,e.silent)))},R.on=E("on"),R.off=E("off"),R.one=E("one");var Y=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function V(t,e){var n=t.storage,i=0;n.traverse(function(t){t.isGroup||i++}),i>e.get("hoverLayerThreshold")&&!v.node&&n.traverse(function(t){t.isGroup||(t.useHoverLayer=!0)})}function q(t,e){var n=0;e.group.traverse(function(t){"group"===t.type||t.ignore||n++});var i=+t.get("progressive"),r=n>t.get("progressiveThreshold")&&i&&!v.node;r&&e.group.traverse(function(t){t.isGroup||(t.progressive=r?Math.floor(n++/i):-1,r&&t.stopAnimation(!0))});var o=t.get("blendMode")||null;e.group.traverse(function(t){t.isGroup||t.setStyle("blend",o)})}function $(t,e){var n=t.get("z"),i=t.get("zlevel");e.group.traverse(function(t){"group"!==t.type&&(null!=n&&(t.z=n),null!=i&&(t.zlevel=i))})}R._initEvents=function(){S(Y,function(o){this._zr.on(o,function(t){var e,n=this.getModel(),i=t.target;if("globalout"===o)e={};else if(i&&null!=i.dataIndex){var r=i.dataModel||n.getSeriesByIndex(i.seriesIndex);e=r&&r.getDataParams(i.dataIndex,i.dataType)||{}}else i&&i.eventData&&(e=g.extend({},i.eventData));e&&(e.event=t,e.type=o,this.trigger(o,e))},this)},this),S(Z,function(t,e){this._messageCenter.on(e,function(t){this.trigger(e,t)},this)},this)},R.isDisposed=function(){return this._disposed},R.clear=function(){this.setOption({series:[]},!0)},R.dispose=function(){if(!this._disposed){this._disposed=!0;var e=this._api,n=this._model;S(this._componentsViews,function(t){t.dispose(n,e)}),S(this._chartsViews,function(t){t.dispose(n,e)}),this._zr.dispose(),delete rt[this.id]}},g.mixin(j,h);var K={},Z={},J=[],Q=[],tt=[],et=[],nt={},it={},rt={},ot={},at=new Date-0,st=new Date-0,lt="_echarts_instance_",ht={};function ct(t){ot[t]=!1}var ut=ct;function ft(t){var e;return e=t.getAttribute?t.getAttribute(lt):t[lt],rt[e]}function dt(t){Q.push(t)}function pt(t,e,n){"function"==typeof e&&(n=e,e="");var i=g.isObject(t)?t.type:[t,t={event:e}][0];t.event=(t.event||i).toLowerCase(),e=t.event,g.assert(P.test(i)&&P.test(e)),K[i]||(K[i]={action:n,actionInfo:t}),Z[e]=i}function gt(t,e){"function"==typeof t&&(e=t,t=O),et.push({prio:t,func:e})}function vt(t,e){it[t]=e}gt(2e3,o),dt(d),vt("default",w),pt({type:"highlight",event:"highlight",update:"highlight"},g.noop),pt({type:"downplay",event:"downplay",update:"downplay"},g.noop);e.version="3.8.5",e.dependencies={zrender:"3.7.4"},e.PRIORITY=A,e.init=function(t,e,n){var i=ft(t);if(i)return i;var r=new j(t,e,n);return r.id="ec_"+at++,rt[r.id]=r,t.setAttribute?t.setAttribute(lt,r.id):t[lt]=r.id,function(i){var r="__connectUpdateStatus";function o(t,e){for(var n=0;n<t.length;n++)t[n][r]=e}g.each(Z,function(t,e){i._messageCenter.on(e,function(t){if(ot[i.group]&&0!==i[r]){if(t&&t.escapeConnect)return;var e=i.makeActionFromEvent(t),n=[];g.each(rt,function(t){t!==i&&t.group===i.group&&n.push(t)}),o(n,0),S(n,function(t){1!==t[r]&&t.dispatchAction(e)}),o(n,2)}})})}(r),r},e.connect=function(e){if(g.isArray(e)){var t=e;e=null,g.each(t,function(t){null!=t.group&&(e=t.group)}),e=e||"g_"+st++,g.each(t,function(t){t.group=e})}return ot[e]=!0,e},e.disConnect=ct,e.disconnect=ut,e.dispose=function(t){"string"==typeof t?t=rt[t]:t instanceof j||(t=ft(t)),t instanceof j&&!t.isDisposed()&&t.dispose()},e.getInstanceByDom=ft,e.getInstanceById=function(t){return rt[t]},e.registerTheme=function(t,e){nt[t]=e},e.registerPreprocessor=dt,e.registerProcessor=function(t,e){"function"==typeof t&&(e=t,t=T),J.push({prio:t,func:e})},e.registerPostUpdate=function(t){tt.push(t)},e.registerAction=pt,e.registerCoordinateSystem=function(t,e){u.register(t,e)},e.getCoordinateSystemDimensions=function(t){var e=u.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()},e.registerLayout=function(t,e){"function"==typeof t&&(e=t,t=k),et.push({prio:t,func:e,isLayout:!0})},e.registerVisual=gt,e.registerLoading=vt,e.extendComponentModel=function(t){return i.extend(t)},e.extendComponentView=function(t){return m.extend(t)},e.extendSeriesModel=function(t){return r.extend(t)},e.extendChartView=function(t){return y.extend(t)},e.setCanvasCreator=function(t){g.$override("createCanvas",t)},e.registerMap=function(t,e,n){e.geoJson&&!e.features&&(n=e.specialAreas,e=e.geoJson),"string"==typeof e&&(e="undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")()),ht[t]={geoJson:e,specialAreas:n}},e.getMap=function(t){return ht[t]},e.dataTool={};var mt=n(726);!function(){for(var t in mt)mt.hasOwnProperty(t)&&(e[t]=mt[t])}()},function(t,e,n){var u=n(597),l=n(606),i=n(602),r=n(608),f=u.each,s=u.isObject;function d(t){return t instanceof Array?t:null==t?[]:[t]}var o={getDataParams:function(t,e){var n=this.getData(e),i=this.getRawValue(t,e),r=n.getRawIndex(t),o=n.getName(t,!0),a=n.getRawDataItem(t),s=n.getItemVisual(t,"color");return{componentType:this.mainType,componentSubType:this.subType,seriesType:"series"===this.mainType?this.subType:null,seriesIndex:this.seriesIndex,seriesId:this.id,seriesName:this.name,name:o,dataIndex:r,data:a,dataType:e,value:i,color:s,marker:l.getTooltipMarker(s),$vars:["seriesName","name","value"]}},getFormattedLabel:function(t,e,n,i,r){e=e||"normal";var o=this.getData(n).getItemModel(t),a=this.getDataParams(t,n);null!=i&&a.value instanceof Array&&(a.value=a.value[i]);var s=o.get([r||"label",e,"formatter"]);return"function"==typeof s?(a.status=e,s(a)):"string"==typeof s?l.formatTpl(s,a):void 0},getRawValue:function(t,e){var n=this.getData(e).getRawDataItem(t);if(null!=n)return!s(n)||n instanceof Array?n:n.value},formatTooltip:u.noop};function a(t){return s(t)&&t.id&&0===(t.id+"").indexOf("\0_ec_\0")}var h,c=(h=0,function(){var e="\0__ec_prop_getter_"+h++;return function(t){return t[e]||(t[e]={})}});function p(t,e){return t&&t.hasOwnProperty(e)}e.normalizeToArray=d,e.defaultEmphasis=function(t,e){if(t)for(var n=t.emphasis=t.emphasis||{},i=t.normal=t.normal||{},r=0,o=e.length;r<o;r++){var a=e[r];!n.hasOwnProperty(a)&&i.hasOwnProperty(a)&&(n[a]=i[a])}},e.TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"],e.getDataItemValue=function(t){return t&&(null==t.value?t:t.value)},e.isDataItemOption=function(t){return s(t)&&!(t instanceof Array)},e.converDataValue=function(t,e){var n=e&&e.type;return"ordinal"===n?t:("time"===n&&"number"!=typeof t&&null!=t&&"-"!==t&&(t=+i.parseDate(t)),null==t||""===t?NaN:+t)},e.createDataFormatModel=function(t,e){var n=new r;return u.mixin(n,o),n.seriesIndex=e.seriesIndex,n.name=e.name||"",n.mainType=e.mainType,n.subType=e.subType,n.getData=function(){return t},n},e.dataFormatMixin=o,e.mappingToExists=function(t,r){r=(r||[]).slice();var o=u.map(t||[],function(t,e){return{exist:t}});return f(r,function(t,e){if(s(t)){for(var n=0;n<o.length;n++)if(!o[n].option&&null!=t.id&&o[n].exist.id===t.id+"")return o[n].option=t,void(r[e]=null);for(n=0;n<o.length;n++){var i=o[n].exist;if(!(o[n].option||null!=i.id&&null!=t.id||null==t.name||a(t)||a(i)||i.name!==t.name+""))return o[n].option=t,void(r[e]=null)}}}),f(r,function(t,e){if(s(t)){for(var n=0;n<o.length;n++){var i=o[n].exist;if(!o[n].option&&!a(i)&&null==t.id){o[n].option=t;break}}n>=o.length&&o.push({option:t})}}),o},e.makeIdAndName=function(t){var a=u.createHashMap();f(t,function(t,e){var n=t.exist;n&&a.set(n.id,t)}),f(t,function(t,e){var n=t.option;u.assert(!n||null==n.id||!a.get(n.id)||a.get(n.id)===t,"id duplicates: "+(n&&n.id)),n&&null!=n.id&&a.set(n.id,t),!t.keyInfo&&(t.keyInfo={})}),f(t,function(t,e){var n=t.exist,i=t.option,r=t.keyInfo;if(s(i)){if(r.name=null!=i.name?i.name+"":n?n.name:"\0-",n)r.id=n.id;else if(null!=i.id)r.id=i.id+"";else for(var o=0;r.id="\0"+r.name+"\0"+o++,a.get(r.id););a.set(r.id,t)}})},e.isIdInner=a,e.compressBatches=function(t,e){var n={},i={};return r(t||[],n),r(e||[],i,n),[o(n),o(i)];function r(t,e,n){for(var i=0,r=t.length;i<r;i++)for(var o=t[i].seriesId,a=d(t[i].dataIndex),s=n&&n[o],l=0,h=a.length;l<h;l++){var c=a[l];s&&s[c]?s[c]=null:(e[o]||(e[o]={}))[c]=1}}function o(t,e){var n=[];for(var i in t)if(t.hasOwnProperty(i)&&null!=t[i])if(e)n.push(+i);else{var r=o(t[i],!0);r.length&&n.push({seriesId:i,dataIndex:r})}return n}},e.queryDataIndex=function(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?u.isArray(t.dataIndex)?u.map(t.dataIndex,function(t){return e.indexOfRawIndex(t)}):e.indexOfRawIndex(t.dataIndex):null!=t.name?u.isArray(t.name)?u.map(t.name,function(t){return e.indexOfName(t)}):e.indexOfName(t.name):void 0},e.makeGetter=c,e.parseFinder=function(s,l,h){if(u.isString(l)){var t={};t[l+"Index"]=0,l=t}var e=h&&h.defaultMainType;!e||p(l,e+"Index")||p(l,e+"Id")||p(l,e+"Name")||(l[e+"Index"]=0);var c={};return f(l,function(t,e){if(t=l[e],"dataIndex"!==e&&"dataIndexInside"!==e){var n=e.match(/^(\w+)(Index|Id|Name)$/)||[],i=n[1],r=(n[2]||"").toLowerCase();if(!(!i||!r||null==t||"index"===r&&"none"===t||h&&h.includeMainTypes&&u.indexOf(h.includeMainTypes,i)<0)){var o={mainType:i};"index"===r&&"all"===t||(o[r]=t);var a=s.queryComponents(o);c[i+"Models"]=a,c[i+"Model"]=a[0]}}else c[e]=t}),c},e.dataDimToCoordDim=function(t,e){var n=t.dimensions;e=t.getDimension(e);for(var i=0;i<n.length;i++){var r=t.getDimensionInfo(n[i]);if(r.name===e)return r.coordDim}},e.coordDimToDataDim=function(n,i){var r=[];return f(n.dimensions,function(t){var e=n.getDimensionInfo(t);e.coordDim===i&&(r[e.coordDimIndex]=e.name)}),r},e.otherDimToDataDim=function(i,r){var o=[];return f(i.dimensions,function(t){var e=i.getDimensionInfo(t),n=e.otherDims[r];null!=n&&!1!==n&&(o[n]=e.name)}),o}},function(t,e){var i="undefined"==typeof Float32Array?Array:Float32Array;function r(t){return Math.sqrt(o(t))}var n=r;function o(t){return t[0]*t[0]+t[1]*t[1]}var a=o;function s(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var l=s;function h(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var c=h;e.create=function(t,e){var n=new i(2);return null==t&&(t=0),null==e&&(e=0),n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.clone=function(t){var e=new i(2);return e[0]=t[0],e[1]=t[1],e},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t},e.sub=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},e.len=r,e.length=n,e.lenSquare=o,e.lengthSquare=a,e.mul=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},e.div=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.normalize=function(t,e){var n=r(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t},e.distance=s,e.dist=l,e.distanceSquare=h,e.distSquare=c,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.lerp=function(t,e,n,i){return t[0]=e[0]+i*(n[0]-e[0]),t[1]=e[1]+i*(n[1]-e[1]),t},e.applyTransform=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}},function(t,e,n){var p=n(597),i=1e-4;var r=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function o(t){return Math.floor(Math.log(t)/Math.LN10)}e.linearMap=function(t,e,n,i){var r=e[1]-e[0],o=n[1]-n[0];if(0===r)return 0===o?n[0]:(n[0]+n[1])/2;if(i)if(0<r){if(t<=e[0])return n[0];if(t>=e[1])return n[1]}else{if(t>=e[0])return n[0];if(t<=e[1])return n[1]}else{if(t===e[0])return n[0];if(t===e[1])return n[1]}return(t-e[0])/r*o+n[0]},e.parsePercent=function(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?(n=t,n.replace(/^\s+/,"").replace(/\s+$/,"")).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t;var n},e.round=function(t,e,n){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),n?t:+t},e.asc=function(t){return t.sort(function(t,e){return t-e}),t},e.getPrecision=function(t){if(t=+t,isNaN(t))return 0;for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n},e.getPrecisionSafe=function(t){var e=t.toString(),n=e.indexOf("e");if(0<n){var i=+e.slice(n+1);return i<0?-i:0}var r=e.indexOf(".");return r<0?0:e.length-1-r},e.getPixelPrecision=function(t,e){var n=Math.log,i=Math.LN10,r=Math.floor(n(t[1]-t[0])/i),o=Math.round(n(Math.abs(e[1]-e[0]))/i),a=Math.min(Math.max(-r+o,0),20);return isFinite(a)?a:20},e.getPercentWithPrecision=function(t,e,n){if(!t[e])return 0;var i=p.reduce(t,function(t,e){return t+(isNaN(e)?0:e)},0);if(0===i)return 0;for(var r=Math.pow(10,n),o=p.map(t,function(t){return(isNaN(t)?0:t)/i*r*100}),a=100*r,s=p.map(o,function(t){return Math.floor(t)}),l=p.reduce(s,function(t,e){return t+e},0),h=p.map(o,function(t,e){return t-s[e]});l<a;){for(var c=Number.NEGATIVE_INFINITY,u=null,f=0,d=h.length;f<d;++f)h[f]>c&&(c=h[f],u=f);++s[u],h[u]=0,++l}return s[e]/r},e.MAX_SAFE_INTEGER=9007199254740991,e.remRadian=function(t){var e=2*Math.PI;return(t%e+e)%e},e.isRadianAroundZero=function(t){return-i<t&&t<i},e.parseDate=function(t){if(t instanceof Date)return t;if("string"==typeof t){var e=r.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}return null==t?new Date(NaN):new Date(Math.round(t))},e.quantity=function(t){return Math.pow(10,o(t))},e.nice=function(t,e){var n=o(t),i=Math.pow(10,n),r=t/i;return t=(e?r<1.5?1:r<2.5?2:r<4?3:r<7?5:10:r<1?1:r<2?2:r<3?3:r<5?5:10)*i,-20<=n?+t.toFixed(n<0?-n:0):t},e.reformIntervals=function(t){t.sort(function(t,e){return function t(e,n,i){return e.interval[i]<n.interval[i]||e.interval[i]===n.interval[i]&&(e.close[i]-n.close[i]==(i?-1:1)||!i&&t(e,n,1))}(t,e,0)?-1:1});for(var e=-1/0,n=1,i=0;i<t.length;){for(var r=t[i].interval,o=t[i].close,a=0;a<2;a++)r[a]<=e&&(r[a]=e,o[a]=a?1:1-n),e=r[a],n=o[a];r[0]===r[1]&&o[0]*o[1]!=1?t.splice(i,1):i++}return t},e.isNumeric=function(t){return 0<=t-parseFloat(t)}},function(t,e,n){var i=n(629),o=n(597),s=n(622),l=n(695),m=n(650).prototype.getCanvasPattern,r=Math.abs,y=new s(!0);function a(t){i.call(this,t),this.path=null}a.prototype={constructor:a,type:"path",__dirtyPath:!0,strokeContainThreshold:5,brush:function(t,e){var n,i=this.style,r=this.path||y,o=i.hasStroke(),a=i.hasFill(),s=i.fill,l=i.stroke,h=a&&!!s.colorStops,c=o&&!!l.colorStops,u=a&&!!s.image,f=o&&!!l.image;(i.bind(t,this,e),this.setTransform(t),this.__dirty)&&(h&&(n=n||this.getBoundingRect(),this._fillGradient=i.getGradient(t,s,n)),c&&(n=n||this.getBoundingRect(),this._strokeGradient=i.getGradient(t,l,n)));h?t.fillStyle=this._fillGradient:u&&(t.fillStyle=m.call(s,t)),c?t.strokeStyle=this._strokeGradient:f&&(t.strokeStyle=m.call(l,t));var d=i.lineDash,p=i.lineDashOffset,g=!!t.setLineDash,v=this.getGlobalScale();r.setScale(v[0],v[1]),this.__dirtyPath||d&&!g&&o?(r.beginPath(t),d&&!g&&(r.setLineDash(d),r.setLineDashOffset(p)),this.buildPath(r,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),a&&r.fill(t),d&&g&&(t.setLineDash(d),t.lineDashOffset=p),o&&r.stroke(t),d&&g&&t.setLineDash([]),this.restoreTransform(t),null!=i.text&&this.drawRectText(t,this.getBoundingRect())},buildPath:function(t,e,n){},createPathProxy:function(){this.path=new s},getBoundingRect:function(){var t=this._rect,e=this.style,n=!t;if(n){var i=this.path;i||(i=this.path=new s),this.__dirtyPath&&(i.beginPath(),this.buildPath(i,this.shape,!1)),t=i.getBoundingRect()}if(this._rect=t,e.hasStroke()){var r=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||n){r.copy(t);var o=e.lineWidth,a=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(o=Math.max(o,this.strokeContainThreshold||4)),1e-10<a&&(r.width+=o/a,r.height+=o/a,r.x-=o/a/2,r.y-=o/a/2)}return r}return t},contain:function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect(),r=this.style;if(t=n[0],e=n[1],i.contain(t,e)){var o=this.path.data;if(r.hasStroke()){var a=r.lineWidth,s=r.strokeNoScale?this.getLineScale():1;if(1e-10<s&&(r.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),l.containStroke(o,a/s,t,e)))return!0}if(r.hasFill())return l.contain(o,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):i.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var n=this.shape;if(n){if(o.isObject(t))for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);else n[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&1e-10<r(t[0]-1)&&1e-10<r(t[3]-1)?Math.sqrt(r(t[0]*t[3]-t[2]*t[1])):1}},a.extend=function(r){var t=function(t){a.call(this,t),r.style&&this.style.extendFrom(r.style,!1);var e=r.shape;if(e){this.shape=this.shape||{};var n=this.shape;for(var i in e)!n.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(n[i]=e[i])}r.init&&r.init.call(this,t)};for(var e in o.inherits(t,a),r)"style"!==e&&"shape"!==e&&(t.prototype[e]=r[e]);return t},o.inherits(a,i);var h=a;t.exports=h},function(t,i,e){(function(t){var e;"undefined"!=typeof window?e=window.__DEV__:void 0!==t&&(e=t.__DEV__),void 0===e&&(e=!0);var n=e;i.__DEV__=n}).call(i,e(48))},function(t,e){var n="undefined"==typeof navigator?{browser:{},os:{},node:!0,canvasSupported:!0,svgSupported:!0}:function(t){var e={},n=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),r=t.match(/Edge\/([\d.]+)/),o=/micromessenger/i.test(t);n&&(e.firefox=!0,e.version=n[1]);i&&(e.ie=!0,e.version=i[1]);r&&(e.edge=!0,e.version=r[1]);o&&(e.weChat=!0);return{browser:e,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!e.ie&&!e.edge,pointerEventsSupported:"onpointerdown"in window&&(e.edge||e.ie&&11<=e.version)}}(navigator.userAgent);t.exports=n},function(t,e,n){var c=n(597),i=n(612),u=n(602);var r=c.normalizeCssArray;function f(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var d=["a","b","c","d","e","f","g"],p=function(t,e){return"{"+t+(null==e?"":e)+"}"};var g=function(t){return t<10?"0"+t:t};var o=i.truncateText,a=i.getBoundingRect;e.addCommas=function(t){return isNaN(t)?"-":(t=(t+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<t.length?"."+t[1]:"")},e.toCamelCase=function(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t},e.normalizeCssArray=r,e.encodeHTML=f,e.formatTpl=function(t,e,n){c.isArray(e)||(e=[e]);var i=e.length;if(!i)return"";for(var r=e[0].$vars||[],o=0;o<r.length;o++){var a=d[o],s=p(a,0);t=t.replace(p(a),n?f(s):s)}for(var l=0;l<i;l++)for(var h=0;h<r.length;h++)s=e[l][r[h]],t=t.replace(p(d[h],l),n?f(s):s);return t},e.formatTplSimple=function(n,t,i){return c.each(t,function(t,e){n=n.replace("{"+e+"}",i?f(t):t)}),n},e.getTooltipMarker=function(t,e){return t?'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+f(t)+";"+(e||"")+'"></span>':""},e.formatTime=function(t,e,n){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var i=u.parseDate(e),r=n?"UTC":"",o=i["get"+r+"FullYear"](),a=i["get"+r+"Month"]()+1,s=i["get"+r+"Date"](),l=i["get"+r+"Hours"](),h=i["get"+r+"Minutes"](),c=i["get"+r+"Seconds"]();return t=t.replace("MM",g(a)).replace("M",a).replace("yyyy",o).replace("yy",o%100).replace("dd",g(s)).replace("d",s).replace("hh",g(l)).replace("h",l).replace("mm",g(h)).replace("m",h).replace("ss",g(c)).replace("s",c)},e.capitalFirst=function(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t},e.truncateText=o,e.getTextRect=a},function(t,e,n){var i,r,o,a,s=n(601),l=n(614),h=s.applyTransform,c=Math.min,u=Math.max;function f(t,e,n,i){n<0&&(t+=n,n=-n),i<0&&(e+=i,i=-i),this.x=t,this.y=e,this.width=n,this.height=i}f.prototype={constructor:f,union:function(t){var e=c(t.x,this.x),n=c(t.y,this.y);this.width=u(t.x+t.width,this.x+this.width)-e,this.height=u(t.y+t.height,this.y+this.height)-n,this.x=e,this.y=n},applyTransform:(i=[],r=[],o=[],a=[],function(t){if(t){i[0]=o[0]=this.x,i[1]=a[1]=this.y,r[0]=a[0]=this.x+this.width,r[1]=o[1]=this.y+this.height,h(i,i,t),h(r,r,t),h(o,o,t),h(a,a,t),this.x=c(i[0],r[0],o[0],a[0]),this.y=c(i[1],r[1],o[1],a[1]);var e=u(i[0],r[0],o[0],a[0]),n=u(i[1],r[1],o[1],a[1]);this.width=e-this.x,this.height=n-this.y}}),calculateTransform:function(t){var e=t.width/this.width,n=t.height/this.height,i=l.create();return l.translate(i,i,[-this.x,-this.y]),l.scale(i,i,[e,n]),l.translate(i,i,[t.x,t.y]),i},intersect:function(t){if(!t)return!1;t instanceof f||(t=f.create(t));var e=this,n=e.x,i=e.x+e.width,r=e.y,o=e.y+e.height,a=t.x,s=t.x+t.width,l=t.y,h=t.y+t.height;return!(i<a||s<n||o<l||h<r)},contain:function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},clone:function(){return new f(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},f.create=function(t){return new f(t.x,t.y,t.width,t.height)};var d=f;t.exports=d},function(t,e,n){var i=n(597),r=n(605),o=n(609),a=n(691),s=n(692),l=n(693),h=n(716),c=i.mixin;function u(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}function f(t,e,n){for(var i=0;i<e.length&&(!e[i]||null!=(t=t&&"object"==typeof t?t[e[i]]:null));i++);return null==t&&n&&(t=n.get(e)),t}function d(t,e){var n=o.get(t,"getParent");return n?n.call(t,e):t.parentModel}u.prototype={constructor:u,init:null,mergeOption:function(t){i.merge(this.option,t,!0)},get:function(t,e){return null==t?this.option:f(this.option,this.parsePath(t),!e&&d(this,t))},getShallow:function(t,e){var n=this.option,i=null==n?n:n[t],r=!e&&d(this,t);return null==i&&r&&(i=r.getShallow(t)),i},getModel:function(t,e){var n;return new u(null==t?this.option:f(this.option,t=this.parsePath(t)),e=e||(n=d(this,t))&&n.getModel(t),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new(0,this.constructor)(i.clone(this.option))},setReadOnly:function(t){o.setReadOnly(this,t)},parsePath:function(t){return"string"==typeof t&&(t=t.split(".")),t},customizeGetParent:function(t){o.set(this,"getParent",t)},isAnimationEnabled:function(){if(!r.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},o.enableClassExtend(u),c(u,a),c(u,s),c(u,l),c(u,h);var p=u;t.exports=p},function(t,e,n){n(604).__DEV__;var a=n(597),i=".",s="___EC__COMPONENT__CONTAINER___",r="\0ec_\0";function l(t){var e={main:"",sub:""};return t&&(t=t.split(i),e.main=t[0]||"",e.sub=t[1]||""),e}function o(t,e){var n=a.slice(arguments,2);return this.superClass.prototype[e].apply(t,n)}function h(t,e,n){return this.superClass.prototype[e].apply(t,n)}e.set=function(t,e,n){return t[r+e]=n},e.get=function(t,e){return t[r+e]},e.hasOwn=function(t,e){return t.hasOwnProperty(r+e)},e.parseClassType=l,e.enableClassExtend=function(t,e){(t.$constructor=t).extend=function(t){var e=this,n=function(){t.$constructor?t.$constructor.apply(this,arguments):e.apply(this,arguments)};return a.extend(n.prototype,t),n.extend=this.extend,n.superCall=o,n.superApply=h,a.inherits(n,this),n.superClass=e,n}},e.enableClassManagement=function(n,t){t=t||{};var o={};if(n.registerClass=function(t,e){var n,i,r;return e&&(r=e,a.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r),'componentType "'+r+'" illegal'),(e=l(e)).sub?e.sub!==s&&((n=e,i=o[n.main],i&&i[s]||((i=o[n.main]={})[s]=!0),i)[e.sub]=t):o[e.main]=t),t},n.getClass=function(t,e,n){var i=o[t];if(i&&i[s]&&(i=e?i[e]:null),n&&!i)throw new Error(e?"Component "+t+"."+(e||"")+" not exists. Load it first.":t+".type should be specified.");return i},n.getClassesByMainType=function(t){t=l(t);var n=[],e=o[t.main];return e&&e[s]?a.each(e,function(t,e){e!==s&&n.push(t)}):n.push(e),n},n.hasClass=function(t){return t=l(t),!!o[t.main]},n.getAllClassMainTypes=function(){var n=[];return a.each(o,function(t,e){n.push(e)}),n},n.hasSubTypes=function(t){t=l(t);var e=o[t.main];return e&&e[s]},n.parseClassType=l,t.registerWhenExtend){var i=n.extend;i&&(n.extend=function(t){var e=i.call(this,t);return n.registerClass(e,t.type)})}return n},e.setReadOnly=function(t,e){}},function(t,e,n){var o=n(597),r=n(608),a=n(632),s=n(609),l=n(611),i=n(717),h=Array.prototype.push,c=r.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,n,i){r.call(this,t,e,n,i),this.uid=a.getUID("componentModel")},init:function(t,e,n,i){this.mergeDefaultAndTheme(t,n)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?l.getLayoutParams(t):{},r=e.getTheme();o.merge(t,r.get(this.mainType)),o.merge(t,this.getDefaultOption()),n&&l.mergeLayoutParam(t,i,n)},mergeOption:function(t,e){o.merge(this.option,t,!0);var n=this.layoutMode;n&&l.mergeLayoutParam(this.option,t,n)},optionUpdated:function(t,e){},getDefaultOption:function(){if(!s.hasOwn(this,"__defaultOption")){for(var t=[],e=this.constructor;e;){var n=e.prototype.defaultOption;n&&t.push(n),e=e.superClass}for(var i={},r=t.length-1;0<=r;r--)i=o.merge(i,t[r],!0);s.set(this,"__defaultOption",i)}return s.get(this,"__defaultOption")},getReferringComponents:function(t){return this.ecModel.queryComponents({mainType:t,index:this.get(t+"Index",!0),id:this.get(t+"Id",!0)})}});s.enableClassManagement(c,{registerWhenExtend:!0}),a.enableSubTypeDefaulter(c),a.enableTopologicalTravel(c,function(t){var e=[];return o.each(c.getClassesByMainType(t),function(t){h.apply(e,t.prototype.dependencies||[])}),o.map(e,function(t){return s.parseClassType(t).main})}),o.mixin(c,i);var u=c;t.exports=u},function(t,e,n){var d=n(597),g=n(607),v=n(602).parsePercent,m=n(606),p=d.each,i=["left","right","top","bottom","width","height"],o=[["width","left","right"],["height","top","bottom"]];function r(c,u,f,d,p){var g=0,v=0;null==d&&(d=1/0),null==p&&(p=1/0);var m=0;u.eachChild(function(t,e){var n,i,r=t.position,o=t.getBoundingRect(),a=u.childAt(e+1),s=a&&a.getBoundingRect();if("horizontal"===c){var l=o.width+(s?-s.x+o.x:0);d<(n=g+l)||t.newline?(g=0,n=l,v+=m+f,m=o.height):m=Math.max(m,o.height)}else{var h=o.height+(s?-s.y+o.y:0);p<(i=v+h)||t.newline?(g+=m+f,v=0,i=h,m=o.width):m=Math.max(m,o.width)}t.newline||(r[0]=g,r[1]=v,"horizontal"===c?g=n+f:v=i+f)})}var a=r,s=d.curry(r,"vertical"),l=d.curry(r,"horizontal");function y(t,e,n){n=m.normalizeCssArray(n||0);var i=e.width,r=e.height,o=v(t.left,i),a=v(t.top,r),s=v(t.right,i),l=v(t.bottom,r),h=v(t.width,i),c=v(t.height,r),u=n[2]+n[0],f=n[1]+n[3],d=t.aspect;switch(isNaN(h)&&(h=i-s-f-o),isNaN(c)&&(c=r-l-u-a),null!=d&&(isNaN(h)&&isNaN(c)&&(i/r<d?h=.8*i:c=.8*r),isNaN(h)&&(h=d*c),isNaN(c)&&(c=h/d)),isNaN(o)&&(o=i-s-h-f),isNaN(a)&&(a=r-l-c-u),t.left||t.right){case"center":o=i/2-h/2-n[3];break;case"right":o=i-h-f}switch(t.top||t.bottom){case"middle":case"center":a=r/2-c/2-n[0];break;case"bottom":a=r-c-u}o=o||0,a=a||0,isNaN(h)&&(h=i-f-o-(s||0)),isNaN(c)&&(c=r-u-a-(l||0));var p=new g(o+n[3],a+n[0],h,c);return p.margin=n,p}function h(e,n){return n&&e&&p(i,function(t){n.hasOwnProperty(t)&&(e[t]=n[t])}),e}e.LOCATION_PARAMS=i,e.HV_NAMES=o,e.box=a,e.vbox=s,e.hbox=l,e.getAvailableSize=function(t,e,n){var i=e.width,r=e.height,o=v(t.x,i),a=v(t.y,r),s=v(t.x2,i),l=v(t.y2,r);return(isNaN(o)||isNaN(parseFloat(t.x)))&&(o=0),(isNaN(s)||isNaN(parseFloat(t.x2)))&&(s=i),(isNaN(a)||isNaN(parseFloat(t.y)))&&(a=0),(isNaN(l)||isNaN(parseFloat(t.y2)))&&(l=r),n=m.normalizeCssArray(n||0),{width:Math.max(s-o-n[1]-n[3],0),height:Math.max(l-a-n[0]-n[2],0)}},e.getLayoutRect=y,e.positionElement=function(t,e,n,i,r){var o=!r||!r.hv||r.hv[0],a=!r||!r.hv||r.hv[1],s=r&&r.boundingMode||"all";if(o||a){var l;if("raw"===s)l="group"===t.type?new g(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(l=t.getBoundingRect(),t.needLocalTransform()){var h=t.getLocalTransform();(l=l.clone()).applyTransform(h)}e=y(d.defaults({width:l.width,height:l.height},e),n,i);var c=t.position,u=o?e.x-l.x:0,f=a?e.y-l.y:0;t.attr("position","raw"===s?[u,f]:[c[0]+u,c[1]+f])}},e.sizeCalculable=function(t,e){return null!=t[o[e][0]]||null!=t[o[e][1]]&&null!=t[o[e][2]]},e.mergeLayoutParam=function(l,h,t){!d.isObject(t)&&(t={});var c=t.ignoreSize;!d.isArray(c)&&(c=[c,c]);var e=i(o[0],0),n=i(o[1],1);function i(t,e){var n={},i=0,r={},o=0;if(p(t,function(t){r[t]=l[t]}),p(t,function(t){u(h,t)&&(n[t]=r[t]=h[t]),f(n,t)&&i++,f(r,t)&&o++}),c[e])return f(h,t[1])?r[t[2]]=null:f(h,t[2])&&(r[t[1]]=null),r;if(2!==o&&i){if(2<=i)return n;for(var a=0;a<t.length;a++){var s=t[a];if(!u(n,s)&&u(l,s)){n[s]=l[s];break}}return n}return r}function u(t,e){return t.hasOwnProperty(e)}function f(t,e){return null!=t[e]&&"auto"!==t[e]}function r(t,e,n){p(t,function(t){e[t]=n[t]})}r(o[0],l,e),r(o[1],l,n)},e.getLayoutParams=function(t){return h({},t)},e.copyLayoutParams=h},function(t,e,n){var p=n(607),I=n(630),i=n(597),r=i.getContext,h=i.extend,P=i.retrieve2,E=i.retrieve3,s={},l=0,c=5e3,L=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,u="12px sans-serif",o={};function j(t,e){var n=t+":"+(e=e||u);if(s[n])return s[n];for(var i=(t+"").split("\n"),r=0,o=0,a=i.length;o<a;o++)r=Math.max(y(i[o],e).width,r);return c<l&&(l=0,s={}),l++,s[n]=r}function g(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function v(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function R(t,e,n,i,r){if(!e)return"";var o=(t+"").split("\n");r=d(e,n,i,r);for(var a=0,s=o.length;a<s;a++)o[a]=m(o[a],r);return o.join("\n")}function d(t,e,n,i){(i=h({},i)).font=e;n=P(n,"...");i.maxIterations=P(i.maxIterations,2);var r=i.minChar=P(i.minChar,0);i.cnCharWidth=j("国",e);var o=i.ascCharWidth=j("a",e);i.placeholder=P(i.placeholder,"");for(var a=t=Math.max(0,t-1),s=0;s<r&&o<=a;s++)a-=o;var l=j(n);return a<l&&(n="",l=0),a=t-l,i.ellipsis=n,i.ellipsisWidth=l,i.contentWidth=a,i.containerWidth=t,i}function m(t,e){var n=e.containerWidth,i=e.font,r=e.contentWidth;if(!n)return"";var o=j(t,i);if(o<=n)return t;for(var a=0;;a++){if(o<=r||a>=e.maxIterations){t+=e.ellipsis;break}var s=0===a?f(t,r,e.ascCharWidth,e.cnCharWidth):0<o?Math.floor(t.length*r/o):0;o=j(t=t.substr(0,s),i)}return""===t&&(t=e.placeholder),t}function f(t,e,n,i){for(var r=0,o=0,a=t.length;o<a&&r<e;o++){var s=t.charCodeAt(o);r+=0<=s&&s<=127?n:i}return o}function B(t){return j("国",t)}function y(t,e){return o.measureText(t,e)}function _(t,e,n,i){null!=t&&(t+="");var r=B(e),o=t?t.split("\n"):[],a=o.length*r,s=a;if(n&&(s+=n[0]+n[2]),t&&i){var l=i.outerHeight,h=i.outerWidth;if(null!=l&&l<s)t="",o=[];else if(null!=h)for(var c=d(h-(n?n[1]+n[3]:0),e,i.ellipsis,{minChar:i.minChar,placeholder:i.placeholder}),u=0,f=o.length;u<f;u++)o[u]=m(o[u],c)}return{lines:o,height:a,outerHeight:s,lineHeight:r}}function x(t,e){var n={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return n;for(var i,r=L.lastIndex=0;null!=(i=L.exec(t));){var o=i.index;r<o&&F(n,t.substring(r,o)),F(n,i[2],i[1]),r=L.lastIndex}r<t.length&&F(n,t.substring(r,t.length));var a=n.lines,s=0,l=0,h=[],c=e.textPadding,u=e.truncate,f=u&&u.outerWidth,d=u&&u.outerHeight;c&&(null!=f&&(f-=c[1]+c[3]),null!=d&&(d-=c[0]+c[2]));for(var p=0;p<a.length;p++){for(var g=a[p],v=0,m=0,y=0;y<g.tokens.length;y++){var _=(M=g.tokens[y]).styleName&&e.rich[M.styleName]||{},x=M.textPadding=_.textPadding,b=M.font=_.font||e.font,w=M.textHeight=P(_.textHeight,B(b));if(x&&(w+=x[0]+x[2]),M.height=w,M.lineHeight=E(_.textLineHeight,e.textLineHeight,w),M.textAlign=_&&_.textAlign||e.textAlign,M.textVerticalAlign=_&&_.textVerticalAlign||"middle",null!=d&&s+M.lineHeight>d)return{lines:[],width:0,height:0};M.textWidth=j(M.text,b);var S=_.textWidth,C=null==S||"auto"===S;if("string"==typeof S&&"%"===S.charAt(S.length-1))M.percentWidth=S,h.push(M),S=0;else{if(C){S=M.textWidth;var T=_.textBackgroundColor,k=T&&T.image;k&&(k=I.findExistImage(k),I.isImageReady(k)&&(S=Math.max(S,k.width*w/k.height)))}var O=x?x[1]+x[3]:0;S+=O;var A=null!=f?f-m:null;null!=A&&A<S&&(!C||A<O?(M.text="",M.textWidth=S=0):(M.text=R(M.text,A-O,b,u.ellipsis,{minChar:u.minChar}),M.textWidth=j(M.text,b),S=M.textWidth+O))}m+=M.width=S,_&&(v=Math.max(v,M.lineHeight))}g.width=m,s+=g.lineHeight=v,l=Math.max(l,m)}n.outerWidth=n.width=P(e.textWidth,l),n.outerHeight=n.height=P(e.textHeight,s),c&&(n.outerWidth+=c[1]+c[3],n.outerHeight+=c[0]+c[2]);for(p=0;p<h.length;p++){var M,D=(M=h[p]).percentWidth;M.width=parseInt(D,10)/100*l}return n}function F(t,e,n){for(var i=""===e,r=e.split("\n"),o=t.lines,a=0;a<r.length;a++){var s=r[a],l={styleName:n,text:s,isLineHolder:!s&&!i};if(a)o.push({tokens:[l]});else{var h=(o[o.length-1]||(o[0]={tokens:[]})).tokens,c=h.length;1===c&&h[0].isLineHolder?h[0]=l:(s||!c||i)&&h.push(l)}}}o.measureText=function(t,e){var n=r();return n.font=e||u,n.measureText(t)},e.DEFAULT_FONT=u,e.$override=function(t,e){o[t]=e},e.getWidth=j,e.getBoundingRect=function(t,e,n,i,r,o,a){return o?(l=i,h=x(t,{rich:o,truncate:a,font:e,textAlign:s=n,textPadding:r}),c=h.outerWidth,u=h.outerHeight,f=g(0,c,s),d=v(0,u,l),new p(f,d,c,u)):function(t,e,n,i,r,o){var a=_(t,e,r,o),s=j(t,e);r&&(s+=r[1]+r[3]);var l=a.outerHeight,h=g(0,s,n),c=v(0,l,i),u=new p(h,c,s,l);return u.lineHeight=a.lineHeight,u}(t,e,n,i,r,a);var s,l,h,c,u,f,d},e.adjustTextX=g,e.adjustTextY=v,e.adjustTextPositionOnRect=function(t,e,n){var i=e.x,r=e.y,o=e.height,a=e.width,s=o/2,l="left",h="top";switch(t){case"left":i-=n,r+=s,l="right",h="middle";break;case"right":i+=n+a,r+=s,h="middle";break;case"top":i+=a/2,r-=n,l="center",h="bottom";break;case"bottom":i+=a/2,r+=o+n,l="center";break;case"inside":i+=a/2,r+=s,l="center",h="middle";break;case"insideLeft":i+=n,r+=s,h="middle";break;case"insideRight":i+=a-n,r+=s,l="right",h="middle";break;case"insideTop":i+=a/2,r+=n,l="center";break;case"insideBottom":i+=a/2,r+=o-n,l="center",h="bottom";break;case"insideTopLeft":i+=n,r+=n;break;case"insideTopRight":i+=a-n,r+=n,l="right";break;case"insideBottomLeft":i+=n,r+=o-n,h="bottom";break;case"insideBottomRight":i+=a-n,r+=o-n,l="right",h="bottom"}return{x:i,y:r,textAlign:l,textVerticalAlign:h}},e.truncateText=R,e.getLineHeight=B,e.measureText=y,e.parsePlainText=_,e.parseRichText=x,e.makeFont=function(t){return(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ")||t.textFont||t.font}},function(t,e,n){n(604).__DEV__;var u=n(597),d=n(612),i=n(729),r=n(627),o=n(623),f=n(602);function l(t,e){var n,i,r,o=t.type,a=e.getMin(),s=e.getMax(),l=null!=a,h=null!=s,c=t.getExtent();return"ordinal"===o?n=(e.get("data")||[]).length:(i=e.get("boundaryGap"),u.isArray(i)||(i=[i||0,i||0]),"boolean"==typeof i[0]&&(i=[0,0]),i[0]=f.parsePercent(i[0],1),i[1]=f.parsePercent(i[1],1),r=c[1]-c[0]||Math.abs(c[0])),null==a&&(a="ordinal"===o?n?0:NaN:c[0]-i[0]*r),null==s&&(s="ordinal"===o?n?n-1:NaN:c[1]+i[1]*r),"dataMin"===a?a=c[0]:"function"==typeof a&&(a=a({min:c[0],max:c[1]})),"dataMax"===s?s=c[1]:"function"==typeof s&&(s=s({min:c[0],max:c[1]})),(null==a||!isFinite(a))&&(a=NaN),(null==s||!isFinite(s))&&(s=NaN),t.setBlank(u.eqNaN(a)||u.eqNaN(s)),e.getNeedCrossZero()&&(0<a&&0<s&&!l&&(a=0),a<0&&s<0&&!h&&(s=0)),[a,s]}function a(t,e){return"category"===t.type?t.scale.getLabel(e):e}n(730),n(731),e.getScaleExtent=l,e.niceScaleExtent=function(t,e){var n=l(t,e),i=null!=e.getMin(),r=null!=e.getMax(),o=e.get("splitNumber");"log"===t.type&&(t.base=e.get("logBase"));var a=t.type;t.setExtent(n[0],n[1]),t.niceExtent({splitNumber:o,fixMin:i,fixMax:r,minInterval:"interval"===a||"time"===a?e.get("minInterval"):null,maxInterval:"interval"===a||"time"===a?e.get("maxInterval"):null});var s=e.get("interval");null!=s&&t.setInterval&&t.setInterval(s)},e.createScaleByModel=function(t,e){if(e=e||t.get("type"))switch(e){case"category":return new i(t.getCategories(),[1/0,-1/0]);case"value":return new r;default:return(o.getClass(e)||r).create(t)}},e.ifAxisCrossZero=function(t){var e=t.scale.getExtent(),n=e[0],i=e[1];return!(0<n&&0<i||n<0&&i<0)},e.getAxisLabelInterval=function(t,e,n,i,r){var o,a=0,s=0,l=(i-r)/180*Math.PI,h=1;40<e.length&&(h=Math.floor(e.length/40));for(var c=0;c<t.length;c+=h){var u=t[c],f=d.getBoundingRect(e[c],n,"center","top");f.x+=u*Math.cos(l),f.y+=u*Math.sin(l),f.width*=1.3,f.height*=1.3,o?o.intersect(f)?(s++,a=Math.max(a,s)):(o.union(f),s=0):o=f.clone()}return 0===a&&1<h?h:(a+1)*h-1},e.getFormattedLabels=function(n,i){var e,t=n.scale,r=t.getTicksLabels(),o=t.getTicks();return"string"==typeof i?(e=i,i=function(t){return e.replace("{value}",null!=t?t:"")},u.map(r,i)):"function"==typeof i?u.map(o,function(t,e){return i(a(n,t),e)},this):r},e.getAxisRawValue=a},function(t,e){var n="undefined"==typeof Float32Array?Array:Float32Array;function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}e.create=function(){var t=new n(6);return i(t),t},e.identity=i,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.mul=function(t,e,n){var i=e[0]*n[0]+e[2]*n[1],r=e[1]*n[0]+e[3]*n[1],o=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],l=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t},e.translate=function(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t},e.rotate=function(t,e,n){var i=e[0],r=e[2],o=e[4],a=e[1],s=e[3],l=e[5],h=Math.sin(n),c=Math.cos(n);return t[0]=i*c+a*h,t[1]=-i*h+a*c,t[2]=r*c+s*h,t[3]=-r*h+c*s,t[4]=c*o+h*l,t[5]=c*l-h*o,t},e.scale=function(t,e,n){var i=n[0],r=n[1];return t[0]=e[0]*i,t[1]=e[1]*r,t[2]=e[2]*i,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*r,t},e.invert=function(t,e){var n=e[0],i=e[2],r=e[4],o=e[1],a=e[3],s=e[5],l=n*a-o*i;return l?(l=1/l,t[0]=a*l,t[1]=-o*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*s-a*r)*l,t[5]=(o*r-n*s)*l,t):null}},function(t,e,n){var i=n(601),r=i.create,x=i.distSquare,k=Math.pow,O=Math.sqrt,o=1e-8,b=1e-4,A=O(3),M=1/3,w=r(),S=r(),C=r();function D(t){return-o<t&&t<o}function d(t){return o<t||t<-o}function T(t,e,n,i,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*i+3*o*n)}function y(t,e,n,i){var r=1-i;return r*(r*t+2*i*e)+i*i*n}e.cubicAt=T,e.cubicDerivativeAt=function(t,e,n,i,r){var o=1-r;return 3*(((e-t)*o+2*(n-e)*r)*o+(i-n)*r*r)},e.cubicRootAt=function(t,e,n,i,r,o){var a=i+3*(e-n)-t,s=3*(n-2*e+t),l=3*(e-t),h=t-r,c=s*s-3*a*l,u=s*l-9*a*h,f=l*l-3*s*h,d=0;if(D(c)&&D(u))D(s)?o[0]=0:0<=(C=-l/s)&&C<=1&&(o[d++]=C);else{var p=u*u-4*c*f;if(D(p)){var g=u/c,v=-g/2;0<=(C=-s/a+g)&&C<=1&&(o[d++]=C),0<=v&&v<=1&&(o[d++]=v)}else if(0<p){var m=O(p),y=c*s+1.5*a*(-u+m),_=c*s+1.5*a*(-u-m);0<=(C=(-s-((y=y<0?-k(-y,M):k(y,M))+(_=_<0?-k(-_,M):k(_,M))))/(3*a))&&C<=1&&(o[d++]=C)}else{var x=(2*c*s-3*a*u)/(2*O(c*c*c)),b=Math.acos(x)/3,w=O(c),S=Math.cos(b),C=(-s-2*w*S)/(3*a),T=(v=(-s+w*(S+A*Math.sin(b)))/(3*a),(-s+w*(S-A*Math.sin(b)))/(3*a));0<=C&&C<=1&&(o[d++]=C),0<=v&&v<=1&&(o[d++]=v),0<=T&&T<=1&&(o[d++]=T)}}return d},e.cubicExtrema=function(t,e,n,i,r){var o=6*n-12*e+6*t,a=9*e+3*i-3*t-9*n,s=3*e-3*t,l=0;if(D(a))d(o)&&0<=(c=-s/o)&&c<=1&&(r[l++]=c);else{var h=o*o-4*a*s;if(D(h))r[0]=-o/(2*a);else if(0<h){var c,u=O(h),f=(-o-u)/(2*a);0<=(c=(-o+u)/(2*a))&&c<=1&&(r[l++]=c),0<=f&&f<=1&&(r[l++]=f)}}return l},e.cubicSubdivide=function(t,e,n,i,r,o){var a=(e-t)*r+t,s=(n-e)*r+e,l=(i-n)*r+n,h=(s-a)*r+a,c=(l-s)*r+s,u=(c-h)*r+h;o[0]=t,o[1]=a,o[2]=h,o[3]=u,o[4]=u,o[5]=c,o[6]=l,o[7]=i},e.cubicProjectPoint=function(t,e,n,i,r,o,a,s,l,h,c){var u,f,d,p,g,v=.005,m=1/0;w[0]=l,w[1]=h;for(var y=0;y<1;y+=.05)S[0]=T(t,n,r,a,y),S[1]=T(e,i,o,s,y),(p=x(w,S))<m&&(u=y,m=p);m=1/0;for(var _=0;_<32&&!(v<b);_++)f=u-v,d=u+v,S[0]=T(t,n,r,a,f),S[1]=T(e,i,o,s,f),p=x(S,w),0<=f&&p<m?(u=f,m=p):(C[0]=T(t,n,r,a,d),C[1]=T(e,i,o,s,d),g=x(C,w),d<=1&&g<m?(u=d,m=g):v*=.5);return c&&(c[0]=T(t,n,r,a,u),c[1]=T(e,i,o,s,u)),O(m)},e.quadraticAt=y,e.quadraticDerivativeAt=function(t,e,n,i){return 2*((1-i)*(e-t)+i*(n-e))},e.quadraticRootAt=function(t,e,n,i,r){var o=t-2*e+n,a=2*(e-t),s=t-i,l=0;if(D(o))d(a)&&0<=(c=-s/a)&&c<=1&&(r[l++]=c);else{var h=a*a-4*o*s;if(D(h))0<=(c=-a/(2*o))&&c<=1&&(r[l++]=c);else if(0<h){var c,u=O(h),f=(-a-u)/(2*o);0<=(c=(-a+u)/(2*o))&&c<=1&&(r[l++]=c),0<=f&&f<=1&&(r[l++]=f)}}return l},e.quadraticExtremum=function(t,e,n){var i=t+n-2*e;return 0===i?.5:(t-e)/i},e.quadraticSubdivide=function(t,e,n,i,r){var o=(e-t)*i+t,a=(n-e)*i+e,s=(a-o)*i+o;r[0]=t,r[1]=o,r[2]=s,r[3]=s,r[4]=a,r[5]=n},e.quadraticProjectPoint=function(t,e,n,i,r,o,a,s,l){var h,c=.005,u=1/0;w[0]=a,w[1]=s;for(var f=0;f<1;f+=.05)S[0]=y(t,n,r,f),S[1]=y(e,i,o,f),(v=x(w,S))<u&&(h=f,u=v);u=1/0;for(var d=0;d<32&&!(c<b);d++){var p=h-c,g=h+c;S[0]=y(t,n,r,p),S[1]=y(e,i,o,p);var v=x(S,w);if(0<=p&&v<u)h=p,u=v;else{C[0]=y(t,n,r,g),C[1]=y(e,i,o,g);var m=x(C,w);g<=1&&m<u?(h=g,u=m):c*=.5}}return l&&(l[0]=y(t,n,r,h),l[1]=y(e,i,o,h)),O(u)}},function(t,e){var s=Array.prototype.slice,n=function(){this._$handlers={}};n.prototype={constructor:n,one:function(t,e,n){var i=this._$handlers;if(!e||!t)return this;i[t]||(i[t]=[]);for(var r=0;r<i[t].length;r++)if(i[t][r].h===e)return this;return i[t].push({h:e,one:!0,ctx:n||this}),this},on:function(t,e,n){var i=this._$handlers;if(!e||!t)return this;i[t]||(i[t]=[]);for(var r=0;r<i[t].length;r++)if(i[t][r].h===e)return this;return i[t].push({h:e,one:!1,ctx:n||this}),this},isSilent:function(t){var e=this._$handlers;return e[t]&&e[t].length},off:function(t,e){var n=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var i=[],r=0,o=n[t].length;r<o;r++)n[t][r].h!=e&&i.push(n[t][r]);n[t]=i}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},trigger:function(t){if(this._$handlers[t]){var e=arguments,n=e.length;3<n&&(e=s.call(e,1));for(var i=this._$handlers[t],r=i.length,o=0;o<r;){switch(n){case 1:i[o].h.call(i[o].ctx);break;case 2:i[o].h.call(i[o].ctx,e[1]);break;case 3:i[o].h.call(i[o].ctx,e[1],e[2]);break;default:i[o].h.apply(i[o].ctx,e)}i[o].one?(i.splice(o,1),r--):o++}}return this},triggerWithContext:function(t){if(this._$handlers[t]){var e=arguments,n=e.length;4<n&&(e=s.call(e,1,e.length-1));for(var i=e[e.length-1],r=this._$handlers[t],o=r.length,a=0;a<o;){switch(n){case 1:r[a].h.call(i);break;case 2:r[a].h.call(i,e[1]);break;case 3:r[a].h.call(i,e[1],e[2]);break;default:r[a].h.apply(i,e)}r[a].one?(r.splice(a,1),o--):a++}}return this}};var i=n;t.exports=i},function(t,e,n){var i=n(647),c={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function u(t){return(t=Math.round(t))<0?0:255<t?255:t}function f(t){return t<0?0:1<t?1:t}function d(t){return t.length&&"%"===t.charAt(t.length-1)?u(parseFloat(t)/100*255):u(parseInt(t,10))}function p(t){return t.length&&"%"===t.charAt(t.length-1)?f(parseFloat(t)/100):f(parseFloat(t))}function s(t,e,n){return n<0?n+=1:1<n&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function g(t,e,n){return t+(e-t)*n}function v(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function m(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var y=new i(20),r=null;function _(t,e){r&&m(r,e),r=y.put(t,r||e.slice())}function x(t,e){if(t){e=e||[];var n=y.get(t);if(n)return m(e,n);var i,r=(t+="").replace(/ /g,"").toLowerCase();if(r in c)return m(e,c[r]),_(t,e),e;if("#"===r.charAt(0))return 4===r.length?0<=(i=parseInt(r.substr(1),16))&&i<=4095?(v(e,(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1),_(t,e),e):void v(e,0,0,0,1):7===r.length?0<=(i=parseInt(r.substr(1),16))&&i<=16777215?(v(e,(16711680&i)>>16,(65280&i)>>8,255&i,1),_(t,e),e):void v(e,0,0,0,1):void 0;var o=r.indexOf("("),a=r.indexOf(")");if(-1!==o&&a+1===r.length){var s=r.substr(0,o),l=r.substr(o+1,a-(o+1)).split(","),h=1;switch(s){case"rgba":if(4!==l.length)return void v(e,0,0,0,1);h=p(l.pop());case"rgb":return 3!==l.length?void v(e,0,0,0,1):(v(e,d(l[0]),d(l[1]),d(l[2]),h),_(t,e),e);case"hsla":return 4!==l.length?void v(e,0,0,0,1):(l[3]=p(l[3]),b(l,e),_(t,e),e);case"hsl":return 3!==l.length?void v(e,0,0,0,1):(b(l,e),_(t,e),e);default:return}}v(e,0,0,0,1)}}function b(t,e){var n=(parseFloat(t[0])%360+360)%360/360,i=p(t[1]),r=p(t[2]),o=r<=.5?r*(i+1):r+i-r*i,a=2*r-o;return v(e=e||[],u(255*s(a,o,n+1/3)),u(255*s(a,o,n)),u(255*s(a,o,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function o(t,e,n){if(e&&e.length&&0<=t&&t<=1){n=n||[];var i=t*(e.length-1),r=Math.floor(i),o=Math.ceil(i),a=e[r],s=e[o],l=i-r;return n[0]=u(g(a[0],s[0],l)),n[1]=u(g(a[1],s[1],l)),n[2]=u(g(a[2],s[2],l)),n[3]=f(g(a[3],s[3],l)),n}}var a=o;function l(t,e,n){if(e&&e.length&&0<=t&&t<=1){var i=t*(e.length-1),r=Math.floor(i),o=Math.ceil(i),a=x(e[r]),s=x(e[o]),l=i-r,h=w([u(g(a[0],s[0],l)),u(g(a[1],s[1],l)),u(g(a[2],s[2],l)),f(g(a[3],s[3],l))],"rgba");return n?{color:h,leftIndex:r,rightIndex:o,value:i}:h}}var h=l;function w(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}e.parse=x,e.lift=function(t,e){var n=x(t);if(n){for(var i=0;i<3;i++)n[i]=e<0?n[i]*(1-e)|0:(255-n[i])*e+n[i]|0;return w(n,4===n.length?"rgba":"rgb")}},e.toHex=function(t){var e=x(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)},e.fastLerp=o,e.fastMapToColor=a,e.lerp=l,e.mapToColor=h,e.modifyHSL=function(t,e,n,i){if(t=x(t))return t=function(t){if(t){var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,a=Math.min(i,r,o),s=Math.max(i,r,o),l=s-a,h=(s+a)/2;if(0===l)n=e=0;else{n=h<.5?l/(s+a):l/(2-s-a);var c=((s-i)/6+l/2)/l,u=((s-r)/6+l/2)/l,f=((s-o)/6+l/2)/l;i===s?e=f-u:r===s?e=1/3+c-f:o===s&&(e=2/3+u-c),e<0&&(e+=1),1<e&&(e-=1)}var d=[360*e,n,h];return null!=t[3]&&d.push(t[3]),d}}(t),null!=e&&(t[0]=(r=e,(r=Math.round(r))<0?0:360<r?360:r)),null!=n&&(t[1]=p(n)),null!=i&&(t[2]=p(i)),w(b(t),"rgba");var r},e.modifyAlpha=function(t,e){if((t=x(t))&&null!=e)return t[3]=f(e),w(t,"rgba")},e.stringify=w},function(t,e,n){var i=n(616);e.Dispatcher=i;var r=n(605),o="undefined"!=typeof window&&!!window.addEventListener,a=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;function s(t,e,n,i){return n=n||{},i||!r.canvasSupported?l(t,e,n):r.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):l(t,e,n),n}function l(t,e,n){var i,r=(i=t).getBoundingClientRect?i.getBoundingClientRect():{left:0,top:0};n.zrX=e.clientX-r.left,n.zrY=e.clientY-r.top}var h=o?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};e.clientToLocal=s,e.normalizeEvent=function(t,e,n){if(null!=(e=e||window.event).zrX)return e;var i=e.type;if(i&&0<=i.indexOf("touch")){var r="touchend"!=i?e.targetTouches[0]:e.changedTouches[0];r&&s(t,r,e,n)}else s(t,e,e,n),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var o=e.button;return null==e.which&&void 0!==o&&a.test(e.type)&&(e.which=1&o?1:2&o?3:4&o?2:0),e},e.addEventListener=function(t,e,n){o?t.addEventListener(e,n):t.attachEvent("on"+e,n)},e.removeEventListener=function(t,e,n){o?t.removeEventListener(e,n):t.detachEvent("on"+e,n)},e.stop=h,e.notLeftMouse=function(t){return 1<t.which}},function(t,e,n){var i=n(597),h=n(598),c=n(607),r=h.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,o=e.height/2;t.moveTo(n,i-o),t.lineTo(n+r,i+o),t.lineTo(n-r,i+o),t.closePath()}}),o=h.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,o=e.height/2;t.moveTo(n,i-o),t.lineTo(n+r,i),t.lineTo(n,i+o),t.lineTo(n-r,i),t.closePath()}}),a=h.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,i=e.y,r=e.width/5*3,o=Math.max(r,e.height),a=r/2,s=a*a/(o-a),l=i-o+a+s,h=Math.asin(s/a),c=Math.cos(h)*a,u=Math.sin(h),f=Math.cos(h),d=.6*a,p=.7*a;t.moveTo(n-c,l+s),t.arc(n,l,a,Math.PI-h,2*Math.PI+h),t.bezierCurveTo(n+c-u*d,l+s+f*d,n,i-p,n,i),t.bezierCurveTo(n,i-p,n-c+u*d,l+s+f*d,n-c,l+s),t.closePath()}}),s=h.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,i=e.width,r=e.x,o=e.y,a=i/3*2;t.moveTo(r,o),t.lineTo(r+a,o+n),t.lineTo(r,o+n/4*3),t.lineTo(r-a,o+n),t.lineTo(r,o),t.closePath()}}),l={line:h.Line,rect:h.Rect,roundRect:h.Rect,square:h.Rect,circle:h.Circle,diamond:o,pin:a,arrow:s,triangle:r},u={line:function(t,e,n,i,r){r.x1=t,r.y1=e+i/2,r.x2=t+n,r.y2=e+i/2},rect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i},roundRect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i,r.r=Math.min(n,i)/4},square:function(t,e,n,i,r){var o=Math.min(n,i);r.x=t,r.y=e,r.width=o,r.height=o},circle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.r=Math.min(n,i)/2},diamond:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i},pin:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},arrow:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},triangle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i}},f={};i.each(l,function(t,e){f[e]=new t});var d=h.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var t=this.style;"pin"===this.shape.symbolType&&"inside"===t.textPosition&&(t.textPosition=["50%","40%"],t.textAlign="center",t.textVerticalAlign="middle")},buildPath:function(t,e,n){var i=e.symbolType,r=f[i];"none"!==e.symbolType&&(r||(r=f[i="rect"]),u[i](e.x,e.y,e.width,e.height,r.shape),r.buildPath(t,r.shape,n))}});function p(t,e){if("image"!==this.type){var n=this.style,i=this.shape;i&&"line"===i.symbolType?n.stroke=t:this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff"):(n.fill&&(n.fill=t),n.stroke&&(n.stroke=t)),this.dirty(!1)}}e.createSymbol=function(t,e,n,i,r,o,a){var s,l=0===t.indexOf("empty");return l&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),(s=0===t.indexOf("image://")?h.makeImage(t.slice(8),new c(e,n,i,r),a?"center":"cover"):0===t.indexOf("path://")?h.makePath(t.slice(7),{},new c(e,n,i,r),a?"center":"cover"):new d({shape:{symbolType:t,x:e,y:n,width:i,height:r}})).__isEmptyBrush=l,s.setColor=p,s.setColor(o),s}},function(t,e,n){var o=n(597),i=n(644),h=n(607),a=function(t){for(var e in t=t||{},i.call(this,t),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};a.prototype={constructor:a,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,i=n.indexOf(e);0<=i&&(n.splice(i,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t);var e=(t.parent=this).__storage,n=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof a&&t.addChildrenToStorage(e)),n&&n.refresh()},remove:function(t){var e=this.__zr,n=this.__storage,i=this._children,r=o.indexOf(i,t);return r<0||(i.splice(r,1),t.parent=null,n&&(n.delFromStorage(t),t instanceof a&&t.delChildrenFromStorage(n)),e&&e.refresh()),this},removeAll:function(){var t,e,n=this._children,i=this.__storage;for(e=0;e<n.length;e++)t=n[e],i&&(i.delFromStorage(t),t instanceof a&&t.delChildrenFromStorage(i)),t.parent=null;return n.length=0,this},eachChild:function(t,e){for(var n=this._children,i=0;i<n.length;i++){var r=n[i];t.call(e,r,i)}return this},traverse:function(t,e){for(var n=0;n<this._children.length;n++){var i=this._children[n];t.call(e,i),"group"===i.type&&i.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToStorage(n),n instanceof a&&n.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromStorage(n),n instanceof a&&n.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,n=new h(0,0,0,0),i=t||this._children,r=[],o=0;o<i.length;o++){var a=i[o];if(!a.ignore&&!a.invisible){var s=a.getBoundingRect(),l=a.getLocalTransform(r);l?(n.copy(s),n.applyTransform(l),(e=e||n.clone()).union(n)):(e=e||s.clone()).union(s)}}return e||n}},o.inherits(a,i);var r=a;t.exports=r},function(t,e){var n=1;"undefined"!=typeof window&&(n=Math.max(window.devicePixelRatio||1,1));var i=n;e.debugMode=0,e.devicePixelRatio=i},function(t,e,n){var w=n(615),v=n(601),m=n(655),y=n(607),i=n(621).devicePixelRatio,T={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},_=[],x=[],b=[],S=[],C=Math.min,k=Math.max,O=Math.cos,A=Math.sin,M=Math.sqrt,D=Math.abs,s="undefined"!=typeof Float32Array,r=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};r.prototype={constructor:r,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e){this._ux=D(1/i/t)||0,this._uy=D(1/i/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return(this._ctx=t)&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(T.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var n=D(t-this._xi)>this._ux||D(e-this._yi)>this._uy||this._len<5;return this.addData(T.L,t,e),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),n&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,n,i,r,o){return this.addData(T.C,t,e,n,i,r,o),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,n,i,r,o):this._ctx.bezierCurveTo(t,e,n,i,r,o)),this._xi=r,this._yi=o,this},quadraticCurveTo:function(t,e,n,i){return this.addData(T.Q,t,e,n,i),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,n,i):this._ctx.quadraticCurveTo(t,e,n,i)),this._xi=n,this._yi=i,this},arc:function(t,e,n,i,r,o){return this.addData(T.A,t,e,n,n,i,r-i,0,o?0:1),this._ctx&&this._ctx.arc(t,e,n,i,r,o),this._xi=O(r)*n+t,this._yi=A(r)*n+t,this},arcTo:function(t,e,n,i,r){return this._ctx&&this._ctx.arcTo(t,e,n,i,r),this},rect:function(t,e,n,i){return this._ctx&&this._ctx.rect(t,e,n,i),this.addData(T.R,t,e,n,i),this},closePath:function(){this.addData(T.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t;for(var e=this._dashIdx=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length==e||!s||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,i=this._len,r=0;r<e;r++)n+=t[r].len();s&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(r=0;r<e;r++)for(var o=t[r].data,a=0;a<o.length;a++)this.data[i++]=o[a];this._len=i},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var n=0;n<arguments.length;n++)e[this._len++]=arguments[n];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var n,i,r=this._dashSum,o=this._dashOffset,a=this._lineDash,s=this._ctx,l=this._xi,h=this._yi,c=t-l,u=e-h,f=M(c*c+u*u),d=l,p=h,g=a.length;for(o<0&&(o=r+o),d-=(o%=r)*(c/=f),p-=o*(u/=f);0<c&&d<=t||c<0&&t<=d||0==c&&(0<u&&p<=e||u<0&&e<=p);)d+=c*(n=a[i=this._dashIdx]),p+=u*n,this._dashIdx=(i+1)%g,0<c&&d<l||c<0&&l<d||0<u&&p<h||u<0&&h<p||s[i%2?"moveTo":"lineTo"](0<=c?C(d,t):k(d,t),0<=u?C(p,e):k(p,e));c=d-t,u=p-e,this._dashOffset=-M(c*c+u*u)},_dashedBezierTo:function(t,e,n,i,r,o){var a,s,l,h,c,u=this._dashSum,f=this._dashOffset,d=this._lineDash,p=this._ctx,g=this._xi,v=this._yi,m=w.cubicAt,y=0,_=this._dashIdx,x=d.length,b=0;for(f<0&&(f=u+f),f%=u,a=0;a<1;a+=.1)s=m(g,t,n,r,a+.1)-m(g,t,n,r,a),l=m(v,e,i,o,a+.1)-m(v,e,i,o,a),y+=M(s*s+l*l);for(;_<x&&!(f<(b+=d[_]));_++);for(a=(b-f)/y;a<=1;)h=m(g,t,n,r,a),c=m(v,e,i,o,a),_%2?p.moveTo(h,c):p.lineTo(h,c),a+=d[_]/y,_=(_+1)%x;_%2!=0&&p.lineTo(r,o),s=r-h,l=o-c,this._dashOffset=-M(s*s+l*l)},_dashedQuadraticTo:function(t,e,n,i){var r=n,o=i;n=(n+2*t)/3,i=(i+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,n,i,r,o)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,s&&(this.data=new Float32Array(t)))},getBoundingRect:function(){_[0]=_[1]=b[0]=b[1]=Number.MAX_VALUE,x[0]=x[1]=S[0]=S[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,n=0,i=0,r=0,o=0;o<t.length;){var a=t[o++];switch(1==o&&(i=e=t[o],r=n=t[o+1]),a){case T.M:e=i=t[o++],n=r=t[o++],b[0]=i,b[1]=r,S[0]=i,S[1]=r;break;case T.L:m.fromLine(e,n,t[o],t[o+1],b,S),e=t[o++],n=t[o++];break;case T.C:m.fromCubic(e,n,t[o++],t[o++],t[o++],t[o++],t[o],t[o+1],b,S),e=t[o++],n=t[o++];break;case T.Q:m.fromQuadratic(e,n,t[o++],t[o++],t[o],t[o+1],b,S),e=t[o++],n=t[o++];break;case T.A:var s=t[o++],l=t[o++],h=t[o++],c=t[o++],u=t[o++],f=t[o++]+u,d=(t[o++],1-t[o++]);1==o&&(i=O(u)*h+s,r=A(u)*c+l),m.fromArc(s,l,h,c,u,f,d,b,S),e=O(f)*h+s,n=A(f)*c+l;break;case T.R:i=e=t[o++],r=n=t[o++];var p=t[o++],g=t[o++];m.fromLine(i,r,i+p,r+g,b,S);break;case T.Z:e=i,n=r}v.min(_,_,b),v.max(x,x,S)}return 0===o&&(_[0]=_[1]=x[0]=x[1]=0),new y(_[0],_[1],x[0]-_[0],x[1]-_[1])},rebuildPath:function(t){for(var e,n,i,r,o,a,s=this.data,l=this._ux,h=this._uy,c=this._len,u=0;u<c;){var f=s[u++];switch(1==u&&(e=i=s[u],n=r=s[u+1]),f){case T.M:e=i=s[u++],n=r=s[u++],t.moveTo(i,r);break;case T.L:o=s[u++],a=s[u++],(D(o-i)>l||D(a-r)>h||u===c-1)&&(t.lineTo(o,a),i=o,r=a);break;case T.C:t.bezierCurveTo(s[u++],s[u++],s[u++],s[u++],s[u++],s[u++]),i=s[u-2],r=s[u-1];break;case T.Q:t.quadraticCurveTo(s[u++],s[u++],s[u++],s[u++]),i=s[u-2],r=s[u-1];break;case T.A:var d=s[u++],p=s[u++],g=s[u++],v=s[u++],m=s[u++],y=s[u++],_=s[u++],x=s[u++],b=v<g?g:v,w=v<g?1:g/v,S=v<g?v/g:1,C=m+y;.001<Math.abs(g-v)?(t.translate(d,p),t.rotate(_),t.scale(w,S),t.arc(0,0,b,m,C,1-x),t.scale(1/w,1/S),t.rotate(-_),t.translate(-d,-p)):t.arc(d,p,b,m,C,1-x),1==u&&(e=O(m)*g+d,n=A(m)*v+p),i=O(C)*g+d,r=A(C)*v+p;break;case T.R:e=i=s[u],n=r=s[u+1],t.rect(s[u++],s[u++],s[u++],s[u++]);break;case T.Z:t.closePath(),i=e,r=n}}}},r.CMD=T;var o=r;t.exports=o},function(t,e,n){var i=n(609);function r(t){this._setting=t||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}r.prototype.parse=function(t){return t},r.prototype.getSetting=function(t){return this._setting[t]},r.prototype.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]},r.prototype.normalize=function(t){var e=this._extent;return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])},r.prototype.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]},r.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},r.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getDataExtent(e,!0))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},r.prototype.getTicksLabels=function(){for(var t=[],e=this.getTicks(),n=0;n<e.length;n++)t.push(this.getLabel(e[n]));return t},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(t){this._isBlank=t},i.enableClassExtend(r),i.enableClassManagement(r,{registerWhenExtend:!0});var o=r;t.exports=o},function(t,e,n){var _=n(597),x=n(608),b=_.each,s=_.curry;function w(t,e){return"all"===t||_.isArray(t)&&0<=_.indexOf(t,e)||t===e}function h(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[C(t)]}function S(t){return!!t.get("handle.show")}function C(t){return t.type+"||"+t.id}e.collect=function(t,e){var p,g,n,a,v,m,y,i={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return p=i,n=e,a=(g=t).getComponent("tooltip"),v=g.getComponent("axisPointer"),m=v.get("link",!0)||[],y=[],b(n.getCoordinateSystems(),function(u){if(u.axisPointerEnabled){var t=C(u.model),f=p.coordSysAxesInfo[t]={},e=(p.coordSysMap[t]=u).model,d=e.getModel("tooltip",a);if(b(u.getAxes(),s(o,!1,null)),u.getTooltipAxes&&a&&d.get("show")){var n="axis"===d.get("trigger"),i="cross"===d.get("axisPointer.type"),r=u.getTooltipAxes(d.get("axisPointer.axis"));(n||i)&&b(r.baseAxes,s(o,!i||"cross",n)),i&&b(r.otherAxes,s(o,"cross",!1))}}function o(t,e,n){var i=n.model.getModel("axisPointer",v),r=i.get("show");if(r&&("auto"!==r||t||S(i))){null==e&&(e=i.get("triggerTooltip"));var o=(i=t?function(t,e,n,i,r,o){var a=e.getModel("axisPointer"),s={};b(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(t){s[t]=_.clone(a.get(t))}),s.snap="category"!==t.type&&!!o,"cross"===a.get("type")&&(s.type="line");var l=s.label||(s.label={});if(null==l.show&&(l.show=!1),"cross"===r&&(l.show=!0,!o)){var h=s.lineStyle=a.get("crossStyle");h&&_.defaults(l,h.textStyle)}return t.model.getModel("axisPointer",new x(s,n,i))}(n,d,v,g,t,e):i).get("snap"),a=C(n.model),s=e||o||"category"===n.type,l=p.axesInfo[a]={key:a,axis:n,coordSys:u,axisPointerModel:i,triggerTooltip:e,involveSeries:s,snap:o,useHandle:S(i),seriesModels:[]};f[a]=l,p.seriesInvolved|=s;var h=function(t,e){for(var n=e.model,i=e.dim,r=0;r<t.length;r++){var o=t[r]||{};if(w(o[i+"AxisId"],n.id)||w(o[i+"AxisIndex"],n.componentIndex)||w(o[i+"AxisName"],n.name))return r}}(m,n);if(null!=h){var c=y[h]||(y[h]={axesInfo:{}});c.axesInfo[a]=l,c.mapper=m[h].mapper,l.linkGroup=c}}}}),i.seriesInvolved&&function(r,t){t.eachSeries(function(n){var i=n.coordinateSystem,t=n.get("tooltip.trigger",!0),e=n.get("tooltip.show",!0);i&&"none"!==t&&!1!==t&&"item"!==t&&!1!==e&&!1!==n.get("axisPointer.show",!0)&&b(r.coordSysAxesInfo[C(i.model)],function(t){var e=t.axis;i.getAxis(e.dim)===e&&(t.seriesModels.push(n),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=n.getData().count())})},this)}(i,t),i},e.fixValue=function(t){var e=h(t);if(e){var n=e.axisPointerModel,i=e.axis.scale,r=n.option,o=n.get("status"),a=n.get("value");null!=a&&(a=i.parse(a));var s=S(n);null==o&&(r.status=s?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==a||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),r.value=a,s&&(r.status=e.axis.scale.isBlank()?"hide":"show")}},e.getAxisInfo=h,e.getAxisPointerModel=function(t){var e=h(t);return e&&e.axisPointerModel},e.makeKey=C},function(t,e,n){var l=n(597);t.exports=function(s){for(var t=0;t<s.length;t++)s[t][1]||(s[t][1]=s[t][0]);return function(t,e,n){for(var i={},r=0;r<s.length;r++){var o=s[r][1];if(!(e&&0<=l.indexOf(e,o)||n&&l.indexOf(n,o)<0)){var a=t.getShallow(o);null!=a&&(i[s[r][0]]=a)}}return i}}},function(t,e,n){var a=n(597),s={};function i(){this._coordinateSystems=[]}i.prototype={constructor:i,create:function(i,r){var o=[];a.each(s,function(t,e){var n=t.create(i,r);o=o.concat(n||[])}),this._coordinateSystems=o},update:function(e,n){a.each(this._coordinateSystems,function(t){t.update&&t.update(e,n)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},i.register=function(t,e){s[t]=e},i.get=function(t){return s[t]};var r=i;t.exports=r},function(t,e,n){var i=n(602),r=n(606),o=n(623),a=n(661),s=i.round,l=o.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(t,e){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(e)||(n[1]=parseFloat(e))},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),l.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=a.getIntervalPrecision(t)},getTicks:function(){return a.intervalScaleGetTicks(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getTicksLabels:function(){for(var t=[],e=this.getTicks(),n=0;n<e.length;n++)t.push(this.getLabel(e[n]));return t},getLabel:function(t,e){if(null==t)return"";var n=e&&e.precision;return null==n?n=i.getPrecisionSafe(t)||0:"auto"===n&&(n=this._intervalPrecision),t=s(t,n,!0),r.addCommas(t)},niceTicks:function(t,e,n){t=t||5;var i=this._extent,r=i[1]-i[0];if(isFinite(r)){r<0&&(r=-r,i.reverse());var o=a.intervalScaleNiceTicks(i,t,e,n);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},niceExtent:function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var n=e[0];t.fixMax||(e[1]+=n/2),e[0]-=n/2}else e[1]=1;var i=e[1]-e[0];isFinite(i)||(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var r=this._interval;t.fixMin||(e[0]=s(Math.floor(e[0]/r)*r)),t.fixMax||(e[1]=s(Math.ceil(e[1]/r)*r))}});l.create=function(){return new l};var h=l;t.exports=h},function(t,e){var h=32,y=7;function c(t,e,n,i){var r=e+1;if(r===n)return 1;if(i(t[r++],t[e])<0){for(;r<n&&i(t[r],t[r-1])<0;)r++;!function(t,e,n){n--;for(;e<n;){var i=t[e];t[e++]=t[n],t[n--]=i}}(t,e,r)}else for(;r<n&&0<=i(t[r],t[r-1]);)r++;return r-e}function u(t,e,n,i,r){for(i===e&&i++;i<n;i++){for(var o,a=t[i],s=e,l=i;s<l;)r(a,t[o=s+l>>>1])<0?l=o:s=o+1;var h=i-s;switch(h){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;0<h;)t[s+h]=t[s+h-1],h--}t[s]=a}}function _(t,e,n,i,r,o){var a=0,s=0,l=1;if(0<o(t,e[n+r])){for(s=i-r;l<s&&0<o(t,e[n+r+l]);)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s),a+=r,l+=r}else{for(s=r+1;l<s&&o(t,e[n+r-l])<=0;)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s);var h=a;a=r-l,l=r-h}for(a++;a<l;){var c=a+(l-a>>>1);0<o(t,e[n+c])?a=c+1:l=c}return l}function x(t,e,n,i,r,o){var a=0,s=0,l=1;if(o(t,e[n+r])<0){for(s=r+1;l<s&&o(t,e[n+r-l])<0;)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s);var h=a;a=r-l,l=r-h}else{for(s=i-r;l<s&&0<=o(t,e[n+r+l]);)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s),a+=r,l+=r}for(a++;a<l;){var c=a+(l-a>>>1);o(t,e[n+c])<0?l=c:a=c+1}return l}function f(p,g){var t,a,s,v=y,l=0;t=p.length;var m=[];function e(t){var e=a[t],n=s[t],i=a[t+1],r=s[t+1];s[t]=n+r,t===l-3&&(a[t+1]=a[t+2],s[t+1]=s[t+2]),l--;var o=x(p[i],p,e,n,0,g);e+=o,0!==(n-=o)&&0!==(r=_(p[e+n-1],p,i,r,r-1,g))&&(n<=r?function(t,e,n,i){var r=0;for(r=0;r<e;r++)m[r]=p[t+r];var o=0,a=n,s=t;if(p[s++]=p[a++],0==--i){for(r=0;r<e;r++)p[s+r]=m[o+r];return}if(1===e){for(r=0;r<i;r++)p[s+r]=p[a+r];return p[s+i]=m[o]}var l,h,c,u=v;for(;;){h=l=0,c=!1;do{if(g(p[a],m[o])<0){if(p[s++]=p[a++],h++,(l=0)==--i){c=!0;break}}else if(p[s++]=m[o++],l++,h=0,1==--e){c=!0;break}}while((l|h)<u);if(c)break;do{if(0!==(l=x(p[a],m,o,e,0,g))){for(r=0;r<l;r++)p[s+r]=m[o+r];if(s+=l,o+=l,(e-=l)<=1){c=!0;break}}if(p[s++]=p[a++],0==--i){c=!0;break}if(0!==(h=_(m[o],p,a,i,0,g))){for(r=0;r<h;r++)p[s+r]=p[a+r];if(s+=h,a+=h,0===(i-=h)){c=!0;break}}if(p[s++]=m[o++],1==--e){c=!0;break}u--}while(y<=l||y<=h);if(c)break;u<0&&(u=0),u+=2}if((v=u)<1&&(v=1),1===e){for(r=0;r<i;r++)p[s+r]=p[a+r];p[s+i]=m[o]}else{if(0===e)throw new Error;for(r=0;r<e;r++)p[s+r]=m[o+r]}}(e,n,i,r):function(t,e,n,i){var r=0;for(r=0;r<i;r++)m[r]=p[n+r];var o=t+e-1,a=i-1,s=n+i-1,l=0,h=0;if(p[s--]=p[o--],0==--e){for(l=s-(i-1),r=0;r<i;r++)p[l+r]=m[r];return}if(1===i){for(h=(s-=e)+1,l=(o-=e)+1,r=e-1;0<=r;r--)p[h+r]=p[l+r];return p[s]=m[a]}var c=v;for(;;){var u=0,f=0,d=!1;do{if(g(m[a],p[o])<0){if(p[s--]=p[o--],u++,(f=0)==--e){d=!0;break}}else if(p[s--]=m[a--],f++,u=0,1==--i){d=!0;break}}while((u|f)<c);if(d)break;do{if(0!==(u=e-x(m[a],p,t,e,e-1,g))){for(e-=u,h=(s-=u)+1,l=(o-=u)+1,r=u-1;0<=r;r--)p[h+r]=p[l+r];if(0===e){d=!0;break}}if(p[s--]=m[a--],1==--i){d=!0;break}if(0!==(f=i-_(p[o],m,0,i,i-1,g))){for(i-=f,h=(s-=f)+1,l=(a-=f)+1,r=0;r<f;r++)p[h+r]=m[l+r];if(i<=1){d=!0;break}}if(p[s--]=p[o--],0==--e){d=!0;break}c--}while(y<=u||y<=f);if(d)break;c<0&&(c=0),c+=2}(v=c)<1&&(v=1);if(1===i){for(h=(s-=e)+1,l=(o-=e)+1,r=e-1;0<=r;r--)p[h+r]=p[l+r];p[s]=m[a]}else{if(0===i)throw new Error;for(l=s-(i-1),r=0;r<i;r++)p[l+r]=m[r]}}(e,n,i,r))}a=[],s=[],this.mergeRuns=function(){for(;1<l;){var t=l-2;if(1<=t&&s[t-1]<=s[t]+s[t+1]||2<=t&&s[t-2]<=s[t]+s[t-1])s[t-1]<s[t+1]&&t--;else if(s[t]>s[t+1])break;e(t)}},this.forceMergeRuns=function(){for(;1<l;){var t=l-2;0<t&&s[t-1]<s[t+1]&&t--,e(t)}},this.pushRun=function(t,e){a[l]=t,s[l]=e,l+=1}}t.exports=function(t,e,n,i){n||(n=0),i||(i=t.length);var r=i-n;if(!(r<2)){var o=0;if(r<h)u(t,n,i,n+(o=c(t,n,i,e)),e);else{var a=new f(t,e),s=function(t){for(var e=0;h<=t;)e|=1&t,t>>=1;return t+e}(r);do{if((o=c(t,n,i,e))<s){var l=r;s<l&&(l=s),u(t,n,n+l,n+o,e),o=l}a.pushRun(n,o),a.mergeRuns(),r-=o,n+=o}while(0!==r);a.forceMergeRuns()}}}},function(t,e,n){var i=n(597),r=n(649),o=n(644),a=n(686);function s(t){for(var e in t=t||{},o.call(this,t),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new r(t.style,this),this._rect=null,this.__clipPaths=[]}s.prototype={constructor:s,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:-1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var n=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?o.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new r(t,this),this.dirty(!1),this}},i.inherits(s,o),i.mixin(s,a);var l=s;t.exports=l},function(t,e,n){var s=new(n(647))(50);function l(){var t=this.__cachedImgObj;this.onload=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],i=n.cb;i&&i(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function h(t){return t&&t.width&&t.height}e.findExistImage=function(t){if("string"==typeof t){var e=s.get(t);return e&&e.image}return t},e.createOrUpdateImage=function(t,e,n,i,r){if(t){if("string"==typeof t){if(e&&e.__zrImageSrc===t||!n)return e;var o=s.get(t),a={hostEl:n,cb:i,cbPayload:r};return o?!h(e=o.image)&&o.pending.push(a):(!e&&(e=new Image),e.onload=l,s.put(t,e.__cachedImgObj={image:e,pending:[a]}),e.src=e.__zrImageSrc=t),e}return t}return e},e.isImageReady=h},function(t,e){var n=function(t){this.colorStops=t||[]};n.prototype={constructor:n,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};var i=n;t.exports=i},function(t,e,n){var y=n(597),a=n(609).parseClassType,i=0,r="_";e.getUID=function(t){return[t||"",i++,Math.random()].join(r)},e.enableSubTypeDefaulter=function(r){var o={};return r.registerSubTypeDefaulter=function(t,e){t=a(t),o[t.main]=e},r.determineSubType=function(t,e){var n=e.type;if(!n){var i=a(t).main;r.hasSubTypes(t)&&o[i]&&(n=o[i](e))}return n},r},e.enableTopologicalTravel=function(t,v){function m(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}t.topologicalTravel=function(t,e,n,i){if(t.length){var s,l,h,r=(s=e,l={},h=[],y.each(s,function(n){var t,e,i,r=m(l,n),o=r.originalDeps=v(n),a=(t=o,e=s,i=[],y.each(t,function(t){0<=y.indexOf(e,t)&&i.push(t)}),i);r.entryCount=a.length,0===r.entryCount&&h.push(n),y.each(a,function(t){y.indexOf(r.predecessor,t)<0&&r.predecessor.push(t);var e=m(l,t);y.indexOf(e.successor,t)<0&&e.successor.push(n)})}),{graph:l,noEntryList:h}),o=r.graph,a=r.noEntryList,c={};for(y.each(t,function(t){c[t]=!0});a.length;){var u=a.pop(),f=o[u],d=!!c[u];d&&(n.call(i,u,f.originalDeps.slice()),delete c[u]),y.each(f.successor,d?g:p)}y.each(c,function(){throw new Error("Circle dependency may exists")})}function p(t){o[t].entryCount--,0===o[t].entryCount&&a.push(t)}function g(t){c[t]=!0,p(t)}}}},function(t,e){var s="\0__throttleOriginMethod",l="\0__throttleRate",h="\0__throttleType";function c(t,n,i){var r,o,a,s,l,h=0,c=0,u=null;function f(){c=(new Date).getTime(),u=null,t.apply(a,s||[])}n=n||0;var e=function(){r=(new Date).getTime(),a=this,s=arguments;var t=l||n,e=l||i;l=null,o=r-(e?h:c)-t,clearTimeout(u),e?u=setTimeout(f,t):0<=o?f():u=setTimeout(f,-o),h=r};return e.clear=function(){u&&(clearTimeout(u),u=null)},e.debounceNextCall=function(t){l=t},e}e.throttle=c,e.createOrUpdate=function(t,e,n,i){var r=t[e];if(r){var o=r[s]||r,a=r[h];if(r[l]!==n||a!==i){if(null==n||!i)return t[e]=o;(r=t[e]=c(o,n,"debounce"===i))[s]=o,r[h]=i,r[l]=n}return r}},e.clear=function(t,e){var n=t[e];n&&n[s]&&(t[e]=n[s])}},function(t,e,n){n(604).__DEV__;var c=n(597),i=n(605),r=n(606),u=r.formatTime,f=r.encodeHTML,d=r.addCommas,p=r.getTooltipMarker,o=n(609),a=o.set,g=o.get,v=n(600),s=n(610),l=n(660),h=n(611),m=h.getLayoutParams,y=h.mergeLayoutParam,_=s.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.normal.color",layoutMode:null,init:function(t,e,n,i){this.seriesIndex=this.componentIndex,this.mergeDefaultAndTheme(t,n);var r=this.getInitialData(t,n);a(this,"dataBeforeProcessed",r),this.restoreData()},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?m(t):{},r=this.subType;s.hasClass(r)&&(r+="Series"),c.merge(t,e.getTheme().get(this.subType)),c.merge(t,this.getDefaultOption()),v.defaultEmphasis(t.label,["show"]),this.fillDataTextStyle(t.data),n&&y(t,i,n)},mergeOption:function(t,e){t=c.merge(this.option,t,!0),this.fillDataTextStyle(t.data);var n=this.layoutMode;n&&y(this.option,t,n);var i=this.getInitialData(t,e);i&&(a(this,"data",i),a(this,"dataBeforeProcessed",i.cloneShallow()))},fillDataTextStyle:function(t){if(t)for(var e=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&v.defaultEmphasis(t[n].label,e)},getInitialData:function(){},getData:function(t){var e=g(this,"data");return null==t?e:e.getLinkedData(t)},setData:function(t){a(this,"data",t)},getRawData:function(){return g(this,"dataBeforeProcessed")},coordDimToDataDim:function(t){return v.coordDimToDataDim(this.getData(),t)},dataDimToCoordDim:function(t){return v.dataDimToCoordDim(this.getData(),t)},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(i,s,t){var l=g(this,"data"),e=this.getRawValue(i),n=c.isArray(e)?function(t){var o=c.reduce(t,function(t,e,n){var i=l.getDimensionInfo(n);return t|(i&&!1!==i.tooltip&&null!=i.tooltipName)},0),a=[],e=v.otherDimToDataDim(l,"tooltip");function n(t,e){var n=l.getDimensionInfo(e);if(n&&!1!==n.otherDims.tooltip){var i=n.type,r=(o?"- "+(n.tooltipName||n.name)+": ":"")+("ordinal"===i?t+"":"time"===i?s?"":u("yyyy/MM/dd hh:mm:ss",t):d(t));r&&a.push(f(r))}}return e.length?c.each(e,function(t){n(l.get(t,i),t)}):c.each(t,n),(o?"<br/>":"")+a.join(o?"<br/>":", ")}(e):f(d(e)),r=l.getName(i),o=l.getItemVisual(i,"color");c.isObject(o)&&o.colorStops&&(o=(o.colorStops[0]||{}).color);var a=p(o=o||"transparent"),h=this.name;return"\0-"===h&&(h=""),h=h?f(h)+(s?": ":"<br/>"):"",s?a+h+n:h+a+(r?f(r)+": "+n:n)},isAnimationEnabled:function(){if(i.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),t},restoreData:function(){a(this,"data",g(this,"dataBeforeProcessed").cloneShallow())},getColorFromPalette:function(t,e){var n=this.ecModel,i=l.getColorFromPalette.call(this,t,e);return i||(i=n.getColorFromPalette(t,e)),i},getAxisTooltipData:null,getTooltipPosition:null});c.mixin(_,v.dataFormatMixin),c.mixin(_,l);var x=_;t.exports=x},function(t,e,n){n(604).__DEV__;var g=n(597),v=n(636),m=n(637),i=n(600),y=i.getDataItemValue,_=i.converDataValue,x=i.isDataItemOption,b=n(626);function d(t){return"category"!==t&&"time"!==t}function p(t){return"category"===t?"ordinal":"time"===t?"time":"float"}var w={cartesian2d:function(t,e,n,i){var r=g.map(["xAxis","yAxis"],function(t){return n.queryComponents({mainType:t,index:e.get(t+"Index"),id:e.get(t+"Id")})[0]}),o=r[0],a=r[1],s=o.get("type"),l=a.get("type"),h=[{name:"x",type:p(s),stackable:d(s)},{name:"y",type:p(l),stackable:d(l)}],c="category"===s,u="category"===l;h=m(h,t,i);var f={};return c&&(f.x=o),u&&(f.y=a),{dimensions:h,categoryIndex:c?0:u?1:-1,categoryAxesModels:f}},singleAxis:function(t,e,n,i){var r=n.queryComponents({mainType:"singleAxis",index:e.get("singleAxisIndex"),id:e.get("singleAxisId")})[0],o=r.get("type"),a="category"===o,s=[{name:"single",type:p(o),stackable:d(o)}];s=m(s,t,i);var l={};return a&&(l.single=r),{dimensions:s,categoryIndex:a?0:-1,categoryAxesModels:l}},polar:function(t,e,n,i){var r=n.queryComponents({mainType:"polar",index:e.get("polarIndex"),id:e.get("polarId")})[0],o=r.findAxisModel("angleAxis"),a=r.findAxisModel("radiusAxis"),s=a.get("type"),l=o.get("type"),h=[{name:"radius",type:p(s),stackable:d(s)},{name:"angle",type:p(l),stackable:d(l)}],c="category"===l,u="category"===s;h=m(h,t,i);var f={};return u&&(f.radius=a),c&&(f.angle=o),{dimensions:h,categoryIndex:c?1:u?0:-1,categoryAxesModels:f}},geo:function(t,e,n,i){return{dimensions:m([{name:"lng"},{name:"lat"}],t,i)}}};var r=function(t,e,n){t=t||[];var i=e.get("coordinateSystem"),r=w[i],o=b.get(i),a={encodeDef:e.get("encode"),dimsDef:e.get("dimensions")},s=r&&r(t,e,n,a),l=s&&s.dimensions;l||(l=o&&(o.getDimensionsInfo?o.getDimensionsInfo():o.dimensions.slice())||["x","y"],l=m(l,t,a));var h,c=s?s.categoryIndex:-1,u=new v(l,e),f=function(t,e){var n,i=[],r=t&&t.dimensions[t.categoryIndex];if(r&&(n=t.categoryAxesModels[r.name]),n){var o=n.getCategories();if(o){var a=e.length;if(g.isArray(e[0])&&1<e[0].length){i=[];for(var s=0;s<a;s++)i[s]=o[e[s][t.categoryIndex||0]]}else i=o.slice(0)}}return i}(s,t),d={},p=0<=c&&null!=(h=function(t){for(var e=0;e<t.length&&null==t[e];)e++;return t[e]}(t))&&!g.isArray(y(h))?function(t,e,n,i){return x(t)&&(u.hasItemOption=!0),i===c?n:_(y(t),l[i])}:function(t,e,n,i){var r=y(t),o=_(r&&r[i],l[i]);x(t)&&(u.hasItemOption=!0);var a=s&&s.categoryAxesModels;return a&&a[e]&&"string"==typeof o&&(d[e]=d[e]||a[e].getCategories(),(o=g.indexOf(d[e],o))<0&&!isNaN(o)&&(o=+o)),o};return u.hasItemOption=!1,u.initData(t,f,p),u};t.exports=r},function(d,t,p){(function(t){p(604).__DEV__;var x=p(597),n=p(608),r=p(728),b=p(600),o=x.isObject,e="undefined",i=typeof window===e?t:window,w={float:typeof i.Float64Array===e?Array:i.Float64Array,int:typeof i.Int32Array===e?Array:i.Int32Array,ordinal:Array,number:Array,time:Array},a=["stackedOn","hasItemOption","_nameList","_idList","_rawData"];function h(e,n){x.each(a.concat(n.__wrappedMethods||[]),function(t){n.hasOwnProperty(t)&&(e[t]=n[t])}),e.__wrappedMethods=n.__wrappedMethods}function S(t){this._array=t||[]}S.prototype.pure=!1,S.prototype.count=function(){return this._array.length},S.prototype.getItem=function(t){return this._array[t]};var c=function(t,e){t=t||["x","y"];for(var n={},i=[],r=0;r<t.length;r++){var o,a={};"string"==typeof t[r]?a={name:o=t[r],coordDim:o,coordDimIndex:0,stackable:!1,type:"number"}:(o=(a=t[r]).name,a.type=a.type||"number",a.coordDim||(a.coordDim=o,a.coordDimIndex=0)),a.otherDims=a.otherDims||{},i.push(o),n[o]=a}this.dimensions=i,this._dimensionInfos=n,this.hostModel=e,this.dataType,this.indices=[],this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this.stackedOn=null,this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._rawData,this._extent},s=c.prototype;function u(t){return x.isArray(t)||(t=[t]),t}function y(t,e){var n=t.dimensions,i=new c(x.map(n,t.getDimensionInfo,t),t.hostModel);h(i,t);for(var r=i._storage={},o=t._storage,a=0;a<n.length;a++){var s=n[a],l=o[s];0<=x.indexOf(e,s)?r[s]=new l.constructor(o[s].length):r[s]=o[s]}return i}s.type="list",s.hasItemOption=!0,s.getDimension=function(t){return isNaN(t)||(t=this.dimensions[t]||t),t},s.getDimensionInfo=function(t){return x.clone(this._dimensionInfos[this.getDimension(t)])},s.initData=function(t,e,n){t=t||[],x.isArray(t)&&(t=new S(t)),this._rawData=t;var i,r=this._storage={},o=this.indices=[],a=this.dimensions,s=this._dimensionInfos,l=t.count(),h=[],c={};e=e||[];for(var u=0;u<a.length;u++){var f=s[a[u]];0===f.otherDims.itemName&&(i=u);var d=w[f.type];r[a[u]]=new d(l)}var p=this;n||(p.hasItemOption=!1),n=n||function(t,e,n,i){var r=b.getDataItemValue(t);return b.isDataItemOption(t)&&(p.hasItemOption=!0),b.converDataValue(r instanceof Array?r[i]:r,s[e])};for(u=0;u<l;u++){for(var g=t.getItem(u),v=0;v<a.length;v++){var m=a[v];r[m][u]=n(g,m,u,v)}o.push(u)}for(u=0;u<l;u++){g=t.getItem(u);!e[u]&&g&&(null!=g.name?e[u]=g.name:null!=i&&(e[u]=r[a[i]][u]));var y=e[u]||"",_=g&&g.id;!_&&y&&(c[y]=c[y]||0,0<c[_=y]&&(_+="__ec__"+c[y]),c[y]++),_&&(h[u]=_)}this._nameList=e,this._idList=h},s.count=function(){return this.indices.length},s.get=function(t,e,n){var i=this._storage,r=this.indices[e];if(null==r||!i[t])return NaN;var o=i[t][r];if(n){var a=this._dimensionInfos[t];if(a&&a.stackable)for(var s=this.stackedOn;s;){var l=s.get(t,e);(0<=o&&0<l||o<=0&&l<0)&&(o+=l),s=s.stackedOn}}return o},s.getValues=function(t,e,n){var i=[];x.isArray(t)||(n=e,e=t,t=this.dimensions);for(var r=0,o=t.length;r<o;r++)i.push(this.get(t[r],e,n));return i},s.hasValue=function(t){for(var e=this.dimensions,n=this._dimensionInfos,i=0,r=e.length;i<r;i++)if("ordinal"!==n[e[i]].type&&isNaN(this.get(e[i],t)))return!1;return!0},s.getDataExtent=function(t,e,n){t=this.getDimension(t);var i=this._storage[t],r=this.getDimensionInfo(t);e=r&&r.stackable&&e;var o,a=(this._extent||(this._extent={}))[t+!!e];if(a)return a;if(i){for(var s=1/0,l=-1/0,h=0,c=this.count();h<c;h++)o=this.get(t,h,e),n&&!n(o,t,h)||(o<s&&(s=o),l<o&&(l=o));return this._extent[t+!!e]=[s,l]}return[1/0,-1/0]},s.getSum=function(t,e){var n=0;if(this._storage[t])for(var i=0,r=this.count();i<r;i++){var o=this.get(t,i,e);isNaN(o)||(n+=o)}return n},s.indexOf=function(t,e){var n=this._storage[t],i=this.indices;if(n)for(var r=0,o=i.length;r<o;r++){if(n[i[r]]===e)return r}return-1},s.indexOfName=function(t){for(var e=this.indices,n=this._nameList,i=0,r=e.length;i<r;i++){if(n[e[i]]===t)return i}return-1},s.indexOfRawIndex=function(t){var e=this.indices,n=e[t];if(null!=n&&n===t)return t;for(var i=0,r=e.length-1;i<=r;){var o=(i+r)/2|0;if(e[o]<t)i=o+1;else{if(!(e[o]>t))return o;r=o-1}}return-1},s.indicesOfNearest=function(t,e,n,i){var r=[];if(!this._storage[t])return r;null==i&&(i=1/0);for(var o=Number.MAX_VALUE,a=-1,s=0,l=this.count();s<l;s++){var h=e-this.get(t,s,n),c=Math.abs(h);h<=i&&c<=o&&((c<o||0<=h&&a<0)&&(o=c,a=h,r.length=0),r.push(s))}return r},s.getRawIndex=function(t){var e=this.indices[t];return null==e?-1:e},s.getRawDataItem=function(t){return this._rawData.getItem(this.getRawIndex(t))},s.getName=function(t){return this._nameList[this.indices[t]]||""},s.getId=function(t){return this._idList[this.indices[t]]||this.getRawIndex(t)+""},s.each=function(t,e,n,i){"function"==typeof t&&(i=n,n=e,e=t,t=[]);var r=[],o=(t=x.map(u(t),this.getDimension,this)).length,a=this.indices;i=i||this;for(var s=0;s<a.length;s++)switch(o){case 0:e.call(i,s);break;case 1:e.call(i,this.get(t[0],s,n),s);break;case 2:e.call(i,this.get(t[0],s,n),this.get(t[1],s,n),s);break;default:for(var l=0;l<o;l++)r[l]=this.get(t[l],s,n);r[l]=s,e.apply(i,r)}},s.filterSelf=function(t,e,n,i){"function"==typeof t&&(i=n,n=e,e=t,t=[]);var r=[],o=[],a=(t=x.map(u(t),this.getDimension,this)).length,s=this.indices;i=i||this;for(var l=0;l<s.length;l++){var h;if(a)if(1===a)h=e.call(i,this.get(t[0],l,n),l);else{for(var c=0;c<a;c++)o[c]=this.get(t[c],l,n);o[c]=l,h=e.apply(i,o)}else h=e.call(i,l);h&&r.push(s[l])}return this.indices=r,this._extent={},this},s.mapArray=function(t,e,n,i){"function"==typeof t&&(i=n,n=e,e=t,t=[]);var r=[];return this.each(t,function(){r.push(e&&e.apply(this,arguments))},n,i),r},s.map=function(a,s,t,e){var n=y(this,a=x.map(u(a),this.getDimension,this)),l=n.indices=this.indices,h=n._storage,c=[];return this.each(a,function(){var t=arguments[arguments.length-1],e=s&&s.apply(this,arguments);if(null!=e){"number"==typeof e&&(c[0]=e,e=c);for(var n=0;n<e.length;n++){var i=a[n],r=h[i],o=l[t];r&&(r[o]=e[n])}}},t,e),n},s.downSample=function(t,e,n,i){for(var r=y(this,[t]),o=this._storage,a=r._storage,s=this.indices,l=r.indices=[],h=[],c=[],u=Math.floor(1/e),f=a[t],d=this.count(),p=0;p<o[t].length;p++)a[t][p]=o[t][p];for(p=0;p<d;p+=u){d-p<u&&(u=d-p,h.length=u);for(var g=0;g<u;g++){var v=s[p+g];h[g]=f[v],c[g]=v}var m=n(h);f[v=c[i(h,m)||0]]=m,l.push(v)}return r},s.getItemModel=function(t){var e=this.hostModel;return t=this.indices[t],new n(this._rawData.getItem(t),e,e&&e.ecModel)},s.diff=function(t){var e,n=this._idList,i=t&&t._idList;return new r(t?t.indices:[],this.indices,function(t){return null!=(e=i[t])?e:"e\0\0"+t},function(t){return null!=(e=n[t])?e:"e\0\0"+t})},s.getVisual=function(t){var e=this._visual;return e&&e[t]},s.setVisual=function(t,e){if(o(t))for(var n in t)t.hasOwnProperty(n)&&this.setVisual(n,t[n]);else this._visual=this._visual||{},this._visual[t]=e},s.setLayout=function(t,e){if(o(t))for(var n in t)t.hasOwnProperty(n)&&this.setLayout(n,t[n]);else this._layout[t]=e},s.getLayout=function(t){return this._layout[t]},s.getItemLayout=function(t){return this._itemLayouts[t]},s.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?x.extend(this._itemLayouts[t]||{},e):e},s.clearItemLayouts=function(){this._itemLayouts.length=0},s.getItemVisual=function(t,e,n){var i=this._itemVisuals[t],r=i&&i[e];return null!=r||n?r:this.getVisual(e)},s.setItemVisual=function(t,e,n){var i=this._itemVisuals[t]||{};if(this._itemVisuals[t]=i,o(e))for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);else i[e]=n},s.clearAllVisual=function(){this._visual={},this._itemVisuals=[]};var l=function(t){t.seriesIndex=this.seriesIndex,t.dataIndex=this.dataIndex,t.dataType=this.dataType};s.setItemGraphicEl=function(t,e){var n=this.hostModel;e&&(e.dataIndex=t,e.dataType=this.dataType,e.seriesIndex=n&&n.seriesIndex,"group"===e.type&&e.traverse(l,e)),this._graphicEls[t]=e},s.getItemGraphicEl=function(t){return this._graphicEls[t]},s.eachItemGraphicEl=function(n,i){x.each(this._graphicEls,function(t,e){t&&n&&n.call(i,t,e)})},s.cloneShallow=function(){var t=x.map(this.dimensions,this.getDimensionInfo,this),e=new c(t,this.hostModel);return e._storage=this._storage,h(e,this),e.indices=this.indices.slice(),this._extent&&(e._extent=x.extend({},this._extent)),e},s.wrapMethod=function(t,e){var n=this[t];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=n.apply(this,arguments);return e.apply(this,[t].concat(x.slice(arguments)))})},s.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],s.CHANGABLE_METHODS=["filterSelf"];var f=c;d.exports=f}).call(t,p(48))},function(t,e,n){var _=n(597),x=n(600).normalizeToArray,b=_.each,w=_.isString,S=_.defaults,C={tooltip:1,label:1,itemName:1};function i(t,e,n){e=e||[],n=n||{},t=(t||[]).slice();var i=(n.dimsDef||[]).slice(),s=_.createHashMap(n.encodeDef),r=_.createHashMap(),o=_.createHashMap(),l=[],a=n.dimCount;if(null==a){var h=k(e[0]);a=Math.max(_.isArray(h)&&h.length||1,t.length,i.length),b(t,function(t){var e=t.dimsDef;e&&(a=Math.max(a,e.length))})}for(var c=0;c<a;c++){var u=w(i[c])?{name:i[c]}:i[c]||{},f=u.name,d=l[c]={otherDims:{}};null!=f&&null==r.get(f)&&(d.name=d.tooltipName=f,r.set(f,c)),null!=u.type&&(d.type=u.type)}s.each(function(n,i){n=s.set(i,x(n).slice()),b(n,function(t,e){w(t)&&(t=r.get(t)),null!=t&&t<a&&(n[e]=t,m(l[t],i,e))})});var p=0;b(t,function(i,t){var r,o,a;w(i)?(r=i,i={}):(r=i.name,i=_.clone(i),o=i.dimsDef,a=i.otherDims,i.name=i.coordDim=i.coordDimIndex=i.dimsDef=i.otherDims=null);var e=x(s.get(r));if(!e.length)for(var n=0;n<(o&&o.length||1);n++){for(;p<l.length&&null!=l[p].coordDim;)p++;p<l.length&&e.push(p++)}b(e,function(t,e){var n=l[t];m(S(n,i),r,e),null==n.name&&o&&(n.name=n.tooltipName=o[e]),a&&S(n.otherDims,a)})});for(var g=n.extraPrefix||"value",v=0;v<a;v++){null==(d=l[v]=l[v]||{}).coordDim&&(d.coordDim=y(g,o,n.extraFromZero),d.coordDimIndex=0,d.isExtraCoord=!0),null==d.name&&(d.name=y(d.coordDim,r)),null==d.type&&T(e,v)&&(d.type="ordinal")}return l;function m(t,e,n){C[e]?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,o.set(e,!0))}function y(t,e,n){if(n||null!=e.get(t)){for(var i=0;null!=e.get(t+i);)i++;t+=i}return e.set(t,!0),t}}var T=i.guessOrdinal=function(t,e){for(var n=0,i=t.length;n<i;n++){var r=k(t[n]);if(!_.isArray(r))return!1;if(null!=(r=r[e])&&isFinite(r)&&""!==r)return!1;if(w(r)&&"-"!==r)return!0}return!1};function k(t){return _.isArray(t)?t:_.isObject(t)?t.value:t}var r=i;t.exports=r},function(t,e,n){var r=n(597),i=n(620),o=n(632),a=n(609),s=n(600);function l(){this.group=new i,this.uid=o.getUID("viewChart")}var h=l.prototype={type:"chart",init:function(t,e){},render:function(t,e,n,i){},highlight:function(t,e,n,i){u(t.getData(),i,"emphasis")},downplay:function(t,e,n,i){u(t.getData(),i,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){}};function c(t,e){if(t&&(t.trigger(e),"group"===t.type))for(var n=0;n<t.childCount();n++)c(t.childAt(n),e)}function u(e,t,n){var i=s.queryDataIndex(e,t);null!=i?r.each(s.normalizeToArray(i),function(t){c(e.getItemGraphicEl(t),n)}):e.eachItemGraphicEl(function(t){c(t,n)})}h.updateView=h.updateLayout=h.updateVisual=function(t,e,n,i){this.render(t,e,n,i)},a.enableClassExtend(l,["dispose"]),a.enableClassManagement(l,{registerWhenExtend:!0});var f=l;t.exports=f},function(t,e,n){var i=n(597),r=n(613);function o(t){return i.isObject(t)&&null!=t.value?t.value:t+""}var a={getFormattedLabels:function(){return r.getFormattedLabels(this.axis,this.get("axisLabel.formatter"))},getCategories:function(){return"category"===this.get("type")&&i.map(this.get("data"),o)},getMin:function(t){var e=this.option,n=t||null==e.rangeStart?e.min:e.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!=typeof n&&!i.eqNaN(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(t){var e=this.option,n=t||null==e.rangeEnd?e.max:e.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!=typeof n&&!i.eqNaN(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var t=this.option;return null==t.rangeStart&&null==t.rangeEnd&&!t.scale},getCoordSysModel:i.noop,setRange:function(t,e){this.option.rangeStart=t,this.option.rangeEnd=e},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}};t.exports=a},function(t,e,n){var r=n(597),i=n(602),o=n(613),a=i.linearMap;function s(t,e){var n=(t[1]-t[0])/e/2;t[0]+=n,t[1]-=n}var l=[0,1],h=function(t,e,n){this.dim=t,this.scale=e,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1,this._labelInterval};h.prototype={constructor:h,contain:function(t){var e=this._extent,n=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]);return n<=t&&t<=i},containData:function(t){return this.contain(this.dataToCoord(t))},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(t){return i.getPixelPrecision(t||this.scale.getExtent(),this._extent)},setExtent:function(t,e){var n=this._extent;n[0]=t,n[1]=e},dataToCoord:function(t,e){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&"ordinal"===i.type&&s(n=n.slice(),i.count()),a(t,l,n,e)},coordToData:function(t,e){var n=this._extent,i=this.scale;this.onBand&&"ordinal"===i.type&&s(n=n.slice(),i.count());var r=a(t,n,l,e);return this.scale.scale(r)},pointToData:function(t,e){},getTicksCoords:function(t){if(this.onBand&&!t){for(var e=this.getBands(),n=[],i=0;i<e.length;i++)n.push(e[i][0]);return e[i-1]&&n.push(e[i-1][1]),n}return r.map(this.scale.getTicks(),this.dataToCoord,this)},getLabelsCoords:function(){return r.map(this.scale.getTicks(),this.dataToCoord,this)},getBands:function(){for(var t=this.getExtent(),e=[],n=this.scale.count(),i=t[0],r=t[1]-i,o=0;o<n;o++)e.push([r*o/n+i,r*(o+1)/n+i]);return e},getBandWidth:function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);0===n&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},isHorizontal:null,getRotate:null,getLabelInterval:function(){var t=this._labelInterval;if(!t){var e=this.model,n=e.getModel("axisLabel");t=n.get("interval"),"category"!==this.type||null!=t&&"auto"!==t||(t=o.getAxisLabelInterval(r.map(this.scale.getTicks(),this.dataToCoord,this),e.getFormattedLabels(),n.getFont(),this.getRotate?this.getRotate():this.isHorizontal&&!this.isHorizontal()?90:0,n.get("rotate"))),this._labelInterval=t}return t}};var c=h;t.exports=c},function(t,e,n){var i=n(597),w=i.retrieve,x=i.defaults,S=i.extend,C=i.each,T=n(606),k=n(598),O=n(608),r=n(602),A=r.isRadianAroundZero,M=r.remRadian,u=n(619).createSymbol,a=n(614),b=n(601).applyTransform,D=Math.PI;function I(t){var e={componentType:t.mainType};return e[t.mainType+"Index"]=t.componentIndex,e}var o=function(t,e){this.opt=e,this.axisModel=t,x(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new k.Group;var n=new k.Group({position:e.position.slice(),rotation:e.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n};o.prototype={constructor:o,hasBuilder:function(t){return!!s[t]},add:function(t){s[t].call(this)},getGroup:function(){return this.group}};var s={axisLine:function(){var t=this.opt,e=this.axisModel;if(e.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),i=this._transform,r=[n[0],0],o=[n[1],0];i&&(b(r,r,i),b(o,o,i));var a=S({lineCap:"round"},e.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new k.Line(k.subPixelOptimizeLine({anid:"line",shape:{x1:r[0],y1:r[1],x2:o[0],y2:o[1]},style:a,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1})));var s=e.get("axisLine.symbol"),l=e.get("axisLine.symbolSize");if(null!=s){"string"==typeof s&&(s=[s,s]),"string"!=typeof l&&"number"!=typeof l||(l=[l,l]);var h=l[0],c=l[1];C([[t.rotation+Math.PI/2,r],[t.rotation-Math.PI/2,o]],function(t,e){if("none"!==s[e]&&null!=s[e]){var n=u(s[e],-h/2,-c/2,h,c,a.stroke,!0);n.attr({rotation:t[0],position:t[1],silent:!0}),this.group.add(n)}},this)}}},axisTickLabel:function(){var t=this.axisModel,e=this.opt,n=function(t,e,n){var i=e.axis;if(!e.get("axisTick.show")||i.scale.isBlank())return;for(var r=e.getModel("axisTick"),o=r.getModel("lineStyle"),a=r.get("length"),s=R(r,n.labelInterval),l=i.getTicksCoords(r.get("alignWithLabel")),h=i.scale.getTicks(),c=e.get("axisLabel.showMinLabel"),u=e.get("axisLabel.showMaxLabel"),f=[],d=[],p=t._transform,g=[],v=l.length,m=0;m<v;m++)if(!j(i,m,s,v,c,u)){var y=l[m];f[0]=y,f[1]=0,d[0]=y,d[1]=n.tickDirection*a,p&&(b(f,f,p),b(d,d,p));var _=new k.Line(k.subPixelOptimizeLine({anid:"tick_"+h[m],shape:{x1:f[0],y1:f[1],x2:d[0],y2:d[1]},style:x(o.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}),z2:2,silent:!0}));t.group.add(_),g.push(_)}return g}(this,t,e);!function(t,e,n){var i=t.get("axisLabel.showMinLabel"),r=t.get("axisLabel.showMaxLabel");n=n||[];var o=(e=e||[])[0],a=e[1],s=e[e.length-1],l=e[e.length-2],h=n[0],c=n[1],u=n[n.length-1],f=n[n.length-2];!1===i?(d(o),d(h)):p(o,a)&&(i?(d(a),d(c)):(d(o),d(h)));!1===r?(d(s),d(u)):p(l,s)&&(r?(d(l),d(f)):(d(s),d(u)))}(t,function(s,l,h){var c=l.axis;if(!w(h.axisLabelShow,l.get("axisLabel.show"))||c.scale.isBlank())return;var u=l.getModel("axisLabel"),f=u.get("margin"),d=c.scale.getTicks(),p=l.getFormattedLabels(),t=(w(h.labelRotate,u.get("rotate"))||0)*D/180,g=P(h.rotation,t,h.labelDirection),v=l.get("data"),m=[],y=E(l),_=l.get("triggerEvent"),x=l.get("axisLabel.showMinLabel"),b=l.get("axisLabel.showMaxLabel");return C(d,function(t,e){if(!j(c,e,h.labelInterval,d.length,x,b)){var n=u;v&&v[t]&&v[t].textStyle&&(n=new O(v[t].textStyle,u,l.ecModel));var i=n.getTextColor()||l.get("axisLine.lineStyle.color"),r=[c.dataToCoord(t),h.labelOffset+h.labelDirection*f],o=c.scale.getLabel(t),a=new k.Text({anid:"label_"+t,position:r,rotation:g.rotation,silent:y,z2:10});k.setTextStyle(a.style,n,{text:p[e],textAlign:n.getShallow("align",!0)||g.textAlign,textVerticalAlign:n.getShallow("verticalAlign",!0)||n.getShallow("baseline",!0)||g.textVerticalAlign,textFill:"function"==typeof i?i("category"===c.type?o:"value"===c.type?t+"":t,e):i}),_&&(a.eventData=I(l),a.eventData.targetType="axisLabel",a.eventData.value=o),s._dumbGroup.add(a),a.updateTransform(),m.push(a),s.group.add(a),a.decomposeTransform()}}),m}(this,t,e),n)},axisName:function(){var t=this.opt,e=this.axisModel,n=w(t.axisName,e.get("name"));if(n){var i,r,o=e.get("nameLocation"),a=t.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,h=this.axisModel.axis.getExtent(),c=h[0]>h[1]?-1:1,u=["start"===o?h[0]-c*l:"end"===o?h[1]+c*l:(h[0]+h[1])/2,L(o)?t.labelOffset+a*l:0],f=e.get("nameRotate");null!=f&&(f=f*D/180),L(o)?i=P(t.rotation,null!=f?f:t.rotation,a):(i=function(t,e,n,i){var r,o,a=M(n-t.rotation),s=i[0]>i[1],l="start"===e&&!s||"start"!==e&&s;A(a-D/2)?(o=l?"bottom":"top",r="center"):A(a-1.5*D)?(o=l?"top":"bottom",r="center"):(o="middle",r=a<1.5*D&&D/2<a?l?"left":"right":l?"right":"left");return{rotation:a,textAlign:r,textVerticalAlign:o}}(t,o,f||0,h),null!=(r=t.axisNameAvailableWidth)&&(r=Math.abs(r/Math.sin(i.rotation)),!isFinite(r)&&(r=null)));var d=s.getFont(),p=e.get("nameTruncate",!0)||{},g=p.ellipsis,v=w(t.nameTruncateMaxWidth,p.maxWidth,r),m=null!=g&&null!=v?T.truncateText(n,v,d,g,{minChar:2,placeholder:p.placeholder}):n,y=e.get("tooltip",!0),_=e.mainType,x={componentType:_,name:n,$vars:["name"]};x[_+"Index"]=e.componentIndex;var b=new k.Text({anid:"name",__fullText:n,__truncatedText:m,position:u,rotation:i.rotation,silent:E(e),z2:1,tooltip:y&&y.show?S({content:n,formatter:function(){return n},formatterParams:x},y):null});k.setTextStyle(b.style,s,{text:m,textFont:d,textFill:s.getTextColor()||e.get("axisLine.lineStyle.color"),textAlign:i.textAlign,textVerticalAlign:i.textVerticalAlign}),e.get("triggerEvent")&&(b.eventData=I(e),b.eventData.targetType="axisName",b.eventData.name=n),this._dumbGroup.add(b),b.updateTransform(),this.group.add(b),b.decomposeTransform()}}},P=o.innerTextLayout=function(t,e,n){var i,r,o=M(e-t);return A(o)?(r=0<n?"top":"bottom",i="center"):A(o-D)?(r=0<n?"bottom":"top",i="center"):(r="middle",i=0<o&&o<D?0<n?"right":"left":0<n?"left":"right"),{rotation:o,textAlign:i,textVerticalAlign:r}};function E(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)}function d(t){t&&(t.ignore=!0)}function p(t,e,n){var i=t&&t.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(i&&r){var o=a.identity([]);return a.rotate(o,o,-t.rotation),i.applyTransform(a.mul([],o,t.getLocalTransform())),r.applyTransform(a.mul([],o,e.getLocalTransform())),i.intersect(r)}}function L(t){return"middle"===t||"center"===t}var j=o.ifIgnoreOnTick=function(t,e,n,i,r,o){if(0===e&&r||e===i-1&&o)return!1;var a,s=t.scale;return"ordinal"===s.type&&("function"==typeof n?!n(a=s.getTicks()[e],s.getLabel(a)):e%(n+1))},R=o.getInterval=function(t,e){var n=t.get("interval");return null!=n&&"auto"!=n||(n=e),n};var l=o;t.exports=l},function(t,e,n){var i=n(643),c=n(605),u=n(597),f=n(678),d=n(680),r=n(684),p=n(687),g=n(688),v=!c.canvasSupported,m={canvas:r},o={};var a=function(t,e,n){n=n||{},this.dom=e,this.id=t;var i=this,r=new d,o=n.renderer;if(v){if(!m.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");o="vml"}else o&&m[o]||(o="canvas");var a=new m[o](e,r,n);this.storage=r,this.painter=a;var s=c.node?null:new g(a.getViewportRoot());this.handler=new f(r,a,s,a.root),this.animation=new p({stage:{update:u.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var l=r.delFromStorage,h=r.addToStorage;r.delFromStorage=function(t){l.call(r,t),t&&t.removeSelfFromZr(i)},r.addToStorage=function(t){h.call(r,t),t.addSelfToZr(i)}};a.prototype={constructor:a,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer(t,e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},flush:function(){this._needsRefresh&&this.refreshImmediately(),this._needsRefreshHover&&this.refreshHoverImmediately()},addHover:function(t,e){this.painter.addHover&&(this.painter.addHover(t,e),this.refreshHover())},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,n){this.handler.on(t,e,n)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){var t;this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,t=this.id,delete o[t]}},e.version="3.7.4",e.init=function(t,e){var n=new a(i(),t,e);return o[n.id]=n},e.dispose=function(t){if(t)t.dispose();else{for(var e in o)o.hasOwnProperty(e)&&o[e].dispose();o={}}return this},e.getInstance=function(t){return o[t]},e.registerPainter=function(t,e){m[t]=e}},function(t,e){var n=2311;t.exports=function(){return n++}},function(t,e,n){var i=n(643),r=n(616),o=n(645),a=n(681),s=n(597),l=function(t){o.call(this,t),r.call(this,t),a.call(this,t),this.id=t.id||i()};l.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var n=this[t];n||(n=this[t]=[]),n[0]=e[0],n[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(s.isObject(t))for(var n in t)t.hasOwnProperty(n)&&this.attrKV(n,t[n]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),(this.clipPath=t).__zr=e,(t.__clipTarget=this).dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},s.mixin(l,a),s.mixin(l,o),s.mixin(l,r);var h=l;t.exports=h},function(t,e,n){var a=n(614),r=n(601),s=a.identity,i=5e-5;function l(t){return i<t||t<-i}var o=function(t){(t=t||{}).position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},h=o.prototype;h.transform=null,h.needLocalTransform=function(){return l(this.rotation)||l(this.position[0])||l(this.position[1])||l(this.scale[0]-1)||l(this.scale[1]-1)},h.updateTransform=function(){var t=this.parent,e=t&&t.transform,n=this.needLocalTransform(),i=this.transform;n||e?(i=i||a.create(),n?this.getLocalTransform(i):s(i),e&&(n?a.mul(i,t.transform,i):a.copy(i,t.transform)),this.transform=i,this.invTransform=this.invTransform||a.create(),a.invert(this.invTransform,i)):i&&s(i)},h.getLocalTransform=function(t){return o.getLocalTransform(this,t)},h.setTransform=function(t){var e=this.transform,n=t.dpr||1;e?t.setTransform(n*e[0],n*e[1],n*e[2],n*e[3],n*e[4],n*e[5]):t.setTransform(n,0,0,n,0,0)},h.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var c=[];h.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(a.mul(c,t.invTransform,e),e=c);var n=e[0]*e[0]+e[1]*e[1],i=e[2]*e[2]+e[3]*e[3],r=this.position,o=this.scale;l(n-1)&&(n=Math.sqrt(n)),l(i-1)&&(i=Math.sqrt(i)),e[0]<0&&(n=-n),e[3]<0&&(i=-i),r[0]=e[4],r[1]=e[5],o[0]=n,o[1]=i,this.rotation=Math.atan2(-e[1]/i,e[0]/n)}},h.getGlobalScale=function(){var t=this.transform;if(!t)return[1,1];var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]),n=Math.sqrt(t[2]*t[2]+t[3]*t[3]);return t[0]<0&&(e=-e),t[3]<0&&(n=-n),[e,n]},h.transformCoordToLocal=function(t,e){var n=[t,e],i=this.invTransform;return i&&r.applyTransform(n,n,i),n},h.transformCoordToGlobal=function(t,e){var n=[t,e],i=this.transform;return i&&r.applyTransform(n,n,i),n},o.getLocalTransform=function(t,e){s(e=e||[]);var n=t.origin,i=t.scale||[1,1],r=t.rotation||0,o=t.position||[0,0];return n&&(e[4]-=n[0],e[5]-=n[1]),a.scale(e,e,i),r&&a.rotate(e,e,r),n&&(e[4]+=n[0],e[5]+=n[1]),e[4]+=o[0],e[5]+=o[1],e};var u=o;t.exports=u},function(t,e,n){var j=n(682),R=n(617),B=n(597).isArrayLike,l=Array.prototype.slice;function r(t,e){return t[e]}function o(t,e,n){t[e]=n}function F(t,e,n){return(e-t)*n+t}function N(t,e,n){return.5<n?e:t}function z(t,e,n,i,r){var o=t.length;if(1==r)for(var a=0;a<o;a++)i[a]=F(t[a],e[a],n);else{var s=o&&t[0].length;for(a=0;a<o;a++)for(var l=0;l<s;l++)i[a][l]=F(t[a][l],e[a][l],n)}}function H(t,e,n){var i=t.length,r=e.length;if(i!==r)if(r<i)t.length=r;else for(var o=i;o<r;o++)t.push(1===n?e[o]:l.call(e[o]));var a=t[0]&&t[0].length;for(o=0;o<t.length;o++)if(1===n)isNaN(t[o])&&(t[o]=e[o]);else for(var s=0;s<a;s++)isNaN(t[o][s])&&(t[o][s]=e[o][s])}function W(t,e,n){if(t===e)return!0;var i=t.length;if(i!==e.length)return!1;if(1===n){for(var r=0;r<i;r++)if(t[r]!==e[r])return!1}else{var o=t[0].length;for(r=0;r<i;r++)for(var a=0;a<o;a++)if(t[r][a]!==e[r][a])return!1}return!0}function G(t,e,n,i,r,o,a,s,l){var h=t.length;if(1==l)for(var c=0;c<h;c++)s[c]=U(t[c],e[c],n[c],i[c],r,o,a);else{var u=t[0].length;for(c=0;c<h;c++)for(var f=0;f<u;f++)s[c][f]=U(t[c][f],e[c][f],n[c][f],i[c][f],r,o,a)}}function U(t,e,n,i,r,o,a){var s=.5*(n-t),l=.5*(i-e);return(2*(e-n)+s+l)*a+(-3*(e-n)-2*s-l)*o+s*r+e}function a(t){if(B(t)){var e=t.length;if(B(t[0])){for(var n=[],i=0;i<e;i++)n.push(l.call(t[i]));return n}return l.call(t)}return t}function X(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function h(t,e,n,i,o,r){var a=t._getter,s=t._setter,l="spline"===e,h=i.length;if(h){var c,u,f,d=i[0].value,p=B(d),g=!1,v=!1,m=p?(u=(c=i)[c.length-1].value,B(u&&u[0])?2:1):0;i.sort(function(t,e){return t.time-e.time}),f=i[h-1].time;for(var y=[],_=[],x=i[0].value,b=!0,w=0;w<h;w++){y.push(i[w].time/f);var S=i[w].value;if(p&&W(S,x,m)||!p&&S===x||(b=!1),"string"==typeof(x=S)){var C=R.parse(S);C?(S=C,g=!0):v=!0}_.push(S)}if(r||!b){var T=_[h-1];for(w=0;w<h-1;w++)p?H(_[w],T,m):!isNaN(_[w])||isNaN(T)||v||g||(_[w]=T);p&&H(a(t._target,o),T,m);var k,O,A,M,D,I=0,P=0;if(g)var E=[0,0,0,0];var L=new j({target:t._target,life:f,loop:t._loop,delay:t._delay,onframe:function(t,e){var n;if(e<0)n=0;else if(e<P){for(n=Math.min(I+1,h-1);0<=n&&!(y[n]<=e);n--);n=Math.min(n,h-2)}else{for(n=I;n<h&&!(y[n]>e);n++);n=Math.min(n-1,h-2)}P=e;var i=y[(I=n)+1]-y[n];if(0!==i)if(k=(e-y[n])/i,l)if(A=_[n],O=_[0===n?n:n-1],M=_[h-2<n?h-1:n+1],D=_[h-3<n?h-1:n+2],p)G(O,A,M,D,k,k*k,k*k*k,a(t,o),m);else{if(g)r=G(O,A,M,D,k,k*k,k*k*k,E,1),r=X(E);else{if(v)return N(A,M,k);r=U(O,A,M,D,k,k*k,k*k*k)}s(t,o,r)}else if(p)z(_[n],_[n+1],k,a(t,o),m);else{var r;if(g)z(_[n],_[n+1],k,E,1),r=X(E);else{if(v)return N(_[n],_[n+1],k);r=F(_[n],_[n+1],k)}s(t,o,r)}},ondestroy:n});return e&&"spline"!==e&&(L.easing=e),L}}}var i=function(t,e,n,i){this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||r,this._setter=i||o,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};i.prototype={when:function(t,e){var n=this._tracks;for(var i in e)if(e.hasOwnProperty(i)){if(!n[i]){n[i]=[];var r=this._getter(this._target,i);if(null==r)continue;0!==t&&n[i].push({time:0,value:a(r)})}n[i].push({time:t,value:e[i]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,n=0;n<e;n++)t[n].call(this)},start:function(t,e){var n,i=this,r=0,o=function(){--r||i._doneCallback()};for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var s=h(this,t,o,this._tracks[a],a,e);s&&(this._clipList.push(s),r++,this.animation&&this.animation.addClip(s),n=s)}if(n){var l=n.onframe;n.onframe=function(t,e){l(t,e);for(var n=0;n<i._onframeList.length;n++)i._onframeList[n](t,e)}}return r||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,n=this.animation,i=0;i<e.length;i++){var r=e[i];t&&r.onframe(this._target,1),n&&n.removeClip(r)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var s=i;t.exports=s},function(t,e){var n=function(){this.head=null,this.tail=null,this._len=0},i=n.prototype;i.insert=function(t){var e=new l(t);return this.insertEntry(e),e},i.insertEntry=function(t){this.head?((this.tail.next=t).prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},i.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},i.len=function(){return this._len},i.clear=function(){this.head=this.tail=null,this._len=0};var l=function(t){this.value=t,this.next,this.prev},r=function(t){this._list=new n,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},o=r.prototype;o.put=function(t,e){var n=this._list,i=this._map,r=null;if(null==i[t]){var o=n.len(),a=this._lastRemovedEntry;if(o>=this._maxSize&&0<o){var s=n.head;n.remove(s),delete i[s.key],r=s.value,this._lastRemovedEntry=s}a?a.value=e:a=new l(e),a.key=t,n.insertEntry(a),i[t]=a}return r},o.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},o.clear=function(){this._list.clear(),this._map={}};var a=r;t.exports=a},function(t,e,n){var i=n(621).debugMode,r=function(){};1===i?r=function(){for(var t in arguments)throw new Error(arguments[t])}:1<i&&(r=function(){for(var t in arguments)console.log(arguments[t])});var o=r;t.exports=o},function(t,e){var c=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],n=function(t,e){this.extendFrom(t,!1),this.host=e};function a(t,e,n){var i=null==e.x?0:e.x,r=null==e.x2?1:e.x2,o=null==e.y?0:e.y,a=null==e.y2?0:e.y2;return e.global||(i=i*n.width+n.x,r=r*n.width+n.x,o=o*n.height+n.y,a=a*n.height+n.y),t.createLinearGradient(i,o,r,a)}function s(t,e,n){var i=n.width,r=n.height,o=Math.min(i,r),a=null==e.x?.5:e.x,s=null==e.y?.5:e.y,l=null==e.r?.5:e.r;return e.global||(a=a*i+n.x,s=s*r+n.y,l*=o),t.createRadialGradient(a,s,0,a,s,l)}for(var i=n.prototype={constructor:n,host:null,fill:"#000",stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,n){for(var i=this,r=n&&n.style,o=!r,a=0;a<c.length;a++){var s=c[a],l=s[0];(o||i[l]!==r[l])&&(t[l]=i[l]||s[1])}if((o||i.fill!==r.fill)&&(t.fillStyle=i.fill),(o||i.stroke!==r.stroke)&&(t.strokeStyle=i.stroke),(o||i.opacity!==r.opacity)&&(t.globalAlpha=null==i.opacity?1:i.opacity),(o||i.blend!==r.blend)&&(t.globalCompositeOperation=i.blend||"source-over"),this.hasStroke()){var h=i.lineWidth;t.lineWidth=h/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&0<this.lineWidth},extendFrom:function(t,e){if(t)for(var n in t)!t.hasOwnProperty(n)||!0!==e&&(!1===e?this.hasOwnProperty(n):null==t[n])||(this[n]=t[n])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,n){for(var i=("radial"===e.type?s:a)(t,e,n),r=e.colorStops,o=0;o<r.length;o++)i.addColorStop(r[o].offset,r[o].color);return i}},r=0;r<c.length;r++){var o=c[r];o[0]in i||(i[o[0]]=o[1])}n.getGradient=i.getGradient;var l=n;t.exports=l},function(t,e){var n=function(t,e){this.image=t,this.repeat=e,this.type="pattern"};n.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")};var i=n;t.exports=i},function(t,e){var n="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)};t.exports=n},function(t,e,n){var i=n(629),r=n(607),o=n(597),p=n(630);function a(t){i.call(this,t)}a.prototype={constructor:a,type:"image",brush:function(t,e){var n=this.style,i=n.image;n.bind(t,this,e);var r=this._image=p.createOrUpdateImage(i,this._image,this,this.onload);if(r&&p.isImageReady(r)){var o=n.x||0,a=n.y||0,s=n.width,l=n.height,h=r.width/r.height;if(null==s&&null!=l?s=l*h:null==l&&null!=s?l=s/h:null==s&&null==l&&(s=r.width,l=r.height),this.setTransform(t),n.sWidth&&n.sHeight){var c=n.sx||0,u=n.sy||0;t.drawImage(r,c,u,n.sWidth,n.sHeight,o,a,s,l)}else if(n.sx&&n.sy){var f=s-(c=n.sx),d=l-(u=n.sy);t.drawImage(r,c,u,f,d,o,a,s,l)}else t.drawImage(r,o,a,s,l);this.restoreTransform(t),null!=n.text&&this.drawRectText(t,this.getBoundingRect())}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new r(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},o.inherits(a,i);var s=a;t.exports=s},function(t,e,n){var i=n(597),g=i.retrieve2,v=i.retrieve3,r=i.each,o=i.normalizeCssArray,d=i.isString,p=i.isObject,D=n(612),m=n(654),y=n(630),a={left:1,right:1,center:1},s={top:1,bottom:1,middle:1};function l(t){if(t){t.font=D.makeFont(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||a[e]?e:"left";var n=t.textVerticalAlign||t.textBaseline;"center"===n&&(n="middle"),t.textVerticalAlign=null==n||s[n]?n:"top",t.textPadding&&(t.textPadding=o(t.textPadding))}}function I(t,e,n,i,r){if(n&&e.textRotation){var o=e.textOrigin;"center"===o?(i=n.width/2+n.x,r=n.height/2+n.y):o&&(i=o[0]+n.x,r=o[1]+n.y),t.translate(i,r),t.rotate(-e.textRotation),t.translate(-i,-r)}}function P(t,e,n,i,r,o,a,s){var l=i.rich[n.styleName]||{},h=n.textVerticalAlign,c=o+r/2;"top"===h?c=o+n.height/2:"bottom"===h&&(c=o+r-n.height/2),!n.isLineHolder&&E(l)&&L(t,e,l,"right"===s?a-n.width:"center"===s?a-n.width/2:a,c-n.height/2,n.width,n.height);var u=n.textPadding;u&&(a=R(a,s,u),c-=n.height/2-u[2]-n.textHeight/2),O(e,"shadowBlur",v(l.textShadowBlur,i.textShadowBlur,0)),O(e,"shadowColor",l.textShadowColor||i.textShadowColor||"transparent"),O(e,"shadowOffsetX",v(l.textShadowOffsetX,i.textShadowOffsetX,0)),O(e,"shadowOffsetY",v(l.textShadowOffsetY,i.textShadowOffsetY,0)),O(e,"textAlign",s),O(e,"textBaseline","middle"),O(e,"font",n.font||D.DEFAULT_FONT);var f=A(l.textStroke||i.textStroke,p),d=M(l.textFill||i.textFill),p=g(l.textStrokeWidth,i.textStrokeWidth);f&&(O(e,"lineWidth",p),O(e,"strokeStyle",f),e.strokeText(n.text,a,c)),d&&(O(e,"fillStyle",d),e.fillText(n.text,a,c))}function E(t){return t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor}function L(t,e,n,i,r,o,a){var s=n.textBackgroundColor,l=n.textBorderWidth,h=n.textBorderColor,c=d(s);if(O(e,"shadowBlur",n.textBoxShadowBlur||0),O(e,"shadowColor",n.textBoxShadowColor||"transparent"),O(e,"shadowOffsetX",n.textBoxShadowOffsetX||0),O(e,"shadowOffsetY",n.textBoxShadowOffsetY||0),c||l&&h){e.beginPath();var u=n.textBorderRadius;u?m.buildPath(e,{x:i,y:r,width:o,height:a,r:u}):e.rect(i,r,o,a),e.closePath()}if(c)O(e,"fillStyle",s),e.fill();else if(p(s)){var f=s.image;(f=y.createOrUpdateImage(f,null,t,_,s))&&y.isImageReady(f)&&e.drawImage(f,i,r,o,a)}l&&h&&(O(e,"lineWidth",l),O(e,"strokeStyle",h),e.stroke())}function _(t,e){e.image=t}function j(t,e,n){var i=e.x||0,r=e.y||0,o=e.textAlign,a=e.textVerticalAlign;if(n){var s=e.textPosition;if(s instanceof Array)i=n.x+c(s[0],n.width),r=n.y+c(s[1],n.height);else{var l=D.adjustTextPositionOnRect(s,n,e.textDistance);i=l.x,r=l.y,o=o||l.textAlign,a=a||l.textVerticalAlign}var h=e.textOffset;h&&(i+=h[0],r+=h[1])}return{baseX:i,baseY:r,textAlign:o,textVerticalAlign:a}}function O(t,e,n){return t[e]=n,t[e]}function A(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function M(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function c(t,e){return"string"==typeof t?0<=t.lastIndexOf("%")?parseFloat(t)/100*e:parseFloat(t):t}function R(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}e.normalizeTextStyle=function(t){return l(t),r(t.rich,l),t},e.renderText=function(t,e,n,i,r){i.rich?(o=t,a=e,s=n,l=i,h=r,c=o.__textCotentBlock,c&&!o.__dirty||(c=o.__textCotentBlock=D.parseRichText(s,l)),function(t,e,n,i,r){var o=n.width,a=n.outerWidth,s=n.outerHeight,l=i.textPadding,h=j(0,i,r),c=h.baseX,u=h.baseY,f=h.textAlign,d=h.textVerticalAlign;I(e,i,r,c,u);var p=D.adjustTextX(c,a,f),g=D.adjustTextY(u,s,d),v=p,m=g;l&&(v+=l[3],m+=l[0]);var y=v+o;E(i)&&L(t,e,i,p,g,a,s);for(var _=0;_<n.lines.length;_++){for(var x,b=n.lines[_],w=b.tokens,S=w.length,C=b.lineHeight,T=b.width,k=0,O=v,A=y,M=S-1;k<S&&(!(x=w[k]).textAlign||"left"===x.textAlign);)P(t,e,x,i,C,m,O,"left"),T-=x.width,O+=x.width,k++;for(;0<=M&&"right"===(x=w[M]).textAlign;)P(t,e,x,i,C,m,A,"right"),T-=x.width,A-=x.width,M--;for(O+=(o-(O-v)-(y-A)-T)/2;k<=M;)x=w[k],P(t,e,x,i,C,m,O+x.width/2,"center"),O+=x.width,k++;m+=C}}(o,a,c,l,h)):function(t,e,n,i,r){var o=O(e,"font",i.font||D.DEFAULT_FONT),a=i.textPadding,s=t.__textCotentBlock;s&&!t.__dirty||(s=t.__textCotentBlock=D.parsePlainText(n,o,a,i.truncate));var l=s.outerHeight,h=s.lines,c=s.lineHeight,u=j(0,i,r),f=u.baseX,d=u.baseY,p=u.textAlign,g=u.textVerticalAlign;I(e,i,r,f,d);var v=D.adjustTextY(d,l,g),m=f,y=v,_=E(i);if(_||a){var x=D.getWidth(n,o),b=x;a&&(b+=a[1]+a[3]);var w=D.adjustTextX(f,b,p);_&&L(t,e,i,w,v,b,l),a&&(m=R(f,p,a),y+=a[0])}O(e,"textAlign",p||"left"),O(e,"textBaseline","middle"),O(e,"shadowBlur",i.textShadowBlur||0),O(e,"shadowColor",i.textShadowColor||"transparent"),O(e,"shadowOffsetX",i.textShadowOffsetX||0),O(e,"shadowOffsetY",i.textShadowOffsetY||0),y+=c/2;var S=i.textStrokeWidth,C=A(i.textStroke,S),T=M(i.textFill);C&&(O(e,"lineWidth",S),O(e,"strokeStyle",C)),T&&O(e,"fillStyle",T);for(var k=0;k<h.length;k++)C&&e.strokeText(h[k],m,y),T&&e.fillText(h[k],m,y),y+=c}(t,e,n,i,r);var o,a,s,l,h,c},e.getStroke=A,e.getFill=M,e.needDrawText=function(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}},function(t,e){e.buildPath=function(t,e){var n,i,r,o,a,s=e.x,l=e.y,h=e.width,c=e.height,u=e.r;h<0&&(s+=h,h=-h),c<0&&(l+=c,c=-c),"number"==typeof u?n=i=r=o=u:u instanceof Array?1===u.length?n=i=r=o=u[0]:2===u.length?(n=r=u[0],i=o=u[1]):3===u.length?(n=u[0],i=o=u[1],r=u[2]):(n=u[0],i=u[1],r=u[2],o=u[3]):n=i=r=o=0,h<n+i&&(n*=h/(a=n+i),i*=h/a),h<r+o&&(r*=h/(a=r+o),o*=h/a),c<i+r&&(i*=c/(a=i+r),r*=c/a),c<n+o&&(n*=c/(a=n+o),o*=c/a),t.moveTo(s+n,l),t.lineTo(s+h-i,l),0!==i&&t.quadraticCurveTo(s+h,l,s+h,l+i),t.lineTo(s+h,l+c-r),0!==r&&t.quadraticCurveTo(s+h,l+c,s+h-r,l+c),t.lineTo(s+o,l+c),0!==o&&t.quadraticCurveTo(s,l+c,s,l+c-o),t.lineTo(s,l+n),0!==n&&t.quadraticCurveTo(s,l,s+n,l)}},function(t,e,n){var p=n(601),v=n(615),m=Math.min,y=Math.max,g=Math.sin,_=Math.cos,x=2*Math.PI,b=p.create(),w=p.create(),S=p.create();var C=[],T=[];e.fromPoints=function(t,e,n){if(0!==t.length){var i,r=t[0],o=r[0],a=r[0],s=r[1],l=r[1];for(i=1;i<t.length;i++)r=t[i],o=m(o,r[0]),a=y(a,r[0]),s=m(s,r[1]),l=y(l,r[1]);e[0]=o,e[1]=s,n[0]=a,n[1]=l}},e.fromLine=function(t,e,n,i,r,o){r[0]=m(t,n),r[1]=m(e,i),o[0]=y(t,n),o[1]=y(e,i)},e.fromCubic=function(t,e,n,i,r,o,a,s,l,h){var c,u=v.cubicExtrema,f=v.cubicAt,d=u(t,n,r,a,C);for(l[0]=1/0,l[1]=1/0,h[0]=-1/0,h[1]=-1/0,c=0;c<d;c++){var p=f(t,n,r,a,C[c]);l[0]=m(p,l[0]),h[0]=y(p,h[0])}for(d=u(e,i,o,s,T),c=0;c<d;c++){var g=f(e,i,o,s,T[c]);l[1]=m(g,l[1]),h[1]=y(g,h[1])}l[0]=m(t,l[0]),h[0]=y(t,h[0]),l[0]=m(a,l[0]),h[0]=y(a,h[0]),l[1]=m(e,l[1]),h[1]=y(e,h[1]),l[1]=m(s,l[1]),h[1]=y(s,h[1])},e.fromQuadratic=function(t,e,n,i,r,o,a,s){var l=v.quadraticExtremum,h=v.quadraticAt,c=y(m(l(t,n,r),1),0),u=y(m(l(e,i,o),1),0),f=h(t,n,r,c),d=h(e,i,o,u);a[0]=m(t,r,f),a[1]=m(e,o,d),s[0]=y(t,r,f),s[1]=y(e,o,d)},e.fromArc=function(t,e,n,i,r,o,a,s,l){var h=p.min,c=p.max,u=Math.abs(r-o);if(u%x<1e-4&&1e-4<u)return s[0]=t-n,s[1]=e-i,l[0]=t+n,void(l[1]=e+i);if(b[0]=_(r)*n+t,b[1]=g(r)*i+e,w[0]=_(o)*n+t,w[1]=g(o)*i+e,h(s,b,w),c(l,b,w),(r%=x)<0&&(r+=x),(o%=x)<0&&(o+=x),o<r&&!a?o+=x:r<o&&a&&(r+=x),a){var f=o;o=r,r=f}for(var d=0;d<o;d+=Math.PI/2)r<d&&(S[0]=_(d)*n+t,S[1]=g(d)*i+e,h(s,S,s),c(l,S,l))}},function(t,e){var n=2*Math.PI;e.normalizeRadian=function(t){return(t%=n)<0&&(t+=n),t}},function(t,e){t.exports=function(t,e,n,i,r,o){if(e<o&&i<o||o<e&&o<i)return 0;if(i===e)return 0;var a=i<e?1:-1,s=(o-e)/(i-e);return 1!==s&&0!==s||(a=i<e?.5:-.5),r<s*(n-t)+t?a:0}},function(t,e,n){var i=n(605),h=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];t.exports=function(l){return i.browser.ie&&11<=i.browser.version?function(){var t,e=this.__clipPaths,n=this.style;if(e)for(var i=0;i<e.length;i++){var r=e[i],o=r&&r.shape,a=r&&r.type;if(o&&("sector"===a&&o.startAngle===o.endAngle||"rect"===a&&(!o.width||!o.height))){for(var s=0;s<h.length;s++)h[s][2]=n[h[s][0]],n[h[s][0]]=h[s][1];t=!0;break}}if(l.apply(this,arguments),t)for(s=0;s<h.length;s++)n[h[s][0]]=h[s][2]}:l}},function(t,e,n){var f=n(706),d=n(707);e.buildPath=function(t,e,n){var i=e.points,r=e.smooth;if(i&&2<=i.length){if(r&&"spline"!==r){var o=d(i,r,n,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);for(var a=i.length,s=0;s<(n?a:a-1);s++){var l=o[2*s],h=o[2*s+1],c=i[(s+1)%a];t.bezierCurveTo(l[0],l[1],h[0],h[1],c[0],c[1])}}else{"spline"===r&&(i=f(i,n)),t.moveTo(i[0][0],i[0][1]),s=1;for(var u=i.length;s<u;s++)t.lineTo(i[s][0],i[s][1])}n&&t.closePath()}}},function(t,e,n){var i=n(609),a=i.set,s=i.get,r={clearColorPalette:function(){a(this,"colorIdx",0),a(this,"colorNameMap",{})},getColorFromPalette:function(t,e){var n=s(e=e||this,"colorIdx")||0,i=s(e,"colorNameMap")||a(e,"colorNameMap",{});if(i.hasOwnProperty(t))return i[t];var r=this.get("color",!0)||[];if(r.length){var o=r[n];return t&&(i[t]=o),a(e,"colorIdx",(n+1)%r.length),o}}};t.exports=r},function(t,e,n){var l=n(602),h=l.round;function c(t){return l.getPrecisionSafe(t)+2}function i(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function u(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),i(t,0,e),i(t,1,e),t[0]>t[1]&&(t[0]=t[1])}e.intervalScaleNiceTicks=function(t,e,n,i){var r={},o=t[1]-t[0],a=r.interval=l.nice(o/e,!0);null!=n&&a<n&&(a=r.interval=n),null!=i&&i<a&&(a=r.interval=i);var s=r.intervalPrecision=c(a);return u(r.niceTickExtent=[h(Math.ceil(t[0]/a)*a,s),h(Math.floor(t[1]/a)*a,s)],t),r},e.getIntervalPrecision=c,e.fixExtent=u,e.intervalScaleGetTicks=function(t,e,n,i){var r=[];if(!t)return r;e[0]<n[0]&&r.push(e[0]);for(var o=n[0];o<=n[1]&&(r.push(o),(o=h(o+t,i))!==r[r.length-1]);)if(1e4<r.length)return[];return e[1]>(r.length?r[r.length-1]:n[1])&&r.push(e[1]),r}},function(t,e,n){var S=n(597),a=n(619).createSymbol,C=n(598),T=n(602).parsePercent,k=n(738).findLabelValueDim;function O(t){return[t[0]/2,t[1]/2]}function i(t,e,n){C.Group.call(this),this.updateData(t,e,n)}var r=i.prototype;function s(t,e){this.parent.drift(t,e)}r._createSymbol=function(t,e,n,i){this.removeAll();var r=e.getItemVisual(n,"color"),o=a(t,-1,-1,2,2,r);o.attr({z2:100,culling:!0,scale:O(i)}),o.drift=s,this._symbolType=t,this.add(o)},r.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},r.getSymbolPath=function(){return this.childAt(0)},r.getScale=function(){return this.childAt(0).scale},r.highlight=function(){this.childAt(0).trigger("emphasis")},r.downplay=function(){this.childAt(0).trigger("normal")},r.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},r.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":"pointer"},r.updateData=function(t,e,n){this.silent=!1;var i,r,o=t.getItemVisual(e,"symbol")||"circle",a=t.hostModel,s=(i=e,(r=t.getItemVisual(i,"symbolSize"))instanceof Array?r.slice():[+r,+r]),l=o!==this._symbolType;l?this._createSymbol(o,t,e,s):((h=this.childAt(0)).silent=!1,C.updateProps(h,{scale:O(s)},a,e));if(this._updateCommon(t,e,s,n),l){var h=this.childAt(0),c=n&&n.fadeIn,u={scale:h.scale.slice()};c&&(u.style={opacity:h.style.opacity}),h.scale=[0,0],c&&(h.style.opacity=0),C.initProps(h,u,a,e)}this._seriesModel=a};var A=["itemStyle","normal"],M=["itemStyle","emphasis"],D=["label","normal"],I=["label","emphasis"];r._updateCommon=function(t,e,n,i){var r=this.childAt(0),o=t.hostModel,a=t.getItemVisual(e,"color");"image"!==r.type&&r.useStyle({strokeNoScale:!0});var s=i&&i.itemStyle,l=i&&i.hoverItemStyle,h=i&&i.symbolRotate,c=i&&i.symbolOffset,u=i&&i.labelModel,f=i&&i.hoverLabelModel,d=i&&i.hoverAnimation,p=i&&i.cursorStyle;if(!i||t.hasItemOption){var g=i&&i.itemModel?i.itemModel:t.getItemModel(e);s=g.getModel(A).getItemStyle(["color"]),l=g.getModel(M).getItemStyle(),h=g.getShallow("symbolRotate"),c=g.getShallow("symbolOffset"),u=g.getModel(D),f=g.getModel(I),d=g.getShallow("hoverAnimation"),p=g.getShallow("cursor")}else l=S.extend({},l);var v=r.style;r.attr("rotation",(h||0)*Math.PI/180||0),c&&r.attr("position",[T(c[0],n[0]),T(c[1],n[1])]),p&&r.attr("cursor",p),r.setColor(a,i&&i.symbolInnerColor),r.setStyle(s);var m=t.getItemVisual(e,"opacity");null!=m&&(v.opacity=m);var y=i&&i.useNameLabel,_=!y&&k(t);(y||null!=_)&&C.setLabelStyle(v,l,u,f,{labelFetcher:o,labelDataIndex:e,defaultText:y?t.getName(e):t.get(_,e),isRectText:!0,autoColor:a}),r.off("mouseover").off("mouseout").off("emphasis").off("normal"),r.hoverStyle=l,C.setHoverStyle(r);var x=O(n);if(d&&o.isAnimationEnabled()){var b=function(){var t=x[1]/x[0];this.animateTo({scale:[Math.max(1.1*x[0],x[0]+3),Math.max(1.1*x[1],x[1]+3*t)]},400,"elasticOut")},w=function(){this.animateTo({scale:x},400,"elasticOut")};r.on("mouseover",b).on("mouseout",w).on("emphasis",b).on("normal",w)}},r.fadeOut=function(t,e){var n=this.childAt(0);this.silent=n.silent=!0,(!e||!e.keepLabel)&&(n.style.text=null),C.updateProps(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)},S.inherits(i,C.Group);var o=i;t.exports=o},function(t,e,n){var i=n(597),r=n(610),o=n(747),a=n(639),s=r.extend({type:"cartesian2dAxis",axis:null,init:function(){s.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){s.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){s.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function l(t,e){return e.type||(e.data?"category":"value")}i.merge(s.prototype,a);var h={offset:0};o("x",s,l,h),o("y",s,l,h);var c=s;t.exports=c},function(t,e,n){n(604).__DEV__;var i=n(599),l=n(624),h=i.extendComponentView({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,e,n,i){this.axisPointerClass&&l.fixValue(t),h.superApply(this,"render",arguments),o(this,t,e,n,i,!0)},updateAxisPointer:function(t,e,n,i,r){o(this,t,e,n,i,!1)},remove:function(t,e){var n=this._axisPointer;n&&n.remove(e),h.superApply(this,"remove",arguments)},dispose:function(t,e){c(this,e),h.superApply(this,"dispose",arguments)}});function o(t,e,n,i,r,o){var a=h.getAxisPointerClass(t.axisPointerClass);if(a){var s=l.getAxisPointerModel(e);s?(t._axisPointer||(t._axisPointer=new a)).render(e,s,i,o):c(t,i)}}function c(t,e,n){var i=t._axisPointer;i&&i.dispose(e,n),t._axisPointer=null}var r=[];h.registerAxisPointerClass=function(t,e){r[t]=e},h.getAxisPointerClass=function(t){return t&&r[t]};var a=h;t.exports=a},function(t,e,n){var m=n(597);e.layout=function(t,e,n){n=n||{};var i=t.coordinateSystem,r=e.axis,o={},a=r.position,s=r.onZero?"onZero":a,l=r.dim,h=i.getRect(),c=[h.x,h.x+h.width,h.y,h.y+h.height],u={left:0,right:1,top:0,bottom:1,onZero:2},f=e.get("offset")||0,d="x"===l?[c[2]-f,c[3]+f]:[c[0]-f,c[1]+f];if(r.onZero){var p=i.getAxis("x"===l?"y":"x",r.onZeroAxisIndex),g=p.toGlobalCoord(p.dataToCoord(0));d[u.onZero]=Math.max(Math.min(g,d[1]),d[0])}o.position=["y"===l?d[u[s]]:c[0],"x"===l?d[u[s]]:c[3]],o.rotation=Math.PI/2*("x"===l?0:1),o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,left:-1,right:1}[a],o.labelOffset=r.onZero?d[u[a]]-d[u.onZero]:0,e.get("axisTick.inside")&&(o.tickDirection=-o.tickDirection),m.retrieve(n.labelInside,e.get("axisLabel.inside"))&&(o.labelDirection=-o.labelDirection);var v=e.get("axisLabel.rotate");return o.labelRotate="top"===s?-v:v,o.labelInterval=r.getLabelInterval(),o.z2=1,o}},function(t,e,n){var c=n(597),u=n(600);t.exports=function(t,e){var n,i=[],r=t.seriesIndex;if(null==r||!(n=e.getSeriesByIndex(r)))return{point:[]};var o=n.getData(),a=u.queryDataIndex(o,t);if(null==a||c.isArray(a))return{point:[]};var s=o.getItemGraphicEl(a),l=n.coordinateSystem;if(n.getTooltipPosition)i=n.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)i=l.dataToPoint(o.getValues(c.map(l.dimensions,function(t){return n.coordDimToDataDim(t)[0]}),a,!0))||[];else if(s){var h=s.getBoundingRect().clone();h.applyTransform(s.transform),i=[h.x+h.width/2,h.y+h.height/2]}return{point:i,el:s}}},function(t,e,n){var r=n(597),o=n(605),d=n(600).makeGetter(),p=r.each;function a(t,e,n){t.handler("leave",null,n)}function s(t,e,n,i){e.handler(t,n,i)}e.register=function(t,e,n){if(!o.node){var i=e.getZr();d(i).records||(d(i).records={}),function(u,f){function t(t,c){u.on(t,function(e){var n,i,r,t,o,a,s,l,h=(n=f,{dispatchAction:r=function(t){var e=i[t.type];e?e.push(t):(t.dispatchAction=r,n.dispatchAction(t))},pendings:i={showTip:[],hideTip:[]}});p(d(u).records,function(t){t&&c(t,e,h.dispatchAction)}),t=h.pendings,o=f,s=t.showTip.length,l=t.hideTip.length,s?a=t.showTip[s-1]:l&&(a=t.hideTip[l-1]),a&&(a.dispatchAction=null,o.dispatchAction(a))})}d(u).initialized||(d(u).initialized=!0,t("click",r.curry(s,"click")),t("mousemove",r.curry(s,"mousemove")),t("globalout",a))}(i,e),(d(i).records[t]||(d(i).records[t]={})).handler=n}},e.unregister=function(t,e){if(!o.node){var n=e.getZr();(d(n).records||{})[t]&&(d(n).records[t]=null)}}},function(t,e,n){var l=n(597),r=n(598),w=n(612),S=n(606),o=n(614),h=n(613),s=n(641);function c(t,e,n,i,r){var o=C(n.get("value"),e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get("label.precision"),formatter:n.get("label.formatter")}),a=n.getModel("label"),s=S.normalizeCssArray(a.get("padding")||0),l=a.getFont(),h=w.getBoundingRect(o,l),c=r.position,u=h.width+s[1]+s[3],f=h.height+s[0]+s[2],d=r.align;"right"===d&&(c[0]-=u),"center"===d&&(c[0]-=u/2);var p,g,v,m,y,_,x=r.verticalAlign;"bottom"===x&&(c[1]-=f),"middle"===x&&(c[1]-=f/2),p=c,g=u,v=f,y=(m=i).getWidth(),_=m.getHeight(),p[0]=Math.min(p[0]+g,y)-g,p[1]=Math.min(p[1]+v,_)-v,p[0]=Math.max(p[0],0),p[1]=Math.max(p[1],0);var b=a.get("backgroundColor");b&&"auto"!==b||(b=e.get("axisLine.lineStyle.color")),t.label={shape:{x:0,y:0,width:u,height:f,r:a.get("borderRadius")},position:c.slice(),style:{text:o,textFont:l,textFill:a.getTextColor(),textPosition:"inside",fill:b,stroke:a.get("borderColor")||"transparent",lineWidth:a.get("borderWidth")||0,shadowBlur:a.get("shadowBlur"),shadowColor:a.get("shadowColor"),shadowOffsetX:a.get("shadowOffsetX"),shadowOffsetY:a.get("shadowOffsetY")},z2:10}}function C(t,e,r,n,i){var o=e.scale.getLabel(t,{precision:i.precision}),a=i.formatter;if(a){var s={value:h.getAxisRawValue(e,t),seriesData:[]};l.each(n,function(t){var e=r.getSeriesByIndex(t.seriesIndex),n=t.dataIndexInside,i=e&&e.getDataParams(n);i&&s.seriesData.push(i)}),l.isString(a)?o=a.replace("{value}",o):l.isFunction(a)&&(o=a(s))}return o}function u(t,e,n){var i=o.create();return o.rotate(i,i,n.rotation),o.translate(i,i,n.position),r.applyTransform([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],i)}e.buildElStyle=function(t){var e,n=t.get("type"),i=t.getModel(n+"Style");return"line"===n?(e=i.getLineStyle()).fill=null:"shadow"===n&&((e=i.getAreaStyle()).stroke=null),e},e.buildLabelElOption=c,e.getValueLabel=C,e.getTransformedPosition=u,e.buildCartesianSingleLabelElOption=function(t,e,n,i,r,o){var a=s.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=r.get("label.margin"),c(e,i,r,o,{position:u(i.axis,t,n),align:a.textAlign,verticalAlign:a.textVerticalAlign})},e.makeLineShape=function(t,e,n){return{x1:t[n=n||0],y1:t[1-n],x2:e[n],y2:e[1-n]}},e.makeRectShape=function(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}},e.makeSectorShape=function(t,e,n,i,r,o){return{cx:t,cy:e,r0:n,r:i,startAngle:r,endAngle:o,clockwise:!0}}},function(t,e,n){var i=n(599);n(750),n(756),n(757),i.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),i.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){})},function(t,e,n){var i=n(599),b=n(598),w=n(611).getLayoutRect;i.extendComponentModel({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),i.extendComponentView({type:"title",render:function(t,e,n){if(this.group.removeAll(),t.get("show")){var i=this.group,r=t.getModel("textStyle"),o=t.getModel("subtextStyle"),a=t.get("textAlign"),s=t.get("textBaseline"),l=new b.Text({style:b.setTextStyle({},r,{text:t.get("text"),textFill:r.getTextColor()},{disableBox:!0}),z2:10}),h=l.getBoundingRect(),c=t.get("subtext"),u=new b.Text({style:b.setTextStyle({},o,{text:c,textFill:o.getTextColor(),y:h.height+t.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),f=t.get("link"),d=t.get("sublink");l.silent=!f,u.silent=!d,f&&l.on("click",function(){window.open(f,"_"+t.get("target"))}),d&&u.on("click",function(){window.open(d,"_"+t.get("subtarget"))}),i.add(l),c&&i.add(u);var p=i.getBoundingRect(),g=t.getBoxLayoutParams();g.width=p.width,g.height=p.height;var v=w(g,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));a||("middle"===(a=t.get("left")||t.get("right"))&&(a="center"),"right"===a?v.x+=v.width:"center"===a&&(v.x+=v.width/2)),s||("center"===(s=t.get("top")||t.get("bottom"))&&(s="middle"),"bottom"===s?v.y+=v.height:"middle"===s&&(v.y+=v.height/2),s=s||"top"),i.attr("position",[v.x,v.y]);var m={textAlign:a,textVerticalAlign:s};l.setStyle(m),u.setStyle(m),p=i.getBoundingRect();var y=v.margin,_=t.getItemStyle(["color","opacity"]);_.fill=t.get("backgroundColor");var x=new b.Rect({shape:{x:p.x-y[3],y:p.y-y[0],width:p.width+y[1]+y[3],height:p.height+y[0]+y[2],r:t.get("borderRadius")},style:_,silent:!0});b.subPixelOptimizeRect(x),i.add(x)}}})},function(t,e,n){var i=n(599);n(759),n(760),n(761);var r=n(763),o=n(610);i.registerProcessor(r),o.registerSubTypeDefaulter("legend",function(){return"plain"})},,function(t,e,n){var i=n(599),r=n(597);n(735),n(736);var o=n(676),a=n(741),s=n(742);n(674),i.registerVisual(r.curry(o,"line","circle","line")),i.registerLayout(r.curry(a,"line")),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,r.curry(s,"line"))},function(t,e,n){var i=n(599),r=n(597),o=n(598);n(675),n(748),i.extendComponentView({type:"grid",render:function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new o.Rect({shape:t.coordinateSystem.getRect(),style:r.defaults({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))}}),i.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})},function(t,e,n){n(604).__DEV__;var u=n(597),y=n(607),o=n(611).getLayoutRect,c=n(613),f=n(743),d=n(745),i=n(626);n(746);var p=u.each,r=c.ifAxisCrossZero,a=c.niceScaleExtent;function g(t,e,n){return t.getCoordSysModel()===e}function s(t,e,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,n),this.model=t}var l=s.prototype;function h(t,e,n){var i=t[e];if(n.onZero){var r=n.onZeroAxisIndex;if(null==r){for(var o in i){if(i.hasOwnProperty(o))if((a=i[o])&&!v(a)){r=+o;break}}null==r&&(n.onZero=!1),n.onZeroAxisIndex=r}else{var a;(a=i[r])&&v(a)&&(n.onZero=!1)}}}function v(t){return"category"===t.type||"time"===t.type||!r(t)}l.type="grid",l.axisPointerEnabled=!0,l.getRect=function(){return this._rect},l.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model),p(n.x,function(t){a(t.scale,t.model)}),p(n.y,function(t){a(t.scale,t.model)}),p(n.x,function(t){h(n,"y",t)}),p(n.y,function(t){h(n,"x",t)}),this.resize(this.model,e)},l.resize=function(t,e,n){var l=o(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=l;var i=this._axesList;function r(){p(i,function(t){var e,n,i,r,o=t.isHorizontal(),a=o?[0,l.width]:[0,l.height],s=t.inverse?1:0;t.setExtent(a[s],a[1-s]),e=t,n=o?l.x:l.y,i=e.getExtent(),r=i[0]+i[1],e.toGlobalCoord="x"===e.dim?function(t){return t+n}:function(t){return r-t+n},e.toLocalCoord="x"===e.dim?function(t){return t-n}:function(t){return r-t+n}})}r(),!n&&t.get("containLabel")&&(p(i,function(t){if(!t.model.get("axisLabel.inside")){var e=function(t){var e,n,i,r,o,a,s,l,h,c=t.model,u=c.getFormattedLabels(),f=c.getModel("axisLabel"),d=1,p=u.length;40<p&&(d=Math.ceil(p/40));for(var g=0;g<p;g+=d)if(!t.isLabelIgnored(g)){var v=f.getTextRect(u[g]),m=(n=v,i=f.get("rotate")||0,r=i*Math.PI/180,o=n.plain(),a=o.width,s=o.height,l=a*Math.cos(r)+s*Math.sin(r),h=a*Math.sin(r)+s*Math.cos(r),new y(o.x,o.y,l,h));e?e.union(m):e=m}return e}(t);if(e){var n=t.isHorizontal()?"height":"width",i=t.model.get("axisLabel.margin");l[n]-=e[n]+i,"top"===t.position?l.y+=e.height+i:"left"===t.position&&(l.x+=e.width+i)}}}),r())},l.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n){if(null==e)for(var i in n)if(n.hasOwnProperty(i))return n[i];return n[e]}},l.getAxes=function(){return this._axesList.slice()},l.getCartesian=function(t,e){if(null!=t&&null!=e){var n="x"+t+"y"+e;return this._coordsMap[n]}u.isObject(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,r=this._coordsList;i<r.length;i++)if(r[i].getAxis("x").index===t||r[i].getAxis("y").index===e)return r[i]},l.getCartesians=function(){return this._coordsList.slice()},l.convertToPixel=function(t,e,n){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},l.convertFromPixel=function(t,e,n){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},l._findConvertTarget=function(t,e){var n,i,r=e.seriesModel,o=e.xAxisModel||r&&r.getReferringComponents("xAxis")[0],a=e.yAxisModel||r&&r.getReferringComponents("yAxis")[0],s=e.gridModel,l=this._coordsList;if(r)n=r.coordinateSystem,u.indexOf(l,n)<0&&(n=null);else if(o&&a)n=this.getCartesian(o.componentIndex,a.componentIndex);else if(o)i=this.getAxis("x",o.componentIndex);else if(a)i=this.getAxis("y",a.componentIndex);else if(s){s.coordinateSystem===this&&(n=this._coordsList[0])}return{cartesian:n,axis:i}},l.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},l._initCartesian=function(a,t,e){var s={left:!1,right:!1,top:!1,bottom:!1},l={x:{},y:{}},h={x:0,y:0};if(t.eachComponent("xAxis",n("x"),this),t.eachComponent("yAxis",n("y"),this),!h.x||!h.y)return this._axesMap={},void(this._axesList=[]);function n(o){return function(t,e){if(g(t,a)){var n=t.get("position");"x"===o?"top"!==n&&"bottom"!==n&&s[n="bottom"]&&(n="top"===n?"bottom":"top"):"left"!==n&&"right"!==n&&s[n="left"]&&(n="left"===n?"right":"left"),s[n]=!0;var i=new d(o,c.createScaleByModel(t),[0,0],t.get("type"),n),r="category"===i.type;i.onBand=r&&t.get("boundaryGap"),i.inverse=t.get("inverse"),i.onZero=t.get("axisLine.onZero"),i.onZeroAxisIndex=t.get("axisLine.onZeroAxisIndex"),(t.axis=i).model=t,i.grid=this,i.index=e,this._axesList.push(i),l[o][e]=i,h[o]++}}}this._axesMap=l,p(l.x,function(r,o){p(l.y,function(t,e){var n="x"+o+"y"+e,i=new f(n);i.grid=this,i.model=a,this._coordsMap[n]=i,this._coordsList.push(i),i.addAxis(r),i.addAxis(t)},this)},this)},l._updateScale=function(l,h){function c(e,n,t){p(t.coordDimToDataDim(n.dim),function(t){n.scale.unionExtentFromData(e,t)})}u.each(this._axesList,function(t){t.scale.setExtent(1/0,-1/0)}),l.eachSeries(function(t){if(x(t)){var e=_(t,l),n=e[0],i=e[1];if(!g(n,h)||!g(i,h))return;var r=this.getCartesian(n.componentIndex,i.componentIndex),o=t.getData(),a=r.getAxis("x"),s=r.getAxis("y");"list"===o.type&&(c(o,a,t),c(o,s,t))}},this)},l.getTooltipAxes=function(i){var r=[],o=[];return p(this.getCartesians(),function(t){var e=null!=i&&"auto"!==i?t.getAxis(i):t.getBaseAxis(),n=t.getOtherAxis(e);u.indexOf(r,e)<0&&r.push(e),u.indexOf(o,n)<0&&o.push(n)}),{baseAxes:r,otherAxes:o}};var m=["xAxis","yAxis"];function _(e,t){return u.map(m,function(t){return e.getReferringComponents(t)[0]})}function x(t){return"cartesian2d"===t.get("coordinateSystem")}s.create=function(i,r){var o=[];return i.eachComponent("grid",function(t,e){var n=new s(t,i,r);n.name="grid_"+e,n.resize(t,r,!0),t.coordinateSystem=n,o.push(n)}),i.eachSeries(function(t){if(x(t)){var e=_(t),n=e[0],i=e[1],r=n.getCoordSysModel().coordinateSystem;t.coordinateSystem=r.getCartesian(n.componentIndex,i.componentIndex)}}),o},s.dimensions=s.prototype.dimensions=f.prototype.dimensions,i.register("cartesian2d",s);var b=s;t.exports=b},function(t,e){t.exports=function(t,e,n,a,i){a.eachRawSeriesByType(t,function(i){var r=i.getData(),t=i.get("symbol")||e,o=i.get("symbolSize");r.setVisual({legendSymbol:n||t,symbol:t,symbolSize:o}),a.isSeriesFiltered(i)||("function"==typeof o&&r.each(function(t){var e=i.getRawValue(t),n=i.getDataParams(t);r.setItemVisual(t,"symbolSize",o(e,n))}),r.each(function(t){var e=r.getItemModel(t),n=e.getShallow("symbol",!0),i=e.getShallow("symbolSize",!0);null!=n&&r.setItemVisual(t,"symbol",n),null!=i&&r.setItemVisual(t,"symbolSize",i)}))})}},function(t,e,n){var i=n(597),r={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},o={};o.categoryAxis=i.merge({boundaryGap:!0,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},r),o.valueAxis=i.merge({boundaryGap:[0,0],splitNumber:5},r),o.timeAxis=i.defaults({scale:!0,min:"dataMin",max:"dataMax"},o.valueAxis),o.logAxis=i.defaults({scale:!0,logBase:10},o.valueAxis);var a=o;t.exports=a},function(t,e,n){var r=n(597),o=n(601),a=n(679),s=n(616),l="silent";function h(){}h.prototype.dispose=function(){};var c=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],u=function(t,e,n,i){s.call(this),this.storage=t,this.painter=e,this.painterRoot=i,n=n||new h,((this.proxy=n).handler=this)._hovered={},this._lastTouchMoment,this._lastX,this._lastY,a.call(this),r.each(c,function(t){n.on&&n.on(t,this[t],this)},this)};function f(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var i,r=t;r;){if(r.clipPath&&!r.clipPath.contain(e,n))return!1;r.silent&&(i=!0),r=r.parent}return!i||l}return!1}u.prototype={constructor:u,mousemove:function(t){var e=t.zrX,n=t.zrY,i=this._hovered,r=i.target;r&&!r.__zr&&(r=(i=this.findHover(i.x,i.y)).target);var o=this._hovered=this.findHover(e,n),a=o.target,s=this.proxy;s.setCursor&&s.setCursor(a?a.cursor:"default"),r&&a!==r&&this.dispatchToElement(i,"mouseout",t),this.dispatchToElement(o,"mousemove",t),a&&a!==r&&this.dispatchToElement(o,"mouseover",t)},mouseout:function(t){this.dispatchToElement(this._hovered,"mouseout",t);for(var e,n=t.toElement||t.relatedTarget;(n=n&&n.parentNode)&&9!=n.nodeType&&!(e=n===this.painterRoot););!e&&this.trigger("globalout",{event:t})},resize:function(t){this._hovered={}},dispatch:function(t,e){var n=this[t];n&&n.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,n){var i=(t=t||{}).target;if(!i||!i.silent){for(var r,o,a="on"+e,s={type:e,event:o=n,target:(r=t).target,topTarget:r.topTarget,cancelBubble:!1,offsetX:o.zrX,offsetY:o.zrY,gestureEvent:o.gestureEvent,pinchX:o.pinchX,pinchY:o.pinchY,pinchScale:o.pinchScale,wheelDelta:o.zrDelta,zrByTouch:o.zrByTouch,which:o.which};i&&(i[a]&&(s.cancelBubble=i[a].call(i,s)),i.trigger(e,s),i=i.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(e,s),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[a]&&t[a].call(t,s),t.trigger&&t.trigger(e,s)}))}},findHover:function(t,e,n){for(var i=this.storage.getDisplayList(),r={x:t,y:e},o=i.length-1;0<=o;o--){var a;if(i[o]!==n&&!i[o].ignore&&(a=f(i[o],t,e))&&(!r.topTarget&&(r.topTarget=i[o]),a!==l)){r.target=i[o];break}}return r}},r.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(i){u.prototype[i]=function(t){var e=this.findHover(t.zrX,t.zrY),n=e.target;if("mousedown"===i)this._downEl=n,this._downPoint=[t.zrX,t.zrY],this._upEl=n;else if("mosueup"===i)this._upEl=n;else if("click"===i){if(this._downEl!==this._upEl||!this._downPoint||4<o.dist(this._downPoint,[t.zrX,t.zrY]))return;this._downPoint=null}this.dispatchToElement(e,i,t)}}),r.mixin(u,s),r.mixin(u,a);var i=u;t.exports=i},function(t,e){function n(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}function l(t,e){return{target:t,topTarget:e&&e.topTarget}}n.prototype={constructor:n,_dragStart:function(t){var e=t.target;e&&e.draggable&&((this._draggingTarget=e).dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(l(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,i=t.offsetY,r=n-this._x,o=i-this._y;this._x=n,this._y=i,e.drift(r,o,t),this.dispatchToElement(l(e,t),"drag",t.event);var a=this.findHover(n,i,e).target,s=this._dropTarget;e!==(this._dropTarget=a)&&(s&&a!==s&&this.dispatchToElement(l(s,t),"dragleave",t.event),a&&a!==s&&this.dispatchToElement(l(a,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(l(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(l(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var i=n;t.exports=i},function(t,e,n){var o=n(597),a=n(605),s=n(620),l=n(628);function h(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var i=function(){this._roots=[],this._displayList=[],this._displayListLen=0};i.prototype={constructor:i,traverse:function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,i=0,r=e.length;i<r;i++)this._updateAndAddDisplayable(e[i],null,t);n.length=this._displayListLen,a.canvasSupported&&l(n,h)},_updateAndAddDisplayable:function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var i=t.clipPath;if(i){e=e?e.slice():[];for(var r=i,o=t;r;)r.parent=o,r.updateTransform(),e.push(r),r=(o=r).clipPath}if(t.isGroup){for(var a=t._children,s=0;s<a.length;s++){var l=a[s];t.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,e,n)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof s&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof s&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array){e=0;for(var i=t.length;e<i;e++)this.delRoot(t[e])}else{var r=o.indexOf(this._roots,t);0<=r&&(this.delFromStorage(t),this._roots.splice(r,1),t instanceof s&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t.__storage=this,t.dirty(!1),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:h};var r=i;t.exports=r},function(t,e,n){var f=n(646),d=n(648),i=n(597),c=i.isString,u=i.isFunction,h=i.isObject,p=i.isArrayLike,g=i.indexOf,r=function(){this.animators=[]};r.prototype={constructor:r,animate:function(t,e){var n,i=!1,r=this,o=this.__zr;if(t){var a=t.split("."),s=r;i="shape"===a[0];for(var l=0,h=a.length;l<h;l++)s&&(s=s[a[l]]);s&&(n=s)}else n=r;if(n){var c=r.animators,u=new f(n,e);return u.during(function(t){r.dirty(i)}).done(function(){c.splice(g(c,u),1)}),c.push(u),o&&o.animation.addAnimator(u),u}d('Property "'+t+'" is not existed in element '+r.id)},stopAnimation:function(t){for(var e=this.animators,n=e.length,i=0;i<n;i++)e[i].stop(t);return e.length=0,this},animateTo:function(t,e,n,i,r,o){c(n)?(r=i,i=n,n=0):u(i)?(r=i,i="linear",n=0):u(n)?(r=n,n=0):u(e)?(r=e,e=500):e||(e=500),this.stopAnimation(),this._animateToShallow("",this,t,e,n);var a=this.animators.slice(),s=a.length;function l(){--s||r&&r()}s||r&&r();for(var h=0;h<a.length;h++)a[h].done(l).start(i,o)},_animateToShallow:function(t,e,n,i,r){var o={},a=0;for(var s in n)if(n.hasOwnProperty(s))if(null!=e[s])h(n[s])&&!p(n[s])?this._animateToShallow(t?t+"."+s:s,e[s],n[s],i,r):(o[s]=n[s],a++);else if(null!=n[s])if(t){var l={};l[t]={},l[t][s]=n[s],this.attr(l)}else this.attr(s,n[s]);return 0<a&&this.animate(t,!1).when(null==i?500:i,o).delay(r||0),this}};var o=r;t.exports=o},function(t,e,n){var a=n(683);function i(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}i.prototype={constructor:i,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var n=(t-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var i=this.easing,r="string"==typeof i?a[i]:i,o="function"==typeof r?r(n):n;return this.fire("frame",o),1==n?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){this[t="on"+t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var r=i;t.exports=r},function(t,e){var n={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){return t*t*(2.70158*t-1.70158)},backOut:function(t){return--t*t*(2.70158*t+1.70158)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-n.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*n.bounceIn(2*t):.5*n.bounceOut(2*t-1)+.5}},i=n;t.exports=i},function(t,e,n){var p=n(621).devicePixelRatio,y=n(597),_=n(648),i=n(607),s=n(628),v=n(685),r=n(651),x=n(652);function l(t){return parseInt(t,10)}function o(t){t.__unusedCount++}function a(t){1==t.__unusedCount&&t.clear()}var c=new i(0,0,0,0),u=new i(0,0,0,0);var h=function(t,e,n){this.type="canvas";var i=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=y.extend({},n||{}),this.dpr=n.devicePixelRatio||p,this._singleCanvas=i;var r=(this.root=t).style;r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]=r["user-select"]=r["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var o,a,s,l=this._zlevelList=[],h=this._layers={};if(this._layerConfig={},i){null!=n.width&&(t.width=n.width),null!=n.height&&(t.height=n.height);var c=t.width,u=t.height;this._width=c,this._height=u;var f=new v(t,this,1);f.initContext(),h[0]=f,l.push(0),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var d=this._domRoot=(o=this._width,a=this._height,(s=document.createElement("div")).style.cssText=["position:relative","overflow:hidden","width:"+o+"px","height:"+a+"px","padding:0","margin:0","border-width:0"].join(";")+";",s);t.appendChild(d)}this._progressiveLayers=[],this._hoverlayer,this._hoverElements=[]};h.prototype={constructor:h,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),n=this._zlevelList;this._paintList(e,t);for(var i=0;i<n.length;i++){var r=n[i],o=this._layers[r];!o.__builtin__&&o.refresh&&o.refresh()}return this.refreshHover(),this._progressiveLayers.length&&this._startProgessive(),this},addHover:function(t,e){if(!t.__hoverMir){var n=new t.constructor({style:t.style,shape:t.shape});((n.__from=t).__hoverMir=n).setStyle(e),this._hoverElements.push(n)}},removeHover:function(t){var e=t.__hoverMir,n=this._hoverElements,i=y.indexOf(n,e);0<=i&&n.splice(i,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,n=0;n<e.length;n++){var i=e[n].__from;i&&(i.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){s(t,this.storage.displayableSortFunc),n||(n=this._hoverlayer=this.getLayer(1e5));var i={};n.ctx.save();for(var r=0;r<e;){var o=t[r],a=o.__from;a&&a.__zr?(r++,a.invisible||(o.transform=a.transform,o.invTransform=a.invTransform,o.__clipPaths=a.__clipPaths,this._doPaintEl(o,n,!0,i))):(t.splice(r,1),a.__hoverMir=null,e--)}n.ctx.restore()}},_startProgessive:function(){var e=this;if(e._furtherProgressive){var n=e._progressiveToken=+new Date;e._progress++,r(function t(){n===e._progressiveToken&&e.storage&&(e._doPaintList(e.storage.getDisplayList()),e._furtherProgressive?(e._progress++,r(t)):e._progressiveToken=-1)})}},_clearProgressive:function(){this._progressiveToken=-1,this._progress=0,y.each(this._progressiveLayers,function(t){t.__dirty&&t.clear()})},_paintList:function(t,e){null==e&&(e=!1),this._updateLayerStatus(t),this._clearProgressive(),this.eachBuiltinLayer(o),this._doPaintList(t,e),this.eachBuiltinLayer(a)},_doPaintList:function(t,e){var n,i,r,o,a,s,l=0,h=this._width,c=this._height,u=this._progress;function f(t){var e=r.dpr||1;r.save(),r.globalAlpha=1,r.shadowBlur=0,n.__dirty=!0,r.setTransform(1,0,0,1,0,0),r.drawImage(t.dom,0,0,h*e,c*e),r.restore()}for(var d=0,p=t.length;d<p;d++){var g=t[d],v=this._singleCanvas?0:g.zlevel,m=g.__frame;if(m<0&&a&&(f(a),a=null),i!==v&&(r&&r.restore(),o={},i=v,(n=this.getLayer(i)).__builtin__||_("ZLevel "+i+" has been used by unkown layer "+n.id),(r=n.ctx).save(),n.__unusedCount=0,(n.__dirty||e)&&n.clear()),n.__dirty||e){if(0<=m){if(!a){if((a=this._progressiveLayers[Math.min(l++,4)]).ctx.save(),a.renderScope={},a&&a.__progress>a.__maxProgress){d=a.__nextIdxNotProg-1;continue}s=a.__progress,a.__dirty||(u=s),a.__progress=u+1}m===u&&this._doPaintEl(g,a,!0,a.renderScope)}else this._doPaintEl(g,n,e,o);g.__dirty=!1}}a&&f(a),r&&r.restore(),this._furtherProgressive=!1,y.each(this._progressiveLayers,function(t){t.__maxProgress>=t.__progress&&(this._furtherProgressive=!0)},this)},_doPaintEl:function(t,e,n,i){var r,o,a,s=e.ctx,l=t.transform;if((e.__dirty||n)&&!t.invisible&&0!==t.style.opacity&&(!l||l[0]||l[3])&&(!t.culling||(r=t,o=this._width,a=this._height,c.copy(r.getBoundingRect()),r.transform&&c.applyTransform(r.transform),u.width=o,u.height=a,c.intersect(u)))){var h=t.__clipPaths;(i.prevClipLayer!==e||function(t,e){if(t==e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0}(h,i.prevElClipPaths))&&(i.prevElClipPaths&&(i.prevClipLayer.ctx.restore(),i.prevClipLayer=i.prevElClipPaths=null,i.prevEl=null),h&&(s.save(),function(t,e){for(var n=0;n<t.length;n++){var i=t[n];i.setTransform(e),e.beginPath(),i.buildPath(e,i.shape),e.clip(),i.restoreTransform(e)}}(h,s),i.prevClipLayer=e,i.prevElClipPaths=h)),t.beforeBrush&&t.beforeBrush(s),t.brush(s,i.prevEl||null),(i.prevEl=t).afterBrush&&t.afterBrush(s)}},getLayer:function(t){if(this._singleCanvas)return this._layers[0];var e=this._layers[t];return e||((e=new v("zr_"+t,this,this.dpr)).__builtin__=!0,this._layerConfig[t]&&y.merge(e,this._layerConfig[t],!0),this.insertLayer(t,e),e.initContext()),e},insertLayer:function(t,e){var n=this._layers,i=this._zlevelList,r=i.length,o=null,a=-1,s=this._domRoot;if(n[t])_("ZLevel "+t+" has been used already");else if((l=e)&&(l.__builtin__||"function"==typeof l.resize&&"function"==typeof l.refresh)){var l;if(0<r&&t>i[0]){for(a=0;a<r-1&&!(i[a]<t&&i[a+1]>t);a++);o=n[i[a]]}if(i.splice(a+1,0,t),!(n[t]=e).virtual)if(o){var h=o.dom;h.nextSibling?s.insertBefore(e.dom,h.nextSibling):s.appendChild(e.dom)}else s.firstChild?s.insertBefore(e.dom,s.firstChild):s.appendChild(e.dom)}else _("Layer of zlevel "+t+" is not valid")},eachLayer:function(t,e){var n,i,r=this._zlevelList;for(i=0;i<r.length;i++)n=r[i],t.call(e,this._layers[n],n)},eachBuiltinLayer:function(t,e){var n,i,r,o=this._zlevelList;for(r=0;r<o.length;r++)i=o[r],(n=this._layers[i]).__builtin__&&t.call(e,n,i)},eachOtherLayer:function(t,e){var n,i,r,o=this._zlevelList;for(r=0;r<o.length;r++)i=o[r],(n=this._layers[i]).__builtin__||t.call(e,n,i)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){var e=this._layers,n=this._progressiveLayers,i={},r={};this.eachBuiltinLayer(function(t,e){i[e]=t.elCount,t.elCount=0,t.__dirty=!1}),y.each(n,function(t,e){r[e]=t.elCount,t.elCount=0,t.__dirty=!1});for(var o,a,s=0,l=0,h=0,c=t.length;h<c;h++){var u=t[h],f=e[this._singleCanvas?0:u.zlevel],d=u.progressive;if(f&&(f.elCount++,f.__dirty=f.__dirty||u.__dirty),0<=d){a!==d&&(a=d,l++);var p=u.__frame=l-1;if(!o){var g=Math.min(s,4);(o=n[g])||(o=n[g]=new v("progressive",this,this.dpr)).initContext(),o.__maxProgress=0}o.__dirty=o.__dirty||u.__dirty,o.elCount++,o.__maxProgress=Math.max(o.__maxProgress,p),o.__maxProgress>=o.__progress&&(f.__dirty=!0)}else u.__frame=-1,o&&(o.__nextIdxNotProg=h,s++,o=null)}o&&(s++,o.__nextIdxNotProg=h),this.eachBuiltinLayer(function(t,e){i[e]!==t.elCount&&(t.__dirty=!0)}),n.length=Math.min(s,5),y.each(n,function(t,e){r[e]!==t.elCount&&(u.__dirty=!0),t.__dirty&&(t.__progress=0)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},configLayer:function(t,e){if(e){var n=this._layerConfig;n[t]?y.merge(n[t],e,!0):n[t]=e;var i=this._layers[t];i&&y.merge(i,n[t],!0)}},delLayer:function(t){var e=this._layers,n=this._zlevelList,i=e[t];i&&(i.dom.parentNode.removeChild(i.dom),delete e[t],n.splice(y.indexOf(n,t),1))},resize:function(e,n){var t=this._domRoot;t.style.display="none";var i=this._opts;if(null!=e&&(i.width=e),null!=n&&(i.height=n),e=this._getSize(0),n=this._getSize(1),t.style.display="",this._width!=e||n!=this._height){for(var r in t.style.width=e+"px",t.style.height=n+"px",this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(e,n);y.each(this._progressiveLayers,function(t){t.resize(e,n)}),this.refresh(!0)}return this._width=e,this._height=n,this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas)return this._layers[0].dom;var s=new v("image",this,t.pixelRatio||this.dpr);s.initContext(),s.clearColor=t.backgroundColor,s.clear();var e,n=this.storage.getDisplayList(!0),i={},l=this;function r(t,e){var n,i=l._zlevelList;null==t&&(t=-1/0);for(var r=0;r<i.length;r++){var o=i[r],a=l._layers[o];if(!a.__builtin__&&t<o&&o<e){n=a;break}}n&&n.renderToCanvas&&(s.ctx.save(),n.renderToCanvas(s.ctx),s.ctx.restore())}for(var o=0;o<n.length;o++){var a=n[o];a.zlevel!==e&&(r(e,a.zlevel),e=a.zlevel),this._doPaintEl(a,s,!0,i)}return r(e,1/0),s.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],i=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[i]||l(s[n])||l(a.style[n]))-(l(s[r])||0)-(l(s[o])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),i=n.getContext("2d"),r=t.getBoundingRect(),o=t.style,a=o.shadowBlur,s=o.shadowOffsetX,l=o.shadowOffsetY,h=o.hasStroke()?o.lineWidth:0,c=Math.max(h/2,-s+a),u=Math.max(h/2,s+a),f=Math.max(h/2,-l+a),d=Math.max(h/2,l+a),p=r.width+c+u,g=r.height+f+d;n.width=p*e,n.height=g*e,i.scale(e,e),i.clearRect(0,0,p,g),i.dpr=e;var v={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[c-r.x,f-r.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(i);var m=new x({style:{x:0,y:0,image:n}});return null!=v.position&&(m.position=t.position=v.position),null!=v.rotation&&(m.rotation=t.rotation=v.rotation),null!=v.scale&&(m.scale=t.scale=v.scale),m}};var f=h;t.exports=f},function(t,e,n){var s=n(597),o=n(621).devicePixelRatio,u=n(649),f=n(650);function a(){return!1}function l(t,e,n){var i=s.createCanvas(),r=e.getWidth(),o=e.getHeight(),a=i.style;return a.position="absolute",a.left=0,a.top=0,a.width=r+"px",a.height=o+"px",i.width=r*n,i.height=o*n,i.setAttribute("data-zr-dom-id",t),i}var i=function(t,e,n){var i;n=n||o,"string"==typeof t?i=l(t,e,n):s.isObject(t)&&(t=(i=t).id),this.id=t;var r=(this.dom=i).style;r&&(i.onselectstart=a,r["-webkit-user-select"]="none",r["user-select"]="none",r["-webkit-touch-callout"]="none",r["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",r.padding=0,r.margin=0,r["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n};i.prototype={constructor:i,elCount:0,__dirty:!0,initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.__currentValues={},this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=l("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),this.ctxBack.__currentValues={},1!=t&&this.ctxBack.scale(t,t)},resize:function(t,e){var n=this.dpr,i=this.dom,r=i.style,o=this.domBack;r.width=t+"px",r.height=e+"px",i.width=t*n,i.height=e*n,o&&(o.width=t*n,o.height=e*n,1!=n&&this.ctxBack.scale(n,n))},clear:function(t){var e,n=this.dom,i=this.ctx,r=n.width,o=n.height,a=this.clearColor,s=this.motionBlur&&!t,l=this.lastFrameAlpha,h=this.dpr;(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(n,0,0,r/h,o/h)),i.clearRect(0,0,r,o),a)&&(a.colorStops?(e=a.__canvasGradient||u.getGradient(i,a,{x:0,y:0,width:r,height:o}),a.__canvasGradient=e):a.image&&(e=f.prototype.getCanvasPattern.call(a,i)),i.save(),i.fillStyle=e||a,i.fillRect(0,0,r,o),i.restore());if(s){var c=this.domBack;i.save(),i.globalAlpha=l,i.drawImage(c,0,0,r,o),i.restore()}}};var r=i;t.exports=r},function(t,e,n){var o=n(653),a=new(n(607)),i=function(){};i.prototype={constructor:i,drawRectText:function(t,e){var n=this.style;e=n.textRect||e,this.__dirty&&o.normalizeTextStyle(n,!0);var i=n.text;if(null!=i&&(i+=""),o.needDrawText(i,n)){t.save();var r=this.transform;n.transformText?this.setTransform(t):r&&(a.copy(e),a.applyTransform(r),e=a),o.renderText(this,t,i,n,e),t.restore()}}};var r=i;t.exports=r},function(t,e,n){var i=n(597),r=n(618).Dispatcher,o=n(651),a=n(646),s=function(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,r.call(this)};s.prototype={constructor:s,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),n=0;n<e.length;n++)this.addClip(e[n])},removeClip:function(t){var e=i.indexOf(this._clips,t);0<=e&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),n=0;n<e.length;n++)this.removeClip(e[n]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,n=this._clips,i=n.length,r=[],o=[],a=0;a<i;a++){var s=n[a],l=s.step(t,e);l&&(r.push(l),o.push(s))}for(a=0;a<i;)n[a]._needsRemove?(n[a]=n[i-1],n.pop(),i--):a++;i=r.length;for(a=0;a<i;a++)o[a].fire(r[a]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){var e=this;this._running=!0,o(function t(){e._running&&(o(t),!e._paused&&e._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},animate:function(t,e){var n=new a(t,(e=e||{}).loop,e.getter,e.setter);return this.addAnimator(n),n}},i.mixin(s,r);var l=s;t.exports=l},function(t,e,n){var i=n(618),r=i.addEventListener,o=i.removeEventListener,a=i.normalizeEvent,s=n(597),l=n(616),h=n(605),c=n(689),u=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],f=["touchstart","touchend","touchmove"],d={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},p=s.map(u,function(t){var e=t.replace("mouse","pointer");return d[e]?e:t});function g(t){return"mousewheel"===t&&h.browser.firefox?"DOMMouseScroll":t}function v(t,e,n){var i=t._gestureMgr;"start"===n&&i.clear();var r=i.recognize(e,t.handler.findHover(e.zrX,e.zrY,null).target,t.dom);if("end"===n&&i.clear(),r){var o=r.type;e.gestureEvent=o,t.handler.dispatchToElement({target:r.target},o,r.event)}}function m(t){t._touching=!0,clearTimeout(t._touchTimer),t._touchTimer=setTimeout(function(){t._touching=!1},700)}var y={mousemove:function(t){t=a(this.dom,t),this.trigger("mousemove",t)},mouseout:function(t){var e=(t=a(this.dom,t)).toElement||t.relatedTarget;if(e!=this.dom)for(;e&&9!=e.nodeType;){if(e===this.dom)return;e=e.parentNode}this.trigger("mouseout",t)},touchstart:function(t){(t=a(this.dom,t)).zrByTouch=!0,this._lastTouchMoment=new Date,v(this,t,"start"),y.mousemove.call(this,t),y.mousedown.call(this,t),m(this)},touchmove:function(t){(t=a(this.dom,t)).zrByTouch=!0,v(this,t,"change"),y.mousemove.call(this,t),m(this)},touchend:function(t){(t=a(this.dom,t)).zrByTouch=!0,v(this,t,"end"),y.mouseup.call(this,t),+new Date-this._lastTouchMoment<300&&y.click.call(this,t),m(this)},pointerdown:function(t){y.mousedown.call(this,t)},pointermove:function(t){_(t)||y.mousemove.call(this,t)},pointerup:function(t){y.mouseup.call(this,t)},pointerout:function(t){_(t)||y.mouseout.call(this,t)}};function _(t){var e=t.pointerType;return"pen"===e||"touch"===e}function x(n){var i;function t(t,e){s.each(t,function(t){r(n,g(t),e._handlers[t])},e)}l.call(this),this.dom=n,this._touching=!1,this._touchTimer,this._gestureMgr=new c,this._handlers={},i=this,s.each(f,function(t){i._handlers[t]=s.bind(y[t],i)}),s.each(p,function(t){i._handlers[t]=s.bind(y[t],i)}),s.each(u,function(t){var e,n;i._handlers[t]=(e=y[t],n=i,function(){if(!n._touching)return e.apply(n,arguments)})}),h.pointerEventsSupported?t(p,this):(h.touchEventsSupported&&t(f,this),t(u,this))}s.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){y[e]=function(t){t=a(this.dom,t),this.trigger(e,t)}});var b=x.prototype;b.dispose=function(){for(var t=u.concat(f),e=0;e<t.length;e++){var n=t[e];o(this.dom,g(n),this._handlers[n])}},b.setCursor=function(t){this.dom.style.cursor=t||"default"},s.mixin(x,l);var w=x;t.exports=w},function(t,e,n){var h=n(618),i=function(){this._track=[]};function l(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}i.prototype={constructor:i,recognize:function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,n){var i=t.touches;if(i){for(var r={points:[],touches:[],target:e,event:t},o=0,a=i.length;o<a;o++){var s=i[o],l=h.clientToLocal(n,s,{});r.points.push([l.zrX,l.zrY]),r.touches.push(s)}this._track.push(r)}},_recognize:function(t){for(var e in r)if(r.hasOwnProperty(e)){var n=r[e](this._track,t);if(n)return n}}};var r={pinch:function(t,e){var n=t.length;if(n){var i,r=(t[n-1]||{}).points,o=(t[n-2]||{}).points||r;if(o&&1<o.length&&r&&1<r.length){var a=l(r)/l(o);!isFinite(a)&&(a=1),e.pinchScale=a;var s=[((i=r)[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2];return e.pinchX=s[0],e.pinchY=s[1],{type:"pinch",target:t[0].target,event:e}}}}},o=i;t.exports=o},function(t,e,n){n(604).__DEV__;var c=n(597),r=n(600),o=n(608),u=n(610),a=n(718),i=n(660),f=c.each,d=c.filter,h=c.map,p=c.isArray,g=c.indexOf,v=c.isObject,s="\0_ec_inner",l=o.extend({constructor:l,init:function(t,e,n,i){n=n||{},this.option=null,this._theme=new o(n),this._optionManager=i},setOption:function(t,e){c.assert(!(s in t),"please use chart.getOption()"),this._optionManager.setOption(t,e),this.resetOption(null)},resetOption:function(t){var e=!1,n=this._optionManager;if(!t||"recreate"===t){var i=n.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this.mergeOption(i)):function(t){t=t,this.option={},this.option[s]=1,this._componentsMap=c.createHashMap({series:[]}),this._seriesIndices=null,n=t,e=this._theme.option,c.each(e,function(t,e){u.hasClass(e)||("object"==typeof t?n[e]=n[e]?c.merge(n[e],t,!1):c.clone(t):null==n[e]&&(n[e]=t))}),c.merge(t,a,!1),this.mergeOption(t);var n,e}.call(this,i),e=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var r=n.getTimelineOption(this);r&&(this.mergeOption(r),e=!0)}if(!t||"recreate"===t||"media"===t){var o=n.getMediaOption(this,this._api);o.length&&f(o,function(t){this.mergeOption(t,e=!0)},this)}return e},mergeOption:function(i){var l=this.option,h=this._componentsMap,n=[];f(i,function(t,e){null!=t&&(u.hasClass(e)?n.push(e):l[e]=null==l[e]?c.clone(t):c.merge(l[e],t,!0))}),u.topologicalTravel(n,u.getAllClassMainTypes(),function(a,t){var e=r.normalizeToArray(i[a]),n=r.mappingToExists(h.get(a),e);r.makeIdAndName(n),f(n,function(t,e){var n,i,r,o=t.option;v(o)&&(t.keyInfo.mainType=a,t.keyInfo.subType=(n=a,i=o,r=t.exist,i.type?i.type:r?r.subType:u.determineSubType(n,i)))});var s=function(e,t){c.isArray(t)||(t=t?[t]:[]);var n={};return f(t,function(t){n[t]=(e.get(t)||[]).slice()}),n}(h,t);l[a]=[],h.set(a,[]),f(n,function(t,e){var n=t.exist,i=t.option;if(c.assert(v(i)||n,"Empty component definition"),i){var r=u.getClass(a,t.keyInfo.subType,!0);if(n&&n instanceof r)n.name=t.keyInfo.name,n.mergeOption(i,this),n.optionUpdated(i,!1);else{var o=c.extend({dependentModels:s,componentIndex:e},t.keyInfo);n=new r(i,this,this,o),c.extend(n,o),n.init(i,this,this,o),n.optionUpdated(null,!0)}}else n.mergeOption({},this),n.optionUpdated({},!1);h.get(a)[e]=n,l[a][e]=n.option},this),"series"===a&&(this._seriesIndices=m(h.get("series")))},this),this._seriesIndices=this._seriesIndices||[]},getOption:function(){var i=c.clone(this.option);return f(i,function(t,e){if(u.hasClass(e)){for(var n=(t=r.normalizeToArray(t)).length-1;0<=n;n--)r.isIdInner(t[n])&&t.splice(n,1);i[e]=t}}),delete i[s],i},getTheme:function(){return this._theme},getComponent:function(t,e){var n=this._componentsMap.get(t);if(n)return n[e||0]},queryComponents:function(t){var e=t.mainType;if(!e)return[];var n,i=t.index,r=t.id,o=t.name,a=this._componentsMap.get(e);if(!a||!a.length)return[];if(null!=i)p(i)||(i=[i]),n=d(h(i,function(t){return a[t]}),function(t){return!!t});else if(null!=r){var s=p(r);n=d(a,function(t){return s&&0<=g(r,t.id)||!s&&t.id===r})}else if(null!=o){var l=p(o);n=d(a,function(t){return l&&0<=g(o,t.name)||!l&&t.name===o})}else n=a.slice();return y(n,t)},findComponents:function(t){var e,n,i,r,o,a=t.query,s=t.mainType,l=(n=s+"Index",i=s+"Id",r=s+"Name",!(e=a)||null==e[n]&&null==e[i]&&null==e[r]?null:{mainType:s,index:e[n],id:e[i],name:e[r]}),h=l?this.queryComponents(l):this._componentsMap.get(s);return o=y(h,t),t.filter?d(o,t.filter):o},eachComponent:function(t,i,r){var e=this._componentsMap;if("function"==typeof t)r=i,i=t,e.each(function(t,n){f(t,function(t,e){i.call(r,n,t,e)})});else if(c.isString(t))f(e.get(t),i,r);else if(v(t)){var n=this.findComponents(t);f(n,i,r)}},getSeriesByName:function(e){var t=this._componentsMap.get("series");return d(t,function(t){return t.name===e})},getSeriesByIndex:function(t){return this._componentsMap.get("series")[t]},getSeriesByType:function(e){var t=this._componentsMap.get("series");return d(t,function(t){return t.subType===e})},getSeries:function(){return this._componentsMap.get("series").slice()},eachSeries:function(n,i){f(this._seriesIndices,function(t){var e=this._componentsMap.get("series")[t];n.call(i,e,t)},this)},eachRawSeries:function(t,e){f(this._componentsMap.get("series"),t,e)},eachSeriesByType:function(n,i,r){f(this._seriesIndices,function(t){var e=this._componentsMap.get("series")[t];e.subType===n&&i.call(r,e,t)},this)},eachRawSeriesByType:function(t,e,n){return f(this.getSeriesByType(t),e,n)},isSeriesFiltered:function(t){return c.indexOf(this._seriesIndices,t.componentIndex)<0},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(t,e){var n=d(this._componentsMap.get("series"),t,e);this._seriesIndices=m(n)},restoreData:function(){var n=this._componentsMap;this._seriesIndices=m(n.get("series"));var i=[];n.each(function(t,e){i.push(e)}),u.topologicalTravel(i,u.getAllClassMainTypes(),function(t,e){f(n.get(t),function(t){t.restoreData()})})}});function m(t){return h(t,function(t){return t.componentIndex})||[]}function y(t,e){return e.hasOwnProperty("subType")?d(t,function(t){return t.subType===e.subType}):t}c.mixin(l,i);var _=l;t.exports=_},function(t,e,n){var i=n(625)([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),r={getLineStyle:function(t){var e=i(this,t),n=this.getLineDash(e.lineWidth);return n&&(e.lineDash=n),e},getLineDash:function(t){null==t&&(t=1);var e=this.get("type"),n=Math.max(t,2),i=4*t;return"solid"===e||null==e?null:"dashed"===e?[i,i]:[n,n]}};t.exports=r},function(t,e,n){var i=n(625)([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),r={getAreaStyle:function(t,e){return i(this,t,e)}};t.exports=r},function(t,e,n){var i=n(612),r=n(598),o=["textStyle","color"],a={getTextColor:function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(o):null)},getFont:function(){return r.getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(t){return i.getBoundingRect(t,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("rich"),this.getShallow("truncateText"))}};t.exports=a},function(t,e,n){var s=n(603),k=n(622),i=n(700),O=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],C=Math.sqrt,T=Math.sin,A=Math.cos,M=Math.PI,r=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},D=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(r(t)*r(e))},I=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(D(t,e))};function P(t,e,n,i,r,o,a,s,l,h,c){var u=l*(M/180),f=A(u)*(t-n)/2+T(u)*(e-i)/2,d=-1*T(u)*(t-n)/2+A(u)*(e-i)/2,p=f*f/(a*a)+d*d/(s*s);1<p&&(a*=C(p),s*=C(p));var g=(r===o?-1:1)*C((a*a*(s*s)-a*a*(d*d)-s*s*(f*f))/(a*a*(d*d)+s*s*(f*f)))||0,v=g*a*d/s,m=g*-s*f/a,y=(t+n)/2+A(u)*v-T(u)*m,_=(e+i)/2+T(u)*v+A(u)*m,x=I([1,0],[(f-v)/a,(d-m)/s]),b=[(f-v)/a,(d-m)/s],w=[(-1*f-v)/a,(-1*d-m)/s],S=I(b,w);D(b,w)<=-1&&(S=M),1<=D(b,w)&&(S=0),0===o&&0<S&&(S-=2*M),1===o&&S<0&&(S+=2*M),c.addData(h,y,_,a,s,x,S,u,o)}function o(t,e){var n=function(t){if(!t)return[];var e,n=t.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,",");for(e=0;e<O.length;e++)n=n.replace(new RegExp(O[e],"g"),"|"+O[e]);var i,r=n.split("|"),o=0,a=0,s=new k,l=k.CMD;for(e=1;e<r.length;e++){var h,c=r[e],u=c.charAt(0),f=0,d=c.slice(1).replace(/e,-/g,"e-").split(",");0<d.length&&""===d[0]&&d.shift();for(var p=0;p<d.length;p++)d[p]=parseFloat(d[p]);for(;f<d.length&&!isNaN(d[f])&&!isNaN(d[0]);){var g,v,m,y,_,x,b,w=o,S=a;switch(u){case"l":o+=d[f++],a+=d[f++],h=l.L,s.addData(h,o,a);break;case"L":o=d[f++],a=d[f++],h=l.L,s.addData(h,o,a);break;case"m":o+=d[f++],a+=d[f++],h=l.M,s.addData(h,o,a),u="l";break;case"M":o=d[f++],a=d[f++],h=l.M,s.addData(h,o,a),u="L";break;case"h":o+=d[f++],h=l.L,s.addData(h,o,a);break;case"H":o=d[f++],h=l.L,s.addData(h,o,a);break;case"v":a+=d[f++],h=l.L,s.addData(h,o,a);break;case"V":a=d[f++],h=l.L,s.addData(h,o,a);break;case"C":h=l.C,s.addData(h,d[f++],d[f++],d[f++],d[f++],d[f++],d[f++]),o=d[f-2],a=d[f-1];break;case"c":h=l.C,s.addData(h,d[f++]+o,d[f++]+a,d[f++]+o,d[f++]+a,d[f++]+o,d[f++]+a),o+=d[f-2],a+=d[f-1];break;case"S":g=o,v=a;var C=s.len(),T=s.data;i===l.C&&(g+=o-T[C-4],v+=a-T[C-3]),h=l.C,w=d[f++],S=d[f++],o=d[f++],a=d[f++],s.addData(h,g,v,w,S,o,a);break;case"s":g=o,v=a,C=s.len(),T=s.data,i===l.C&&(g+=o-T[C-4],v+=a-T[C-3]),h=l.C,w=o+d[f++],S=a+d[f++],o+=d[f++],a+=d[f++],s.addData(h,g,v,w,S,o,a);break;case"Q":w=d[f++],S=d[f++],o=d[f++],a=d[f++],h=l.Q,s.addData(h,w,S,o,a);break;case"q":w=d[f++]+o,S=d[f++]+a,o+=d[f++],a+=d[f++],h=l.Q,s.addData(h,w,S,o,a);break;case"T":g=o,v=a,C=s.len(),T=s.data,i===l.Q&&(g+=o-T[C-4],v+=a-T[C-3]),o=d[f++],a=d[f++],h=l.Q,s.addData(h,g,v,o,a);break;case"t":g=o,v=a,C=s.len(),T=s.data,i===l.Q&&(g+=o-T[C-4],v+=a-T[C-3]),o+=d[f++],a+=d[f++],h=l.Q,s.addData(h,g,v,o,a);break;case"A":m=d[f++],y=d[f++],_=d[f++],x=d[f++],b=d[f++],P(w=o,S=a,o=d[f++],a=d[f++],x,b,m,y,_,h=l.A,s);break;case"a":m=d[f++],y=d[f++],_=d[f++],x=d[f++],b=d[f++],P(w=o,S=a,o+=d[f++],a+=d[f++],x,b,m,y,_,h=l.A,s)}}"z"!==u&&"Z"!==u||(h=l.Z,s.addData(h)),i=h}return s.toStatic(),s}(t);return(e=e||{}).buildPath=function(t){if(t.setData){t.setData(n.data),(e=t.getContext())&&t.rebuildPath(e)}else{var e=t;n.rebuildPath(e)}},e.applyTransform=function(t){i(n,t),this.dirty(!0)},e}e.createFromString=function(t,e){return new s(o(t,e))},e.extendFromString=function(t,e){return s.extend(o(t,e))},e.mergePath=function(t,e){for(var n=[],i=t.length,r=0;r<i;r++){var o=t[r];o.path||o.createPathProxy(),o.__dirtyPath&&o.buildPath(o.path,o.shape,!0),n.push(o.path)}var a=new s(e);return a.createPathProxy(),a.buildPath=function(t){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e)},a}},function(t,e,n){var i=n(622),C=n(696),T=n(697),k=n(698),O=n(699),g=n(656).normalizeRadian,_=n(615),A=n(657),M=i.CMD,v=2*Math.PI,D=1e-4;var x=[-1,-1,-1],b=[-1,-1];function I(t,e,n,i,r,o,a,s,l,h){if(e<h&&i<h&&o<h&&s<h||h<e&&h<i&&h<o&&h<s)return 0;var c,u=_.cubicRootAt(e,i,o,s,h,x);if(0===u)return 0;for(var f,d,p=0,g=-1,v=0;v<u;v++){var m=x[v],y=0===m||1===m?.5:1;_.cubicAt(t,n,r,a,m)<l||(g<0&&(g=_.cubicExtrema(e,i,o,s,b),b[1]<b[0]&&1<g&&(void 0,c=b[0],b[0]=b[1],b[1]=c),f=_.cubicAt(e,i,o,s,b[0]),1<g&&(d=_.cubicAt(e,i,o,s,b[1]))),2==g?m<b[0]?p+=f<e?y:-y:m<b[1]?p+=d<f?y:-y:p+=s<d?y:-y:m<b[0]?p+=f<e?y:-y:p+=s<f?y:-y)}return p}function P(t,e,n,i,r,o,a,s){if(e<s&&i<s&&o<s||s<e&&s<i&&s<o)return 0;var l=_.quadraticRootAt(e,i,o,s,x);if(0===l)return 0;var h=_.quadraticExtremum(e,i,o);if(0<=h&&h<=1){for(var c=0,u=_.quadraticAt(e,i,o,h),f=0;f<l;f++){var d=0===x[f]||1===x[f]?.5:1;_.quadraticAt(t,n,r,x[f])<a||(x[f]<h?c+=u<e?d:-d:c+=o<u?d:-d)}return c}d=0===x[0]||1===x[0]?.5:1;return _.quadraticAt(t,n,r,x[0])<a?0:o<e?d:-d}function E(t,e,n,i,r,o,a,s){if(n<(s-=e)||s<-n)return 0;var l=Math.sqrt(n*n-s*s);x[0]=-l,x[1]=l;var h=Math.abs(i-r);if(h<1e-4)return 0;if(h%v<1e-4){r=v;var c=o?1:-1;return a>=x[i=0]+t&&a<=x[1]+t?c:0}if(o){l=i;i=g(r),r=g(l)}else i=g(i),r=g(r);r<i&&(r+=v);for(var u=0,f=0;f<2;f++){var d=x[f];if(a<d+t){var p=Math.atan2(s,d);c=o?1:-1;p<0&&(p=v+p),(i<=p&&p<=r||i<=p+v&&p+v<=r)&&(p>Math.PI/2&&p<1.5*Math.PI&&(c=-c),u+=c)}}return u}function r(t,e,n,i,r){for(var o,a,s=0,l=0,h=0,c=0,u=0,f=0;f<t.length;){var d=t[f++];switch(d===M.M&&1<f&&(n||(s+=A(l,h,c,u,i,r))),1==f&&(c=l=t[f],u=h=t[f+1]),d){case M.M:l=c=t[f++],h=u=t[f++];break;case M.L:if(n){if(C.containStroke(l,h,t[f],t[f+1],e,i,r))return!0}else s+=A(l,h,t[f],t[f+1],i,r)||0;l=t[f++],h=t[f++];break;case M.C:if(n){if(T.containStroke(l,h,t[f++],t[f++],t[f++],t[f++],t[f],t[f+1],e,i,r))return!0}else s+=I(l,h,t[f++],t[f++],t[f++],t[f++],t[f],t[f+1],i,r)||0;l=t[f++],h=t[f++];break;case M.Q:if(n){if(k.containStroke(l,h,t[f++],t[f++],t[f],t[f+1],e,i,r))return!0}else s+=P(l,h,t[f++],t[f++],t[f],t[f+1],i,r)||0;l=t[f++],h=t[f++];break;case M.A:var p=t[f++],g=t[f++],v=t[f++],m=t[f++],y=t[f++],_=t[f++],x=(t[f++],1-t[f++]),b=Math.cos(y)*v+p,w=Math.sin(y)*m+g;1<f?s+=A(l,h,b,w,i,r):(c=b,u=w);var S=(i-p)*m/v+p;if(n){if(O.containStroke(p,g,m,y,y+_,x,e,S,r))return!0}else s+=E(p,g,m,y,y+_,x,S,r);l=Math.cos(y+_)*v+p,h=Math.sin(y+_)*m+g;break;case M.R:c=l=t[f++],u=h=t[f++];b=c+t[f++],w=u+t[f++];if(n){if(C.containStroke(c,u,b,u,e,i,r)||C.containStroke(b,u,b,w,e,i,r)||C.containStroke(b,w,c,w,e,i,r)||C.containStroke(c,w,c,u,e,i,r))return!0}else s+=A(b,u,b,w,i,r),s+=A(c,w,c,u,i,r);break;case M.Z:if(n){if(C.containStroke(l,h,c,u,e,i,r))return!0}else s+=A(l,h,c,u,i,r);l=c,h=u}}return n||(o=h,a=u,Math.abs(o-a)<D)||(s+=A(l,h,c,u,i,r)||0),0!==s}e.contain=function(t,e,n){return r(t,0,!1,e,n)},e.containStroke=function(t,e,n,i){return r(t,e,!0,n,i)}},function(t,e){e.containStroke=function(t,e,n,i,r,o,a){if(0===r)return!1;var s=r,l=0;if(e+s<a&&i+s<a||a<e-s&&a<i-s||t+s<o&&n+s<o||o<t-s&&o<n-s)return!1;if(t===n)return Math.abs(o-t)<=s/2;var h=(l=(e-i)/(t-n))*o-a+(t*i-n*e)/(t-n);return h*h/(l*l+1)<=s/2*s/2}},function(t,e,n){var f=n(615);e.containStroke=function(t,e,n,i,r,o,a,s,l,h,c){if(0===l)return!1;var u=l;return!(e+u<c&&i+u<c&&o+u<c&&s+u<c||c<e-u&&c<i-u&&c<o-u&&c<s-u||t+u<h&&n+u<h&&r+u<h&&a+u<h||h<t-u&&h<n-u&&h<r-u&&h<a-u)&&f.cubicProjectPoint(t,e,n,i,r,o,a,s,h,c,null)<=u/2}},function(t,e,n){var c=n(615).quadraticProjectPoint;e.containStroke=function(t,e,n,i,r,o,a,s,l){if(0===a)return!1;var h=a;return!(e+h<l&&i+h<l&&o+h<l||l<e-h&&l<i-h&&l<o-h||t+h<s&&n+h<s&&r+h<s||s<t-h&&s<n-h&&s<r-h)&&c(t,e,n,i,r,o,s,l,null)<=h/2}},function(t,e,n){var d=n(656).normalizeRadian,p=2*Math.PI;e.containStroke=function(t,e,n,i,r,o,a,s,l){if(0===a)return!1;var h=a;s-=t,l-=e;var c=Math.sqrt(s*s+l*l);if(n<c-h||c+h<n)return!1;if(Math.abs(i-r)%p<1e-4)return!0;if(o){var u=i;i=d(r),r=d(u)}else i=d(i),r=d(r);r<i&&(r+=p);var f=Math.atan2(l,s);return f<0&&(f+=p),i<=f&&f<=r||i<=f+p&&f+p<=r}},function(t,e,n){var i=n(622),x=n(601).applyTransform,b=i.CMD,w=[[],[],[]],S=Math.sqrt,C=Math.atan2;t.exports=function(t,e){var n,i,r,o,a,s=t.data,l=b.M,h=b.C,c=b.L,u=b.R,f=b.A,d=b.Q;for(o=r=0;r<s.length;){switch(n=s[r++],o=r,i=0,n){case l:case c:i=1;break;case h:i=3;break;case d:i=2;break;case f:var p=e[4],g=e[5],v=S(e[0]*e[0]+e[1]*e[1]),m=S(e[2]*e[2]+e[3]*e[3]),y=C(-e[1]/m,e[0]/v);s[r]*=v,s[r++]+=p,s[r]*=m,s[r++]+=g,s[r++]*=v,s[r++]*=m,s[r++]+=y,s[r++]+=y,o=r+=2;break;case u:_[0]=s[r++],_[1]=s[r++],x(_,_,e),s[o++]=_[0],s[o++]=_[1],_[0]+=s[r++],_[1]+=s[r++],x(_,_,e),s[o++]=_[0],s[o++]=_[1]}for(a=0;a<i;a++){var _;(_=w[a])[0]=s[r++],_[1]=s[r++],x(_,_,e),s[o++]=_[0],s[o++]=_[1]}}}},function(t,e,n){var i=n(629),r=n(597),o=n(612),a=n(653),s=function(t){i.call(this,t)};s.prototype={constructor:s,type:"text",brush:function(t,e){var n=this.style;this.__dirty&&a.normalizeTextStyle(n,!0),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var i=n.text;null!=i&&(i+=""),n.bind(t,this,e),a.needDrawText(i,n)&&(this.setTransform(t),a.renderText(this,t,i,n),this.restoreTransform(t))},getBoundingRect:function(){var t=this.style;if(this.__dirty&&a.normalizeTextStyle(t,!0),!this._rect){var e=t.text;null!=e?e+="":e="";var n=o.getBoundingRect(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.rich);if(n.x+=t.x||0,n.y+=t.y||0,a.getStroke(t.textStroke,t.textStrokeWidth)){var i=t.textStrokeWidth;n.x-=i/2,n.y-=i/2,n.width+=i,n.height+=i}this._rect=n}return this._rect}},r.inherits(s,i);var l=s;t.exports=l},function(t,e,n){var i=n(603).extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}});t.exports=i},function(t,e,n){var i=n(603),r=n(658),o=i.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:r(i.prototype.brush),buildPath:function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r0||0,0),o=Math.max(e.r,0),a=e.startAngle,s=e.endAngle,l=e.clockwise,h=Math.cos(a),c=Math.sin(a);t.moveTo(h*r+n,c*r+i),t.lineTo(h*o+n,c*o+i),t.arc(n,i,o,a,s,!l),t.lineTo(Math.cos(s)*r+n,Math.sin(s)*r+i),0!==r&&t.arc(n,i,r,s,a,l),t.closePath()}});t.exports=o},function(t,e,n){var i=n(603).extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=2*Math.PI;t.moveTo(n+e.r,i),t.arc(n,i,e.r,0,r,!1),t.moveTo(n+e.r0,i),t.arc(n,i,e.r0,0,r,!0)}});t.exports=i},function(t,e,n){var i=n(603),r=n(659),o=i.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){r.buildPath(t,e,!0)}});t.exports=o},function(t,e,n){var v=n(601).distance;function m(t,e,n,i,r,o,a){var s=.5*(n-t),l=.5*(i-e);return(2*(e-n)+s+l)*a+(-3*(e-n)-2*s-l)*o+s*r+e}t.exports=function(t,e){for(var n=t.length,i=[],r=0,o=1;o<n;o++)r+=v(t[o-1],t[o]);var a=r/2;for(a=a<n?n:a,o=0;o<a;o++){var s,l,h,c=o/(a-1)*(e?n:n-1),u=Math.floor(c),f=c-u,d=t[u%n];e?(s=t[(u-1+n)%n],l=t[(u+1)%n],h=t[(u+2)%n]):(s=t[0===u?u:u-1],l=t[n-2<u?n-1:u+1],h=t[n-3<u?n-1:u+2]);var p=f*f,g=f*p;i.push([m(s[0],d[0],l[0],h[0],f,p,g),m(s[1],d[1],l[1],h[1],f,p,g)])}return i}},function(t,e,n){var i=n(601),x=i.min,b=i.max,w=i.scale,S=i.distance,C=i.add,T=i.clone,k=i.sub;t.exports=function(t,e,n,i){var r,o,a,s,l=[],h=[],c=[],u=[];if(i){a=[1/0,1/0],s=[-1/0,-1/0];for(var f=0,d=t.length;f<d;f++)x(a,a,t[f]),b(s,s,t[f]);x(a,a,i[0]),b(s,s,i[1])}for(f=0,d=t.length;f<d;f++){var p=t[f];if(n)r=t[f?f-1:d-1],o=t[(f+1)%d];else{if(0===f||f===d-1){l.push(T(t[f]));continue}r=t[f-1],o=t[f+1]}k(h,o,r),w(h,h,e);var g=S(p,r),v=S(p,o),m=g+v;0!==m&&(g/=m,v/=m),w(c,h,-g),w(u,h,v);var y=C([],p,c),_=C([],p,u);i&&(b(y,y,a),x(y,y,s),b(_,_,a),x(_,_,s)),l.push(y),l.push(_)}return n&&l.push(l.shift()),l}},function(t,e,n){var i=n(603),r=n(659),o=i.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){r.buildPath(t,e,!1)}});t.exports=o},function(t,e,n){var i=n(603),a=n(654),r=i.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,i=e.y,r=e.width,o=e.height;e.r?a.buildPath(t,e):t.rect(n,i,r,o),t.closePath()}});t.exports=r},function(t,e,n){var i=n(603).extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,i=e.y1,r=e.x2,o=e.y2,a=e.percent;0!==a&&(t.moveTo(n,i),a<1&&(r=n*(1-a)+r*a,o=i*(1-a)+o*a),t.lineTo(r,o))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}});t.exports=i},function(t,e,n){var i=n(603),r=n(601),o=n(615),u=o.quadraticSubdivide,f=o.cubicSubdivide,a=o.quadraticAt,s=o.cubicAt,l=o.quadraticDerivativeAt,h=o.cubicDerivativeAt,d=[];function c(t,e,n){var i=t.cpx2,r=t.cpy2;return null===i||null===r?[(n?h:s)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?h:s)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?l:a)(t.x1,t.cpx1,t.x2,e),(n?l:a)(t.y1,t.cpy1,t.y2,e)]}var p=i.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,i=e.y1,r=e.x2,o=e.y2,a=e.cpx1,s=e.cpy1,l=e.cpx2,h=e.cpy2,c=e.percent;0!==c&&(t.moveTo(n,i),null==l||null==h?(c<1&&(u(n,a,r,c,d),a=d[1],r=d[2],u(i,s,o,c,d),s=d[1],o=d[2]),t.quadraticCurveTo(a,s,r,o)):(c<1&&(f(n,a,l,r,c,d),a=d[1],l=d[2],r=d[3],f(i,s,h,o,c,d),s=d[1],h=d[2],o=d[3]),t.bezierCurveTo(a,s,l,h,r,o)))},pointAt:function(t){return c(this.shape,t,!1)},tangentAt:function(t){var e=c(this.shape,t,!0);return r.normalize(e,e)}});t.exports=p},function(t,e,n){var i=n(603).extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r,0),o=e.startAngle,a=e.endAngle,s=e.clockwise,l=Math.cos(o),h=Math.sin(o);t.moveTo(l*r+n,h*r+i),t.arc(n,i,r,o,a,!s)}});t.exports=i},function(t,e,n){var i=n(603),r=i.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,n=0;n<e.length;n++)t=t||e[n].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1])},buildPath:function(t,e){for(var n=e.paths||[],i=0;i<n.length;i++)n[i].buildPath(t,n[i].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),i.prototype.getBoundingRect.call(this)}});t.exports=r},function(t,e,n){var i=n(597),a=n(631),r=function(t,e,n,i,r,o){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==n?1:n,this.y2=null==i?0:i,this.type="linear",this.global=o||!1,a.call(this,r)};r.prototype={constructor:r},i.inherits(r,a);var o=r;t.exports=o},function(t,e,n){var i=n(597),o=n(631),r=function(t,e,n,i,r){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==n?.5:n,this.type="radial",this.global=r||!1,o.call(this,i)};r.prototype={constructor:r},i.inherits(r,o);var a=r;t.exports=a},function(t,e,n){var r=n(625)([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),i={getItemStyle:function(t,e){var n=r(this,t,e),i=this.getBorderLineDash();return i&&(n.lineDash=i),n},getBorderLineDash:function(){var t=this.get("borderType");return"solid"===t||null==t?null:"dashed"===t?[5,5]:[1,1]}};t.exports=i},function(t,e){t.exports={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}}},function(t,e){var n="";"undefined"!=typeof navigator&&(n=navigator.platform||"");var i={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],textStyle:{fontFamily:n.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};t.exports=i},function(t,e,n){var i=n(597),r=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];var o=function(e){i.each(r,function(t){this[t]=i.bind(e[t],e)},this)};t.exports=o},function(t,e,n){var c=n(597),a=n(600),s=n(610),h=c.each,u=c.clone,f=c.map,l=c.merge,d=/^(min|max)?(.+)$/;function i(t){this._api=t,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function p(t,e,n){var l={width:e,height:n,aspectratio:e/n},h=!0;return c.each(t,function(t,e){var n=e.match(d);if(n&&n[1]&&n[2]){var i,r,o,a=n[1],s=n[2].toLowerCase();i=l[s],r=t,("min"===(o=a)?r<=i:"max"===o?i<=r:i===r)||(h=!1)}}),h}i.prototype={constructor:i,setOption:function(t,e){t=u(t,!0);var r,n,i=this._optionBackup,o=function(t,n,i){var e,r,o=[],a=[],s=t.timeline;t.baseOption&&(r=t.baseOption);(s||t.options)&&(r=r||{},o=(t.options||[]).slice());if(t.media){r=r||{};var l=t.media;h(l,function(t){t&&t.option&&(t.query?a.push(t):e||(e=t))})}r||(r=t);r.timeline||(r.timeline=s);return h([r].concat(o).concat(c.map(a,function(t){return t.option})),function(e){h(n,function(t){t(e,i)})}),{baseOption:r,timelineOptions:o,mediaDefault:e,mediaList:a}}.call(this,t,e,!i);this._newBaseOption=o.baseOption,i?(r=i.baseOption,n=o.baseOption,h(n=n||{},function(t,e){if(null!=t){var n=r[e];if(s.hasClass(e)){t=a.normalizeToArray(t),n=a.normalizeToArray(n);var i=a.mappingToExists(n,t);r[e]=f(i,function(t){return t.option&&t.exist?l(t.exist,t.option,!0):t.exist||t.option})}else r[e]=l(n,t,!0)}}),o.timelineOptions.length&&(i.timelineOptions=o.timelineOptions),o.mediaList.length&&(i.mediaList=o.mediaList),o.mediaDefault&&(i.mediaDefault=o.mediaDefault)):this._optionBackup=o},mountOption:function(t){var e=this._optionBackup;return this._timelineOptions=f(e.timelineOptions,u),this._mediaList=f(e.mediaList,u),this._mediaDefault=u(e.mediaDefault),this._currentMediaIndices=[],u(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(e=u(n[i.getCurrentIndex()],!0))}return e},getMediaOption:function(t){var e,n,i=this._api.getWidth(),r=this._api.getHeight(),o=this._mediaList,a=this._mediaDefault,s=[],l=[];if(!o.length&&!a)return l;for(var h=0,c=o.length;h<c;h++)p(o[h].query,i,r)&&s.push(h);return!s.length&&a&&(s=[-1]),s.length&&(e=s,n=this._currentMediaIndices,e.join(",")!==n.join(","))&&(l=f(s,function(t){return u(-1===t?a.option:o[t].option)})),this._currentMediaIndices=s,l}};var r=i;t.exports=r},function(t,e,n){var i=n(597),r=i.each,o=i.isArray,a=i.isObject,s=n(722),l=n(600).normalizeToArray;function h(e){r(c,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var c=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],u=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],f=["bar","boxplot","candlestick","chord","effectScatter","funnel","gauge","lines","graph","heatmap","line","map","parallel","pie","radar","sankey","scatter","treemap"];t.exports=function(n,t){s(n,t),n.series=l(n.series),r(n.series,function(t){if(a(t)){var e=t.type;if("pie"!==e&&"gauge"!==e||null!=t.clockWise&&(t.clockwise=t.clockWise),"gauge"===e){var n=function(t,e){e=e.split(",");for(var n=t,i=0;i<e.length&&null!=(n=n&&n[e[i]]);i++);return n}(t,"pointer.color");null!=n&&function(t,e,n,i){e=e.split(",");for(var r,o=t,a=0;a<e.length-1;a++)null==o[r=e[a]]&&(o[r]={}),o=o[r];(i||null==o[e[a]])&&(o[e[a]]=n)}(t,"itemStyle.normal.color",n)}for(var i=0;i<f.length;i++)if(f[i]===t.type){h(t);break}}}),n.dataRange&&(n.visualMap=n.dataRange),r(u,function(t){var e=n[t];e&&(o(e)||(e=[e]),r(e,function(t){h(t)}))})}},function(t,e,n){var l=n(597),a=n(600),i=l.each,h=l.isObject,s=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function c(t){var e=t&&t.itemStyle;if(e)for(var n=0,i=s.length;n<i;n++){var r=s[n],o=e.normal,a=e.emphasis;o&&o[r]&&(t[r]=t[r]||{},t[r].normal?l.merge(t[r].normal,o[r]):t[r].normal=o[r],o[r]=null),a&&a[r]&&(t[r]=t[r]||{},t[r].emphasis?l.merge(t[r].emphasis,a[r]):t[r].emphasis=a[r],a[r]=null)}}function u(t,e){var n=h(t)&&t[e],i=h(n)&&n.textStyle;if(i)for(var r=0,o=a.TEXT_STYLE_OPTIONS.length;r<o;r++){e=a.TEXT_STYLE_OPTIONS[r];i.hasOwnProperty(e)&&(n[e]=i[e])}}function f(t){h(t)&&(u(t,"normal"),u(t,"emphasis"))}function r(t){return l.isArray(t)?t:t?[t]:[]}function o(t){return(l.isArray(t)?t[0]:t)||{}}t.exports=function(e,t){i(r(e.series),function(t){h(t)&&function(t){if(h(t)){c(t),f(t.label),f(t.upperLabel),f(t.edgeLabel),c(i=t.markPoint),f(i&&i.label);var e=t.markLine;c(t.markLine),f(e&&e.label);var n=t.markArea;f(n&&n.label),u(t,"axisLabel"),u(t,"title"),u(t,"detail");var i,r=t.data;if(r)for(var o=0;o<r.length;o++)c(r[o]),f(r[o]&&r[o].label);if((i=t.markPoint)&&i.data){var a=i.data;for(o=0;o<a.length;o++)c(a[o]),f(a[o]&&a[o].label)}if((e=t.markLine)&&e.data){var s=e.data;for(o=0;o<s.length;o++)l.isArray(s[o])?(c(s[o][0]),f(s[o][0]&&s[o][0].label),c(s[o][1]),f(s[o][1]&&s[o][1].label)):(c(s[o]),f(s[o]&&s[o].label))}}}(t)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),i(n,function(t){i(r(e[t]),function(t){t&&(u(t,"axisLabel"),u(t.axisPointer,"label"))})}),i(r(e.parallel),function(t){var e=t&&t.parallelAxisDefault;u(e,"axisLabel"),u(e&&e.axisPointer,"label")}),i(r(e.calendar),function(t){u(t,"dayLabel"),u(t,"monthLabel"),u(t,"yearLabel")}),i(r(e.radar),function(t){u(t,"name")}),i(r(e.geo),function(t){h(t)&&(f(t.label),i(r(t.regions),function(t){f(t.label)}))}),f(o(e.timeline).label),u(o(e.axisPointer),"label"),u(o(e.tooltip).axisPointer,"label")}},function(t,e,n){var i=n(620),r=n(632),o=n(609),a=function(){this.group=new i,this.uid=r.getUID("viewComponent")},s=a.prototype={constructor:a,init:function(t,e){},render:function(t,e,n,i){},dispose:function(){}};s.updateView=s.updateLayout=s.updateVisual=function(t,e,n,i){},o.enableClassExtend(a),o.enableClassManagement(a,{registerWhenExtend:!0});var l=a;t.exports=l},function(t,e,n){var o=n(631);t.exports=function(t){t.eachRawSeries(function(e){var n=(e.visualColorAccessPath||"itemStyle.normal.color").split("."),i=e.getData(),r=e.get(n)||e.getColorFromPalette(e.get("name"));i.setVisual("color",r),t.isSeriesFiltered(e)||("function"!=typeof r||r instanceof o||i.each(function(t){i.setItemVisual(t,"color",r(e.getDataParams(t)))}),i.each(function(t){var e=i.getItemModel(t).get(n,!0);null!=e&&i.setItemVisual(t,"color",e)}))})}},function(t,e,n){var s=n(597),l=n(598),h=Math.PI;t.exports=function(i,t){t=t||{},s.defaults(t,{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var r=new l.Rect({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4}),o=new l.Arc({shape:{startAngle:-h/2,endAngle:-h/2+.1,r:10},style:{stroke:t.color,lineCap:"round",lineWidth:5},zlevel:t.zlevel,z:10001}),a=new l.Rect({style:{fill:"none",text:t.text,textPosition:"right",textDistance:10,textFill:t.textColor},zlevel:t.zlevel,z:10001});o.animateShape(!0).when(1e3,{endAngle:3*h/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:3*h/2}).delay(300).start("circularInOut");var e=new l.Group;return e.add(o),e.add(a),e.add(r),e.resize=function(){var t=i.getWidth()/2,e=i.getHeight()/2;o.setShape({cx:t,cy:e});var n=o.shape.r;a.setShape({x:t-n,y:e-n,width:2*n,height:2*n}),r.setShape({x:0,y:0,width:i.getWidth(),height:i.getHeight()})},e.resize(),e}},function(t,e,n){var i=n(642);e.zrender=i;var r=n(614);e.matrix=r;var o=n(601);e.vector=o;var a=n(597),s=n(617);e.color=s;var l=n(598);e.graphic=l;var h=n(602);e.number=h;var c=n(606);e.format=c;var u=n(633);u.throttle;e.throttle=u.throttle;var f=n(727);e.helper=f;var d=n(636);e.List=d;var p=n(608);e.Model=p;var g=n(640);e.Axis=g;var v=n(605);e.env=v;var m=n(732);e.parseGeoJson=m;var y={};a.each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(t){y[t]=a[t]}),e.util=y},function(t,e,n){var r=n(597),i=n(635),o=n(613),a=n(639),s=n(608),l=n(637);e.completeDimensions=l;var h=n(619);e.createSymbol=h.createSymbol,e.createList=function(t){var e=t.get("data");return i(e,t,t.ecModel)},e.createScale=function(t,e){var n=e;e instanceof s||(n=new s(e),r.mixin(n,a));var i=o.createScaleByModel(n);return i.setExtent(t[0],t[1]),o.niceScaleExtent(i,n),i},e.mixinAxisModelCommonMethods=function(t){r.mixin(t,a)}},function(t,e){function o(t){return t}function n(t,e,n,i,r){this._old=t,this._new=e,this._oldKeyGetter=n||o,this._newKeyGetter=i||o,this.context=r}function c(t,e,n,i,r){for(var o=0;o<t.length;o++){var a="_ec_"+r[i](t[o],o),s=e[a];null==s?(n.push(a),e[a]=o):(s.length||(e[a]=s=[s]),s.push(o))}}n.prototype={constructor:n,add:function(t){return this._add=t,this},update:function(t){return this._update=t,this},remove:function(t){return this._remove=t,this},execute:function(){var t=this._old,e=this._new,n={},i=[],r=[];for(c(t,{},i,"_oldKeyGetter",this),c(e,n,r,"_newKeyGetter",this),o=0;o<t.length;o++){if(null!=(s=n[a=i[o]]))(h=s.length)?(1===h&&(n[a]=null),s=s.unshift()):n[a]=null,this._update&&this._update(s,o);else this._remove&&this._remove(o)}for(var o=0;o<r.length;o++){var a=r[o];if(n.hasOwnProperty(a)){var s;if(null==(s=n[a]))continue;if(s.length)for(var l=0,h=s.length;l<h;l++)this._add&&this._add(s[l]);else this._add&&this._add(s)}}}};var i=n;t.exports=i},function(t,e,n){var i=n(597),r=n(623),o=r.prototype,a=r.extend({type:"ordinal",init:function(t,e){this._data=t,this._extent=e||[0,t.length-1]},parse:function(t){return"string"==typeof t?i.indexOf(this._data,t):Math.round(t)},contain:function(t){return t=this.parse(t),o.contain.call(this,t)&&null!=this._data[t]},normalize:function(t){return o.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(o.scale.call(this,t))},getTicks:function(){for(var t=[],e=this._extent,n=e[0];n<=e[1];)t.push(n),n++;return t},getLabel:function(t){return this._data[t]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(t,e){this.unionExtent(t.getDataExtent(e,!1))},niceTicks:i.noop,niceExtent:i.noop});a.create=function(){return new a};var s=a;t.exports=s},function(t,e,n){var i=n(597),d=n(602),r=n(606),p=n(661),o=n(627),a=o.prototype,g=Math.ceil,v=Math.floor,s=864e5,l=o.extend({type:"time",getLabel:function(t){var e=this._stepLvl,n=new Date(t);return r.formatTime(e[0],n,this.getSetting("useUTC"))},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=s,e[1]+=s),e[1]===-1/0&&e[0]===1/0){var n=new Date;e[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),e[0]=e[1]-s}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var i=this._interval;t.fixMin||(e[0]=d.round(v(e[0]/i)*i)),t.fixMax||(e[1]=d.round(g(e[1]/i)*i))},niceTicks:function(t,e,n){t=t||10;var i=this._extent,r=i[1]-i[0],o=r/t;null!=e&&o<e&&(o=e),null!=n&&n<o&&(o=n);var a=m.length,s=function(t,e,n,i){for(;n<i;){var r=n+i>>>1;t[r][1]<e?n=r+1:i=r}return n}(m,o,0,a),l=m[Math.min(s,a-1)],h=l[1];if("year"===l[0]){var c=r/h;h*=d.nice(c/t,!0)}var u=this.getSetting("useUTC")?0:60*new Date(+i[0]||+i[1]).getTimezoneOffset()*1e3,f=[Math.round(g((i[0]-u)/h)*h+u),Math.round(v((i[1]-u)/h)*h+u)];p.fixExtent(f,i),this._stepLvl=l,this._interval=h,this._niceExtent=f},parse:function(t){return+d.parseDate(t)}});i.each(["contain","normalize"],function(e){l.prototype[e]=function(t){return a[e].call(this,this.parse(t))}});var m=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",s],["MM-dd\nyyyy",2*s],["MM-dd\nyyyy",3*s],["MM-dd\nyyyy",4*s],["MM-dd\nyyyy",432e6],["MM-dd\nyyyy",6*s],["week",7*s],["MM-dd\nyyyy",864e6],["week",14*s],["week",21*s],["month",31*s],["week",42*s],["month",62*s],["week",42*s],["quarter",8208e6],["month",107136e5],["month",13392e6],["half-year",16416e6],["month",214272e5],["month",26784e6],["year",32832e6]];l.create=function(t){return new l({useUTC:t.ecModel.get("useUTC")})};var h=l;t.exports=h},function(t,e,n){var o=n(597),i=n(623),a=n(602),r=n(627),s=i.prototype,l=r.prototype,h=a.getPrecisionSafe,c=a.round,u=Math.floor,f=Math.ceil,d=Math.pow,p=Math.log,g=i.extend({type:"log",base:10,$constructor:function(){i.apply(this,arguments),this._originalScale=new r},getTicks:function(){var n=this._originalScale,i=this._extent,r=n.getExtent();return o.map(l.getTicks.call(this),function(t){var e=a.round(d(this.base,t));return e=t===i[0]&&n.__fixMin?v(e,r[0]):e,e=t===i[1]&&n.__fixMax?v(e,r[1]):e},this)},getLabel:l.getLabel,scale:function(t){return t=s.scale.call(this,t),d(this.base,t)},setExtent:function(t,e){var n=this.base;t=p(t)/p(n),e=p(e)/p(n),l.setExtent.call(this,t,e)},getExtent:function(){var t=this.base,e=s.getExtent.call(this);e[0]=d(t,e[0]),e[1]=d(t,e[1]);var n=this._originalScale,i=n.getExtent();return n.__fixMin&&(e[0]=v(e[0],i[0])),n.__fixMax&&(e[1]=v(e[1],i[1])),e},unionExtent:function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=p(t[0])/p(e),t[1]=p(t[1])/p(e),s.unionExtent.call(this,t)},unionExtentFromData:function(t,e){this.unionExtent(t.getDataExtent(e,!0,function(t){return 0<t}))},niceTicks:function(t){t=t||10;var e=this._extent,n=e[1]-e[0];if(!(n===1/0||n<=0)){var i=a.quantity(n);for(t/n*i<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&0<Math.abs(i);)i*=10;var r=[a.round(f(e[0]/i)*i),a.round(u(e[1]/i)*i)];this._interval=i,this._niceExtent=r}},niceExtent:function(t){l.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin,e.__fixMax=t.fixMax}});function v(t,e){return c(t,h(e))}o.each(["contain","normalize"],function(e){g.prototype[e]=function(t){return t=p(t)/p(this.base),s[e].call(this,t)}}),g.create=function(){return new g};var m=g;t.exports=m},function(t,e,n){var a=n(597),s=n(733);function u(t,e,n){for(var i=[],r=e[0],o=e[1],a=0;a<t.length;a+=2){var s=t.charCodeAt(a)-64,l=t.charCodeAt(a+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),r=s+=r,o=l+=o,i.push([s/n,l/n])}return i}t.exports=function(t){return function(t){if(t.UTF8Encoding){var e=t.UTF8Scale;null==e&&(e=1024);for(var n=t.features,i=0;i<n.length;i++)for(var r=n[i].geometry,o=r.coordinates,a=r.encodeOffsets,s=0;s<o.length;s++){var l=o[s];if("Polygon"===r.type)o[s]=u(l,a[s],e);else if("MultiPolygon"===r.type)for(var h=0;h<l.length;h++){var c=l[h];l[h]=u(c,a[s][h],e)}}t.UTF8Encoding=!1}}(t),a.map(a.filter(t.features,function(t){return t.geometry&&t.properties&&0<t.geometry.coordinates.length}),function(t){var e=t.properties,n=t.geometry,i=n.coordinates,r=[];"Polygon"===n.type&&r.push({type:"polygon",exterior:i[0],interiors:i.slice(1)}),"MultiPolygon"===n.type&&a.each(i,function(t){t[0]&&r.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})});var o=new s(e.name,r,e.cp);return o.properties=e,o})}},function(t,e,n){var p=n(607),h=n(655),g=n(601),l=n(734);function i(t,e,n){if(this.name=t,this.geometries=e,n)n=[n[0],n[1]];else{var i=this.getBoundingRect();n=[i.x+i.width/2,i.y+i.height/2]}this.center=n}i.prototype={constructor:i,properties:null,getBoundingRect:function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,n=[e,e],i=[-e,-e],r=[],o=[],a=this.geometries,s=0;s<a.length;s++)if("polygon"===a[s].type){var l=a[s].exterior;h.fromPoints(l,r,o),g.min(n,n,r),g.max(i,i,o)}return 0===s&&(n[0]=n[1]=i[0]=i[1]=0),this._rect=new p(n[0],n[1],i[0]-n[0],i[1]-n[1])},contain:function(t){var e=this.getBoundingRect(),n=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var i=0,r=n.length;i<r;i++)if("polygon"===n[i].type){var o=n[i].exterior,a=n[i].interiors;if(l.contain(o,t[0],t[1])){for(var s=0;s<(a?a.length:0);s++)if(l.contain(a[s]))continue t;return!0}}return!1},transformTo:function(t,e,n,i){var r=this.getBoundingRect(),o=r.width/r.height;n?i||(i=n/o):n=o*i;for(var a=new p(t,e,n,i),s=r.calculateTransform(a),l=this.geometries,h=0;h<l.length;h++)if("polygon"===l[h].type){for(var c=l[h].exterior,u=l[h].interiors,f=0;f<c.length;f++)g.applyTransform(c[f],c[f],s);for(var d=0;d<(u?u.length:0);d++)for(f=0;f<u[d].length;f++)g.applyTransform(u[d][f],u[d][f],s)}(r=this._rect).copy(a),this.center=[r.x+r.width/2,r.y+r.height/2]}};var r=i;t.exports=r},function(t,e,n){var l=n(657),i=1e-8;function h(t,e){return Math.abs(t-e)<i}e.contain=function(t,e,n){var i=0,r=t[0];if(!r)return!1;for(var o=1;o<t.length;o++){var a=t[o];i+=l(r[0],r[1],a[0],a[1],e,n),r=a}var s=t[0];return h(r[0],s[0])&&h(r[1],s[1])||(i+=l(r[0],r[1],s[0],s[1],e,n)),0!==i}},function(t,e,n){n(604).__DEV__;var i=n(635),r=n(634).extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,e){return i(t.data,this,e)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clipOverflow:!0,label:{normal:{position:"top"}},lineStyle:{normal:{width:2,type:"solid"}},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:!1,connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});t.exports=r},function(t,e,n){n(604).__DEV__;var k=n(597),i=n(737),l=n(662),m=n(739),O=n(598),h=n(600),r=n(740),o=r.Polyline,a=r.Polygon,c=n(638);function A(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++){var i=t[n],r=e[n];if(i[0]!==r[0]||i[1]!==r[1])return}return!0}}function M(t){return"number"==typeof t?t:t?.3:0}function d(t){var e=t.getGlobalExtent();if(t.onBand){var n=t.getBandWidth()/2-1,i=e[1]>e[0]?1:-1;e[0]+=i*n,e[1]-=i*n}return e}function D(t){return 0<=t?1:-1}function I(t,e,n){return"polar"===t.type?(r=e,o=n,a=(i=t).getAngleAxis(),s=i.getRadiusAxis().getExtent(),l=a.getExtent(),h=Math.PI/180,c=new O.Sector({shape:{cx:i.cx,cy:i.cy,r0:s[0],r:s[1],startAngle:-l[0]*h,endAngle:-l[1]*h,clockwise:a.inverse}}),r&&(c.shape.endAngle=-l[0]*h,O.initProps(c,{shape:{endAngle:-l[1]*h}},o)),c):function(t,e,n){var i=d(t.getAxis("x")),r=d(t.getAxis("y")),o=t.getBaseAxis().isHorizontal(),a=Math.min(i[0],i[1]),s=Math.min(r[0],r[1]),l=Math.max(i[0],i[1])-a,h=Math.max(r[0],r[1])-s,c=n.get("lineStyle.normal.width")||2,u=n.get("clipOverflow")?c/2:Math.max(l,h);o?(s-=u,h+=2*u):(a-=u,l+=2*u);var f=new O.Rect({shape:{x:a,y:s,width:l,height:h}});return e&&(f.shape[o?"width":"height"]=0,O.initProps(f,{shape:{width:l,height:h}},n)),f}(t,e,n);var i,r,o,a,s,l,h,c}function P(t,e,n){for(var i=e.getBaseAxis(),r="x"===i.dim||"radius"===i.dim?0:1,o=[],a=0;a<t.length-1;a++){var s=t[a+1],l=t[a];o.push(l);var h=[];switch(n){case"end":h[r]=s[r],h[1-r]=l[1-r],o.push(h);break;case"middle":var c=(l[r]+s[r])/2,u=[];h[r]=u[r]=c,h[1-r]=l[1-r],u[1-r]=s[1-r],o.push(h),o.push(u);break;default:h[r]=l[r],h[1-r]=s[1-r],o.push(h)}}return t[a]&&o.push(t[a]),o}var s=c.extend({type:"line",init:function(){var t=new O.Group,e=new i;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},render:function(t,e,n){var i=t.coordinateSystem,r=this.group,o=t.getData(),a=t.getModel("lineStyle.normal"),s=t.getModel("areaStyle.normal"),l=o.mapArray(o.getItemLayout,!0),h="polar"===i.type,c=this._coordSys,u=this._symbolDraw,f=this._polyline,d=this._polygon,p=this._lineGroup,g=t.get("animation"),v=!s.isEmpty(),m=function(o,a){var s=o.getBaseAxis(),t=o.getOtherAxis(s),l=0;if(!s.onZero){var e=t.scale.getExtent();0<e[0]?l=e[0]:e[1]<0&&(l=e[1])}var h=t.dim,c="x"===h||"radius"===h?1:0;return a.mapArray([h],function(t,e){for(var n,i=a.stackedOn;i&&D(i.get(h,e))===D(t);){n=i;break}var r=[];return r[c]=a.get(s.dim,e),r[1-c]=n?n.get(h,e,!0):l,o.dataToPoint(r)},!0)}(i,o),y=t.get("showSymbol"),_=y&&!h&&!t.get("showAllSymbol")&&this._getSymbolIgnoreFunc(o,i),x=this._data;x&&x.eachItemGraphicEl(function(t,e){t.__temp&&(r.remove(t),x.setItemGraphicEl(e,null))}),y||u.remove(),r.add(p);var b=!h&&t.get("step");f&&c.type===i.type&&b===this._step?(v&&!d?d=this._newPolygon(l,m,i,g):d&&!v&&(p.remove(d),d=this._polygon=null),p.setClipPath(I(i,!1,t)),y&&u.updateData(o,_),o.eachItemGraphicEl(function(t){t.stopAnimation(!0)}),A(this._stackedOnPoints,m)&&A(this._points,l)||(g?this._updateAnimation(o,m,i,n,b):(b&&(l=P(l,i,b),m=P(m,i,b)),f.setShape({points:l}),d&&d.setShape({points:l,stackedOnPoints:m})))):(y&&u.updateData(o,_),b&&(l=P(l,i,b),m=P(m,i,b)),f=this._newPolyline(l,i,g),v&&(d=this._newPolygon(l,m,i,g)),p.setClipPath(I(i,!0,t)));var w=function(t,e){var n=t.getVisual("visualMeta");if(n&&n.length&&t.count()){for(var i,r=n.length-1;0<=r;r--)if(n[r].dimension<2){i=n[r];break}if(i&&"cartesian2d"===e.type){var o=i.dimension,a=t.dimensions[o],s=e.getAxis(a),l=k.map(i.stops,function(t){return{coord:s.toGlobalCoord(s.dataToCoord(t.value)),color:t.color}}),h=l.length,c=i.outerColors.slice();h&&l[0].coord>l[h-1].coord&&(l.reverse(),c.reverse());var u=l[0].coord-10,f=l[h-1].coord+10,d=f-u;if(d<.001)return"transparent";k.each(l,function(t){t.offset=(t.coord-u)/d}),l.push({offset:h?l[h-1].offset:.5,color:c[1]||"transparent"}),l.unshift({offset:h?l[0].offset:.5,color:c[0]||"transparent"});var p=new O.LinearGradient(0,0,0,0,l,!0);return p[a]=u,p[a+"2"]=f,p}}}(o,i)||o.getVisual("color");f.useStyle(k.defaults(a.getLineStyle(),{fill:"none",stroke:w,lineJoin:"bevel"}));var S=t.get("smooth");if(S=M(t.get("smooth")),f.setShape({smooth:S,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")}),d){var C=o.stackedOn,T=0;if(d.useStyle(k.defaults(s.getAreaStyle(),{fill:w,opacity:.7,lineJoin:"bevel"})),C)T=M(C.hostModel.get("smooth"));d.setShape({smooth:S,stackedOnSmooth:T,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})}this._data=o,this._coordSys=i,this._stackedOnPoints=m,this._points=l,this._step=b},dispose:function(){},highlight:function(t,e,n,i){var r=t.getData(),o=h.queryDataIndex(r,i);if(!(o instanceof Array)&&null!=o&&0<=o){var a=r.getItemGraphicEl(o);if(!a){var s=r.getItemLayout(o);if(!s)return;(a=new l(r,o)).position=s,a.setZ(t.get("zlevel"),t.get("z")),a.ignore=isNaN(s[0])||isNaN(s[1]),a.__temp=!0,r.setItemGraphicEl(o,a),a.stopSymbolAnimation(!0),this.group.add(a)}a.highlight()}else c.prototype.highlight.call(this,t,e,n,i)},downplay:function(t,e,n,i){var r=t.getData(),o=h.queryDataIndex(r,i);if(null!=o&&0<=o){var a=r.getItemGraphicEl(o);a&&(a.__temp?(r.setItemGraphicEl(o,null),this.group.remove(a)):a.downplay())}else c.prototype.downplay.call(this,t,e,n,i)},_newPolyline:function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new o({shape:{points:t},silent:!0,z2:10}),this._lineGroup.add(e),this._polyline=e},_newPolygon:function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new a({shape:{points:t,stackedOnPoints:e},silent:!0}),this._lineGroup.add(n),this._polygon=n},_getSymbolIgnoreFunc:function(t,e){var n=e.getAxesByScale("ordinal")[0];if(n&&n.isLabelIgnored)return k.bind(n.isLabelIgnored,n)},_updateAnimation:function(t,e,n,i,r){var o=this._polyline,a=this._polygon,s=t.hostModel,l=m(this._data,t,this._stackedOnPoints,e,this._coordSys,n),h=l.current,c=l.stackedOnCurrent,u=l.next,f=l.stackedOnNext;r&&(h=P(l.current,n,r),c=P(l.stackedOnCurrent,n,r),u=P(l.next,n,r),f=P(l.stackedOnNext,n,r)),o.shape.__points=l.current,o.shape.points=h,O.updateProps(o,{shape:{points:u}},s),a&&(a.setShape({points:h,stackedOnPoints:c}),O.updateProps(a,{shape:{points:u,stackedOnPoints:f}},s));for(var d=[],p=l.status,g=0;g<p.length;g++){if("="===p[g].cmd){var v=t.getItemGraphicEl(p[g].idx1);v&&d.push({el:v,ptIdx:g})}}o.animators&&o.animators.length&&o.animators[0].during(function(){for(var t=0;t<d.length;t++){d[t].el.attr("position",o.shape.__points[d[t].ptIdx])}})},remove:function(t){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(t,e){t.__temp&&(n.remove(t),i.setItemGraphicEl(e,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});t.exports=s},function(t,e,n){var u=n(598),i=n(662);function r(t){this.group=new u.Group,this._symbolCtor=t||i}var o=r.prototype;function f(t,e,n){var i=t.getItemLayout(e);return i&&!isNaN(i[0])&&!isNaN(i[1])&&!(n&&n(e))&&"none"!==t.getItemVisual(e,"symbol")}o.updateData=function(r,o){var a=this.group,s=r.hostModel,l=this._data,h=this._symbolCtor,c={itemStyle:s.getModel("itemStyle.normal").getItemStyle(["color"]),hoverItemStyle:s.getModel("itemStyle.emphasis").getItemStyle(),symbolRotate:s.get("symbolRotate"),symbolOffset:s.get("symbolOffset"),hoverAnimation:s.get("hoverAnimation"),labelModel:s.getModel("label.normal"),hoverLabelModel:s.getModel("label.emphasis"),cursorStyle:s.get("cursor")};r.diff(l).add(function(t){var e=r.getItemLayout(t);if(f(r,t,o)){var n=new h(r,t,c);n.attr("position",e),r.setItemGraphicEl(t,n),a.add(n)}}).update(function(t,e){var n=l.getItemGraphicEl(e),i=r.getItemLayout(t);f(r,t,o)?(n?(n.updateData(r,t,c),u.updateProps(n,{position:i},s)):(n=new h(r,t)).attr("position",i),a.add(n),r.setItemGraphicEl(t,n)):a.remove(n)}).remove(function(t){var e=l.getItemGraphicEl(t);e&&e.fadeOut(function(){a.remove(e)})}).execute(),this._data=r},o.updateLayout=function(){var i=this._data;i&&i.eachItemGraphicEl(function(t,e){var n=i.getItemLayout(e);t.attr("position",n)})},o.remove=function(t){var e=this.group,n=this._data;n&&(t?n.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)})}):e.removeAll())};var a=r;t.exports=a},function(t,e,n){var o=n(600).otherDimToDataDim;e.findLabelValueDim=function(t){var e,n=o(t,"label");if(n.length)e=n[0];else for(var i,r=t.dimensions.slice();r.length&&(e=r.pop(),"ordinal"===(i=t.getDimensionInfo(e).type)||"time"===i););return e}},function(t,e){function f(t){return 0<=t?1:-1}function M(t,e,n){for(var i,r=t.getBaseAxis(),o=t.getOtherAxis(r),a=r.onZero?0:o.scale.getExtent()[0],s=o.dim,l="x"===s||"radius"===s?1:0,h=e.stackedOn,c=e.get(s,n);h&&f(h.get(s,n))===f(c);){i=h;break}var u=[];return u[l]=e.get(r.dim,n),u[1-l]=i?i.get(s,n,!0):a,t.dataToPoint(u)}t.exports=function(t,e,n,i,r,o){for(var a,s,l=(a=t,s=[],e.diff(a).add(function(t){s.push({cmd:"+",idx:t})}).update(function(t,e){s.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){s.push({cmd:"-",idx:t})}).execute(),s),h=[],c=[],u=[],f=[],d=[],p=[],g=[],v=o.dimensions,m=0;m<l.length;m++){var y=l[m],_=!0;switch(y.cmd){case"=":var x=t.getItemLayout(y.idx),b=e.getItemLayout(y.idx1);(isNaN(x[0])||isNaN(x[1]))&&(x=b.slice()),h.push(x),c.push(b),u.push(n[y.idx]),f.push(i[y.idx1]),g.push(e.getRawIndex(y.idx1));break;case"+":var w=y.idx;h.push(r.dataToPoint([e.get(v[0],w,!0),e.get(v[1],w,!0)])),c.push(e.getItemLayout(w).slice()),u.push(M(r,e,w)),f.push(i[w]),g.push(e.getRawIndex(w));break;case"-":w=y.idx;var S=t.getRawIndex(w);S!==w?(h.push(t.getItemLayout(w)),c.push(o.dataToPoint([t.get(v[0],w,!0),t.get(v[1],w,!0)])),u.push(n[w]),f.push(M(o,t,w)),g.push(S)):_=!1}_&&(d.push(y),p.push(p.length))}p.sort(function(t,e){return g[t]-g[e]});var C=[],T=[],k=[],O=[],A=[];for(m=0;m<p.length;m++)w=p[m],C[m]=h[w],T[m]=c[w],k[m]=u[w],O[m]=f[w],A[m]=d[w];return{current:C,next:T,stackedOnCurrent:k,stackedOnNext:O,status:A}}},function(t,e,n){var i=n(603),w=n(601),r=n(658),S=w.min,C=w.max,T=w.scaleAndAdd,k=w.copy,O=[],A=[],M=[];function D(t){return isNaN(t[0])||isNaN(t[1])}function c(t,e,n,i,r,o,a,s,l,h,c){for(var u=0,f=n,d=0;d<i;d++){var p=e[f];if(r<=f||f<0)break;if(D(p)){if(c){f+=o;continue}break}if(f===n)t[0<o?"moveTo":"lineTo"](p[0],p[1]),k(A,p);else if(0<l){var g=f+o,v=e[g];if(c)for(;v&&D(e[g]);)v=e[g+=o];var m=.5,y=e[u];if(!(v=e[g])||D(v))k(M,p);else{var _,x;if(D(v)&&!c&&(v=p),w.sub(O,v,y),"x"===h||"y"===h){var b="x"===h?0:1;_=Math.abs(p[b]-y[b]),x=Math.abs(p[b]-v[b])}else _=w.dist(p,y),x=w.dist(p,v);T(M,p,O,-l*(1-(m=x/(x+_))))}S(A,A,s),C(A,A,a),S(M,M,s),C(M,M,a),t.bezierCurveTo(A[0],A[1],M[0],M[1],p[0],p[1]),T(A,p,O,l*m)}else t.lineTo(p[0],p[1]);u=f,f+=o}return d}function u(t,e){var n=[1/0,1/0],i=[-1/0,-1/0];if(e)for(var r=0;r<t.length;r++){var o=t[r];o[0]<n[0]&&(n[0]=o[0]),o[1]<n[1]&&(n[1]=o[1]),o[0]>i[0]&&(i[0]=o[0]),o[1]>i[1]&&(i[1]=o[1])}return{min:e?n:i,max:e?i:n}}var o=i.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:r(i.prototype.brush),buildPath:function(t,e){var n=e.points,i=0,r=n.length,o=u(n,e.smoothConstraint);if(e.connectNulls){for(;0<r&&D(n[r-1]);r--);for(;i<r&&D(n[i]);i++);}for(;i<r;)i+=c(t,n,i,r,r,1,o.min,o.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}),a=i.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:r(i.prototype.brush),buildPath:function(t,e){var n=e.points,i=e.stackedOnPoints,r=0,o=n.length,a=e.smoothMonotone,s=u(n,e.smoothConstraint),l=u(i,e.smoothConstraint);if(e.connectNulls){for(;0<o&&D(n[o-1]);o--);for(;r<o&&D(n[r]);r++);}for(;r<o;){var h=c(t,n,r,o,o,1,s.min,s.max,e.smooth,a,e.connectNulls);c(t,i,r+h-1,h,o,-1,l.min,l.max,e.stackedOnSmooth,a,e.connectNulls),r+=h+1,t.closePath()}}});e.Polyline=o,e.Polygon=a},function(t,e){t.exports=function(t,e){e.eachSeriesByType(t,function(t){var i=t.getData(),r=t.coordinateSystem;if(r){for(var e=[],n=r.dimensions,o=0;o<n.length;o++)e.push(t.coordDimToDataDim(r.dimensions[o])[0]);1===e.length?i.each(e[0],function(t,e){i.setItemLayout(e,isNaN(t)?[NaN,NaN]:r.dataToPoint(t))}):2===e.length&&i.each(e,function(t,e,n){i.setItemLayout(n,isNaN(t)||isNaN(e)?[NaN,NaN]:r.dataToPoint([t,e]))},!0)}})}},function(t,e){var c={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return e},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return e},nearest:function(t){return t[0]}},u=function(t,e){return Math.round(t.length/2)};t.exports=function(t,e,n){e.eachSeriesByType(t,function(t){var e=t.getData(),n=t.get("sampling"),i=t.coordinateSystem;if("cartesian2d"===i.type&&n){var r,o=i.getBaseAxis(),a=i.getOtherAxis(o),s=o.getExtent(),l=s[1]-s[0],h=Math.round(e.count()/l);1<h&&("string"==typeof n?r=c[n]:"function"==typeof n&&(r=n),r&&(e=e.downSample(a.dim,1/h,r,u),t.setData(e)))}},this)}},function(t,e,n){var i=n(597),r=n(744);function o(t){r.call(this,t)}o.prototype={constructor:o,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e){var n=this.getAxis("x"),i=this.getAxis("y");return[n.toGlobalCoord(n.dataToCoord(t[0],e)),i.toGlobalCoord(i.dataToCoord(t[1],e))]},pointToData:function(t,e){var n=this.getAxis("x"),i=this.getAxis("y");return[n.coordToData(n.toLocalCoord(t[0]),e),i.coordToData(i.toLocalCoord(t[1]),e)]},getOtherAxis:function(t){return this.getAxis("x"===t.dim?"y":"x")}},i.inherits(o,r);var a=o;t.exports=a},function(t,e,n){var i=n(597);function r(t){return this._axes[t]}var o=function(t){this._axes={},this._dimList=[],this.name=t||""};o.prototype={constructor:o,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return i.map(this._dimList,r,this)},getAxesByScale:function(e){return e=e.toLowerCase(),i.filter(this.getAxes(),function(t){return t.scale.type===e})},addAxis:function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){for(var n=this._dimList,i=t instanceof Array?[]:{},r=0;r<n.length;r++){var o=n[r],a=this._axes[o];i[o]=a[e](t[o])}return i}};var a=o;t.exports=a},function(t,e,n){var i=n(597),o=n(640),r=function(t,e,n,i,r){o.call(this,t,e,n),this.type=i||"value",this.position=r||"bottom"};r.prototype={constructor:r,index:0,onZero:!1,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getGlobalExtent:function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},getOtherAxis:function(){this.grid.getOtherAxis()},isLabelIgnored:function(t){if("category"===this.type){var e=this.getLabelInterval();return"function"==typeof e&&!e(t,this.scale.getLabel(t))||t%(e+1)}},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},toLocalCoord:null,toGlobalCoord:null},i.inherits(r,o);var a=r;t.exports=a},function(t,e,n){n(663);var i=n(610).extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});t.exports=i},function(t,e,n){var l=n(597),i=n(677),r=n(610),o=n(611),h=o.getLayoutParams,c=o.mergeLayoutParam,u=["value","category","time","log"];t.exports=function(a,t,s,e){l.each(u,function(o){t.extend({type:a+"Axis."+o,mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?h(t):{},r=e.getTheme();l.merge(t,r.get(o+"Axis")),l.merge(t,this.getDefaultOption()),t.type=s(a,t),n&&c(t,i,n)},defaultOption:l.mergeAll([{},i[o+"Axis"],e],!0)})}),r.registerSubTypeDefaulter(a+"Axis",l.curry(s,a))}},function(t,e,n){n(663),n(749)},function(t,e,n){var C=n(597),T=n(598),l=n(641),i=n(664),h=n(665),k=l.ifIgnoreOnTick,O=l.getInterval,c=["axisLine","axisTickLabel","axisName"],u=["splitArea","splitLine"],f=i.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(e,t,n,i){this.group.removeAll();var r=this._axisGroup;if(this._axisGroup=new T.Group,this.group.add(this._axisGroup),e.get("show")){var o=e.getCoordSysModel(),a=h.layout(o,e),s=new l(e,a);C.each(c,s.add,s),this._axisGroup.add(s.getGroup()),C.each(u,function(t){e.get(t+".show")&&this["_"+t](e,o,a.labelInterval)},this),T.groupTransition(r,this._axisGroup,e),f.superCall(this,"render",e,t,n,i)}},_splitLine:function(t,e,n){var i=t.axis;if(!i.scale.isBlank()){var r=t.getModel("splitLine"),o=r.getModel("lineStyle"),a=o.get("color"),s=O(r,n);a=C.isArray(a)?a:[a];for(var l=e.coordinateSystem.getRect(),h=i.isHorizontal(),c=0,u=i.getTicksCoords(),f=i.scale.getTicks(),d=t.get("axisLabel.showMinLabel"),p=t.get("axisLabel.showMaxLabel"),g=[],v=[],m=o.getLineStyle(),y=0;y<u.length;y++)if(!k(i,y,s,u.length,d,p)){var _=i.toGlobalCoord(u[y]);h?(g[0]=_,g[1]=l.y,v[0]=_,v[1]=l.y+l.height):(g[0]=l.x,g[1]=_,v[0]=l.x+l.width,v[1]=_);var x=c++%a.length;this._axisGroup.add(new T.Line(T.subPixelOptimizeLine({anid:"line_"+f[y],shape:{x1:g[0],y1:g[1],x2:v[0],y2:v[1]},style:C.defaults({stroke:a[x]},m),silent:!0})))}}},_splitArea:function(t,e,n){var i=t.axis;if(!i.scale.isBlank()){var r=t.getModel("splitArea"),o=r.getModel("areaStyle"),a=o.get("color"),s=e.coordinateSystem.getRect(),l=i.getTicksCoords(),h=i.scale.getTicks(),c=i.toGlobalCoord(l[0]),u=i.toGlobalCoord(l[0]),f=0,d=O(r,n),p=o.getAreaStyle();a=C.isArray(a)?a:[a];for(var g=t.get("axisLabel.showMinLabel"),v=t.get("axisLabel.showMaxLabel"),m=1;m<l.length;m++)if(!k(i,m,d,l.length,g,v)){var y,_,x,b,w=i.toGlobalCoord(l[m]);i.isHorizontal()?(y=c,_=s.y,x=w-y,b=s.height):(y=s.x,_=u,x=s.width,b=w-_);var S=f++%a.length;this._axisGroup.add(new T.Rect({anid:"area_"+h[m],shape:{x:y,y:_,width:x,height:b},style:C.defaults({fill:a[S]},p),silent:!0})),c=y+x,u=_+b}}}});f.extend({type:"xAxis"}),f.extend({type:"yAxis"})},function(t,e,n){var i=n(599),r=n(597),o=n(624),a=n(751);n(752),n(753),n(754),i.registerPreprocessor(function(t){if(t){(!t.axisPointer||0===t.axisPointer.length)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!r.isArray(e)&&(t.axisPointer.link=[e])}}),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=o.collect(t,e)}),i.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},a)},function(t,e,n){var x=n(597),i=n(600),u=n(624),b=n(666),w=x.each,S=x.curry,C=i.makeGetter();function T(t,e,n,i,r){var o=t.axis;if(!o.scale.isBlank()&&o.containData(e))if(t.involveSeries){var l,a,h,c,u,f,d,p,s=(l=e,h=(a=t).axis,c=h.dim,u=l,f=[],d=Number.MAX_VALUE,p=-1,w(a.seriesModels,function(e,t){var n,i,r=e.coordDimToDataDim(c);if(e.getAxisTooltipData){var o=e.getAxisTooltipData(r,l,h);i=o.dataIndices,n=o.nestestValue}else{if(!(i=e.getData().indicesOfNearest(r[0],l,!1,"category"===h.type?.5:null)).length)return;n=e.getData().get(r[0],i[0])}if(null!=n&&isFinite(n)){var a=l-n,s=Math.abs(a);s<=d&&((s<d||0<=a&&p<0)&&(d=s,p=a,u=n,f.length=0),w(i,function(t){f.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})}))}}),{payloadBatch:f,snapToValue:u}),g=s.payloadBatch,v=s.snapToValue;g[0]&&null==r.seriesIndex&&x.extend(r,g[0]),!i&&t.snap&&o.containData(v)&&null!=v&&(e=v),n.showPointer(t,e,g,r),n.showTooltip(t,s,v)}else n.showPointer(t,e)}function k(t,e,n,i){t[e.key]={value:n,payloadBatch:i}}function O(t,e,n,i){var r=n.payloadBatch,o=e.axis,a=o.model,s=e.axisPointerModel;if(e.triggerTooltip&&r.length){var l=e.coordSys.model,h=u.makeKey(l),c=t.map[h];c||(c=t.map[h]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:i,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:r.slice()})}}function A(t){var e=t.axis.model,n={},i=n.axisDim=t.axis.dim;return n.axisIndex=n[i+"AxisIndex"]=e.componentIndex,n.axisName=n[i+"AxisName"]=e.name,n.axisId=n[i+"AxisId"]=e.id,n}function M(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}t.exports=function(t,e,n){var i=t.currTrigger,a=[t.x,t.y],r=t,o=t.dispatchAction||x.bind(n.dispatchAction,n),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){M(a)&&(a=b({seriesIndex:r.seriesIndex,dataIndex:r.dataIndex},e).point);var l=M(a),h=r.axesInfo,c=s.axesInfo,u="leave"===i||M(a),f={},d={},p={list:[],map:{}},g={showPointer:S(k,d),showTooltip:S(O,p)};w(s.coordSysMap,function(t,e){var o=l||t.containPoint(a);w(s.coordSysAxesInfo[e],function(t,e){var n=t.axis,i=function(t,e){for(var n=0;n<(t||[]).length;n++){var i=t[n];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex)return i}}(h,t);if(!u&&o&&(!h||i)){var r=i&&i.value;null!=r||l||(r=n.pointToData(a)),null!=r&&T(t,r,g,!1,f)}})});var v,m,y,_={};return w(c,function(r,t){var o=r.linkGroup;o&&!d[t]&&w(o.axesInfo,function(t,e){var n=d[e];if(t!==r&&n){var i=n.value;o.mapper&&(i=r.axis.scale.parse(o.mapper(i,A(t),A(r)))),_[r.key]=i}})}),w(_,function(t,e){T(c[e],t,g,!0,f)}),v=d,m=c,y=f.axesInfo=[],w(m,function(t,e){var n=t.axisPointerModel.option,i=v[e];i?(!t.useHandle&&(n.status="show"),n.value=i.value,n.seriesDataIndices=(i.payloadBatch||[]).slice()):!t.useHandle&&(n.status="hide"),"show"===n.status&&y.push({axisDim:t.axis.dim,axisIndex:t.axis.model.componentIndex,value:n.value})}),function(t,e,n,i){if(M(e)||!t.list.length)return i({type:"hideTip"});var r=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:t.list})}(p,a,t,o),function(t,e,n){var i=n.getZr(),r="axisPointerLastHighlights",o=C(i)[r]||{},a=C(i)[r]={};w(t,function(t,e){var n=t.axisPointerModel.option;"show"===n.status&&w(n.seriesDataIndices,function(t){var e=t.seriesIndex+" | "+t.dataIndex;a[e]=t})});var s=[],l=[];x.each(o,function(t,e){!a[e]&&l.push(t)}),x.each(a,function(t,e){!o[e]&&s.push(t)}),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,batch:l}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,batch:s})}(c,0,n),f}}},function(t,e,n){var i=n(599).extendComponentModel({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});t.exports=i},function(t,e,n){var i=n(599),o=n(667),r=i.extendComponentView({type:"axisPointer",render:function(t,e,n){var i=e.getComponent("tooltip"),r=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";o.register("axisPointer",n,function(t,e,n){"none"!==r&&("leave"===t||0<=r.indexOf(t))&&n({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})})},remove:function(t,e){o.unregister(e.getZr(),"axisPointer"),r.superApply(this._model,"remove",arguments)},dispose:function(t,e){o.unregister("axisPointer",e),r.superApply(this._model,"dispose",arguments)}}),a=r;t.exports=a},function(t,e,n){var o=n(598),i=n(755),d=n(668),p=n(665),r=n(664),a=i.extend({makeElOption:function(t,e,n,i,r){var o=n.axis,a=o.grid,s=i.get("type"),l=g(a,o).getOtherAxis(o).getGlobalExtent(),h=o.toGlobalCoord(o.dataToCoord(e,!0));if(s&&"none"!==s){var c=d.buildElStyle(i),u=v[s](o,h,l,c);u.style=c,t.graphicKey=u.type,t.pointer=u}var f=p.layout(a.model,n);d.buildCartesianSingleLabelElOption(e,t,f,n,i,r)},getHandleTransform:function(t,e,n){var i=p.layout(e.axis.grid.model,e,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:d.getTransformedPosition(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,i){var r=n.axis,o=r.grid,a=r.getGlobalExtent(!0),s=g(o,r).getOtherAxis(r).getGlobalExtent(),l="x"===r.dim?0:1,h=t.position;h[l]+=e[l],h[l]=Math.min(a[1],h[l]),h[l]=Math.max(a[0],h[l]);var c=(s[1]+s[0])/2,u=[c,c];u[l]=h[l];return{position:h,rotation:t.rotation,cursorPoint:u,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}}});function g(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var v={line:function(t,e,n,i){var r=d.makeLineShape([e,n[0]],[e,n[1]],s(t));return o.subPixelOptimizeLine({shape:r,style:i}),{type:"Line",shape:r}},shadow:function(t,e,n,i){var r=t.getBandWidth(),o=n[1]-n[0];return{type:"Rect",shape:d.makeRectShape([e-r/2,n[0]],[r,o],s(t))}}};function s(t){return"x"===t.dim?0:1}r.registerAxisPointerClass("CartesianAxisPointer",a);var l=a;t.exports=l},function(t,e,n){var f=n(597),i=n(609),d=n(598),h=n(624),l=n(618),c=n(633),a=n(600).makeGetter(),s=f.clone,u=f.bind;function r(){}function p(t,e,n,i){(function n(i,t){{if(f.isObject(i)&&f.isObject(t)){var r=!0;return f.each(t,function(t,e){r=r&&n(i[e],t)}),!!r}return i===t}})(a(n).lastProp,i)||(a(n).lastProp=i,e?d.updateProps(n,i,t):(n.stopAnimation(),n.attr(i)))}function o(t,e){t[e.get("label.show")?"show":"hide"]()}function g(t){return{position:t.position.slice(),rotation:t.rotation||0}}function v(t,e,n){var i=e.get("z"),r=e.get("zlevel");t&&t.traverse(function(t){"group"!==t.type&&(null!=i&&(t.z=i),null!=r&&(t.zlevel=r),t.silent=n)})}(r.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(t,e,n,i){var r=e.get("value"),o=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,i||this._lastValue!==r||this._lastStatus!==o){this._lastValue=r,this._lastStatus=o;var a=this._group,s=this._handle;if(!o||"hide"===o)return a&&a.hide(),void(s&&s.hide());a&&a.show(),s&&s.show();var l={};this.makeElOption(l,r,t,e,n);var h=l.graphicKey;h!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=h;var c=this._moveAnimation=this.determineAnimation(t,e);if(a){var u=f.curry(p,e,c);this.updatePointerEl(a,l,u,e),this.updateLabelEl(a,l,u,e)}else a=this._group=new d.Group,this.createPointerEl(a,l,t,e),this.createLabelEl(a,l,t,e),n.getZr().add(a);v(a,e,!0),this._renderHandle(r)}},remove:function(t){this.clear(t)},dispose:function(t){this.clear(t)},determineAnimation:function(t,e){var n=e.get("animation"),i=t.axis,r="category"===i.type,o=e.get("snap");if(!o&&!r)return!1;if("auto"===n||null==n){var a=this.animationThreshold;if(r&&i.getBandWidth()>a)return!0;if(o){var s=h.getAxisInfo(t).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/s>a}return!1}return!0===n},makeElOption:function(t,e,n,i,r){},createPointerEl:function(t,e,n,i){var r=e.pointer;if(r){var o=a(t).pointerEl=new d[r.type](s(e.pointer));t.add(o)}},createLabelEl:function(t,e,n,i){if(e.label){var r=a(t).labelEl=new d.Rect(s(e.label));t.add(r),o(r,i)}},updatePointerEl:function(t,e,n){var i=a(t).pointerEl;i&&(i.setStyle(e.pointer.style),n(i,{shape:e.pointer.shape}))},updateLabelEl:function(t,e,n,i){var r=a(t).labelEl;r&&(r.setStyle(e.label.style),n(r,{shape:e.label.shape,position:e.label.position}),o(r,i))},_renderHandle:function(t){if(!this._dragging&&this.updateHandleTransform){var e,n=this._axisPointerModel,i=this._api.getZr(),r=this._handle,o=n.getModel("handle"),a=n.get("status");if(!o.get("show")||!a||"hide"===a)return r&&i.remove(r),void(this._handle=null);this._handle||(e=!0,r=this._handle=d.createIcon(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){l.stop(t.event)},onmousedown:u(this._onHandleDragMove,this,0,0),drift:u(this._onHandleDragMove,this),ondragend:u(this._onHandleDragEnd,this)}),i.add(r)),v(r,n,!1);r.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=o.get("size");f.isArray(s)||(s=[s,s]),r.attr("scale",[s[0]/2,s[1]/2]),c.createOrUpdate(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},_moveHandleToValue:function(t,e){p(this._axisPointerModel,!e&&this._moveAnimation,this._handle,g(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(t,e){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(g(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(g(i)),a(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},_onHandleDragEnd:function(t){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,i=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),i&&e.remove(i),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}}}).constructor=r,i.enableClassExtend(r);var m=r;t.exports=m},function(t,e,n){var i=n(599).extendComponentModel({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:8,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});t.exports=i},function(t,e,n){var i=n(599),S=n(597),c=n(605),r=n(758),f=n(606),o=n(602),a=n(598),u=n(666),C=n(611),s=n(608),l=n(667),d=n(613),p=n(668),g=S.bind,v=S.each,T=o.parsePercent,m=new a.Rect({shape:{x:-1,y:-1,width:2,height:2}}),h=i.extendComponentView({type:"tooltip",init:function(t,e){if(!c.node){var n=new r(e.getDom(),e);this._tooltipContent=n}},render:function(t,e,n){if(!c.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n,this._lastDataByCoordSys=null,this._alwaysShowContent=t.get("alwaysShowContent");var i=this._tooltipContent;i.update(),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var i=this._tooltipModel.get("triggerOn");l.register("itemTooltip",this._api,g(function(t,e,n){"none"!==i&&(0<=i.indexOf(t)?this._tryShow(e,n):"leave"===t&&this._hide(n))},this))},_keepShow:function(){var t=this._tooltipModel,e=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){i.manuallyShowTip(t,e,n,{x:i._lastX,y:i._lastY})})}},manuallyShowTip:function(t,e,n,i){if(i.from!==this.uid&&!c.node){var r=_(i,n);this._ticket="";var o=i.dataByCoordSys;if(i.tooltip&&null!=i.x&&null!=i.y){var a=m;a.position=[i.x,i.y],a.update(),a.tooltip=i.tooltip,this._tryShow({offsetX:i.x,offsetY:i.y,target:a},r)}else if(o)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,event:{},dataByCoordSys:i.dataByCoordSys,tooltipOption:i.tooltipOption},r);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,i))return;var s=u(i,e),l=s.point[0],h=s.point[1];null!=l&&null!=h&&this._tryShow({offsetX:l,offsetY:h,position:i.position,target:s.el,event:{}},r)}else null!=i.x&&null!=i.y&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target,event:{}},r))}},manuallyHideTip:function(t,e,n,i){var r=this._tooltipContent;this._alwaysShowContent||r.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,i.from!==this.uid&&this._hide(_(i,n))},_manuallyAxisShowTip:function(t,e,n,i){var r=i.seriesIndex,o=i.dataIndex,a=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=r&&null!=o&&null!=a){var s=e.getSeriesByIndex(r);if(s)if("axis"===(t=y([s.getData().getItemModel(o),s,(s.coordinateSystem||{}).model,t])).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:r,dataIndex:o,position:i.position}),!0}},_tryShow:function(t,e){var n=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var i=t.dataByCoordSys;i&&i.length?this._showAxisTooltip(i,t):n&&null!=n.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(t,n,e)):n&&n.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(t,n,e)):(this._lastDataByCoordSys=null,this._hide(e))}},_showOrMove:function(t,e){var n=t.get("showDelay");e=S.bind(e,this),clearTimeout(this._showTimout),0<n?this._showTimout=setTimeout(e,n):e()},_showAxisTooltip:function(t,e){var h=this._ecModel,n=this._tooltipModel,i=[e.offsetX,e.offsetY],c=[],u=[],r=y([e.tooltipOption,n]);v(t,function(t){v(t.dataByAxis,function(r){var o=h.getComponent(r.axisDim+"Axis",r.axisIndex),a=r.value,s=[];if(o&&null!=a){var l=p.getValueLabel(a,o.axis,h,r.seriesDataIndices,r.valueLabelOpt);S.each(r.seriesDataIndices,function(t){var e=h.getSeriesByIndex(t.seriesIndex),n=t.dataIndexInside,i=e&&e.getDataParams(n);i.axisDim=r.axisDim,i.axisIndex=r.axisIndex,i.axisType=r.axisType,i.axisId=r.axisId,i.axisValue=d.getAxisRawValue(o.axis,a),i.axisValueLabel=l,i&&(u.push(i),s.push(e.formatTooltip(n,!0)))});var t=l;c.push((t?f.encodeHTML(t)+"<br />":"")+s.join("<br />"))}})},this),c.reverse(),c=c.join("<br /><br />");var o=e.position;this._showOrMove(r,function(){this._updateContentNotChangedOnAxis(t)?this._updatePosition(r,o,i[0],i[1],this._tooltipContent,u):this._showTooltipContent(r,c,u,Math.random(),i[0],i[1],o)})},_showSeriesItemTooltip:function(t,e,n){var i=this._ecModel,r=e.seriesIndex,o=i.getSeriesByIndex(r),a=e.dataModel||o,s=e.dataIndex,l=e.dataType,h=a.getData(),c=y([h.getItemModel(s),a,o&&(o.coordinateSystem||{}).model,this._tooltipModel]),u=c.get("trigger");if(null==u||"item"===u){var f=a.getDataParams(s,l),d=a.formatTooltip(s,!1,l),p="item_"+a.name+"_"+s;this._showOrMove(c,function(){this._showTooltipContent(c,d,f,p,t.offsetX,t.offsetY,t.position,t.target)}),n({type:"showTip",dataIndexInside:s,dataIndex:h.getRawIndex(s),seriesIndex:r,from:this.uid})}},_showComponentItemTooltip:function(t,e,n){var i=e.tooltip;if("string"==typeof i){i={content:i,formatter:i}}var r=new s(i,this._tooltipModel,this._ecModel),o=r.get("content"),a=Math.random();this._showOrMove(r,function(){this._showTooltipContent(r,o,r.get("formatterParams")||{},a,t.offsetX,t.offsetY,t.position,e)}),n({type:"showTip",from:this.uid})},_showTooltipContent:function(n,t,i,e,r,o,a,s){if(this._ticket="",n.get("showContent")&&n.get("show")){var l=this._tooltipContent,h=n.get("formatter");a=a||n.get("position");var c=t;if(h&&"string"==typeof h)c=f.formatTpl(h,i,!0);else if("function"==typeof h){var u=g(function(t,e){t===this._ticket&&(l.setContent(e),this._updatePosition(n,a,r,o,l,i,s))},this);this._ticket=e,c=h(i,e,u)}l.setContent(c),l.show(n),this._updatePosition(n,a,r,o,l,i,s)}},_updatePosition:function(t,e,n,i,r,o,a){var s=this._api.getWidth(),l=this._api.getHeight();e=e||t.get("position");var h,c,u,f,d,p,g,v,m=r.getSize(),y=t.get("align"),_=t.get("verticalAlign"),x=a&&a.getBoundingRect().clone();if(a&&x.applyTransform(a.transform),"function"==typeof e&&(e=e([n,i],o,r.el,x,{viewSize:[s,l],contentSize:m.slice()})),S.isArray(e))n=T(e[0],s),i=T(e[1],l);else if(S.isObject(e)){e.width=m[0],e.height=m[1];var b=C.getLayoutRect(e,{width:s,height:l});n=b.x,i=b.y,_=y=null}else if("string"==typeof e&&a){n=(w=function(t,e,n){var i=n[0],r=n[1],o=0,a=0,s=e.width,l=e.height;switch(t){case"inside":o=e.x+s/2-i/2,a=e.y+l/2-r/2;break;case"top":o=e.x+s/2-i/2,a=e.y-r-5;break;case"bottom":o=e.x+s/2-i/2,a=e.y+l+5;break;case"left":o=e.x-i-5,a=e.y+l/2-r/2;break;case"right":o=e.x+s+5,a=e.y+l/2-r/2}return[o,a]}(e,x,m))[0],i=w[1]}else{var w;n=(w=function(t,e,n,i,r,o,a){var s=k(n),l=s.width,h=s.height;null!=o&&(i<t+l+o?t-=l+o:t+=o);null!=a&&(r<e+h+a?e-=h+a:e+=a);return[t,e]}(n,i,r.el,s,l,y?null:20,_?null:20))[0],i=w[1]}(y&&(n-=O(y)?m[0]/2:"right"===y?m[0]:0),_&&(i-=O(_)?m[1]/2:"bottom"===_?m[1]:0),t.get("confine"))&&(n=(w=(h=n,c=i,u=r.el,f=s,d=l,p=k(u),g=p.width,v=p.height,h=Math.min(h+g,f)-g,c=Math.min(c+v,d)-v,h=Math.max(h,0),c=Math.max(c,0),[h,c]))[0],i=w[1]);r.moveTo(n,i)},_updateContentNotChangedOnAxis:function(i){var t=this._lastDataByCoordSys,a=!!t&&t.length===i.length;return a&&v(t,function(t,e){var n=t.dataByAxis||{},o=(i[e]||{}).dataByAxis||[];(a&=n.length===o.length)&&v(n,function(t,e){var n=o[e]||{},i=t.seriesDataIndices||[],r=n.seriesDataIndices||[];(a&=t.value===n.value&&t.axisType===n.axisType&&t.axisId===n.axisId&&i.length===r.length)&&v(i,function(t,e){var n=r[e];a&=t.seriesIndex===n.seriesIndex&&t.dataIndex===n.dataIndex})})}),this._lastDataByCoordSys=i,!!a},_hide:function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},dispose:function(t,e){c.node||(this._tooltipContent.hide(),l.unregister("itemTooltip",e))}});function y(t){for(var e=t.pop();t.length;){var n=t.pop();n&&(n instanceof s&&(n=n.get("tooltip",!0)),"string"==typeof n&&(n={formatter:n}),e=new s(n,e,e.ecModel))}return e}function _(t,e){return t.dispatchAction||S.bind(e.dispatchAction,e)}function k(t){var e=t.clientWidth,n=t.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var i=document.defaultView.getComputedStyle(t);i&&(e+=parseInt(i.paddingLeft,10)+parseInt(i.paddingRight,10)+parseInt(i.borderLeftWidth,10)+parseInt(i.borderRightWidth,10),n+=parseInt(i.paddingTop,10)+parseInt(i.paddingBottom,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10))}return{width:e,height:n}}function O(t){return"center"===t||"middle"===t}t.exports=h},function(t,e,n){var d=n(597),p=n(617),o=n(618),g=n(605),v=n(606),m=d.each,y=v.toCamelCase,_=["","-webkit-","-moz-","-o-"];function i(r){var t,e,n,i,o,a,s,l=[],h=r.get("transitionDuration"),c=r.get("backgroundColor"),u=r.getModel("textStyle"),f=r.get("padding");return h&&l.push((n="left "+(t=h)+"s "+(e="cubic-bezier(0.23, 1, 0.32, 1)")+",top "+t+"s "+e,d.map(_,function(t){return t+"transition:"+n}).join(";"))),c&&(g.canvasSupported?l.push("background-Color:"+c):(l.push("background-Color:#"+p.toHex(c)),l.push("filter:alpha(opacity=70)"))),m(["width","color","radius"],function(t){var e="border-"+t,n=y(e),i=r.get(n);null!=i&&l.push(e+":"+i+("color"===t?"":"px"))}),l.push((o=[],a=(i=u).get("fontSize"),(s=i.getTextColor())&&o.push("color:"+s),o.push("font:"+i.getFont()),a&&o.push("line-height:"+Math.round(3*a/2)+"px"),m(["decoration","align"],function(t){var e=i.get(t);e&&o.push("text-"+t+":"+e)}),o.join(";"))),null!=f&&l.push("padding:"+v.normalizeCssArray(f).join("px ")+"px"),l.join(";")+";"}function r(n,t){var e=document.createElement("div"),i=this._zr=t.getZr();this.el=e,this._x=t.getWidth()/2,this._y=t.getHeight()/2,n.appendChild(e),this._container=n,this._show=!1,this._hideTimeout;var r=this;e.onmouseenter=function(){r._enterable&&(clearTimeout(r._hideTimeout),r._show=!0),r._inContent=!0},e.onmousemove=function(t){if(t=t||window.event,!r._enterable){var e=i.handler;o.normalizeEvent(n,t,!0),e.dispatch("mousemove",t)}},e.onmouseleave=function(){r._enterable&&r._show&&r.hideLater(r._hideDelay),r._inContent=!1}}r.prototype={constructor:r,_enterable:!0,update:function(){var t=this._container,e=t.currentStyle||document.defaultView.getComputedStyle(t),n=t.style;"absolute"!==n.position&&"absolute"!==e.position&&(n.position="relative")},show:function(t){clearTimeout(this._hideTimeout);var e=this.el;e.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+i(t)+";left:"+this._x+"px;top:"+this._y+"px;"+(t.get("extraCssText")||""),e.style.display=e.innerHTML?"block":"none",this._show=!0},setContent:function(t){this.el.innerHTML=null==t?"":t},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el;return[t.clientWidth,t.clientHeight]},moveTo:function(t,e){var n,i=this._zr;i&&i.painter&&(n=i.painter.getViewportRootOffset())&&(t+=n.offsetLeft,e+=n.offsetTop);var r=this.el.style;r.left=t+"px",r.top=e+"px",this._x=t,this._y=e},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(d.bind(this.hide,this),t)):this.hide())},isShow:function(){return this._show}};var a=r;t.exports=a},function(t,e,n){var i=n(599),r=n(597),o=n(608),a=i.extendComponentModel({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(t,e,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{}},mergeOption:function(t){a.superCall(this,"mergeOption",t)},optionUpdated:function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,n=0;n<t.length;n++){var i=t[n].get("name");if(this.isSelected(i)){this.select(i),e=!0;break}}!e&&this.select(t[0].get("name"))}},_updateData:function(t){var e=r.map(this.get("data")||[],function(t){return"string"!=typeof t&&"number"!=typeof t||(t={name:t}),new o(t,this,this.ecModel)},this);this._data=e;var n=r.map(t.getSeries(),function(t){return t.name});t.eachSeries(function(t){if(t.legendDataProvider){var e=t.legendDataProvider();n=n.concat(e.mapArray(e.getName))}}),this._availableNames=n},getData:function(){return this._data},select:function(t){var e=this.option.selected;if("single"===this.get("selectedMode")){var n=this._data;r.each(n,function(t){e[t.get("name")]=!1})}e[t]=!0},unSelect:function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},toggleSelected:function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},isSelected:function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&0<=r.indexOf(this._availableNames,t)},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",textStyle:{color:"#333"},selectedMode:!0,tooltip:{show:!1}}}),s=a;t.exports=s},function(t,e,n){var i=n(599),s=n(597);function r(e,n,t){var r,o={},a="toggleSelected"===e;return t.eachComponent("legend",function(i){a&&null!=r?i[r?"select":"unSelect"](n.name):(i[e](n.name),r=i.isSelected(n.name));var t=i.getData();s.each(t,function(t){var e=t.get("name");if("\n"!==e&&""!==e){var n=i.isSelected(e);o.hasOwnProperty(e)?o[e]=o[e]&&n:o[e]=n}})}),{name:n.name,selected:o}}i.registerAction("legendToggleSelect","legendselectchanged",s.curry(r,"toggleSelected")),i.registerAction("legendSelect","legendselected",s.curry(r,"select")),i.registerAction("legendUnSelect","legendunselected",s.curry(r,"unSelect"))},function(t,e,n){n(604).__DEV__;var i=n(599),C=n(597),T=n(619).createSymbol,k=n(598),c=n(762).makeBackground,u=n(611),g=C.curry,r=C.each,O=k.Group,o=i.extendComponentView({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new O),this._backgroundEl},getContentGroup:function(){return this._contentGroup},render:function(t,e,n){if(this.resetInner(),t.get("show",!0)){var i=t.get("align");i&&"auto"!==i||(i="right"===t.get("left")&&"vertical"===t.get("orient")?"right":"left"),this.renderInner(i,t,e,n);var r=t.getBoxLayoutParams(),o={width:n.getWidth(),height:n.getHeight()},a=t.get("padding"),s=u.getLayoutRect(r,o,a),l=this.layoutInner(t,i,s),h=u.getLayoutRect(C.defaults({width:l.width,height:l.height},r),o,a);this.group.attr("position",[h.x-l.x,h.y-l.y]),this.group.add(this._backgroundEl=c(l,t))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl)},renderInner:function(l,h,c,u){var f=this.getContentGroup(),d=C.createHashMap(),p=h.get("selectedMode");r(h.getData(),function(r,o){var a=r.get("name");if(this.newlineDisabled||""!==a&&"\n"!==a){var t=c.getSeriesByName(a)[0];if(!d.get(a))if(t){var e=t.getData(),n=e.getVisual("color");"function"==typeof n&&(n=n(t.getDataParams(0)));var i=e.getVisual("legendSymbol")||"roundRect",s=e.getVisual("symbol");this._createItem(a,o,r,h,i,s,l,n,p).on("click",g(v,a,u)).on("mouseover",g(m,t,null,u)).on("mouseout",g(y,t,null,u)),d.set(a,!0)}else c.eachRawSeries(function(t){if(!d.get(a)&&t.legendDataProvider){var e=t.legendDataProvider(),n=e.indexOfName(a);if(n<0)return;var i=e.getItemVisual(n,"color");this._createItem(a,o,r,h,"roundRect",null,l,i,p).on("click",g(v,a,u)).on("mouseover",g(m,t,a,u)).on("mouseout",g(y,t,a,u)),d.set(a,!0)}},this)}else f.add(new O({newline:!0}))},this)},_createItem:function(t,e,n,i,r,o,a,s,l){var h=i.get("itemWidth"),c=i.get("itemHeight"),u=i.get("inactiveColor"),f=i.isSelected(t),d=new O,p=n.getModel("textStyle"),g=n.get("icon"),v=n.getModel("tooltip"),m=v.parentModel;if(r=g||r,d.add(T(r,0,0,h,c,f?s:u,!0)),!g&&o&&(o!==r||"none"==o)){var y=.8*c;"none"===o&&(o="circle"),d.add(T(o,(h-y)/2,(c-y)/2,y,y,f?s:u))}var _="left"===a?h+5:-5,x=a,b=i.get("formatter"),w=t;"string"==typeof b&&b?w=b.replace("{name}",null!=t?t:""):"function"==typeof b&&(w=b(t)),d.add(new k.Text({style:k.setTextStyle({},p,{text:w,x:_,y:c/2,textFill:f?p.getTextColor():u,textAlign:x,textVerticalAlign:"middle"})}));var S=new k.Rect({shape:d.getBoundingRect(),invisible:!0,tooltip:v.get("show")?C.extend({content:t,formatter:m.get("formatter",!0)||function(){return t},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:t,$vars:["name"]}},v.option):null});return d.add(S),d.eachChild(function(t){t.silent=!0}),S.silent=!l,this.getContentGroup().add(d),k.setHoverStyle(d),d.__legendDataIndex=e,d},layoutInner:function(t,e,n){var i=this.getContentGroup();u.box(t.get("orient"),i,t.get("itemGap"),n.width,n.height);var r=i.getBoundingRect();return i.attr("position",[-r.x,-r.y]),this.group.getBoundingRect()}});function v(t,e){e.dispatchAction({type:"legendToggleSelect",name:t})}function m(t,e,n){var i=n.getZr().storage.getDisplayList()[0];i&&i.useHoverLayer||t.get("legendHoverLink")&&n.dispatchAction({type:"highlight",seriesName:t.name,name:e})}function y(t,e,n){var i=n.getZr().storage.getDisplayList()[0];i&&i.useHoverLayer||t.get("legendHoverLink")&&n.dispatchAction({type:"downplay",seriesName:t.name,name:e})}t.exports=o},function(t,e,n){var i=n(611),s=i.getLayoutRect,l=i.box,h=i.positionElement,r=n(606),o=n(598);e.layout=function(t,e,n){var i=e.getBoxLayoutParams(),r=e.get("padding"),o={width:n.getWidth(),height:n.getHeight()},a=s(i,o,r);l(e.get("orient"),t,e.get("itemGap"),a.width,a.height),h(t,i,o,r)},e.makeBackground=function(t,e){var n=r.normalizeCssArray(e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),t=new o.Rect({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1})}},function(t,e){t.exports=function(t){var n=t.findComponents({mainType:"legend"});n&&n.length&&t.filterSeries(function(t){for(var e=0;e<n.length;e++)if(!n[e].isSelected(t.name))return!1;return!0})}},function(t,e,n){t.exports={default:n(765),__esModule:!0}},function(t,e,n){n(311),n(308),t.exports=n(766)},function(t,e,n){var i=n(36),r=n(310);t.exports=n(31).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},function(t,e,n){t.exports={default:n(769),__esModule:!0}},,function(t,e,n){n(770),t.exports=n(31).Object.keys},function(t,e,n){var i=n(124),r=n(123);n(771)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){var r=n(49),o=n(31),a=n(84);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],i={};i[t]=e(n),r(r.S+r.F*a(function(){n(1)}),"Object",i)}},function(t,e,n){"use strict";n.d(e,"a",function(){return v});var i=n(777),x=n.n(i),r=n(764),b=n.n(r),o=n(767),w=n.n(o),a=n(305),s=n.n(a),l=n(83),h=n.n(l),c=n(306),u=n.n(c),f=n(309),d=n.n(f),p=n(307),g=n(312),S=n(82),v={data:function(){return{storeAttributeData:[]}},mounted:function(){},computed:d()({},Object(g.c)(["ageText2Value"])),methods:{getStoreAttributeDataAction:function(n,i){var r=this;return u()(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("time_ranges"),console.log(n),t.next=4,p._21(h()(n),h()(i));case 4:(e=t.sent)&&200===e.code&&(r.storeAttributeData=e.data,console.log("this.storeAttributeData in baseMixin"),console.log(r.storeAttributeData));case 6:case"end":return t.stop()}},t,r)}))()},sumTest:function(){for(var t=[],e=0;e<8;e+=1){t.push([]);for(var n=0;n<2;n+=1){t[e].push([]);for(var i=0;i<4;i+=1)t[e][n].push(Math.floor(10*Math.random()))}}this.sumAttributes({age:["child","young"],gender:["male","female"]},t)},sumAttributes:function(t,e){if(null===e)return 0;var n=0,i=S.a.category_describes,r=!0,o=!1,a=void 0;try{for(var s,l=b()(i);!(r=(s=l.next()).done);r=!0){var h=s.value;if(-1===w()(t).indexOf(w()(h)[0])){var c=w()(h)[0];t[c]=x()(h[c])}}}catch(t){o=!0,a=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}for(var u in e){var f=w()(i[0])[0],d=i[0][f];if(-1!==t[f].indexOf(d[u]))for(var p in e[u]){var g=w()(i[1])[0],v=i[1][g];if(-1!==t[g].indexOf(v[p]))for(var m in e[u][p]){var y=w()(i[2])[0],_=i[2][y];-1!==t[y].indexOf(_[m])&&(n+=e[u][p][m])}}}return n}}}},,,,,function(t,e,n){t.exports={default:n(778),__esModule:!0}},function(t,e,n){n(779),t.exports=n(31).Object.values},function(t,e,n){var i=n(49),r=n(780)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){var l=n(123),h=n(85),c=n(313).f;t.exports=function(s){return function(t){for(var e,n=h(t),i=l(n),r=i.length,o=0,a=[];o<r;)c.call(n,e=i[o++])&&a.push(s?[e,n[e]]:n[e]);return a}}},,,function(t,e,n){"use strict";e.__esModule=!0;var i,r=n(784),o=(i=r)&&i.__esModule?i:{default:i};e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,o.default)(t)}},function(t,e,n){t.exports={default:n(785),__esModule:!0}},function(t,e,n){n(308),n(786),t.exports=n(31).Array.from},function(t,e,n){"use strict";var f=n(62),i=n(49),d=n(124),p=n(314),g=n(315),v=n(127),m=n(787),y=n(310);i(i.S+i.F*!n(316)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,r,o=d(t),a="function"==typeof this?this:Array,s=arguments.length,l=1<s?arguments[1]:void 0,h=void 0!==l,c=0,u=y(o);if(h&&(l=f(l,2<s?arguments[2]:void 0,2)),null==u||a==Array&&g(u))for(n=new a(e=v(o.length));c<e;c++)m(n,c,h?l(o[c],c):o[c]);else for(r=u.call(o),n=new a;!(i=r.next()).done;c++)m(n,c,h?p(r,l,[i.value,c],!0):i.value);return n.length=c,n}})},function(t,e,n){"use strict";var i=n(56),r=n(126);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},,,,,,,function(t,e,n){"use strict";e.__esModule=!0;var i=r(n(802)),l=r(n(764));function r(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(Array.isArray(t))return t;if((0,i.default)(Object(t)))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=(0,l.default)(t);!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},,function(t,F,e){"use strict";(function(t){var i=e(1028),o=e(1029),a=e(884);function n(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return r(this,t,e,n)}function r(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=c(t,e);return t}(t,e,n,i):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|d(e,n),r=(t=s(t,i)).write(e,n);r!==i&&(t=t.slice(0,r));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|f(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?s(t,0):c(t,e);if("Buffer"===e.type&&a(e.data))return c(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=s(t,e<0?0:0|f(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function c(t,e){var n=e.length<0?0:0|f(e.length);t=s(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function f(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return R(t).length;default:if(i)return j(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function g(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=u.from(e,i)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,i,r);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,i,r){var o,a=1,s=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s/=a=2,l/=2,n/=2}function h(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var c=-1;for(o=n;o<s;o++)if(h(t,o)===h(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(s<n+l&&(n=s-l),o=n;0<=o;o--){for(var u=!0,f=0;f<l;f++)if(h(t,o+f)!==h(e,f)){u=!1;break}if(u)return o}return-1}function m(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?r<(i=Number(i))&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<i&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function y(t,e,n,i){return B(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function _(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function x(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,a,s,l,h=t[r],c=null,u=239<h?4:223<h?3:191<h?2:1;if(r+u<=n)switch(u){case 1:h<128&&(c=h);break;case 2:128==(192&(o=t[r+1]))&&127<(l=(31&h)<<6|63&o)&&(c=l);break;case 3:o=t[r+1],a=t[r+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&h)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:o=t[r+1],a=t[r+2],s=t[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&h)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,u=1):65535<c&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=u}return function(t){var e=t.length;if(e<=b)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=b));return n}(i)}F.Buffer=u,F.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},F.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),F.kMaxLength=n(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return r(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return i=null,o=e,a=n,l(r=t),r<=0?s(i,r):void 0!==o?"string"==typeof a?s(i,r).fill(o,a):s(i,r).fill(o):s(i,r);var i,r,o,a},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;var i=u.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var o=t[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?x(this,0,t):function(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return x(this,e,n);case"ascii":return w(this,e,n);case"latin1":case"binary":return S(this,e,n);case"base64":return _(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",e=F.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,i,r){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(r<=i&&n<=e)return 0;if(r<=i)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(i,r),h=t.slice(e,n),c=0;c<s;++c)if(l[c]!==h[c]){o=l[c],a=h[c];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},u.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||r<n)&&(n=r),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o,a,s,l,h,c,u,f,d,p=!1;;)switch(i){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return f=e,d=n,B(j(t,(u=this).length-f),u,f,d);case"ascii":return y(this,t,e,n);case"latin1":case"binary":return y(this,t,e,n);case"base64":return l=this,h=e,c=n,B(R(t),l,h,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=e,s=n,B(function(t,e){for(var n,i,r,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(t,(o=this).length-a),o,a,s);default:if(p)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),p=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function w(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function S(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function C(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||i<n)&&(n=i);for(var r="",o=e;o<n;++o)r+=L(t[o]);return r}function T(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function k(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,n,i,r,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function A(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function M(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function D(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(t,e,n,i,r){return r||D(t,0,n,4),o.write(t,e,n,i,23,4),n+4}function P(t,e,n,i,r){return r||D(t,0,n,8),o.write(t,e,n,i,52,8),n+8}u.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):i<e&&(e=i),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var r=e-t;n=new u(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var i=this[t+--e],r=1;0<e&&(r*=256);)i+=this[t+--e]*r;return i},u.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return(r*=128)<=i&&(i-=Math.pow(2,8*e)),i},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var i=e,r=1,o=this[t+--i];0<i&&(r*=256);)o+=this[t+--i]*r;return(r*=128)<=o&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||O(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||O(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;0<=--r&&(o*=256);)this[e+r]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;0<=--o&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return I(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return I(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return P(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return P(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),0<i&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;0<=r;--r)t[r+e]=this[r+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:j(new u(t,i).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var E=/[^+\/0-9A-Za-z-_]/g;function L(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],a=0;a<i;++a){if(55295<(n=t.charCodeAt(a))&&n<57344){if(!r){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===i){-1<(e-=3)&&o.push(239,191,189);continue}r=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(e-=3)&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function R(t){return i.toByteArray(function(t){var e;if((t=(e=t,e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(E,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(F,e(48))},function(t,e,n){"use strict";var i=n(833),r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=u;var o=n(812);o.inherits=n(788);var a=n(889),s=n(893);o.inherits(u,a);for(var l=r(s.prototype),h=0;h<l.length;h++){var c=l[h];u.prototype[c]||(u.prototype[c]=s.prototype[c])}function u(t){if(!(this instanceof u))return new u(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||i.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),u.prototype._destroy=function(t,e){this.push(null),this.end(),i.nextTick(e,t)}},,,,function(t,e,n){t.exports={default:n(803),__esModule:!0}},function(t,e,n){n(311),n(308),t.exports=n(804)},function(t,e,n){var i=n(128),r=n(20)("iterator"),o=n(57);t.exports=n(31).isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||o.hasOwnProperty(i(e))}},,,,,,,,function(t,n,e){(function(t){function e(t){return Object.prototype.toString.call(t)}n.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},n.isBoolean=function(t){return"boolean"==typeof t},n.isNull=function(t){return null===t},n.isNullOrUndefined=function(t){return null==t},n.isNumber=function(t){return"number"==typeof t},n.isString=function(t){return"string"==typeof t},n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=function(t){return void 0===t},n.isRegExp=function(t){return"[object RegExp]"===e(t)},n.isObject=function(t){return"object"==typeof t&&null!==t},n.isDate=function(t){return"[object Date]"===e(t)},n.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},n.isFunction=function(t){return"function"==typeof t},n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t.isBuffer}).call(n,e(797).Buffer)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(764),h=n.n(i),r={data:function(){return{}},created:function(){},methods:{getDataByKeys:function(){var t=[];for(var e in this.storeAttributeData){var n={},i=!0,r=!1,o=void 0;try{for(var a,s=h()(this.requestParamKeys);!(i=(a=s.next()).done);i=!0){var l=a.value;n[l]=this.storeAttributeData[e][l]}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}t.push(n)}return t}}}},,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";(function(s){!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?t.exports={nextTick:function(t,e,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var r,o,a=arguments.length;switch(a){case 0:case 1:return s.nextTick(t);case 2:return s.nextTick(function(){t.call(null,e)});case 3:return s.nextTick(function(){t.call(null,e,n)});case 4:return s.nextTick(function(){t.call(null,e,n,i)});default:for(r=new Array(a-1),o=0;o<r.length;)r[o++]=arguments[o];return s.nextTick(function(){t.apply(null,r)})}}}:t.exports=s}).call(e,n(125))},function(t,e,n){var i=n(797),r=i.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(o(i,e),e.Buffer=a),o(r,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){(function(Buffer,process){var fabric=fabric||{version:"1.7.22"},XSb,YSb,ZSb,$Sb,_Sb,aTb,JZb,KZb,LZb,Q_b,R_b,S_b,T_b,U_b,Vrc,Wrc,zsc,uwc,vwc,wwc,mxc,nxc,AAc,FXc,a0c,Y4c,Z4c,f7c,K7c;exports.fabric=fabric,"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window,window.fabric=fabric):(fabric.document=__webpack_require__(1030).jsdom(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E")),fabric.document.createWindow?fabric.window=fabric.document.createWindow():fabric.window=fabric.document.parentWindow),fabric.isTouchSupported="ontouchstart"in fabric.window,fabric.isLikelyNode=void 0!==Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",fabric.fontPaths={},fabric.iMatrix=[1,0,0,1,0,0],fabric.canvasModule="canvas",fabric.perfLimitSizeTotal=2097152,fabric.maxCacheSideLimit=4096,fabric.minCacheSideLimit=256,fabric.charWidthsCache={},fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,function(){function i(t,e){if(this.__eventListeners[t]){var n=this.__eventListeners[t];e?n[n.indexOf(e)]=!1:fabric.util.array.fill(n,!1)}}function t(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in t)this.on(n,t[n]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function e(t,e){if(this.__eventListeners){if(0===arguments.length)for(t in this.__eventListeners)i.call(this,t);else if(1===arguments.length&&"object"==typeof t)for(var n in t)i.call(this,n,t[n]);else i.call(this,t,e);return this}}function n(t,e){if(this.__eventListeners){var n=this.__eventListeners[t];if(n){for(var i=0,r=n.length;i<r;i++)n[i]&&n[i].call(this,e||{});return this.__eventListeners[t]=n.filter(function(t){return!1!==t}),this}}}fabric.Observable={observe:t,stopObserving:e,fire:n,on:t,off:e,trigger:n}}(),fabric.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(t,e,n){var i=this.getObjects();return n?i[e]=t:i.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.renderAll(),this},remove:function(){for(var t,e=this.getObjects(),n=!1,i=0,r=arguments.length;i<r;i++)-1!==(t=e.indexOf(arguments[i]))&&(n=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&n&&this.renderAll(),this},forEachObject:function(t,e){for(var n=this.getObjects(),i=0,r=n.length;i<r;i++)t.call(e,n[i],i,n);return this},getObjects:function(e){return void 0===e?this._objects:this._objects.filter(function(t){return t.type===e})},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return-1<this.getObjects().indexOf(t)},complexity:function(){return this.getObjects().reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},fabric.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof fabric.Gradient||this.set(e,new fabric.Gradient(t))},_initPattern:function(t,e,n){!t||!t.source||t instanceof fabric.Pattern?n&&n():this.set(e,new fabric.Pattern(t,n))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var e=fabric.util.getFunctionBody(t.clipTo);void 0!==e&&(this.clipTo=new Function("ctx",e))}},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},XSb=exports,YSb=Math.sqrt,ZSb=Math.atan2,$Sb=Math.pow,_Sb=Math.abs,aTb=Math.PI/180,fabric.util={removeFromArray:function(t,e){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*aTb},radiansToDegrees:function(t){return t/aTb},rotatePoint:function(t,e,n){t.subtractEquals(e);var i=fabric.util.rotateVector(t,n);return new fabric.Point(i.x,i.y).addEquals(e)},rotateVector:function(t,e){var n=Math.sin(e),i=Math.cos(e);return{x:t.x*i-t.y*n,y:t.x*n+t.y*i}},transformPoint:function(t,e,n){return n?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t){var e=[t[0].x,t[1].x,t[2].x,t[3].x],n=fabric.util.array.min(e),i=fabric.util.array.max(e),r=Math.abs(n-i),o=[t[0].y,t[1].y,t[2].y,t[3].y],a=fabric.util.array.min(o),s=fabric.util.array.max(o);return{left:n,top:a,width:r,height:Math.abs(a-s)}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),n=[e*t[3],-e*t[1],-e*t[2],e*t[0]],i=fabric.util.transformPoint({x:t[4],y:t[5]},n,!0);return n[4]=-i.x,n[5]=-i.y,n},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var n=/\D{0,2}$/.exec(t),i=parseFloat(t);switch(e||(e=fabric.Text.DEFAULT_SVG_FONT_SIZE),n[0]){case"mm":return i*fabric.DPI/25.4;case"cm":return i*fabric.DPI/2.54;case"in":return i*fabric.DPI;case"pt":return i*fabric.DPI/72;case"pc":return i*fabric.DPI/72*12;case"em":return i*e;default:return i}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},resolveNamespace:function(t){if(!t)return fabric;var e,n=t.split("."),i=n.length,r=XSb||fabric.window;for(e=0;e<i;++e)r=r[n[e]];return r},loadImage:function(t,e,n,i){if(t){var r=fabric.util.createImage();r.onload=function(){e&&e.call(n,r),r=r.onload=r.onerror=null},r.onerror=function(){fabric.log("Error loading "+r.src),e&&e.call(n,null,!0),r=r.onload=r.onerror=null},0!==t.indexOf("data")&&i&&(r.crossOrigin=i),r.src=t}else e&&e.call(n,t)},enlivenObjects:function(t,e,r,o){function a(){++n===i&&e&&e(s)}var s=[],n=0,i=(t=t||[]).length;i?t.forEach(function(n,i){n&&n.type?fabric.util.getKlass(n.type,r).fromObject(n,function(t,e){e||(s[i]=t),o&&o(n,t,e),a()},!0):a()}):e&&e(s)},enlivenPatterns:function(t,e){function n(){++r===o&&e&&e(i)}var i=[],r=0,o=(t=t||[]).length;o?t.forEach(function(t,e){t&&t.source?new fabric.Pattern(t,function(t){i[e]=t,n()}):(i[e]=t,n())}):e&&e(i)},groupSVGElements:function(t,e,n){var i;return i=new fabric.PathGroup(t,e),void 0!==n&&(i.sourcePath=n),i},populateWithProperties:function(t,e,n){if(n&&"[object Array]"===Object.prototype.toString.call(n))for(var i=0,r=n.length;i<r;i++)n[i]in t&&(e[n[i]]=t[n[i]])},drawDashedLine:function(t,e,n,i,r,o){var a=i-e,s=r-n,l=YSb(a*a+s*s),h=ZSb(s,a),c=o.length,u=0,f=!0;for(t.save(),t.translate(e,n),t.moveTo(0,0),t.rotate(h),e=0;e<l;)l<(e+=o[u++%c])&&(e=l),t[f?"lineTo":"moveTo"](e,0),f=!f;t.restore()},createCanvasElement:function(t){return t||(t=fabric.document.createElement("canvas")),t.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(t),t},createImage:function(){return fabric.isLikelyNode?new(__webpack_require__(874).Image):fabric.document.createElement("img")},createAccessors:function(t){var e,n,i,r,o,a=t.prototype;for(e=a.stateProperties.length;e--;)r="set"+(i=(n=a.stateProperties[e]).charAt(0).toUpperCase()+n.slice(1)),a[o="get"+i]||(a[o]=new Function('return this.get("'+n+'")')),a[r]||(a[r]=new Function("value",'return this.set("'+n+'", value)'))},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e,n){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],n?0:t[0]*e[4]+t[2]*e[5]+t[4],n?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var e=ZSb(t[1],t[0]),n=$Sb(t[0],2)+$Sb(t[1],2),i=YSb(n),r=(t[0]*t[3]-t[2]*t[1])/i,o=ZSb(t[0]*t[2]+t[1]*t[3],n);return{angle:e/aTb,scaleX:i,scaleY:r,skewX:o/aTb,skewY:0,translateX:t[4],translateY:t[5]}},customTransformMatrix:function(t,e,n){var i=[1,0,_Sb(Math.tan(n*aTb)),1],r=[_Sb(t),0,0,_Sb(e)];return fabric.util.multiplyTransformMatrices(r,i,!0)},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.setAngle(0)},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,n,i){0<i&&(i<e?e-=i:e=0,i<n?n-=i:n=0);var r,o=!0,a=t.getImageData(e,n,2*i||1,2*i||1),s=a.data.length;for(r=3;r<s&&!1!=(o=a.data[r]<=0);r+=4);return a=null,o},parsePreserveAspectRatioAttribute:function(t){var e,n="meet",i=t.split(" ");return i&&i.length&&("meet"!==(n=i.pop())&&"slice"!==n?(e=n,n="meet"):i.length&&(e=i.pop())),{meetOrSlice:n,alignX:"none"!==e?e.slice(1,4):"none",alignY:"none"!==e?e.slice(5,8):"none"}},clearFabricFontCache:function(t){t?fabric.charWidthsCache[t]&&delete fabric.charWidthsCache[t]:fabric.charWidthsCache={}},limitDimsByArea:function(t,e){var n=Math.sqrt(e*t),i=Math.floor(e/n);return{x:Math.floor(n),y:i}},capValue:function(t,e,n){return Math.max(t,Math.min(e,n))}},function(){var j={},w={},D={},R=Array.prototype.join;function v(t,e,n,i,r,o,a){var s=R.call(arguments);if(j[s])return j[s];var l=Math.PI,h=a*l/180,c=Math.sin(h),u=Math.cos(h),f=0,d=0,p=-u*t*.5-c*e*.5,g=-u*e*.5+c*t*.5,v=(n=Math.abs(n))*n,m=(i=Math.abs(i))*i,y=g*g,_=p*p,x=v*m-v*y-m*_,b=0;if(x<0){var w=Math.sqrt(1-x/(v*m));n*=w,i*=w}else b=(r===o?-1:1)*Math.sqrt(x/(v*y+m*_));var S=b*n*g/i,C=-b*i*p/n,T=u*S-c*C+.5*t,k=c*S+u*C+.5*e,O=F(1,0,(p-S)/n,(g-C)/i),A=F((p-S)/n,(g-C)/i,(-p-S)/n,(-g-C)/i);0===o&&0<A?A-=2*l:1===o&&A<0&&(A+=2*l);for(var M=Math.ceil(Math.abs(A/l*2)),D=[],I=A/M,P=8/3*Math.sin(I/4)*Math.sin(I/4)/Math.sin(I/2),E=O+I,L=0;L<M;L++)D[L]=B(O,E,u,c,n,i,T,k,P,f,d),f=D[L][4],d=D[L][5],O=E,E+=I;return j[s]=D}function B(t,e,n,i,r,o,a,s,l,h,c){var u=R.call(arguments);if(w[u])return w[u];var f=Math.cos(t),d=Math.sin(t),p=Math.cos(e),g=Math.sin(e),v=n*r*p-i*o*g+a,m=i*r*p+n*o*g+s,y=h+l*(-n*r*d-i*o*f),_=c+l*(-i*r*d+n*o*f),x=v+l*(n*r*g+i*o*p),b=m+l*(i*r*g-n*o*p);return w[u]=[y,_,x,b,v,m],w[u]}function F(t,e,n,i){var r=Math.atan2(e,t),o=Math.atan2(i,n);return r<=o?o-r:2*Math.PI-(r-o)}function m(t,e,n,i,r,o,a,s){var l=R.call(arguments);if(D[l])return D[l];var h,c,u,f,d,p,g,v,m=Math.sqrt,y=Math.min,_=Math.max,x=Math.abs,b=[],w=[[],[]];c=6*t-12*n+6*r,h=-3*t+9*n-9*r+3*a,u=3*n-3*t;for(var S=0;S<2;++S)if(0<S&&(c=6*e-12*i+6*o,h=-3*e+9*i-9*o+3*s,u=3*i-3*e),x(h)<1e-12){if(x(c)<1e-12)continue;0<(f=-u/c)&&f<1&&b.push(f)}else(g=c*c-4*u*h)<0||(0<(d=(-c+(v=m(g)))/(2*h))&&d<1&&b.push(d),0<(p=(-c-v)/(2*h))&&p<1&&b.push(p));for(var C,T,k,O=b.length,A=O;O--;)C=(k=1-(f=b[O]))*k*k*t+3*k*k*f*n+3*k*f*f*r+f*f*f*a,w[0][O]=C,T=k*k*k*e+3*k*k*f*i+3*k*f*f*o+f*f*f*s,w[1][O]=T;w[0][A]=t,w[1][A]=e,w[0][A+1]=a,w[1][A+1]=s;var M=[{x:y.apply(null,w[0]),y:y.apply(null,w[1])},{x:_.apply(null,w[0]),y:_.apply(null,w[1])}];return D[l]=M}fabric.util.drawArc=function(t,e,n,i){for(var r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],h=[[],[],[],[]],c=v(i[5]-e,i[6]-n,r,o,s,l,a),u=0,f=c.length;u<f;u++)h[u][0]=c[u][0]+e,h[u][1]=c[u][1]+n,h[u][2]=c[u][2]+e,h[u][3]=c[u][3]+n,h[u][4]=c[u][4]+e,h[u][5]=c[u][5]+n,t.bezierCurveTo.apply(t,h[u])},fabric.util.getBoundsOfArc=function(t,e,n,i,r,o,a,s,l){for(var h,c=0,u=0,f=[],d=v(s-t,l-e,n,i,o,a,r),p=0,g=d.length;p<g;p++)h=m(c,u,d[p][0],d[p][1],d[p][2],d[p][3],d[p][4],d[p][5]),f.push({x:h[0].x+t,y:h[0].y+e}),f.push({x:h[1].x+t,y:h[1].y+e}),c=d[p][4],u=d[p][5];return f},fabric.util.getBoundsOfCurve=m}(),function(){var a=Array.prototype.slice;function n(t,e,n){if(t&&0!==t.length){var i=t.length-1,r=e?t[i][e]:t[i];if(e)for(;i--;)n(t[i][e],r)&&(r=t[i][e]);else for(;i--;)n(t[i],r)&&(r=t[i]);return r}}Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var i=0;if(0<arguments.length&&((i=Number(arguments[1]))!=i?i=0:0!==i&&i!==Number.POSITIVE_INFINITY&&i!==Number.NEGATIVE_INFINITY&&(i=(0<i||-1)*Math.floor(Math.abs(i)))),n<=i)return-1;for(var r=0<=i?i:Math.max(n-Math.abs(i),0);r<n;r++)if(r in e&&e[r]===t)return r;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var n=0,i=this.length>>>0;n<i;n++)n in this&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var n=[],i=0,r=this.length>>>0;i<r;i++)i in this&&(n[i]=t.call(e,this[i],i,this));return n}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var n=0,i=this.length>>>0;n<i;n++)if(n in this&&!t.call(e,this[n],n,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var n=0,i=this.length>>>0;n<i;n++)if(n in this&&t.call(e,this[n],n,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var n,i=[],r=0,o=this.length>>>0;r<o;r++)r in this&&(n=this[r],t.call(e,n,r,this)&&i.push(n));return i}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,n=this.length>>>0,i=0;if(1<arguments.length)e=arguments[1];else for(;;){if(i in this){e=this[i++];break}if(++i>=n)throw new TypeError}for(;i<n;i++)i in this&&(e=t.call(null,e,this[i],i,this));return e}),fabric.util.array={fill:function(t,e){for(var n=t.length;n--;)t[n]=e;return t},invoke:function(t,e){for(var n=a.call(arguments,2),i=[],r=0,o=t.length;r<o;r++)i[r]=n.length?t[r][e].apply(t[r],n):t[r][e].call(t[r]);return i},min:function(t,e){return n(t,e,function(t,e){return t<e})},max:function(t,e){return n(t,e,function(t,e){return e<=t})}}}(),function(){function a(t,e,n){if(n)if(!fabric.isLikelyNode&&e instanceof Element)t=e;else if(e instanceof Array){t=[];for(var i=0,r=e.length;i<r;i++)t[i]=a({},e[i],n)}else if(e&&"object"==typeof e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=a({},e[o],n));else t=e;else for(var o in e)t[o]=e[o];return t}fabric.util.object={extend:a,clone:function(t,e){return a({},t,e)}}}(),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},JZb=Array.prototype.slice,KZb=Function.prototype.apply,LZb=function(){},Function.prototype.bind||(Function.prototype.bind=function(t){var e,n=this,i=JZb.call(arguments,1);return e=i.length?function(){return KZb.call(n,this instanceof LZb?this:t,i.concat(JZb.call(arguments)))}:function(){return KZb.call(n,this instanceof LZb?this:t,arguments)},LZb.prototype=this.prototype,e.prototype=new LZb,e}),function(){var o=Array.prototype.slice,a=function(){},n=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),s=function(t,i,r){for(var e in i)e in t.prototype&&"function"==typeof t.prototype[e]&&-1<(i[e]+"").indexOf("callSuper")?t.prototype[e]=function(n){return function(){var t=this.constructor.superclass;this.constructor.superclass=r;var e=i[n].apply(this,arguments);if(this.constructor.superclass=t,"initialize"!==n)return e}}(e):t.prototype[e]=i[e],n&&(i.toString!==Object.prototype.toString&&(t.prototype.toString=i.toString),i.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=i.valueOf))};function l(){}function h(t){for(var e=null,n=this;n.constructor.superclass;){var i=n.constructor.superclass.prototype[t];if(n[t]!==i){e=i;break}n=n.constructor.superclass.prototype}return e?1<arguments.length?e.apply(this,o.call(arguments,1)):e.call(this):console.log("tried to callSuper "+t+", method not found in prototype chain",this)}fabric.util.createClass=function(){var t=null,e=o.call(arguments,0);function n(){this.initialize.apply(this,arguments)}"function"==typeof e[0]&&(t=e.shift()),n.superclass=t,n.subclasses=[],t&&(l.prototype=t.prototype,n.prototype=new l,t.subclasses.push(n));for(var i=0,r=e.length;i<r;i++)s(n,e[i],t);return n.prototype.initialize||(n.prototype.initialize=a),(n.prototype.constructor=n).prototype.callSuper=h,n}}(),function(){var i="unknown";function t(t){var e,n,i=Array.prototype.slice.call(arguments,1),r=i.length;for(n=0;n<r;n++)if(e=typeof t[i[n]],!/^(?:function|object|unknown)$/.test(e))return!1;return!0}var r,o,e,n,s=(e=0,function(t){return t.__uniqueID||(t.__uniqueID="uniqueID__"+e++)});function a(t,e){return{handler:e,wrappedHandler:(n=t,i=e,function(t){i.call(r(n),t||fabric.window.event)})};var n,i}n={},r=function(t){return n[t]},o=function(t,e){n[t]=e};var l,h,c=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),u=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),f={},d={};c?(l=function(t,e,n,i){t&&t.addEventListener(e,n,!u&&i)},h=function(t,e,n,i){t&&t.removeEventListener(e,n,!u&&i)}):u?(l=function(t,e,n){if(t){var i=s(t);o(i,t),f[i]||(f[i]={}),f[i][e]||(f[i][e]=[]);var r=a(i,n);f[i][e].push(r),t.attachEvent("on"+e,r.wrappedHandler)}},h=function(t,e,n){if(t){var i,r=s(t);if(f[r]&&f[r][e])for(var o=0,a=f[r][e].length;o<a;o++)(i=f[r][e][o])&&i.handler===n&&(t.detachEvent("on"+e,i.wrappedHandler),f[r][e][o]=null)}}):(l=function(t,e,n){if(t){var r,o,i=s(t);if(d[i]||(d[i]={}),!d[i][e]){d[i][e]=[];var a=t["on"+e];a&&d[i][e].push(a),t["on"+e]=(r=i,o=e,function(t){if(d[r]&&d[r][o])for(var e=d[r][o],n=0,i=e.length;n<i;n++)e[n].call(this,t||fabric.window.event)})}d[i][e].push(n)}},h=function(t,e,n){if(t){var i=s(t);if(d[i]&&d[i][e])for(var r=d[i][e],o=0,a=r.length;o<a;o++)r[o]===n&&r.splice(o,1)}}),fabric.util.addListener=l,fabric.util.removeListener=h;var p=function(t){return typeof t.clientX!==i?t.clientX:0},g=function(t){return typeof t.clientY!==i?t.clientY:0};function v(t,e,n){var i="touchend"===t.type?"changedTouches":"touches";return t[i]&&t[i][0]&&t[i][0][e]-(t[i][0][e]-t[i][0][n])||t[n]}fabric.isTouchSupported&&(p=function(t){return v(t,"pageX","clientX")},g=function(t){return v(t,"pageY","clientY")}),fabric.util.getPointer=function(t){t||(t=fabric.window.event);var e=t.target||(typeof t.srcElement!==i?t.srcElement:null),n=fabric.util.getScrollLeftTop(e);return{x:p(t)+n.left,y:g(t)+n.top}},fabric.util.object.extend(fabric.util,fabric.Observable)}(),Q_b=fabric.document.createElement("div"),R_b="string"==typeof Q_b.style.opacity,S_b="string"==typeof Q_b.style.filter,T_b=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,U_b=function(t){return t},R_b?U_b=function(t,e){return t.style.opacity=e,t}:S_b&&(U_b=function(t,e){var n=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(n.zoom=1),T_b.test(n.filter)?(e=.9999<=e?"":"alpha(opacity="+100*e+")",n.filter=n.filter.replace(T_b,e)):n.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=function(t,e){var n=t.style;if(!n)return t;if("string"==typeof e)return t.style.cssText+=";"+e,-1<e.indexOf("opacity")?U_b(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var i in e)"opacity"===i?U_b(t,e[i]):n["float"===i||"cssFloat"===i?void 0===n.styleFloat?"cssFloat":"styleFloat":i]=e[i];return t},function(){var e=Array.prototype.slice;var t,l,n,i,r=function(t){return e.call(t,0)};try{t=r(fabric.document.childNodes)instanceof Array}catch(t){}function o(t,e){var n=fabric.document.createElement(t);for(var i in e)"class"===i?n.className=e[i]:"for"===i?n.htmlFor=e[i]:n.setAttribute(i,e[i]);return n}function h(t){for(var e=0,n=0,i=fabric.document.documentElement,r=fabric.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===fabric.document?(e=r.scrollLeft||i.scrollLeft||0,n=r.scrollTop||i.scrollTop||0):(e+=t.scrollLeft||0,n+=t.scrollTop||0),1!==t.nodeType||"fixed"!==fabric.util.getElementStyle(t,"position")););return{left:e,top:n}}t||(r=function(t){for(var e=new Array(t.length),n=t.length;n--;)e[n]=t[n];return e}),l=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){var n=fabric.document.defaultView.getComputedStyle(t,null);return n?n[e]:void 0}:function(t,e){var n=t.style[e];return!n&&t.currentStyle&&(n=t.currentStyle[e]),n},n=fabric.document.documentElement.style,i="userSelect"in n?"userSelect":"MozUserSelect"in n?"MozUserSelect":"WebkitUserSelect"in n?"WebkitUserSelect":"KhtmlUserSelect"in n?"KhtmlUserSelect":"",fabric.util.makeElementUnselectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),i?t.style[i]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t},fabric.util.makeElementSelectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=null),i?t.style[i]="":"string"==typeof t.unselectable&&(t.unselectable=""),t},fabric.util.getScript=function(t,e){var n=fabric.document.getElementsByTagName("head")[0],i=fabric.document.createElement("script"),r=!0;i.onload=i.onreadystatechange=function(t){if(r){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;r=!1,e(t||fabric.window.event),i=i.onload=i.onreadystatechange=null}},i.src=t,n.appendChild(i)},fabric.util.getById=function(t){return"string"==typeof t?fabric.document.getElementById(t):t},fabric.util.toArray=r,fabric.util.makeElement=o,fabric.util.addClass=function(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)},fabric.util.wrapElement=function(t,e,n){return"string"==typeof e&&(e=o(e,n)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e},fabric.util.getScrollLeftTop=h,fabric.util.getElementOffset=function(t){var e,n,i=t&&t.ownerDocument,r={left:0,top:0},o={left:0,top:0},a={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!i)return o;for(var s in a)o[a[s]]+=parseInt(l(t,s),10)||0;return e=i.documentElement,void 0!==t.getBoundingClientRect&&(r=t.getBoundingClientRect()),n=h(t),{left:r.left+n.left-(e.clientLeft||0)+o.left,top:r.top+n.top-(e.clientTop||0)+o.top}},fabric.util.getElementStyle=l}(),function(){var l=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{if(t[e]())return t[e]}catch(t){}}();function h(){}fabric.util.request=function(t,e){e||(e={});var n,i,r=e.method?e.method.toUpperCase():"GET",o=e.onComplete||function(){},a=l(),s=e.body||e.parameters;return a.onreadystatechange=function(){4===a.readyState&&(o(a),a.onreadystatechange=h)},"GET"===r&&(s=null,"string"==typeof e.parameters&&(n=t,i=e.parameters,t=n+(/\?/.test(n)?"&":"?")+i)),a.open(r,t,!0),"POST"!==r&&"PUT"!==r||a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(s),a}}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){void 0!==console[t]&&"function"==typeof console[t].apply&&(fabric[t]=function(){return console[t].apply(console,arguments)})}),function(){function e(){return!1}var t=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){fabric.window.setTimeout(t,1e3/60)};function y(){return t.apply(fabric.window,arguments)}fabric.util.animate=function(m){y(function(t){m||(m={});var a,s=t||+new Date,l=m.duration||500,h=s+l,c=m.onChange||e,u=m.abort||e,f=m.onComplete||e,d=m.easing||function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},p="startValue"in m?m.startValue:0,g="endValue"in m?m.endValue:100,v=m.byValue||g-p;m.onStart&&m.onStart(),function t(e){if(u())f(g,1,1);else{a=e||+new Date;var n=h<a?l:a-s,i=n/l,r=d(n,p,v,l),o=Math.abs((r-p)/v);c(r,o,i),h<a?m.onComplete&&m.onComplete():y(t)}}(s)})},fabric.util.requestAnimFrame=y}(),fabric.util.animateColor=function(t,e,n,h){var i=new fabric.Color(t).getSource(),r=new fabric.Color(e).getSource();h=h||{},fabric.util.animate(fabric.util.object.extend(h,{duration:n||500,startValue:i,endValue:r,byValue:r,easing:function(t,e,n,i){var r,o,a,s,l=h.colorEasing?h.colorEasing(t,i):1-Math.cos(t/i*(Math.PI/2));return r=e,o=n,a=l,s="rgba("+parseInt(r[0]+a*(o[0]-r[0]),10)+","+parseInt(r[1]+a*(o[1]-r[1]),10)+","+parseInt(r[2]+a*(o[2]-r[2]),10),s+=","+(r&&o?parseFloat(r[3]+a*(o[3]-r[3])):1),s+=")"}}))},function(){function a(t,e,n,i){return t<Math.abs(e)?(t=e,i=n/4):i=0===e&&0===t?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:n,s:i}}function s(t,e,n){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*n-t.s)*(2*Math.PI)/t.p)}function r(t,e,n,i){return n-o(i-t,0,n,i)+e}function o(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}fabric.util.ease={easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e},easeInOutExpo:function(t,e,n,i){return 0===t?e:t===i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,i){var r=0;return 0===t?e:1==(t/=i)?e+n:(r||(r=.3*i),-s(a(n,n,r,1.70158),t,i)+e)},easeOutElastic:function(t,e,n,i){var r=0;if(0===t)return e;if(1==(t/=i))return e+n;r||(r=.3*i);var o=a(n,n,r,1.70158);return o.a*Math.pow(2,-10*t)*Math.sin((t*i-o.s)*(2*Math.PI)/o.p)+o.c+e},easeInOutElastic:function(t,e,n,i){var r=0;if(0===t)return e;if(2==(t/=i/2))return e+n;r||(r=i*(.3*1.5));var o=a(n,n,r,1.70158);return t<1?-.5*s(o,t,i)+e:o.a*Math.pow(2,-10*(t-=1))*Math.sin((t*i-o.s)*(2*Math.PI)/o.p)*.5+o.c+e},easeInBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:r,easeOutBounce:o,easeInOutBounce:function(t,e,n,i){return t<i/2?.5*r(2*t,0,n,i)+e:.5*o(2*t-i,0,n,i)+.5*n+e}}}(),function(t){"use strict";var b=t.fabric||(t.fabric={}),_=b.util.object.extend,u=b.util.object.clone,x=b.util.toFixed,w=b.util.parseUnit,S=b.util.multiplyTransformMatrices,f=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/i,C=/^(symbol|image|marker|pattern|view|svg)$/i,d=/^(?:pattern|defs|symbol|metadata|clipPath|mask)$/i,T=/^(symbol|g|a|svg)$/i,k={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX",opacity:"opacity"},O={stroke:"strokeOpacity",fill:"fillOpacity"};function g(t,e){for(var n,i,r=[],o=0;o<e.length;o++)n=e[o],i=t.getElementsByTagName(n),r=r.concat(Array.prototype.slice.call(i));return r}function A(t,e){var n,i=!0;return(n=r(t,e.pop()))&&e.length&&(i=function(t,e){var n,i=!0;for(;t.parentNode&&1===t.parentNode.nodeType&&e.length;)i&&(n=e.pop()),t=t.parentNode,i=r(t,n);return 0===e.length}(t,e)),n&&i&&0===e.length}function r(t,e){var n,i=t.nodeName,r=t.getAttribute("class"),o=t.getAttribute("id");if(n=new RegExp("^"+i,"i"),e=e.replace(n,""),o&&e.length&&(n=new RegExp("#"+o+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"")),r&&e.length)for(var a=(r=r.split(" ")).length;a--;)n=new RegExp("\\."+r[a]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"");return 0===e.length}function v(t,e){var n;if(t.getElementById&&(n=t.getElementById(e)),n)return n;var i,r,o=t.getElementsByTagName("*");for(r=0;r<o.length;r++)if(e===(i=o[r]).getAttribute("id"))return i}b.cssRules={},b.gradientDefs={},b.parseTransformAttribute=function(){function y(t,e,n){t[n]=Math.tan(b.util.degreesToRadians(e[0]))}var _=[1,0,0,1,0,0],t=b.reNum,e="(?:\\s+,?\\s*|,\\s*)",x="(?:"+("(?:(matrix)\\s*\\(\\s*("+t+")"+e+"("+t+")"+e+"("+t+")"+e+"("+t+")"+e+"("+t+")"+e+"("+t+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+t+")(?:"+e+"("+t+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+t+")(?:"+e+"("+t+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+t+")(?:"+e+"("+t+")"+e+"("+t+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+t+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+t+")\\s*\\))")+")",n=new RegExp("^\\s*(?:"+("(?:"+x+"(?:"+e+"*"+x+")*)")+"?)\\s*$"),i=new RegExp(x,"g");return function(t){var v=_.concat(),m=[];if(!t||t&&!n.test(t))return v;t.replace(i,function(t){var e,n,i,r,o,a,s,l,h,c,u,f,d=new RegExp(x).exec(t).filter(function(t){return!!t}),p=d[1],g=d.slice(2).map(parseFloat);switch(p){case"translate":f=g,(u=v)[4]=f[0],2===f.length&&(u[5]=f[1]);break;case"rotate":g[0]=b.util.degreesToRadians(g[0]),o=v,a=g,s=Math.cos(a[0]),l=Math.sin(a[0]),c=h=0,3===a.length&&(h=a[1],c=a[2]),o[0]=s,o[1]=l,o[2]=-l,o[3]=s,o[4]=h-(s*h-l*c),o[5]=c-(l*h+s*c);break;case"scale":e=v,i=(n=g)[0],r=2===n.length?n[1]:n[0],e[0]=i,e[3]=r;break;case"skewX":y(v,g,2);break;case"skewY":y(v,g,1);break;case"matrix":v=g}m.push(v.concat()),v=_.concat()});for(var e=m[0];1<m.length;)m.shift(),e=b.util.multiplyTransformMatrices(e,m[0]);return e}}();var M=new RegExp("^\\s*("+b.reNum+"+)\\s*,?\\s*("+b.reNum+"+)\\s*,?\\s*("+b.reNum+"+)\\s*,?\\s*("+b.reNum+"+)\\s*$");function m(t){var e,n,i,r,o,a,s=t.getAttribute("viewBox"),l=1,h=1,c=t.getAttribute("width"),u=t.getAttribute("height"),f=t.getAttribute("x")||0,d=t.getAttribute("y")||0,p=t.getAttribute("preserveAspectRatio")||"",g=!s||!C.test(t.nodeName)||!(s=s.match(M)),v=!c||!u||"100%"===c||"100%"===u,m=g&&v,y={},_="";if(y.width=0,y.height=0,y.toBeParsed=m)return y;if(g)return y.width=w(c),y.height=w(u),y;if(e=-parseFloat(s[1]),n=-parseFloat(s[2]),i=parseFloat(s[3]),r=parseFloat(s[4]),v?(y.width=i,y.height=r):(y.width=w(c),y.height=w(u),l=y.width/i,h=y.height/r),"none"!==(p=b.util.parsePreserveAspectRatioAttribute(p)).alignX&&(h=l=h<l?h:l),1===l&&1===h&&0===e&&0===n&&0===f&&0===d)return y;if((f||d)&&(_=" translate("+w(f)+" "+w(d)+") "),o=_+" matrix("+l+" 0 0 "+h+" "+e*l+" "+n*h+") ","svg"===t.nodeName){for(a=t.ownerDocument.createElement("g");t.firstChild;)a.appendChild(t.firstChild);t.appendChild(a)}else o=(a=t).getAttribute("transform")+o;return a.setAttribute("transform",o),y}b.parseSVGDocument=function(t,e,n,i){if(t){!function(t){for(var e=g(t,["use","svg:use"]),n=0;e.length&&n<e.length;){var i,r,o,a,s=e[n],l=s.getAttribute("xlink:href").substr(1),h=s.getAttribute("x")||0,c=s.getAttribute("y")||0,u=v(t,l).cloneNode(!0),f=(u.getAttribute("transform")||"")+" translate("+h+", "+c+")",d=e.length;if(m(u),/^svg$/i.test(u.nodeName)){var p=u.ownerDocument.createElement("g");for(r=0,a=(o=u.attributes).length;r<a;r++)i=o.item(r),p.setAttribute(i.nodeName,i.nodeValue);for(;u.firstChild;)p.appendChild(u.firstChild);u=p}for(r=0,a=(o=s.attributes).length;r<a;r++)"x"!==(i=o.item(r)).nodeName&&"y"!==i.nodeName&&"xlink:href"!==i.nodeName&&("transform"===i.nodeName?f=i.nodeValue+" "+f:u.setAttribute(i.nodeName,i.nodeValue));u.setAttribute("transform",f),u.setAttribute("instantiated_by_use","1"),u.removeAttribute("id"),s.parentNode.replaceChild(u,s),e.length===d&&n++}}(t);var r=b.Object.__uid++,o=m(t),a=b.util.toArray(t.getElementsByTagName("*"));if(o.crossOrigin=i&&i.crossOrigin,o.svgUid=r,0===a.length&&b.isLikelyNode){for(var s=[],l=0,h=(a=t.selectNodes('//*[name(.)!="svg"]')).length;l<h;l++)s[l]=a[l];a=s}var c=a.filter(function(t){return m(t),f.test(t.nodeName.replace("svg:",""))&&!function(t,e){for(;t&&(t=t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}(t,d)});!c||c&&!c.length?e&&e([],{}):(b.gradientDefs[r]=b.getGradientDefs(t),b.cssRules[r]=b.getCSSRules(t),b.parseElements(c,function(t){e&&e(t,o)},u(o),n,i))}};var l=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+b.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+b.reNum+"))?\\s+(.*)");_(b,{parseFontDeclaration:function(t,e){var n=t.match(l);if(n){var i=n[1],r=n[3],o=n[4],a=n[5],s=n[6];i&&(e.fontStyle=i),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),o&&(e.fontSize=w(o)),s&&(e.fontFamily=s),a&&(e.lineHeight="normal"===a?1:a)}},getGradientDefs:function(t){var e,n,i,r=g(t,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),o=0,a={},s={};for(o=r.length;o--;)i=(e=r[o]).getAttribute("xlink:href"),n=e.getAttribute("id"),i&&(s[n]=i.substr(1)),a[n]=e;for(n in s){var l=a[s[n]].cloneNode(!0);for(e=a[n];l.firstChild;)e.appendChild(l.firstChild)}return a},parseAttributes:function(n,t,e){if(n){var i,r,o={};void 0===e&&(e=n.getAttribute("svgUid")),n.parentNode&&T.test(n.parentNode.nodeName)&&(o=b.parseAttributes(n.parentNode,t,e)),r=o&&o.fontSize||n.getAttribute("font-size")||b.Text.DEFAULT_SVG_FONT_SIZE;var a=t.reduce(function(t,e){return(i=n.getAttribute(e))&&(t[e]=i),t},{});a=_(a,_(function(t,e){var n={};for(var i in b.cssRules[e])if(A(t,i.split(" ")))for(var r in b.cssRules[e][i])n[r]=b.cssRules[e][i][r];return n}(n,e),b.parseStyleAttribute(n)));var s,l,h,c,u,f,d,p,g,v={};for(var m in a)s=(g=m)in k?k[g]:g,h=s,c=a[m],u=o,f=r,d=void 0,p="[object Array]"===Object.prototype.toString.call(c),"fill"!==h&&"stroke"!==h||"none"!==c?"strokeDashArray"===h?c="none"===c?null:c.replace(/,/g," ").split(/\s+/).map(function(t){return parseFloat(t)}):"transformMatrix"===h?c=u&&u.transformMatrix?S(u.transformMatrix,b.parseTransformAttribute(c)):b.parseTransformAttribute(c):"visible"===h?(c="none"!==c&&"hidden"!==c,u&&!1===u.visible&&(c=!1)):"opacity"===h?(c=parseFloat(c),u&&void 0!==u.opacity&&(c*=u.opacity)):"originX"===h?c="start"===c?"left":"end"===c?"right":"center":d=p?c.map(w):w(c,f):c="",l=!p&&isNaN(d)?c:d,v[s]=l;v&&v.font&&b.parseFontDeclaration(v.font,v);var y=_(o,v);return T.test(n.nodeName)?y:function(t){for(var e in O)if(void 0!==t[O[e]]&&""!==t[e]){if(void 0===t[e]){if(!b.Object.prototype[e])continue;t[e]=b.Object.prototype[e]}if(0!==t[e].indexOf("url(")){var n=new b.Color(t[e]);t[e]=n.setAlpha(x(n.getAlpha()*t[O[e]],2)).toRgba()}}return t}(y)}},parseElements:function(t,e,n,i,r){new b.ElementsParser(t,e,n,i,r).parse()},parseStyleAttribute:function(t){var n,i,r,e={},o=t.getAttribute("style");return o&&("string"==typeof o?(n=e,o.replace(/;\s*$/,"").split(";").forEach(function(t){var e=t.split(":");i=e[0].trim().toLowerCase(),r=e[1].trim(),n[i]=r})):function(t,e){var n,i;for(var r in t)void 0!==t[r]&&(n=r.toLowerCase(),i=t[r],e[n]=i)}(o,e)),e},parsePointsAttribute:function(t){if(!t)return null;var e,n,i=[];for(e=0,n=(t=(t=t.replace(/,/g," ").trim()).split(/\s+/)).length;e<n;e+=2)i.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return i},getCSSRules:function(t){for(var e=t.getElementsByTagName("style"),h={},n=0,i=e.length;n<i;n++){var r=e[n].textContent||e[n].text;""!==(r=r.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&r.match(/[^{]*\{[\s\S]*?\}/g).map(function(t){return t.trim()}).forEach(function(t){for(var e=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),n={},i=e[2].trim().replace(/;$/,"").split(/\s*;\s*/),r=0,o=i.length;r<o;r++){var a=i[r].split(/\s*:\s*/),s=a[0],l=a[1];n[s]=l}(t=e[1]).split(",").forEach(function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(h[t]?b.util.object.extend(h[t],n):h[t]=b.util.object.clone(n))})})}return h},loadSVGFromURL:function(t,n,i,r){t=t.replace(/^\n\s*/,"").trim(),new b.util.request(t,{method:"get",onComplete:function(t){var e=t.responseXML;e&&!e.documentElement&&b.window.ActiveXObject&&t.responseText&&((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));e&&e.documentElement||n&&n(null);b.parseSVGDocument(e.documentElement,function(t,e){n&&n(t,e)},i,r)}})},loadSVGFromString:function(t,n,e,i){var r;if(t=t.trim(),"undefined"!=typeof DOMParser){var o=new DOMParser;o&&o.parseFromString&&(r=o.parseFromString(t,"text/xml"))}else b.window.ActiveXObject&&((r=new ActiveXObject("Microsoft.XMLDOM")).async="false",r.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));b.parseSVGDocument(r.documentElement,function(t,e){n(t,e)},e,i)}})}(exports),fabric.ElementsParser=function(t,e,n,i,r){this.elements=t,this.callback=e,this.options=n,this.reviver=i,this.svgUid=n&&n.svgUid||0,this.parsingOptions=r},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var t=0,e=this.elements.length;t<e;t++)this.elements[t].setAttribute("svgUid",this.svgUid),function(t,e){setTimeout(function(){t.createObject(t.elements[e],e)},0)}(this,t)},fabric.ElementsParser.prototype.createObject=function(t,e){var n=fabric[fabric.util.string.capitalize(t.tagName.replace("svg:",""))];if(n&&n.fromElement)try{this._createObject(n,t,e)}catch(t){fabric.log(t)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(t,e,n){if(t.async)t.fromElement(e,this.createCallback(n,e),this.options);else{var i=t.fromElement(e,this.options);this.resolveGradient(i,"fill"),this.resolveGradient(i,"stroke"),this.reviver&&this.reviver(e,i),this.instances[n]=i,this.checkIfDone()}},fabric.ElementsParser.prototype.createCallback=function(e,n){var i=this;return function(t){i.resolveGradient(t,"fill"),i.resolveGradient(t,"stroke"),i.reviver&&i.reviver(n,t),i.instances[e]=t,i.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(t,e){var n=t.get(e);if(/^url\(/.test(n)){var i=n.slice(5,n.length-1);fabric.gradientDefs[this.svgUid][i]&&t.set(e,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][i],t))}},fabric.ElementsParser.prototype.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances))},function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t,e){this.x=t,this.y=e}e.Point?e.warn("fabric.Point is already defined"):(e.Point=n).prototype={type:"point",constructor:n,add:function(t){return new n(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new n(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new n(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new n(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new n(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new n(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return void 0===e&&(e=.5),e=Math.max(Math.min(1,e),0),new n(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new n(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new n(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n},clone:function(){return new n(this.x,this.y)}}}(exports),function(t){"use strict";var f=t.fabric||(t.fabric={});function d(t){this.status=t,this.points=[]}f.Intersection?f.warn("fabric.Intersection is already defined"):(f.Intersection=d,f.Intersection.prototype={constructor:d,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},f.Intersection.intersectLineLine=function(t,e,n,i){var r,o=(i.x-n.x)*(t.y-n.y)-(i.y-n.y)*(t.x-n.x),a=(e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x),s=(i.y-n.y)*(e.x-t.x)-(i.x-n.x)*(e.y-t.y);if(0!==s){var l=o/s,h=a/s;0<=l&&l<=1&&0<=h&&h<=1?(r=new d("Intersection")).appendPoint(new f.Point(t.x+l*(e.x-t.x),t.y+l*(e.y-t.y))):r=new d}else r=new d(0===o||0===a?"Coincident":"Parallel");return r},f.Intersection.intersectLinePolygon=function(t,e,n){for(var i,r,o,a=new d,s=n.length,l=0;l<s;l++)i=n[l],r=n[(l+1)%s],o=d.intersectLineLine(t,e,i,r),a.appendPoints(o.points);return 0<a.points.length&&(a.status="Intersection"),a},f.Intersection.intersectPolygonPolygon=function(t,e){for(var n=new d,i=t.length,r=0;r<i;r++){var o=t[r],a=t[(r+1)%i],s=d.intersectLinePolygon(o,a,e);n.appendPoints(s.points)}return 0<n.points.length&&(n.status="Intersection"),n},f.Intersection.intersectPolygonRectangle=function(t,e,n){var i=e.min(n),r=e.max(n),o=new f.Point(r.x,i.y),a=new f.Point(i.x,r.y),s=d.intersectLinePolygon(i,o,t),l=d.intersectLinePolygon(o,r,t),h=d.intersectLinePolygon(r,a,t),c=d.intersectLinePolygon(a,i,t),u=new d;return u.appendPoints(s.points),u.appendPoints(l.points),u.appendPoints(h.points),u.appendPoints(c.points),0<u.points.length&&(u.status="Intersection"),u})}(exports),function(t){"use strict";var h=t.fabric||(t.fabric={});function c(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function u(t,e,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}h.Color?h.warn("fabric.Color is already defined."):(h.Color=c,h.Color.prototype={_tryParsingColor:function(t){var e;t in c.colorNameMap&&(t=c.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=c.sourceFromHex(t)),e||(e=c.sourceFromRgb(t)),e||(e=c.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,e,n){t/=255,e/=255,n/=255;var i,r,o,a=h.util.array.max([t,e,n]),s=h.util.array.min([t,e,n]);if(o=(a+s)/2,a===s)i=r=0;else{var l=a-s;switch(r=.5<o?l/(2-a-s):l/(a+s),a){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return[Math.round(360*i),Math.round(100*r),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,n,i=this.getSource();return t=1===(t=i[0].toString(16)).length?"0"+t:t,e=1===(e=i[1].toString(16)).length?"0"+e:e,n=1===(n=i[2].toString(16)).length?"0"+n:n,t.toUpperCase()+e.toUpperCase()+n.toUpperCase()},toHexa:function(){var t;return t=1===(t=(t=255*this.getSource()[3]).toString(16)).length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),n=t[3];return this.setSource([e,e,e,n]),this},toBlackWhite:function(t){var e=this.getSource(),n=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),i=e[3];return t=t||127,n=Number(n)<Number(t)?0:255,this.setSource([n,n,n,i]),this},overlayWith:function(t){t instanceof c||(t=new c(t));for(var e=[],n=this.getAlpha(),i=this.getSource(),r=t.getSource(),o=0;o<3;o++)e.push(Math.round(.5*i[o]+.5*r[o]));return e[3]=n,this.setSource(e),this}},h.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/,h.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,h.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,h.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",grey:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},h.Color.fromRgb=function(t){return c.fromSource(c.sourceFromRgb(t))},h.Color.sourceFromRgb=function(t){var e=t.match(c.reRGBa);if(e){var n=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),i=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),r=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(n,10),parseInt(i,10),parseInt(r,10),e[4]?parseFloat(e[4]):1]}},h.Color.fromRgba=c.fromRgb,h.Color.fromHsl=function(t){return c.fromSource(c.sourceFromHsl(t))},h.Color.sourceFromHsl=function(t){var e=t.match(c.reHSLa);if(e){var n,i,r,o=(parseFloat(e[1])%360+360)%360/360,a=parseFloat(e[2])/(/%$/.test(e[2])?100:1),s=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===a)n=i=r=s;else{var l=s<=.5?s*(a+1):s+a-s*a,h=2*s-l;n=u(h,l,o+1/3),i=u(h,l,o),r=u(h,l,o-1/3)}return[Math.round(255*n),Math.round(255*i),Math.round(255*r),e[4]?parseFloat(e[4]):1]}},h.Color.fromHsla=c.fromHsl,h.Color.fromHex=function(t){return c.fromSource(c.sourceFromHex(t))},h.Color.sourceFromHex=function(t){if(t.match(c.reHex)){var e=t.slice(t.indexOf("#")+1),n=3===e.length||4===e.length,i=8===e.length||4===e.length,r=n?e.charAt(0)+e.charAt(0):e.substring(0,2),o=n?e.charAt(1)+e.charAt(1):e.substring(2,4),a=n?e.charAt(2)+e.charAt(2):e.substring(4,6),s=i?n?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(r,16),parseInt(o,16),parseInt(a,16),parseFloat((parseInt(s,16)/255).toFixed(2))]}},h.Color.fromSource=function(t){var e=new c;return e.setSource(t),e})}(exports),function(){function d(t){var e,n,i,r=t.getAttribute("style"),o=t.getAttribute("offset")||0;if(o=(o=parseFloat(o)/(/%$/.test(o)?100:1))<0?0:1<o?1:o,r){var a=r.split(/\s*;\s*/);""===a[a.length-1]&&a.pop();for(var s=a.length;s--;){var l=a[s].split(/\s*:\s*/),h=l[0].trim(),c=l[1].trim();"stop-color"===h?e=c:"stop-opacity"===h&&(i=c)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),i||(i=t.getAttribute("stop-opacity")),n=(e=new fabric.Color(e)).getAlpha(),i=isNaN(parseFloat(i))?1:parseFloat(i),i*=n,{offset:o,color:e.toRgb(),opacity:i}}var u=fabric.util.object.clone;function p(t,e,n){var i,r=0,o=1,a="";for(var s in e)"Infinity"===e[s]?e[s]=1:"-Infinity"===e[s]&&(e[s]=0),i=parseFloat(e[s],10),o="string"==typeof e[s]&&/^\d+%$/.test(e[s])?.01:1,"x1"===s||"x2"===s||"r2"===s?(o*="objectBoundingBox"===n?t.width:1,r="objectBoundingBox"===n&&t.left||0):"y1"!==s&&"y2"!==s||(o*="objectBoundingBox"===n?t.height:1,r="objectBoundingBox"===n&&t.top||0),e[s]=i*o+r;if("ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===n&&t.rx!==t.ry){var l=t.ry/t.rx;a=" scale(1, "+l+")",e.y1&&(e.y1/=l),e.y2&&(e.y2/=l)}return a}fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var n=new fabric.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return fabric.util.populateWithProperties(this,e,t),e},toSVG:function(t){var e,n,i=u(this.coords,!0),r=u(this.colorStops,!0),o=i.r1>i.r2;if(r.sort(function(t,e){return t.offset-e.offset}),!t.group||"path-group"!==t.group.type)for(var a in i)"x1"===a||"x2"===a?i[a]+=this.offsetX-t.width/2:"y1"!==a&&"y2"!==a||(i[a]+=this.offsetY-t.height/2);if(n='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(n+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?e=["<linearGradient ",n,' x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'">\n']:"radial"===this.type&&(e=["<radialGradient ",n,' cx="',o?i.x1:i.x2,'" cy="',o?i.y1:i.y2,'" r="',o?i.r1:i.r2,'" fx="',o?i.x2:i.x1,'" fy="',o?i.y2:i.y1,'">\n']),"radial"===this.type){if(o){(r=r.concat()).reverse();for(var s=0;s<r.length;s++)r[s].offset=1-r[s].offset}var l=Math.min(i.r1,i.r2);if(0<l){var h=l/Math.max(i.r1,i.r2);for(s=0;s<r.length;s++)r[s].offset+=h*(1-r[s].offset)}}for(s=0;s<r.length;s++){var c=r[s];e.push("<stop ",'offset="',100*c.offset+"%",'" style="stop-color:',c.color,null!==c.opacity?";stop-opacity: "+c.opacity:";",'"/>\n')}return e.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),e.join("")},toLive:function(t,e){var n,i,r=fabric.util.object.clone(this.coords);if(this.type){if(e.group&&"path-group"===e.group.type)for(i in r)"x1"===i||"x2"===i?r[i]+=-this.offsetX+e.width/2:"y1"!==i&&"y2"!==i||(r[i]+=-this.offsetY+e.height/2);"linear"===this.type?n=t.createLinearGradient(r.x1,r.y1,r.x2,r.y2):"radial"===this.type&&(n=t.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2));for(var o=0,a=this.colorStops.length;o<a;o++){var s=this.colorStops[o].color,l=this.colorStops[o].opacity,h=this.colorStops[o].offset;void 0!==l&&(s=new fabric.Color(s).setAlpha(l).toRgba()),n.addColorStop(h,s)}return n}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(t,e){var n,i,r,o,a,s=t.getElementsByTagName("stop"),l=t.getAttribute("gradientUnits")||"objectBoundingBox",h=t.getAttribute("gradientTransform"),c=[];"linear"===(n="linearGradient"===t.nodeName||"LINEARGRADIENT"===t.nodeName?"linear":"radial")?i={x1:(a=t).getAttribute("x1")||0,y1:a.getAttribute("y1")||0,x2:a.getAttribute("x2")||"100%",y2:a.getAttribute("y2")||0}:"radial"===n&&(i={x1:(o=t).getAttribute("fx")||o.getAttribute("cx")||"50%",y1:o.getAttribute("fy")||o.getAttribute("cy")||"50%",r1:0,x2:o.getAttribute("cx")||"50%",y2:o.getAttribute("cy")||"50%",r2:o.getAttribute("r")||"50%"});for(var u=s.length;u--;)c.push(d(s[u]));r=p(e,i,l);var f=new fabric.Gradient({type:n,coords:i,colorStops:c,offsetX:-e.left,offsetY:-e.top});return(h||""!==r)&&(f.gradientTransform=fabric.parseTransformAttribute((h||"")+r)),f},forObject:function(t,e){return e||(e={}),p(t,e.coords,"userSpaceOnUse"),new fabric.Gradient(e)}})}(),function(){"use strict";var r=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t,e){if(t||(t={}),this.id=fabric.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!=typeof t.source)e&&e(this);else if(void 0!==fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source)),e&&e(this);else{var n=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){n.source=t,e&&e(n)})}},toObject:function(t){var e,n,i=fabric.Object.NUM_FRACTION_DIGITS;return"function"==typeof this.source?e=String(this.source):"string"==typeof this.source.src?e=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(e=this.source.toDataURL()),n={type:"pattern",source:e,repeat:this.repeat,offsetX:r(this.offsetX,i),offsetY:r(this.offsetY,i)},fabric.util.populateWithProperties(this,n,t),n},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,n=e.width/t.width,i=e.height/t.height,r=this.offsetX/t.width,o=this.offsetY/t.height,a="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(i=1),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(n=1),e.src?a=e.src:e.toDataURL&&(a=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+o+'" width="'+n+'" height="'+i+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+a+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if(void 0!==e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var o=t.fabric||(t.fabric={}),a=o.util.toFixed;o.Shadow?o.warn("fabric.Shadow is already defined."):(o.Shadow=o.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(t){for(var e in"string"==typeof t&&(t=this._parseShadow(t)),t)this[e]=t[e];this.id=o.Object.__uid++},_parseShadow:function(t){var e=t.trim(),n=o.Shadow.reOffsetsAndBlur.exec(e)||[];return{color:(e.replace(o.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(n[1],10)||0,offsetY:parseInt(n[2],10)||0,blur:parseInt(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var e=40,n=40,i=o.Object.NUM_FRACTION_DIGITS,r=o.util.rotateVector({x:this.offsetX,y:this.offsetY},o.util.degreesToRadians(-t.angle));return t.width&&t.height&&(e=100*a((Math.abs(r.x)+this.blur)/t.width,i)+20,n=100*a((Math.abs(r.y)+this.blur)/t.height,i)+20),t.flipX&&(r.x*=-1),t.flipY&&(r.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+n+'%" height="'+(100+2*n)+'%" x="-'+e+'%" width="'+(100+2*e)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+a(this.blur?this.blur/2:0,i)+'"></feGaussianBlur>\n\t<feOffset dx="'+a(r.x,i)+'" dy="'+a(r.y,i)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+this.color+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke};var e={},n=o.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke"].forEach(function(t){this[t]!==n[t]&&(e[t]=this[t])},this),e}}),o.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)}(exports),function(){"use strict";if(fabric.StaticCanvas)fabric.warn("fabric.StaticCanvas is already defined.");else{var i=fabric.util.object.extend,t=fabric.util.getElementOffset,h=fabric.util.removeFromArray,s=fabric.util.toFixed,o=fabric.util.transformPoint,a=fabric.util.invertTransform,n=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(t,e){e||(e={}),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!1,_initStatic:function(t,e){var n=fabric.StaticCanvas.prototype.renderAll.bind(this);this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,n),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,n),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,n),e.overlayColor&&this.setOverlayColor(e.overlayColor,n),this.calcOffset()},_isRetinaScaling:function(){return 1!==fabric.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?fabric.devicePixelRatio:1},_initRetinaScaling:function(){this._isRetinaScaling()&&(this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio))},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(t,e,n){return this.__setBgOverlayImage("overlayImage",t,e,n)},setBackgroundImage:function(t,e,n){return this.__setBgOverlayImage("backgroundImage",t,e,n)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(e,t,n,i){return"string"==typeof t?fabric.util.loadImage(t,function(t){t&&(this[e]=new fabric.Image(t,i)),n&&n(t)},this,i&&i.crossOrigin):(i&&t.setOptions(i),this[e]=t,n&&n(t)),this},__setBgOverlayColor:function(t,e,n){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,n),this},_createCanvasElement:function(t){var e=fabric.util.createCanvasElement(t);if(e.style||(e.style={}),!e)throw n;if(void 0===e.getContext)throw n;return e},_initOptions:function(t){this._setOptions(t),this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(t),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var n;for(var i in e=e||{},t)n=t[i],e.cssOnly||(this._setBackstoreDimension(i,t[i]),n+="px"),e.backstoreOnly||this._setCssDimension(i,n);return this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),e.cssOnly||this.renderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,n=this._activeGroup;this.viewportTransform=t;for(var i=0,r=this._objects.length;i<r;i++)(e=this._objects[i]).group||e.setCoords(!1,!0);return n&&n.setCoords(!1,!0),this.calcViewportBoundaries(),this.renderAll(),this},zoomToPoint:function(t,e){var n=t,i=this.viewportTransform.slice(0);t=o(t,a(this.viewportTransform)),i[0]=e,i[3]=e;var r=o(t,i);return i[4]+=n.x-r.x,i[5]+=n.y-r.y,this.setViewportTransform(i)},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},calcViewportBoundaries:function(){var t={},e=this.getWidth(),n=this.getHeight(),i=a(this.viewportTransform);return t.tl=o({x:0,y:0},i),t.br=o({x:e,y:n},i),t.tr=new fabric.Point(t.br.x,t.tl.y),t.bl=new fabric.Point(t.tl.x,t.br.y),this.vptCoords=t},renderCanvas:function(t,e){this.calcViewportBoundaries(),this.clearContext(t),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,t),this._renderBackground(t),t.save(),t.transform.apply(t,this.viewportTransform),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.clipTo&&t.restore(),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render")},_renderObjects:function(t,e){for(var n=0,i=e.length;n<i;++n)e[n]&&e[n].render(t)},_renderBackgroundOrOverlay:function(t,e){var n=this[e+"Color"];n&&(t.fillStyle=n.toLive?n.toLive(t,this):n,t.fillRect(n.offsetX||0,n.offsetY||0,this.width,this.height)),(n=this[e+"Image"])&&(this[e+"Vpt"]&&(t.save(),t.transform.apply(t,this.viewportTransform)),n.render(t),this[e+"Vpt"]&&t.restore())},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new fabric.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=a(this.viewportTransform);return o({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),this.renderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(t,e){var n={objects:this._toObjects(t,e)};return i(n,this.__serializeBgOverlay(t,e)),fabric.util.populateWithProperties(this,n,e),n},_toObjects:function(e,n){return this.getObjects().filter(function(t){return!t.excludeFromExport}).map(function(t){return this._toObject(t,e,n)},this)},_toObject:function(t,e,n){var i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);var r=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=i),r},__serializeBgOverlay:function(t,e){var n={},i=this.backgroundImage,r=this.overlayImage;return this.backgroundColor&&(n.background=this.backgroundColor.toObject?this.backgroundColor.toObject(e):this.backgroundColor),this.overlayColor&&(n.overlay=this.overlayColor.toObject?this.overlayColor.toObject(e):this.overlayColor),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,t,e)),r&&!r.excludeFromExport&&(n.overlayImage=this._toObject(r,t,e)),n},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={});var n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this._setSVGBgOverlayColor(n,"backgroundColor"),this._setSVGBgOverlayImage(n,"backgroundImage",e),this._setSVGObjects(n,e),this._setSVGBgOverlayColor(n,"overlayColor"),this._setSVGBgOverlayImage(n,"overlayImage",e),n.push("</svg>"),n.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var n,i=e.width||this.width,r=e.height||this.height,o='viewBox="0 0 '+this.width+" "+this.height+'" ',a=fabric.Object.NUM_FRACTION_DIGITS;e.viewBox?o='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(n=this.viewportTransform,o='viewBox="'+s(-n[4]/n[0],a)+" "+s(-n[5]/n[3],a)+" "+s(this.width/n[0],a)+" "+s(this.height/n[3],a)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',r,'" ',o,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),"</defs>\n")},createSVGRefElementsMarkup:function(){var n=this;return["backgroundColor","overlayColor"].map(function(t){var e=n[t];if(e&&e.toLive)return e.toSVG(n,!1)}).join("")},createSVGFontFacesMarkup:function(){for(var t,e,n,i,r,o,a="",s={},l=fabric.fontPaths,h=this.getObjects(),c=0,u=h.length;c<u;c++)if(e=(t=h[c]).fontFamily,-1!==t.type.indexOf("text")&&!s[e]&&l[e]&&(s[e]=!0,t.styles))for(r in n=t.styles)for(o in i=n[r])!s[e=i[o].fontFamily]&&l[e]&&(s[e]=!0);for(var f in s)a+=["\t\t@font-face {\n","\t\t\tfont-family: '",f,"';\n","\t\t\tsrc: url('",l[f],"');\n","\t\t}\n"].join("");return a&&(a=['\t<style type="text/css">',"<![CDATA[\n",a,"]]>","</style>\n"].join("")),a},_setSVGObjects:function(t,e){for(var n,i=0,r=this.getObjects(),o=r.length;i<o;i++)(n=r[i]).excludeFromExport||this._setSVGObject(t,n,e)},_setSVGObject:function(t,e,n){t.push(e.toSVG(n))},_setSVGBgOverlayImage:function(t,e,n){this[e]&&this[e].toSVG&&t.push(this[e].toSVG(n))},_setSVGBgOverlayColor:function(t,e){var n=this[e];if(n)if(n.toLive){var i=n.repeat;t.push('<rect transform="translate(',this.width/2,",",this.height/2,')"',' x="',n.offsetX-this.width/2,'" y="',n.offsetY-this.height/2,'" ','width="',"repeat-y"===i||"no-repeat"===i?n.source.width:this.width,'" height="',"repeat-x"===i||"no-repeat"===i?n.source.height:this.height,'" fill="url(#SVGID_'+n.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[e],'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,n,i,r=this._activeGroup;if(t===r)for(e=(i=r._objects).length;e--;)n=i[e],h(this._objects,n),this._objects.unshift(n);else h(this._objects,t),this._objects.unshift(t);return this.renderAll&&this.renderAll()},bringToFront:function(t){if(!t)return this;var e,n,i,r=this._activeGroup;if(t===r)for(i=r._objects,e=0;e<i.length;e++)n=i[e],h(this._objects,n),this._objects.push(n);else h(this._objects,t),this._objects.push(t);return this.renderAll&&this.renderAll()},sendBackwards:function(t,e){if(!t)return this;var n,i,r,o,a,s=this._activeGroup,l=0;if(t===s)for(a=s._objects,n=0;n<a.length;n++)i=a[n],0+l<(r=this._objects.indexOf(i))&&(o=r-1,h(this._objects,i),this._objects.splice(o,0,i)),l++;else 0!==(r=this._objects.indexOf(t))&&(o=this._findNewLowerIndex(t,r,e),h(this._objects,t),this._objects.splice(o,0,t));return this.renderAll&&this.renderAll(),this},_findNewLowerIndex:function(t,e,n){var i;if(n)for(var r=(i=e)-1;0<=r;--r){if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){i=r;break}}else i=e-1;return i},bringForward:function(t,e){if(!t)return this;var n,i,r,o,a,s=this._activeGroup,l=0;if(t===s)for(n=(a=s._objects).length;n--;)i=a[n],(r=this._objects.indexOf(i))<this._objects.length-1-l&&(o=r+1,h(this._objects,i),this._objects.splice(o,0,i)),l++;else(r=this._objects.indexOf(t))!==this._objects.length-1&&(o=this._findNewUpperIndex(t,r,e),h(this._objects,t),this._objects.splice(o,0,t));return this.renderAll&&this.renderAll(),this},_findNewUpperIndex:function(t,e,n){var i;if(n)for(var r=(i=e)+1;r<this._objects.length;++r){if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){i=r;break}}else i=e+1;return i},moveTo:function(t,e){return h(this._objects,t),this._objects.splice(e,0,t),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),i(fabric.StaticCanvas.prototype,fabric.Observable),i(fabric.StaticCanvas.prototype,fabric.Collection),i(fabric.StaticCanvas.prototype,fabric.DataURLExporter),i(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var n=e.getContext("2d");if(!n)return null;switch(t){case"getImageData":return void 0!==n.getImageData;case"setLineDash":return void 0!==n.setLineDash;case"toDataURL":return void 0!==e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(t){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:null,setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop,e=this.canvas.getZoom();t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*e,t.shadowOffsetX=this.shadow.offsetX*e,t.shadowOffsetY=this.shadow.offsetY*e}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){1<this._points.length&&t.eq(this._points[this._points.length-1])||this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new fabric.Point(t.x,t.y);this._addPoint(e)},_render:function(){var t,e,n=this.canvas.contextTop,i=this.canvas.viewportTransform,r=this._points[0],o=this._points[1];if(n.save(),n.transform(i[0],i[1],i[2],i[3],i[4],i[5]),n.beginPath(),2===this._points.length&&r.x===o.x&&r.y===o.y){var a=this.width/1e3;r=new fabric.Point(r.x,r.y),o=new fabric.Point(o.x,o.y),r.x-=a,o.x+=a}for(n.moveTo(r.x,r.y),t=1,e=this._points.length;t<e;t++){var s=r.midPointFrom(o);n.quadraticCurveTo(r.x,r.y,s.x,s.y),r=this._points[t],o=this._points[t+1]}n.lineTo(r.x,r.y),n.stroke(),n.restore()},convertPointsToSVGPath:function(t){var e,n=[],i=this.width/1e3,r=new fabric.Point(t[0].x,t[0].y),o=new fabric.Point(t[1].x,t[1].y),a=t.length,s=1,l=1,h=2<a;for(h&&(s=t[2].x<o.x?-1:t[2].x===o.x?0:1,l=t[2].y<o.y?-1:t[2].y===o.y?0:1),n.push("M ",r.x-s*i," ",r.y-l*i," "),e=1;e<a;e++){if(!r.eq(o)){var c=r.midPointFrom(o);n.push("Q ",r.x," ",r.y," ",c.x," ",c.y," ")}r=t[e],e+1<t.length&&(o=t[e+1])}return h&&(s=r.x>t[e-2].x?1:r.x===t[e-2].x?0:-1,l=r.y>t[e-2].y?1:r.y===t[e-2].y?0:-1),n.push("L ",r.x+s*i," ",r.y+l*i),n},createPath:function(t){var e=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray,originX:"center",originY:"center"}),n=new fabric.Point(e.left,e.top);return e.originX=fabric.Object.prototype.originX,e.originY=fabric.Object.prototype.originY,n=e.translateToGivenOrigin(n,"center","center",e.originX,e.originY),e.top=n.y,e.left=n.x,this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath();var t=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"!==t){var e=this.createPath(t);this.canvas.add(e),e.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:e})}else this.canvas.renderAll()}}),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),n=this.canvas.contextTop,i=this.canvas.viewportTransform;n.save(),n.transform(i[0],i[1],i[2],i[3],i[4],i[5]),n.fillStyle=e.fill,n.beginPath(),n.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),n.closePath(),n.fill(),n.restore()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],n=0,i=this.points.length;n<i;n++){var r=this.points[n],o=new fabric.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&o.setShadow(this.shadow),e.push(o)}var a=new fabric.Group(e,{originX:"center",originY:"center"});a.canvas=this.canvas,this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),n=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,i=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=n,e.fill=i,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],n=0,i=this.sprayChunks.length;n<i;n++)for(var r=this.sprayChunks[n],o=0,a=r.length;o<a;o++){var s=new fabric.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&s.setShadow(this.shadow),e.push(s)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var l=new fabric.Group(e,{originX:"center",originY:"center"});l.canvas=this.canvas,this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},_getOptimizedRects:function(t){for(var e,n={},i=0,r=t.length;i<r;i++)n[e=t[i].left+""+t[i].top]||(n[e]=t[i]);var o=[];for(e in n)o.push(n[e]);return o},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color;var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]);for(var n=0,i=this.sprayChunkPoints.length;n<i;n++){var r=this.sprayChunkPoints[n];void 0!==r.opacity&&(t.globalAlpha=r.opacity),t.fillRect(r.x,r.y,r.width,r.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e,n,i,r=this.width/2,o=0;o<this.density;o++){e=fabric.util.getRandomInt(t.x-r,t.x+r),n=fabric.util.getRandomInt(t.y-r,t.y+r),i=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var a=new fabric.Point(e,n);a.width=i,this.randomOpacity&&(a.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=fabric.document.createElement("canvas"),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t),n=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-n.x,offsetY:-n.y}),e}}),function(){var l=fabric.util.getPointer,a=fabric.util.degreesToRadians,u=fabric.util.radiansToDegrees,f=Math.atan2,h=Math.abs,c=fabric.StaticCanvas.supports("setLineDash");for(var t in fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e=this.getActiveGroup(),n=this.getActiveObject(),i=[],r=[];if(!e&&!n||this.preserveObjectStacking)i=this._objects;else{for(var o=0,a=this._objects.length;o<a;o++)t=this._objects[o],e&&e.contains(t)||t===n?r.push(t):i.push(t);e&&(e._set("_objects",r),i.push(e)),n&&i.push(n)}return i},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection(t),this.fire("after:render"),this.contextTopDirty=!0,this},_resetCurrentTransform:function(){var t=this._currentTransform;t.target.set({scaleX:t.original.scaleX,scaleY:t.original.scaleY,skewX:t.original.skewX,skewY:t.original.skewY,left:t.original.left,top:t.original.top}),this._shouldCenterTransform(t.target)?"rotate"===t.action?this._setOriginToCenter(t.target):("center"!==t.originX&&("right"===t.originX?t.mouseXSign=-1:t.mouseXSign=1),"center"!==t.originY&&("bottom"===t.originY?t.mouseYSign=-1:t.mouseYSign=1),t.originX="center",t.originY="center"):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(t,e,n){var i,r=n||this.getPointer(t,!0);return i=e.group&&e.group===this.getActiveGroup()?this._normalizePointer(e.group,r):{x:r.x,y:r.y},e.containsPoint(i)||e._findTargetCorner(r)},_normalizePointer:function(t,e){var n=t.calcTransformMatrix(),i=fabric.util.invertTransform(n),r=this.restorePointerVpt(e);return fabric.util.transformPoint(r,i)},isTargetTransparent:function(t,e,n){var i=t.hasBorders,r=t.transparentCorners,o=this.contextCache,a=t.selectionBackgroundColor;t.hasBorders=t.transparentCorners=!1,t.selectionBackgroundColor="",o.save(),o.transform.apply(o,this.viewportTransform),t.render(o),o.restore(),t.active&&t._renderControls(o),t.hasBorders=i,t.transparentCorners=r,t.selectionBackgroundColor=a;var s=fabric.util.isTransparent(o,e,n,this.targetFindTolerance);return this.clearContext(o),s},_shouldClearSelection:function(t,e){var n=this.getActiveGroup(),i=this.getActiveObject();return!e||e&&n&&!n.contains(e)&&n!==e&&!t[this.selectionKey]||e&&!e.evented||e&&!e.selectable&&i&&i!==e},_shouldCenterTransform:function(t){if(t){var e,n=this._currentTransform;return"scale"===n.action||"scaleX"===n.action||"scaleY"===n.action?e=this.centeredScaling||t.centeredScaling:"rotate"===n.action&&(e=this.centeredRotation||t.centeredRotation),e?!n.altKey:n.altKey}},_getOriginFromCorner:function(t,e){var n={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?n.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(n.x="left"),"tl"===e||"mt"===e||"tr"===e?n.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(n.y="top"),n},_getActionFromCorner:function(t,e,n){if(!e)return"drag";switch(e){case"mtr":return"rotate";case"ml":case"mr":return n[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return n[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(t,e){if(e){var n=this.getPointer(t),i=e._findTargetCorner(this.getPointer(t,!0)),r=this._getActionFromCorner(e,i,t),o=this._getOriginFromCorner(e,i);this._currentTransform={target:e,action:r,corner:i,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:n.x-e.left,offsetY:n.y-e.top,originX:o.x,originY:o.y,ex:n.x,ey:n.y,lastX:n.x,lastY:n.y,left:e.left,top:e.top,theta:a(e.angle),width:e.width*e.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:t.shiftKey,altKey:t[this.centeredKey]},this._currentTransform.original={left:e.left,top:e.top,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,originX:o.x,originY:o.y},this._resetCurrentTransform()}},_translateObject:function(t,e){var n=this._currentTransform,i=n.target,r=t-n.offsetX,o=e-n.offsetY,a=!i.get("lockMovementX")&&i.left!==r,s=!i.get("lockMovementY")&&i.top!==o;return a&&i.set("left",r),s&&i.set("top",o),a||s},_changeSkewTransformOrigin:function(t,e,n){var i="originX",r={0:"center"},o=e.target.skewX,a="left",s="right",l="mt"===e.corner||"ml"===e.corner?1:-1,h=1;t=0<t?1:-1,"y"===n&&(o=e.target.skewY,a="top",s="bottom",i="originY"),r[-1]=a,r[1]=s,e.target.flipX&&(h*=-1),e.target.flipY&&(h*=-1),0===o?(e.skewSign=-l*t*h,e[i]=r[-t]):(o=0<o?1:-1,e.skewSign=o,e[i]=r[o*l*h])},_skewObject:function(t,e,n){var i,r=this._currentTransform,o=r.target,a=o.get("lockSkewingX"),s=o.get("lockSkewingY");if(a&&"x"===n||s&&"y"===n)return!1;var l,h,c=o.getCenterPoint(),u=o.toLocalPoint(new fabric.Point(t,e),"center","center")[n],f=o.toLocalPoint(new fabric.Point(r.lastX,r.lastY),"center","center")[n],d=o._getTransformedDimensions();return this._changeSkewTransformOrigin(u-f,r,n),l=o.toLocalPoint(new fabric.Point(t,e),r.originX,r.originY)[n],h=o.translateToOriginPoint(c,r.originX,r.originY),i=this._setObjectSkew(l,r,n,d),r.lastX=t,r.lastY=e,o.setPositionByOrigin(h,r.originX,r.originY),i},_setObjectSkew:function(t,e,n,i){var r,o,a,s,l,h,c,u,f,d,p=e.target,g=e.skewSign;return"x"===n?(l="y",h="Y",c="X",f=0,d=p.skewY):(l="x",h="X",c="Y",f=p.skewX,d=0),s=p._getTransformedDimensions(f,d),(u=2*Math.abs(t)-s[n])<=2?r=0:(r=g*Math.atan(u/p["scale"+c]/(s[l]/p["scale"+h])),r=fabric.util.radiansToDegrees(r)),o=p["skew"+c]!==r,p.set("skew"+c,r),0!==p["skew"+h]&&(a=p._getTransformedDimensions(),r=i[l]/a[l]*p["scale"+h],p.set("scale"+h,r)),o},_scaleObject:function(t,e,n){var i=this._currentTransform,r=i.target,o=r.get("lockScalingX"),a=r.get("lockScalingY"),s=r.get("lockScalingFlip");if(o&&a)return!1;var l,h=r.translateToOriginPoint(r.getCenterPoint(),i.originX,i.originY),c=r.toLocalPoint(new fabric.Point(t,e),i.originX,i.originY),u=r._getTransformedDimensions();return this._setLocalMouse(c,i),l=this._setObjectScale(c,i,o,a,n,s,u),r.setPositionByOrigin(h,i.originX,i.originY),l},_setObjectScale:function(t,e,n,i,r,o,a){var s,l,h,c,u=e.target,f=!1,d=!1,p=!1;return h=t.x*u.scaleX/a.x,c=t.y*u.scaleY/a.y,s=u.scaleX!==h,l=u.scaleY!==c,o&&h<=0&&h<u.scaleX&&(f=!0),o&&c<=0&&c<u.scaleY&&(d=!0),"equally"!==r||n||i?r?"x"!==r||u.get("lockUniScaling")?"y"!==r||u.get("lockUniScaling")||d||i||u.set("scaleY",c)&&(p=p||l):f||n||u.set("scaleX",h)&&(p=p||s):(f||n||u.set("scaleX",h)&&(p=p||s),d||i||u.set("scaleY",c)&&(p=p||l)):f||d||(p=this._scaleObjectEqually(t,u,e,a)),e.newScaleX=h,e.newScaleY=c,f||d||this._flipObject(e,r),p},_scaleObjectEqually:function(t,e,n,i){var r,o=t.y+t.x,a=i.y*n.original.scaleY/e.scaleY+i.x*n.original.scaleX/e.scaleX,s=t.x/Math.abs(t.x),l=t.y/Math.abs(t.y);return n.newScaleX=s*Math.abs(n.original.scaleX*o/a),n.newScaleY=l*Math.abs(n.original.scaleY*o/a),r=n.newScaleX!==e.scaleX||n.newScaleY!==e.scaleY,e.set("scaleX",n.newScaleX),e.set("scaleY",n.newScaleY),r},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var n=e.target,i=this.getZoom(),r=n.padding/i;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),h(t.x)>r?t.x<0?t.x+=r:t.x-=r:t.x=0,h(t.y)>r?t.y<0?t.y+=r:t.y-=r:t.y=0},_rotateObject:function(t,e){var n=this._currentTransform;if(n.target.get("lockRotation"))return!1;var i=f(n.ey-n.top,n.ex-n.left),r=f(e-n.top,t-n.left),o=u(r-i+n.theta),a=!0;if(0<n.target.snapAngle){var s=n.target.snapAngle,l=n.target.snapThreshold||s,h=Math.ceil(o/s)*s,c=Math.floor(o/s)*s;Math.abs(o-c)<l?o=c:Math.abs(o-h)<l&&(o=h)}return o<0&&(o=360+o),o%=360,n.target.angle===o?a=!1:n.target.angle=o,a},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.setAngle(0)},_drawSelection:function(t){var e=this._groupSelector,n=e.left,i=e.top,r=h(n),o=h(i);if(this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(0<n?0:-n),e.ey-(0<i?0:-i),r,o)),this.selectionLineWidth&&this.selectionBorderColor)if(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,1<this.selectionDashArray.length&&!c){var a=e.ex+.5-(0<n?0:r),s=e.ey+.5-(0<i?0:o);t.beginPath(),fabric.util.drawDashedLine(t,a,s,a+r,s,this.selectionDashArray),fabric.util.drawDashedLine(t,a,s+o-1,a+r,s+o-1,this.selectionDashArray),fabric.util.drawDashedLine(t,a,s,a,s+o,this.selectionDashArray),fabric.util.drawDashedLine(t,a+r-1,s,a+r-1,s+o,this.selectionDashArray),t.closePath(),t.stroke()}else fabric.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(e.ex+.5-(0<n?0:r),e.ey+.5-(0<i?0:o),r,o)},findTarget:function(t,e){if(!this.skipTargetFind){var n,i,r=this.getPointer(t,!0),o=this.getActiveGroup(),a=this.getActiveObject();if(this.targets=[],o&&!e&&o===this._searchPossibleTargets([o],r))return this._fireOverOutEvents(o,t),o;if(a&&a._findTargetCorner(r))return this._fireOverOutEvents(a,t),a;if(a&&a===this._searchPossibleTargets([a],r)){if(!this.preserveObjectStacking)return this._fireOverOutEvents(a,t),a;n=a,i=this.targets,this.targets=[]}var s=this._searchPossibleTargets(this._objects,r);return t[this.altSelectionKey]&&s&&n&&s!==n&&(s=n,this.targets=i),this._fireOverOutEvents(s,t),s}},_fireOverOutEvents:function(t,e){var n,i,r=this._hoveredTarget;r!==t&&(n={e:e,target:t,previousTarget:this._hoveredTarget},i={e:e,target:this._hoveredTarget,nextTarget:t},this._hoveredTarget=t),t?r!==t&&(r&&(this.fire("mouse:out",i),r.fire("mouseout",i)),this.fire("mouse:over",n),t.fire("mouseover",n)):r&&(this.fire("mouse:out",i),r.fire("mouseout",i))},_checkTarget:function(t,e){if(e&&e.visible&&e.evented&&this.containsPoint(null,e,t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,t.x,t.y))return!0}},_searchPossibleTargets:function(t,e){for(var n,i,r,o=t.length;o--;)if(this._checkTarget(e,t[o])){"group"===(n=t[o]).type&&n.subTargetCheck&&(i=this._normalizePointer(n,e),(r=this._searchPossibleTargets(n._objects,i))&&this.targets.push(r));break}return n},restorePointerVpt:function(t){return fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(t,e,n){n||(n=this.upperCanvasEl);var i,r=l(t),o=n.getBoundingClientRect(),a=o.width||0,s=o.height||0;return a&&s||("top"in o&&"bottom"in o&&(s=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(a=Math.abs(o.right-o.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,e||(r=this.restorePointerVpt(r)),i=0===a||0===s?{width:1,height:1}:{width:n.width/a,height:n.height/s},{x:r.x*i.width,y:r.y*i.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl?this.upperCanvasEl.className="":this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.getWidth()||t.width,n=this.getHeight()||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:n+"px",left:0,top:0,"touch-action":"none"}),t.width=e,t.height=n,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},_setActiveObject:function(t){var e=this._activeObject;e&&(e.set("active",!1),t!==e&&e.onDeselect&&"function"==typeof e.onDeselect&&e.onDeselect()),(this._activeObject=t).set("active",!0)},setActiveObject:function(t,e){var n=this.getActiveObject();return n&&n!==t&&n.fire("deselected",{e:e}),this._setActiveObject(t),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e}),this.renderAll(),this},getActiveObject:function(){return this._activeObject},_onObjectRemoved:function(t){this.getActiveObject()===t&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),this._hoveredTarget===t&&(this._hoveredTarget=null),this.callSuper("_onObjectRemoved",t)},_discardActiveObject:function(){var t=this._activeObject;t&&(t.set("active",!1),t.onDeselect&&"function"==typeof t.onDeselect&&t.onDeselect()),this._activeObject=null},discardActiveObject:function(t){var e=this._activeObject;return e&&(this.fire("before:selection:cleared",{target:e,e:t}),this._discardActiveObject(),this.fire("selection:cleared",{e:t}),e.fire("deselected",{e:t})),this},_setActiveGroup:function(t){(this._activeGroup=t)&&t.set("active",!0)},setActiveGroup:function(t,e){return this._setActiveGroup(t),t&&(this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e})),this},getActiveGroup:function(){return this._activeGroup},_discardActiveGroup:function(){var t=this.getActiveGroup();t&&t.destroy(),this.setActiveGroup(null)},discardActiveGroup:function(t){var e=this.getActiveGroup();return e&&(this.fire("before:selection:cleared",{e:t,target:e}),this._discardActiveGroup(),this.fire("selection:cleared",{e:t})),this},deactivateAll:function(){for(var t,e=this.getObjects(),n=0,i=e.length;n<i;n++)(t=e[n])&&t.set("active",!1);return this._discardActiveGroup(),this._discardActiveObject(),this},deactivateAllWithDispatch:function(t){for(var e,n=this.getObjects(),i=0,r=n.length;i<r;i++)(e=n[i])&&e.set("active",!1);return this.discardActiveGroup(t),this.discardActiveObject(t),this},dispose:function(){fabric.StaticCanvas.prototype.dispose.call(this);var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),delete this.upperCanvasEl,t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,this},clear:function(){return this.discardActiveGroup(),this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this.getActiveGroup();e?e._renderControls(t):this._drawObjectsControls(t)},_drawObjectsControls:function(t){for(var e=0,n=this._objects.length;e<n;++e)this._objects[e]&&this._objects[e].active&&this._objects[e]._renderControls(t)},_toObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(t),r=this.callSuper("_toObject",t,e,n);return this._unwindGroupTransformOnObject(t,i),r},_realizeGroupTransformOnObject:function(e){if(e.group&&e.group===this.getActiveGroup()){var n={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(t){n[t]=e[t]}),this.getActiveGroup().realizeTransform(e),n}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,n){var i;i=this._realizeGroupTransformOnObject(e),this.callSuper("_setSVGObject",t,e,n),this._unwindGroupTransformOnObject(e,i)}}),fabric.StaticCanvas)"prototype"!==t&&(fabric.Canvas[t]=fabric.StaticCanvas[t]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var r={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},n=fabric.util.addListener,i=fabric.util.removeListener;function s(t,e){return"which"in t?t.which===e:t.button===e-1}fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this.removeListeners(),this._bindEvents(),n(fabric.window,"resize",this._onResize),n(this.upperCanvasEl,"mousedown",this._onMouseDown),n(this.upperCanvasEl,"mousemove",this._onMouseMove),n(this.upperCanvasEl,"mouseout",this._onMouseOut),n(this.upperCanvasEl,"mouseenter",this._onMouseEnter),n(this.upperCanvasEl,"wheel",this._onMouseWheel),n(this.upperCanvasEl,"contextmenu",this._onContextMenu),n(this.upperCanvasEl,"touchstart",this._onMouseDown,{passive:!1}),n(this.upperCanvasEl,"touchmove",this._onMouseMove,{passive:!1}),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this.eventsBinded||(this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this.eventsBinded=!0)},removeListeners:function(){i(fabric.window,"resize",this._onResize),i(this.upperCanvasEl,"mousedown",this._onMouseDown),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"mouseout",this._onMouseOut),i(this.upperCanvasEl,"mouseenter",this._onMouseEnter),i(this.upperCanvasEl,"wheel",this._onMouseWheel),i(this.upperCanvasEl,"contextmenu",this._onContextMenu),i(this.upperCanvasEl,"touchstart",this._onMouseDown),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t}),this._iTextInstances&&this._iTextInstances.forEach(function(t){t.isEditing&&t.hiddenTextarea.focus()})},_onMouseEnter:function(t){this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onMouseDown:function(t){this.__onMouseDown(t),n(fabric.document,"touchend",this._onMouseUp,{passive:!1}),n(fabric.document,"touchmove",this._onMouseMove,{passive:!1}),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===t.type?i(this.upperCanvasEl,"mousedown",this._onMouseDown):(n(fabric.document,"mouseup",this._onMouseUp),n(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(t){if(this.__onMouseUp(t),i(fabric.document,"mouseup",this._onMouseUp),i(fabric.document,"touchend",this._onMouseUp),i(fabric.document,"mousemove",this._onMouseMove),i(fabric.document,"touchmove",this._onMouseMove),n(this.upperCanvasEl,"mousemove",this._onMouseMove),n(this.upperCanvasEl,"touchmove",this._onMouseMove,{passive:!1}),"touchend"===t.type){var e=this;setTimeout(function(){n(e.upperCanvasEl,"mousedown",e._onMouseDown)},400)}},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var n=this.getActiveGroup()||this.getActiveObject();return(!n||!n.isEditing||t!==n)&&!!(t&&(t.isMoving||t!==n)||!t&&n||!t&&!n&&!this._groupSelector||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y))},__onMouseUp:function(t){var e;if(s(t,3))this.fireRightClick&&this._handleEvent(t,"up",e,3);else if(s(t,2))this.fireMiddleClick&&this._handleEvent(t,"up",e,2);else if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else{var n=!0,i=this._currentTransform,r=this._groupSelector,o=!r||0===r.left&&0===r.top;i&&(this._finalizeCurrentTransform(t),n=!i.actionPerformed),e=n?this.findTarget(t,!0):i.target;var a=this._shouldRender(e,this.getPointer(t));e||!o?this._maybeGroupObjects(t):(this._groupSelector=null,this._currentTransform=null),e&&(e.isMoving=!1),this._setCursorFromEvent(t,e),this._handleEvent(t,"up",e||null,1,o),e&&(e.__corner=0),a&&this.renderAll()}},_handleEvent:function(t,e,n,i,r){var o=void 0===n?this.findTarget(t):n,a=this.targets||[],s={e:t,target:o,subTargets:a,button:i||1,isClick:r||!1};this.fire("mouse:"+e,s),o&&o.fire("mouse"+e,s);for(var l=0;l<a.length;l++)a[l].fire("mouse"+e,s)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,n=e.target;n._scaling&&(n._scaling=!1),n.setCoords(),this._restoreOriginXY(n),(e.actionPerformed||this.stateful&&n.hasStateChanged())&&(this.fire("object:modified",{target:n,e:t}),n.fire("modified",{e:t}))},_restoreOriginXY:function(t){if(this._previousOriginX&&this._previousOriginY){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null}},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject(t).renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e)}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this._handleEvent(t,"up")},__onMouseDown:function(t){var e=this.findTarget(t);if(s(t,3))this.fireRightClick&&this._handleEvent(t,"down",e||null,3);else if(s(t,2))this.fireMiddleClick&&this._handleEvent(t,"down",e||null,2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(!this._currentTransform){var n=this.getPointer(t,!0);this._previousPointer=n;var i=this._shouldRender(e,n),r=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.deactivateAllWithDispatch(t):r&&(this._handleGrouping(t,e),e=this.getActiveGroup()),!this.selection||e&&(e.selectable||e.isEditing)||(this._groupSelector={ex:n.x,ey:n.y,top:0,left:0}),e){!e.selectable||!e.__corner&&r||(this._beforeTransform(t,e),this._setupCurrentTransform(t,e));var o=this.getActiveObject();e!==this.getActiveGroup()&&e!==o&&(this.deactivateAll(),e.selectable&&(o&&o.fire("deselected",{e:t}),this.setActiveObject(e,t)))}this._handleEvent(t,"down",e||null),i&&this.renderAll()}},_beforeTransform:function(t,e){this.stateful&&e.saveState(),e._findTargetCorner(this.getPointer(t))&&this.onBeforeScaleRotate(e)},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},_setCenterToOrigin:function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(t){var e,n;if(this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(!(void 0!==t.touches&&1<t.touches.length)){var i=this._groupSelector;i?(n=this.getPointer(t,!0),i.left=n.x-i.ex,i.top=n.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t),this._setCursorFromEvent(t,e)),this._handleEvent(t,"move",e||null)}},__onMouseWheel:function(t){this._handleEvent(t,"wheel")},_transformObject:function(t){var e=this.getPointer(t),n=this._currentTransform;n.reset=!1,n.target.isMoving=!0,n.shiftKey=t.shiftKey,n.altKey=t[this.centeredKey],this._beforeScaleTransform(t,n),this._performTransformAction(t,n,e),n.actionPerformed&&this.renderAll()},_performTransformAction:function(t,e,n){var i=n.x,r=n.y,o=e.target,a=e.action,s=!1;"rotate"===a?(s=this._rotateObject(i,r))&&this._fire("rotating",o,t):"scale"===a?(s=this._onScale(t,e,i,r))&&this._fire("scaling",o,t):"scaleX"===a?(s=this._scaleObject(i,r,"x"))&&this._fire("scaling",o,t):"scaleY"===a?(s=this._scaleObject(i,r,"y"))&&this._fire("scaling",o,t):"skewX"===a?(s=this._skewObject(i,r,"x"))&&this._fire("skewing",o,t):"skewY"===a?(s=this._skewObject(i,r,"y"))&&this._fire("skewing",o,t):(s=this._translateObject(i,r))&&(this._fire("moving",o,t),this.setCursor(o.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||s},_fire:function(t,e,n){this.fire("object:"+t,{target:e,e:n}),e.fire(t,{e:n})},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var n=this._shouldCenterTransform(e.target);(n&&("center"!==e.originX||"center"!==e.originY)||!n&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(),e.reset=!0)}},_onScale:function(t,e,n,i){return!t[this.uniScaleKey]&&!this.uniScaleTransform||e.target.get("lockUniScaling")?(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(),e.currentAction="scaleEqually",this._scaleObject(n,i,"equally")):(e.currentAction="scale",this._scaleObject(n,i))},_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var n=e.hoverCursor||this.hoverCursor,i=this.getActiveGroup(),r=e._findTargetCorner&&(!i||!i.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));return r?this._setCornerCursor(r,e,t):this.setCursor(n),!0},_setCornerCursor:function(t,e,n){if(t in r)this.setCursor(this._getRotatedCornerCursor(t,e,n));else{if("mtr"!==t||!e.hasRotatingPoint)return this.setCursor(this.defaultCursor),!1;this.setCursor(this.rotationCursor)}},_getRotatedCornerCursor:function(t,e,n){var i=Math.round(e.getAngle()%360/45);return i<0&&(i+=8),i+=r[t],n[this.altActionKey]&&r[t]%2==0&&(i+=2),i%=8,this.cursorMap[i]}})}(),Vrc=Math.min,Wrc=Math.max,fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var n=this.getActiveObject();return t[this.selectionKey]&&e&&e.selectable&&(this.getActiveGroup()||n&&n!==e)&&this.selection},_handleGrouping:function(t,e){var n=this.getActiveGroup();(e!==n||(e=this.findTarget(t,!0)))&&(n?this._updateActiveGroup(e,t):this._createActiveGroup(e,t),this._activeGroup&&this._activeGroup.saveCoords())},_updateActiveGroup:function(t,e){var n=this.getActiveGroup();if(n.contains(t)){if(n.removeWithUpdate(t),t.set("active",!1),1===n.size())return this.discardActiveGroup(e),void this.setActiveObject(n.item(0),e)}else n.addWithUpdate(t);this.fire("selection:created",{target:n,e:e}),n.set("active",!0)},_createActiveGroup:function(t,e){if(this._activeObject&&t!==this._activeObject){var n=this._createGroup(t);n.addWithUpdate(),this.setActiveGroup(n,e),this._activeObject=null,this.fire("selection:created",{target:n,e:e})}t.set("active",!0)},_createGroup:function(t){var e=this.getObjects(),n=e.indexOf(this._activeObject)<e.indexOf(t)?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.Group(n,{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects();1===e.length?this.setActiveObject(e[0],t):1<e.length&&((e=new fabric.Group(e.reverse(),{canvas:this})).addWithUpdate(),this.setActiveGroup(e,t),e.saveCoords(),this.fire("selection:created",{target:e,e:t}),this.renderAll())},_collectObjects:function(){for(var t,e=[],n=this._groupSelector.ex,i=this._groupSelector.ey,r=n+this._groupSelector.left,o=i+this._groupSelector.top,a=new fabric.Point(Vrc(n,r),Vrc(i,o)),s=new fabric.Point(Wrc(n,r),Wrc(i,o)),l=n===r&&i===o,h=this._objects.length;h--&&!((t=this._objects[h])&&t.selectable&&t.visible&&(t.intersectsWithRect(a,s)||t.isContainedWithinRect(a,s)||t.containsPoint(a)||t.containsPoint(s))&&(t.set("active",!0),e.push(t),l)););return e},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t);var e=this.getActiveGroup();e&&(e.setObjectsCoords().setCoords(),e.isMoving=!1,this.setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null}}),zsc=fabric.StaticCanvas.supports("toDataURLWithQuality"),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",n=t.quality||1,i=t.multiplier||1,r={left:t.left||0,top:t.top||0,width:t.width||0,height:t.height||0};return this.__toDataURLWithMultiplier(e,n,r,i)},__toDataURLWithMultiplier:function(t,e,n,i){var r=this.getWidth(),o=this.getHeight(),a=(n.width||this.getWidth())*i,s=(n.height||this.getHeight())*i,l=this.getZoom()*i,h=this.viewportTransform,c=[l,0,0,l,(h[4]-n.left)*i,(h[5]-n.top)*i],u=this.interactive;this.viewportTransform=c,this.interactive&&(this.interactive=!1),r!==a||o!==s?this.setDimensions({width:a,height:s},{backstoreOnly:!0}):this.renderAll();var f=this.__toDataURL(t,e,n);return u&&(this.interactive=u),this.viewportTransform=h,this.setDimensions({width:r,height:o},{backstoreOnly:!0}),f},__toDataURL:function(t,e){var n=this.contextContainer.canvas;return"jpg"===t&&(t="jpeg"),zsc?n.toDataURL("image/"+t,e):n.toDataURL("image/"+t)},toDataURLWithMultiplier:function(t,e,n){return this.toDataURL({format:t,multiplier:e,quality:n})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,n){return this.loadFromJSON(t,e,n)},loadFromJSON:function(t,e,n){if(t){var i="string"==typeof t?JSON.parse(t):fabric.util.object.clone(t),r=this,o=this.renderOnAddRemove;return this.renderOnAddRemove=!1,this._enlivenObjects(i.objects,function(t){r.clear(),r._setBgOverlay(i,function(){t.forEach(function(t,e){r.insertAt(t,e)}),r.renderOnAddRemove=o,delete i.objects,delete i.backgroundImage,delete i.overlayImage,delete i.background,delete i.overlay,r._setOptions(i),r.renderAll(),e&&e()})},n),this}},_setBgOverlay:function(t,e){var n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var i=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,n,i),this.__setBgOverlay("overlayImage",t.overlayImage,n,i),this.__setBgOverlay("backgroundColor",t.background,n,i),this.__setBgOverlay("overlayColor",t.overlay,n,i)}else e&&e()},__setBgOverlay:function(e,t,n,i){var r=this;if(!t)return n[e]=!0,void(i&&i());"backgroundImage"===e||"overlayImage"===e?fabric.util.enlivenObjects([t],function(t){r[e]=t[0],n[e]=!0,i&&i()}):this["set"+fabric.util.string.capitalize(e,!0)](t,function(){n[e]=!0,i&&i()})},_enlivenObjects:function(t,e,n){t&&0!==t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},null,n):e&&e([])},_toDataURL:function(e,n){this.clone(function(t){n(t.toDataURL(e))})},_toDataURLWithMultiplier:function(e,n,i){this.clone(function(t){i(t.toDataURLWithMultiplier(e,n))})},clone:function(e,t){var n=JSON.stringify(this.toJSON(t));this.cloneWithoutData(function(t){t.loadFromJSON(n,function(){e&&e(t)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.getWidth(),e.height=this.getHeight();var n=new fabric.Canvas(e);n.clipTo=this.clipTo,this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,function(){n.renderAll(),t&&t(n)}),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):t&&t(n)}}),function(t){"use strict";var x=t.fabric||(t.fabric={}),e=x.util.object.extend,s=x.util.object.clone,i=x.util.toFixed,n=x.util.string.capitalize,r=x.util.degreesToRadians,o=x.StaticCanvas.supports("setLineDash"),a=!x.isLikelyNode;x.Object||(x.Object=x.util.createClass(x.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:a,statefullCache:!1,noScaleCache:!0,dirty:!0,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height strokeLineCap strokeLineJoin strokeMiterLimit backgroundColor".split(" "),initialize:function(t){(t=t||{})&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=x.document.createElement("canvas"),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas()},_limitCacheSize:function(t){var e=x.perfLimitSizeTotal,n=t.width,i=t.height,r=x.maxCacheSideLimit,o=x.minCacheSideLimit;if(n<=r&&i<=r&&n*i<=e)return n<o&&(t.width=o),i<o&&(t.height=o),t;var a=n/i,s=x.util.limitDimsByArea(a,e),l=x.util.capValue,h=l(o,s.x,r),c=l(o,s.y,r);return h<n&&(t.zoomX/=n/h,t.width=h,t.capped=!0),c<i&&(t.zoomY/=i/c,t.height=c,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.canvas&&this.canvas.getZoom()||1,e=this.getObjectScaling(),n=this.canvas&&this.canvas._isRetinaScaling()?x.devicePixelRatio:1,i=this._getNonTransformedDimensions(),r=e.scaleX*t*n,o=e.scaleY*t*n;return{width:i.x*r+2,height:i.y*o+2,zoomX:r,zoomY:o,x:i.x,y:i.y}},_updateCacheCanvas:function(){if(this.noScaleCache&&this.canvas&&this.canvas._currentTransform){var t=this.canvas._currentTransform.target,e=this.canvas._currentTransform.action;if(this===t&&e.slice&&"scale"===e.slice(0,5))return!1}var n,i,r=this._cacheCanvas,o=this._limitCacheSize(this._getCacheCanvasDimensions()),a=x.minCacheSideLimit,s=o.width,l=o.height,h=o.zoomX,c=o.zoomY,u=s!==this.cacheWidth||l!==this.cacheHeight,f=this.zoomX!==h||this.zoomY!==c,d=u||f,p=0,g=0,v=!1;if(u){var m=this._cacheCanvas.width,y=this._cacheCanvas.height,_=m<s||y<l;v=_||(s<.9*m||l<.9*y)&&a<m&&a<y,_&&!o.capped&&(a<s||a<l)&&(p=.1*s,g=.1*l)}return!!d&&(v?(r.width=Math.ceil(s+p),r.height=Math.ceil(l+g)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,r.width,r.height)),n=o.x*h/2,i=o.y*c/2,this.cacheTranslationX=Math.round(r.width/2-n)+n,this.cacheTranslationY=Math.round(r.height/2-i)+i,this.cacheWidth=s,this.cacheHeight=l,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(h,c),this.zoomX=h,this.zoomY=c,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initClipping(t),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t,e){this.group&&!this.group._transformDone&&this.group===this.canvas._activeGroup&&this.group.transform(t);var n=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(n.x,n.y),this.angle&&t.rotate(r(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1)),this.skewX&&t.transform(1,0,Math.tan(r(this.skewX)),1,0,0),this.skewY&&t.transform(1,Math.tan(r(this.skewY)),0,1,0,0)},toObject:function(t){var e=x.Object.NUM_FRACTION_DIGITS,n={type:this.type,originX:this.originX,originY:this.originY,left:i(this.left,e),top:i(this.top,e),width:i(this.width,e),height:i(this.height,e),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,e),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:i(this.strokeMiterLimit,e),scaleX:i(this.scaleX,e),scaleY:i(this.scaleY,e),angle:i(this.getAngle(),e),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,e),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:i(this.skewX,e),skewY:i(this.skewY,e)};return x.util.populateWithProperties(this,n,t),this.includeDefaultValues||(n=this._removeDefaultValues(n)),n},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(e){var n=x.util.getKlass(e.type).prototype;return n.stateProperties.forEach(function(t){e[t]===n[t]&&delete e[t],"[object Array]"===Object.prototype.toString.call(e[t])&&"[object Array]"===Object.prototype.toString.call(n[t])&&0===e[t].length&&0===n[t].length&&delete e[t]}),e},toString:function(){return"#<fabric."+n(this.type)+">"},getObjectScaling:function(){var t=this.scaleX,e=this.scaleY;if(this.group){var n=this.group.getObjectScaling();t*=n.scaleX,e*=n.scaleY}return{scaleX:t,scaleY:e}},_set:function(t,e){var n="scaleX"===t||"scaleY"===t,i=this[t]!==e;return n&&(e=this._constrainScale(e)),"scaleX"===t&&e<0?(this.flipX=!this.flipX,e*=-1):"scaleY"===t&&e<0?(this.flipY=!this.flipY,e*=-1):"shadow"!==t||!e||e instanceof x.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",e):e=new x.Shadow(e),this[t]=e,i&&-1<this.cacheProperties.indexOf(t)&&(this.group&&this.group.set("dirty",!0),this.dirty=!0),i&&this.group&&-1<this.stateProperties.indexOf(t)&&this.group.set("dirty",!0),"width"!==t&&"height"!==t||(this.minScaleLimit=Math.min(.1,1/Math.max(this.width,this.height))),this},setOnGroup:function(){},setSourcePath:function(t){return this.sourcePath=t,this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:x.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||0===this.width&&0===this.height||!this.visible},render:function(t,e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),e||this.transform(t),this._setOpacity(t),this._setShadow(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.clipTo&&x.util.clipContext(this,t),this.shouldCache(e)?(this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty(e)&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,e),this.dirty=!1),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t,e),e&&this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),this.clipTo&&t.restore(),t.restore())},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},needsItsOwnCache:function(){return!1},shouldCache:function(t){return!t&&this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isCaching())},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawObject:function(t,e){this._renderBackground(t),this._setStrokeStyles(t),this._setFillStyles(t),this._render(t,e)},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!t){var e=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-n/2,e,n)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){t.globalAlpha*=this.opacity},_setStrokeStyles:function(t){this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t,this):this.stroke)},_setFillStyles:function(t){this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t,this):this.fill)},_setLineDash:function(t,e,n){e&&(1&e.length&&e.push.apply(e,e),o?t.setLineDash(e):n&&n(t))},_renderControls:function(t){if(this.active&&(!this.group||this.group===this.canvas.getActiveGroup())){var e,n=this.getViewportTransform(),i=this.calcTransformMatrix();i=x.util.multiplyTransformMatrices(n,i),e=x.util.qrDecompose(i),t.save(),t.translate(e.translateX,e.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.group&&this.group===this.canvas.getActiveGroup()?(t.rotate(r(e.angle)),this.drawBordersInGroup(t,e)):(t.rotate(r(this.angle)),this.drawBorders(t)),this.drawControls(t),t.restore()}},_setShadow:function(t){if(this.shadow){var e=this.canvas&&this.canvas.viewportTransform[0]||1,n=this.canvas&&this.canvas.viewportTransform[3]||1,i=this.getObjectScaling();this.canvas&&this.canvas._isRetinaScaling()&&(e*=x.devicePixelRatio,n*=x.devicePixelRatio),t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*(e+n)*(i.scaleX+i.scaleY)/4,t.shadowOffsetX=this.shadow.offsetX*e*i.scaleX,t.shadowOffsetY=this.shadow.offsetY*n*i.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(e.toLive){var n=e.gradientTransform||e.patternTransform;n&&t.transform.apply(t,n);var i=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;t.translate(i,r)}},_renderFill:function(t){this.fill&&(t.save(),this._applyPatternGradientTransform(t,this.fill),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){this.stroke&&0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this._applyPatternGradientTransform(t,this.stroke),t.stroke(),t.restore())},clone:function(t,e){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(e),t):new x.Object(this.toObject(e))},cloneAsImage:function(e,t){var n=this.toDataURL(t);return x.util.loadImage(n,function(t){e&&e(new x.Image(t))}),this},toDataURL:function(t){t||(t={});var e=x.util.createCanvasElement(),n=this.getBoundingRect();e.width=n.width,e.height=n.height,x.util.wrapElement(e,"div");var i=new x.StaticCanvas(e,{enableRetinaScaling:t.enableRetinaScaling});"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(i.backgroundColor="#fff");var r={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new x.Point(i.getWidth()/2,i.getHeight()/2),"center","center");var o=this.canvas;i.add(this);var a=i.toDataURL(t);return this.set(r).setCoords(),this.canvas=o,i.dispose(),i=null,a},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},setGradient:function(t,e){e||(e={});var n={colorStops:[]};return n.type=e.type||(e.r1||e.r2?"radial":"linear"),n.coords={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},(e.r1||e.r2)&&(n.coords.r1=e.r1,n.coords.r2=e.r2),n.gradientTransform=e.gradientTransform,x.Gradient.prototype.addColorStop.call(n,e.colorStops),this.set(t,x.Gradient.forObject(this,n))},setPatternFill:function(t){return this.set("fill",new x.Pattern(t))},setShadow:function(t){return this.set("shadow",t?new x.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},setAngle:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},remove:function(){return this.canvas&&(this.group&&this.group===this.canvas._activeGroup&&this.group.remove(this),this.canvas.remove(this)),this},getLocalPointer:function(t,e){e=e||this.canvas.getPointer(t);var n=new x.Point(e.x,e.y),i=this._getLeftTopCoords();return this.angle&&(n=x.util.rotatePoint(n,i,r(-this.angle))),{x:n.x-i.x,y:n.y-i.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),x.util.createAccessors(x.Object),x.Object.prototype.rotate=x.Object.prototype.setAngle,e(x.Object.prototype,x.Observable),x.Object.NUM_FRACTION_DIGITS=2,x.Object._fromObject=function(t,n,i,e,r){var o=x[t];if(n=s(n,!0),!e){var a=r?new o(n[r],n):new o(n);return i&&i(a),a}x.util.enlivenPatterns([n.fill,n.stroke],function(t){void 0!==t[0]&&(n.fill=t[0]),void 0!==t[1]&&(n.stroke=t[1]);var e=r?new o(n[r],n):new o(n);i&&i(e)})},x.Object.__uid=0)}(exports),uwc=fabric.util.degreesToRadians,vwc={left:-.5,center:0,right:.5},wwc={top:-.5,center:0,bottom:.5},fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(t,e,n,i,r){var o,a,s,l=t.x,h=t.y;return"string"==typeof e?e=vwc[e]:e-=.5,"string"==typeof i?i=vwc[i]:i-=.5,"string"==typeof n?n=wwc[n]:n-=.5,"string"==typeof r?r=wwc[r]:r-=.5,a=r-n,((o=i-e)||a)&&(s=this._getTransformedDimensions(),l=t.x+o*s.x,h=t.y+a*s.y),new fabric.Point(l,h)},translateToCenterPoint:function(t,e,n){var i=this.translateToGivenOrigin(t,e,n,"center","center");return this.angle?fabric.util.rotatePoint(i,t,uwc(this.angle)):i},translateToOriginPoint:function(t,e,n){var i=this.translateToGivenOrigin(t,"center","center",e,n);return this.angle?fabric.util.rotatePoint(i,t,uwc(this.angle)):i},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var n=this.getCenterPoint();return this.translateToOriginPoint(n,t,e)},toLocalPoint:function(t,e,n){var i,r,o=this.getCenterPoint();return i=void 0!==e&&void 0!==n?this.translateToGivenOrigin(o,"center","center",e,n):new fabric.Point(this.left,this.top),r=new fabric.Point(t.x,t.y),this.angle&&(r=fabric.util.rotatePoint(r,o,-uwc(this.angle))),r.subtractEquals(i)},setPositionByOrigin:function(t,e,n){var i=this.translateToCenterPoint(t,e,n),r=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(t){var e,n,i=uwc(this.angle),r=this.getWidth(),o=Math.cos(i)*r,a=Math.sin(i)*r;e="string"==typeof this.originX?vwc[this.originX]:this.originX-.5,n="string"==typeof t?vwc[t]:t-.5,this.left+=o*(n-e),this.top+=a*(n-e),this.setCoords(),this.originX=t},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")},onDeselect:function(){}}),mxc=fabric.util.degreesToRadians,nxc=fabric.util.multiplyTransformMatrices,fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,getCoords:function(t,e){this.oCoords||this.setCoords();var n,i=t?this.aCoords:this.oCoords;return n=e?this.calcCoords(t):i,[new fabric.Point(n.tl.x,n.tl.y),new fabric.Point(n.tr.x,n.tr.y),new fabric.Point(n.br.x,n.br.y),new fabric.Point(n.bl.x,n.bl.y)]},intersectsWithRect:function(t,e,n,i){var r=this.getCoords(n,i);return"Intersection"===fabric.Intersection.intersectPolygonRectangle(r,t,e).status},intersectsWithObject:function(t,e,n){return"Intersection"===fabric.Intersection.intersectPolygonPolygon(this.getCoords(e,n),t.getCoords(e,n)).status||t.isContainedWithinObject(this,e,n)||this.isContainedWithinObject(t,e,n)},isContainedWithinObject:function(t,e,n){for(var i=this.getCoords(e,n),r=0,o=t._getImageLines(n?t.calcCoords(e):e?t.aCoords:t.oCoords);r<4;r++)if(!t.containsPoint(i[r],o))return!1;return!0},isContainedWithinRect:function(t,e,n,i){var r=this.getBoundingRect(n,i);return r.left>=t.x&&r.left+r.width<=e.x&&r.top>=t.y&&r.top+r.height<=e.y},containsPoint:function(t,e,n,i){e=e||this._getImageLines(i?this.calcCoords(n):n?this.aCoords:this.oCoords);var r=this._findCrossPoints(t,e);return 0!==r&&r%2==1},isOnScreen:function(t){if(!this.canvas)return!1;for(var e,n=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br,r=this.getCoords(!0,t),o=0;o<4;o++)if((e=r[o]).x<=i.x&&e.x>=n.x&&e.y<=i.y&&e.y>=n.y)return!0;if(this.intersectsWithRect(n,i,!0))return!0;var a={x:(n.x+i.x)/2,y:(n.y+i.y)/2};return!!this.containsPoint(a,null,!0)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var n,i,r,o=0;for(var a in e)if(!((r=e[a]).o.y<t.y&&r.d.y<t.y||r.o.y>=t.y&&r.d.y>=t.y||(r.o.x===r.d.x&&r.o.x>=t.x?i=r.o.x:(n=(r.d.y-r.o.y)/(r.d.x-r.o.x),i=-(t.y-0*t.x-(r.o.y-n*r.o.x))/(0-n)),i>=t.x&&(o+=1),2!==o)))break;return o},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(t,e){var n=this.getCoords(t,e);return fabric.util.makeBoundingBoxFromPoints(n)},getWidth:function(){return this._getTransformedDimensions().x},getHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return(t=this._constrainScale(t))<0&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleX=t,this.scaleY=t,this.setCoords()},scaleToWidth:function(t){var e=this.getBoundingRect().width/this.getWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t){var e=this.getBoundingRect().height/this.getHeight();return this.scale(t/this.height/e)},calcCoords:function(t){var e=mxc(this.angle),n=this.getViewportTransform(),i=t?this._getTransformedDimensions():this._calculateCurrentDimensions(),r=i.x,o=i.y,a=Math.sin(e),s=Math.cos(e),l=0<r?Math.atan(o/r):0,h=r/Math.cos(l)/2,c=Math.cos(l+e)*h,u=Math.sin(l+e)*h,f=this.getCenterPoint(),d=t?f:fabric.util.transformPoint(f,n),p=new fabric.Point(d.x-c,d.y-u),g=new fabric.Point(p.x+r*s,p.y+r*a),v=new fabric.Point(p.x-o*a,p.y+o*s),m=new fabric.Point(d.x+c,d.y+u);if(!t)var y=new fabric.Point((p.x+v.x)/2,(p.y+v.y)/2),_=new fabric.Point((g.x+p.x)/2,(g.y+p.y)/2),x=new fabric.Point((m.x+g.x)/2,(m.y+g.y)/2),b=new fabric.Point((m.x+v.x)/2,(m.y+v.y)/2),w=new fabric.Point(_.x+a*this.rotatingPointOffset,_.y-s*this.rotatingPointOffset);return d={tl:p,tr:g,br:m,bl:v},t||(d.ml=y,d.mt=_,d.mr=x,d.mb=b,d.mtr=w),d},setCoords:function(t,e){return this.oCoords=this.calcCoords(t),e||(this.aCoords=this.calcCoords(!0)),t||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){if(this.angle){var t=mxc(this.angle),e=Math.cos(t),n=Math.sin(t);return 6.123233995736766e-17!==e&&-1.8369701987210297e-16!==e||(e=0),[e,n,-n,e,0,0]}return fabric.iMatrix.concat()},calcTransformMatrix:function(t){var e,n,i=this.getCenterPoint(),r=[1,0,0,1,i.x,i.y],o=this._calcDimensionsTransformMatrix(this.skewX,this.skewY,!0);return n=this.group&&!t?nxc(this.group.calcTransformMatrix(),r):r,this.angle&&(e=this._calcRotateMatrix(),n=nxc(n,e)),n=nxc(n,o)},_calcDimensionsTransformMatrix:function(t,e,n){var i,r=[this.scaleX*(n&&this.flipX?-1:1),0,0,this.scaleY*(n&&this.flipY?-1:1),0,0];return t&&(i=[1,0,Math.tan(mxc(t)),1],r=nxc(r,i,!0)),e&&(i=[1,Math.tan(mxc(e)),0,1],r=nxc(r,i,!0)),r},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(t,e){void 0===t&&(t=this.skewX),void 0===e&&(e=this.skewY);var n,i,r=this._getNonTransformedDimensions(),o=r.x/2,a=r.y/2,s=[{x:-o,y:-a},{x:o,y:-a},{x:-o,y:a},{x:o,y:a}],l=this._calcDimensionsTransformMatrix(t,e,!1);for(n=0;n<s.length;n++)s[n]=fabric.util.transformPoint(s[n],l);return{x:(i=fabric.util.makeBoundingBoxFromPoints(s)).width,y:i.height}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return fabric.util.transformPoint(e,t,!0).scalarAdd(2*this.padding)}}),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),function(){function u(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var n=new fabric.Color(e),i=t+": "+n.toRgb()+"; ",r=n.getAlpha();return 1!==r&&(i+=t+"-opacity: "+r.toString()+"; "),i}return t+": none; "}fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(t){var e=this.fillRule,n=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):"none",r=this.strokeLineCap?this.strokeLineCap:"butt",o=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",s=void 0!==this.opacity?this.opacity:"1",l=this.visible?"":" visibility: hidden;",h=t?"":this.getSvgFilter(),c=u("fill",this.fill);return[u("stroke",this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",r,"; ","stroke-linejoin: ",o,"; ","stroke-miterlimit: ",a,"; ",c,"fill-rule: ",e,"; ","opacity: ",s,";",h,l].join("")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgId:function(){return this.id?'id="'+this.id+'" ':""},getSvgTransform:function(){if(this.group&&"path-group"===this.group.type)return"";var t=fabric.util.toFixed,e=this.getAngle(),n=this.getSkewX()%360,i=this.getSkewY()%360,r=this.getCenterPoint(),o=fabric.Object.NUM_FRACTION_DIGITS,a="path-group"===this.type?"":"translate("+t(r.x,o)+" "+t(r.y,o)+")",s=0!==e?" rotate("+t(e,o)+")":"",l=1===this.scaleX&&1===this.scaleY?"":" scale("+t(this.scaleX,o)+" "+t(this.scaleY,o)+")",h=0!==n?" skewX("+t(n,o)+")":"",c=0!==i?" skewY("+t(i,o)+")":"",u="path-group"===this.type?this.width:0,f=this.flipX?" matrix(-1 0 0 1 "+u+" 0) ":"",d="path-group"===this.type?this.height:0;return[a,s,l,f,this.flipY?" matrix(1 0 0 -1 0 "+d+")":"",h,c].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t}})}(),function(){var r=fabric.util.object.extend,i="stateProperties";function o(e,t,n){var i={};n.forEach(function(t){i[t]=e[t]}),r(e[t],i,!0)}fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(t){var e="_"+(t=t||i);return Object.keys(this[e]).length<this[t].length||!function t(e,n,i){if(e===n)return!0;if(Array.isArray(e)){if(e.length!==n.length)return!1;for(var r=0,o=e.length;r<o;r++)if(!t(e[r],n[r]))return!1;return!0}if(e&&"object"==typeof e){var a,s=Object.keys(e);if(!i&&s.length!==Object.keys(n).length)return!1;for(r=0,o=s.length;r<o;r++)if(!t(e[a=s[r]],n[a]))return!1;return!0}}(this[e],this,!0)},saveState:function(t){var e=t&&t.propertySet||i,n="_"+e;return this[n]?(o(this,n,this[e]),t&&t.stateProperties&&o(this,n,t.stateProperties),this):this.setupState(t)},setupState:function(t){var e=(t=t||{}).propertySet||i;return this["_"+(t.propertySet=e)]={},this.saveState(t),this}})}(),AAc=fabric.util.degreesToRadians,fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||!this.active)return!1;var e,n,i=t.x,r=t.y;for(var o in this.__corner=0,this.oCoords)if(this.isControlVisible(o)&&("mtr"!==o||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==o&&"mr"!==o&&"mb"!==o&&"ml"!==o)&&(n=this._getImageLines(this.oCoords[o].corner),0!==(e=this._findCrossPoints({x:i,y:r},n))&&e%2==1))return this.__corner=o;return!1},_setCornerCoords:function(){var t,e,n=this.oCoords,i=AAc(45-this.angle),r=.707106*this.cornerSize,o=r*Math.cos(i),a=r*Math.sin(i);for(var s in n)t=n[s].x,e=n[s].y,n[s].corner={tl:{x:t-a,y:e-o},tr:{x:t+o,y:e-a},bl:{x:t-o,y:e+a},br:{x:t+a,y:e+o}}},drawSelectionBackground:function(t){if(!this.selectionBackgroundColor||this.group||!this.active||this.canvas&&!this.canvas.interactive)return this;t.save();var e=this.getCenterPoint(),n=this._calculateCurrentDimensions(),i=this.canvas.viewportTransform;return t.translate(e.x,e.y),t.scale(1/i[0],1/i[3]),t.rotate(AAc(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-n.x/2,-n.y/2,n.x,n.y),t.restore(),this},drawBorders:function(t){if(!this.hasBorders)return this;var e=this._calculateCurrentDimensions(),n=1/this.borderScaleFactor,i=e.x+n,r=e.y+n;if(t.save(),t.strokeStyle=this.borderColor,this._setLineDash(t,this.borderDashArray,null),t.strokeRect(-i/2,-r/2,i,r),this.hasRotatingPoint&&this.isControlVisible("mtr")&&!this.get("lockRotation")&&this.hasControls){var o=-r/2;t.beginPath(),t.moveTo(0,o),t.lineTo(0,o-this.rotatingPointOffset),t.closePath(),t.stroke()}return t.restore(),this},drawBordersInGroup:function(t,e){if(!this.hasBorders)return this;var n=this._getNonTransformedDimensions(),i=fabric.util.customTransformMatrix(e.scaleX,e.scaleY,e.skewX),r=fabric.util.transformPoint(n,i),o=1/this.borderScaleFactor,a=r.x+o,s=r.y+o;return t.save(),this._setLineDash(t,this.borderDashArray,null),t.strokeStyle=this.borderColor,t.strokeRect(-a/2,-s/2,a,s),t.restore(),this},drawControls:function(t){if(!this.hasControls)return this;var e=this._calculateCurrentDimensions(),n=e.x,i=e.y,r=this.cornerSize,o=-(n+r)/2,a=-(i+r)/2,s=this.transparentCorners?"stroke":"fill";return t.save(),t.strokeStyle=t.fillStyle=this.cornerColor,this.transparentCorners||(t.strokeStyle=this.cornerStrokeColor),this._setLineDash(t,this.cornerDashArray,null),this._drawControl("tl",t,s,o,a),this._drawControl("tr",t,s,o+n,a),this._drawControl("bl",t,s,o,a+i),this._drawControl("br",t,s,o+n,a+i),this.get("lockUniScaling")||(this._drawControl("mt",t,s,o+n/2,a),this._drawControl("mb",t,s,o+n/2,a+i),this._drawControl("mr",t,s,o+n,a+i/2),this._drawControl("ml",t,s,o,a+i/2)),this.hasRotatingPoint&&this._drawControl("mtr",t,s,o+n/2,a-this.rotatingPointOffset),t.restore(),this},_drawControl:function(t,e,n,i,r){if(this.isControlVisible(t)){var o=this.cornerSize,a=!this.transparentCorners&&this.cornerStrokeColor;switch(this.cornerStyle){case"circle":e.beginPath(),e.arc(i+o/2,r+o/2,o/2,0,2*Math.PI,!1),e[n](),a&&e.stroke();break;default:"undefined"!=typeof G_vmlCanvasManager||this.transparentCorners||e.clearRect(i,r,o,o),e[n+"Rect"](i,r,o,o),a&&e.strokeRect(i,r,o,o)}}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){var n=function(){},i=(t=t||{}).onComplete||n,r=t.onChange||n,o=this;return fabric.util.animate({startValue:e.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(t){e.set("left",t),o.renderAll(),r()},onComplete:function(){e.setCoords(),i()}}),this},fxCenterObjectV:function(e,t){var n=function(){},i=(t=t||{}).onComplete||n,r=t.onChange||n,o=this;return fabric.util.animate({startValue:e.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(t){e.set("top",t),o.renderAll(),r()},onComplete:function(){e.setCoords(),i()}}),this},fxRemove:function(e,t){var n=function(){},i=(t=t||{}).onComplete||n,r=t.onChange||n,o=this;return fabric.util.animate({startValue:e.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){e.set("active",!1)},onChange:function(t){e.set("opacity",t),o.renderAll(),r()},onComplete:function(){o.remove(e),i()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,n=[];for(t in arguments[0])n.push(t);for(var i=0,r=n.length;i<r;i++)t=n[i],e=i!==r-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(i,t,r,o){var a,s=this;t=t.toString(),r=r?fabric.util.object.clone(r):{},~i.indexOf(".")&&(a=i.split("."));var e=a?this.get(a[0])[a[1]]:this.get(i);"from"in r||(r.from=e),t=~t.indexOf("=")?e+parseFloat(t.replace("=","")):parseFloat(t),fabric.util.animate({startValue:r.from,endValue:t,byValue:r.by,easing:r.easing,duration:r.duration,abort:r.abort&&function(){return r.abort.call(s)},onChange:function(t,e,n){a?s[a[0]][a[1]]=t:s.set(i,t),o||r.onChange&&r.onChange(t,e,n)},onComplete:function(t,e,n){o||(s.setCoords(),r.onComplete&&r.onComplete(t,e,n))}})}}),function(t){"use strict";var o=t.fabric||(t.fabric={}),r=o.util.object.extend,a=o.util.object.clone,n={x1:1,x2:1,y1:1,y2:1},s=o.StaticCanvas.supports("setLineDash");function e(t,e){var n=t.origin,i=t.axis1,r=t.axis2,o=t.dimension,a=e.nearest,s=e.center,l=e.farthest;return function(){switch(this.get(n)){case a:return Math.min(this.get(i),this.get(r));case s:return Math.min(this.get(i),this.get(r))+.5*this.get(o);case l:return Math.max(this.get(i),this.get(r))}}}o.Line?o.warn("fabric.Line is already defined"):(o.Line=o.util.createClass(o.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:o.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),void 0!==n[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t,e){if(t.beginPath(),e){var n=this.getCenterPoint(),i=this.strokeWidth/2;t.translate(n.x-("butt"===this.strokeLineCap&&0===this.height?0:i),n.y-("butt"===this.strokeLineCap&&0===this.width?0:i))}if(!this.strokeDashArray||this.strokeDashArray&&s){var r=this.calcLinePoints();t.moveTo(r.x1,r.y1),t.lineTo(r.x2,r.y2)}t.lineWidth=this.strokeWidth;var o=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=o},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),o.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},toObject:function(t){return r(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,n=t*this.width*.5,i=e*this.height*.5;return{x1:n,x2:t*this.width*-.5,y1:i,y2:e*this.height*-.5}},toSVG:function(t){var e=this._createBaseSVGMarkup(),n={x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};return this.group&&"path-group"===this.group.type||(n=this.calcLinePoints()),e.push("<line ",this.getSvgId(),'x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")}}),o.Line.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),o.Line.fromElement=function(t,e){e=e||{};var n=o.parseAttributes(t,o.Line.ATTRIBUTE_NAMES),i=[n.x1||0,n.y1||0,n.x2||0,n.y2||0];return e.originX="left",e.originY="top",new o.Line(i,r(n,e))},o.Line.fromObject=function(t,e,n){var i=a(t,!0);i.points=[t.x1,t.y1,t.x2,t.y2];var r=o.Object._fromObject("Line",i,function(t){delete t.points,e&&e(t)},n,"points");return r&&delete r.points,r})}(exports),function(t){"use strict";var o=t.fabric||(t.fabric={}),c=Math.PI,a=o.util.object.extend;o.Circle?o.warn("fabric.Circle is already defined."):(o.Circle=o.util.createClass(o.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*c,cacheProperties:o.Object.prototype.cacheProperties.concat("radius"),initialize:function(t){this.callSuper("initialize",t),this.set("radius",t&&t.radius||0)},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),n=0,i=0,r=(this.endAngle-this.startAngle)%(2*c);if(0===r)this.group&&"path-group"===this.group.type&&(n=this.left+this.radius,i=this.top+this.radius),e.push("<circle ",this.getSvgId(),'cx="'+n+'" cy="'+i+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');else{var o=Math.cos(this.startAngle)*this.radius,a=Math.sin(this.startAngle)*this.radius,s=Math.cos(this.endAngle)*this.radius,l=Math.sin(this.endAngle)*this.radius,h=c<r?"1":"0";e.push('<path d="M '+o+" "+a," A "+this.radius+" "+this.radius," 0 ",+h+" 1"," "+s+" "+l,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n')}return t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.arc(e?this.left+this.radius:0,e?this.top+this.radius:0,this.radius,this.startAngle,this.endAngle,!1),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),o.Circle.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),o.Circle.fromElement=function(t,e){e||(e={});var n,i=o.parseAttributes(t,o.Circle.ATTRIBUTE_NAMES);if(!("radius"in(n=i)&&0<=n.radius))throw new Error("value of `r` attribute is required and can not be negative");i.left=i.left||0,i.top=i.top||0;var r=new o.Circle(a(i,e));return r.left-=r.radius,r.top-=r.radius,r},o.Circle.fromObject=function(t,e,n){return o.Object._fromObject("Circle",t,e,n)})}(exports),function(t){"use strict";var i=t.fabric||(t.fabric={});i.Triangle?i.warn("fabric.Triangle is already defined"):(i.Triangle=i.util.createClass(i.Object,{type:"triangle",initialize:function(t){this.callSuper("initialize",t),this.set("width",t&&t.width||100).set("height",t&&t.height||100)},_render:function(t){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var e=this.width/2,n=this.height/2;t.beginPath(),i.util.drawDashedLine(t,-e,n,0,-n,this.strokeDashArray),i.util.drawDashedLine(t,0,-n,e,n,this.strokeDashArray),i.util.drawDashedLine(t,e,n,-e,n,this.strokeDashArray),t.closePath()},toSVG:function(t){var e=this._createBaseSVGMarkup(),n=this.width/2,i=this.height/2,r=[-n+" "+i,"0 "+-i,n+" "+i].join(",");return e.push("<polygon ",this.getSvgId(),'points="',r,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t?t(e.join("")):e.join("")}}),i.Triangle.fromObject=function(t,e,n){return i.Object._fromObject("Triangle",t,e,n)})}(exports),function(t){"use strict";var r=t.fabric||(t.fabric={}),n=2*Math.PI,o=r.util.object.extend;r.Ellipse?r.warn("fabric.Ellipse is already defined."):(r.Ellipse=r.util.createClass(r.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),n=0,i=0;return this.group&&"path-group"===this.group.type&&(n=this.left+this.rx,i=this.top+this.ry),e.push("<ellipse ",this.getSvgId(),'cx="',n,'" cy="',i,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(e?this.left+this.rx:0,e?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,n,!1),t.restore(),this._renderFill(t),this._renderStroke(t)}}),r.Ellipse.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),r.Ellipse.fromElement=function(t,e){e||(e={});var n=r.parseAttributes(t,r.Ellipse.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0;var i=new r.Ellipse(o(n,e));return i.top-=i.ry,i.left-=i.rx,i},r.Ellipse.fromObject=function(t,e,n){return r.Object._fromObject("Ellipse",t,e,n)})}(exports),function(t){"use strict";var o=t.fabric||(t.fabric={}),r=o.util.object.extend;o.Rect?o.warn("fabric.Rect is already defined"):(o.Rect=o.util.createClass(o.Object,{stateProperties:o.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t,e){if(1!==this.width||1!==this.height){var n=this.rx?Math.min(this.rx,this.width/2):0,i=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,o=this.height,a=e?this.left:-this.width/2,s=e?this.top:-this.height/2,l=0!==n||0!==i,h=.4477152502;t.beginPath(),t.moveTo(a+n,s),t.lineTo(a+r-n,s),l&&t.bezierCurveTo(a+r-h*n,s,a+r,s+h*i,a+r,s+i),t.lineTo(a+r,s+o-i),l&&t.bezierCurveTo(a+r,s+o-h*i,a+r-h*n,s+o,a+r-n,s+o),t.lineTo(a+n,s+o),l&&t.bezierCurveTo(a+h*n,s+o,a,s+o-h*i,a,s+o-i),t.lineTo(a,s+i),l&&t.bezierCurveTo(a,s+h*i,a+h*n,s,a+n,s),t.closePath(),this._renderFill(t),this._renderStroke(t)}else t.fillRect(-.5,-.5,1,1)},_renderDashedStroke:function(t){var e=-this.width/2,n=-this.height/2,i=this.width,r=this.height;t.beginPath(),o.util.drawDashedLine(t,e,n,e+i,n,this.strokeDashArray),o.util.drawDashedLine(t,e+i,n,e+i,n+r,this.strokeDashArray),o.util.drawDashedLine(t,e+i,n+r,e,n+r,this.strokeDashArray),o.util.drawDashedLine(t,e,n+r,e,n,this.strokeDashArray),t.closePath()},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),n=this.left,i=this.top;return this.group&&"path-group"===this.group.type||(n=-this.width/2,i=-this.height/2),e.push("<rect ",this.getSvgId(),'x="',n,'" y="',i,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")}}),o.Rect.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),o.Rect.fromElement=function(t,e){if(!t)return null;e=e||{};var n=o.parseAttributes(t,o.Rect.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0;var i=new o.Rect(r(e?o.util.object.clone(e):{},n));return i.visible=i.visible&&0<i.width&&0<i.height,i},o.Rect.fromObject=function(t,e,n){return o.Object._fromObject("Rect",t,e,n)})}(exports),function(t){"use strict";var o=t.fabric||(t.fabric={}),e=o.util.object.extend,a=o.util.array.min,s=o.util.array.max,l=o.util.toFixed,h=o.Object.NUM_FRACTION_DIGITS;o.Polyline?o.warn("fabric.Polyline is already defined"):(o.Polyline=o.util.createClass(o.Object,{type:"polyline",points:null,minX:0,minY:0,cacheProperties:o.Object.prototype.cacheProperties.concat("points"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._calcDimensions(),"top"in e||(this.top=this.minY),"left"in e||(this.left=this.minX),this.pathOffset={x:this.minX+this.width/2,y:this.minY+this.height/2}},_calcDimensions:function(){var t=this.points,e=a(t,"x"),n=a(t,"y"),i=s(t,"x"),r=s(t,"y");this.width=i-e||0,this.height=r-n||0,this.minX=e||0,this.minY=n||0},toObject:function(t){return e(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(t){var e=[],n=0,i=0,r=this._createBaseSVGMarkup();this.group&&"path-group"===this.group.type||(n=this.pathOffset.x,i=this.pathOffset.y);for(var o=0,a=this.points.length;o<a;o++)e.push(l(this.points[o].x-n,h),",",l(this.points[o].y-i,h)," ");return r.push("<",this.type," ",this.getSvgId(),'points="',e.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n'),t?t(r.join("")):r.join("")},commonRender:function(t,e){var n,i=this.points.length,r=e?0:this.pathOffset.x,o=e?0:this.pathOffset.y;if(!i||isNaN(this.points[i-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-r,this.points[0].y-o);for(var a=0;a<i;a++)n=this.points[a],t.lineTo(n.x-r,n.y-o);return!0},_render:function(t,e){this.commonRender(t,e)&&(this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){var e,n;t.beginPath();for(var i=0,r=this.points.length;i<r;i++)e=this.points[i],n=this.points[i+1]||e,o.util.drawDashedLine(t,e.x,e.y,n.x,n.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),o.Polyline.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polyline.fromElement=function(t,e){if(!t)return null;e||(e={});var n=o.parsePointsAttribute(t.getAttribute("points")),i=o.parseAttributes(t,o.Polyline.ATTRIBUTE_NAMES);return new o.Polyline(n,o.util.object.extend(i,e))},o.Polyline.fromObject=function(t,e,n){return o.Object._fromObject("Polyline",t,e,n,"points")})}(exports),function(t){"use strict";var r=t.fabric||(t.fabric={}),o=r.util.object.extend;r.Polygon?r.warn("fabric.Polygon is already defined"):(r.Polygon=r.util.createClass(r.Polyline,{type:"polygon",_render:function(t,e){this.commonRender(t,e)&&(t.closePath(),this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){this.callSuper("_renderDashedStroke",t),t.closePath()}}),r.Polygon.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polygon.fromElement=function(t,e){if(!t)return null;e||(e={});var n=r.parsePointsAttribute(t.getAttribute("points")),i=r.parseAttributes(t,r.Polygon.ATTRIBUTE_NAMES);return new r.Polygon(n,o(i,e))},r.Polygon.fromObject=function(t,e,n){return r.Object._fromObject("Polygon",t,e,n,"points")})}(exports),function(t){"use strict";var m=t.fabric||(t.fabric={}),y=m.util.array.min,_=m.util.array.max,r=m.util.object.extend,i=Object.prototype.toString,g=m.util.drawArc,x={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},b={m:"l",M:"L"};m.Path?m.warn("fabric.Path is already defined"):(m.Path=m.util.createClass(m.Object,{type:"path",path:null,minX:0,minY:0,cacheProperties:m.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:m.Object.prototype.stateProperties.concat("path"),initialize:function(t,e){e=e||{},this.callSuper("initialize",e),t||(t=[]);var n="[object Array]"===i.call(t);this.path=n?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(n||(this.path=this._parsePath()),this._setPositionDimensions(e))},_setPositionDimensions:function(t){var e=this._parseDimensions();this.minX=e.left,this.minY=e.top,this.width=e.width,this.height=e.height,void 0===t.left&&(this.left=e.left+("center"===this.originX?this.width/2:"right"===this.originX?this.width:0)),void 0===t.top&&(this.top=e.top+("center"===this.originY?this.height/2:"bottom"===this.originY?this.height:0)),this.pathOffset=this.pathOffset||{x:this.minX+this.width/2,y:this.minY+this.height/2}},_renderPathCommands:function(t){var e,n,i,r=null,o=0,a=0,s=0,l=0,h=0,c=0,u=-this.pathOffset.x,f=-this.pathOffset.y;this.group&&"path-group"===this.group.type&&(f=u=0),t.beginPath();for(var d=0,p=this.path.length;d<p;++d){switch((e=this.path[d])[0]){case"l":s+=e[1],l+=e[2],t.lineTo(s+u,l+f);break;case"L":s=e[1],l=e[2],t.lineTo(s+u,l+f);break;case"h":s+=e[1],t.lineTo(s+u,l+f);break;case"H":s=e[1],t.lineTo(s+u,l+f);break;case"v":l+=e[1],t.lineTo(s+u,l+f);break;case"V":l=e[1],t.lineTo(s+u,l+f);break;case"m":o=s+=e[1],a=l+=e[2],t.moveTo(s+u,l+f);break;case"M":o=s=e[1],a=l=e[2],t.moveTo(s+u,l+f);break;case"c":n=s+e[5],i=l+e[6],h=s+e[3],c=l+e[4],t.bezierCurveTo(s+e[1]+u,l+e[2]+f,h+u,c+f,n+u,i+f),s=n,l=i;break;case"C":s=e[5],l=e[6],h=e[3],c=e[4],t.bezierCurveTo(e[1]+u,e[2]+f,h+u,c+f,s+u,l+f);break;case"s":n=s+e[3],i=l+e[4],null===r[0].match(/[CcSs]/)?(h=s,c=l):(h=2*s-h,c=2*l-c),t.bezierCurveTo(h+u,c+f,s+e[1]+u,l+e[2]+f,n+u,i+f),h=s+e[1],c=l+e[2],s=n,l=i;break;case"S":n=e[3],i=e[4],null===r[0].match(/[CcSs]/)?(h=s,c=l):(h=2*s-h,c=2*l-c),t.bezierCurveTo(h+u,c+f,e[1]+u,e[2]+f,n+u,i+f),s=n,l=i,h=e[1],c=e[2];break;case"q":n=s+e[3],i=l+e[4],h=s+e[1],c=l+e[2],t.quadraticCurveTo(h+u,c+f,n+u,i+f),s=n,l=i;break;case"Q":n=e[3],i=e[4],t.quadraticCurveTo(e[1]+u,e[2]+f,n+u,i+f),s=n,l=i,h=e[1],c=e[2];break;case"t":n=s+e[1],i=l+e[2],null===r[0].match(/[QqTt]/)?(h=s,c=l):(h=2*s-h,c=2*l-c),t.quadraticCurveTo(h+u,c+f,n+u,i+f),s=n,l=i;break;case"T":n=e[1],i=e[2],null===r[0].match(/[QqTt]/)?(h=s,c=l):(h=2*s-h,c=2*l-c),t.quadraticCurveTo(h+u,c+f,n+u,i+f),s=n,l=i;break;case"a":g(t,s+u,l+f,[e[1],e[2],e[3],e[4],e[5],e[6]+s+u,e[7]+l+f]),s+=e[6],l+=e[7];break;case"A":g(t,s+u,l+f,[e[1],e[2],e[3],e[4],e[5],e[6]+u,e[7]+f]),s=e[6],l=e[7];break;case"z":case"Z":s=o,l=a,t.closePath()}r=e}},_render:function(t){this._renderPathCommands(t),this._renderFill(t),this._renderStroke(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return r(this.callSuper("toObject",["sourcePath","pathOffset"].concat(t)),{path:this.path.map(function(t){return t.slice()}),top:this.top,left:this.left})},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.path=this.sourcePath),delete e.sourcePath,e},toSVG:function(t){for(var e=[],n=this._createBaseSVGMarkup(),i="",r=0,o=this.path.length;r<o;r++)e.push(this.path[r].join(" "));var a=e.join(" ");return this.group&&"path-group"===this.group.type||(i=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),n.push("<path ",this.getSvgId(),'d="',a,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),i,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n"),t?t(n.join("")):n.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,n,i,r,o=[],a=[],s=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,l=0,h=this.path.length;l<h;l++){for(i=(t=this.path[l]).slice(1).trim(),a.length=0;n=s.exec(i);)a.push(n[0]);r=[t.charAt(0)];for(var c=0,u=a.length;c<u;c++)e=parseFloat(a[c]),isNaN(e)||r.push(e);var f=r[0],d=x[f.toLowerCase()],p=b[f]||f;if(r.length-1>d)for(var g=1,v=r.length;g<v;g+=d)o.push([f].concat(r.slice(g,g+d))),f=p;else o.push(r)}return o},_parseDimensions:function(){for(var t,e,n,i,r=[],o=[],a=null,s=0,l=0,h=0,c=0,u=0,f=0,d=0,p=this.path.length;d<p;++d){switch((t=this.path[d])[0]){case"l":h+=t[1],c+=t[2],i=[];break;case"L":h=t[1],c=t[2],i=[];break;case"h":h+=t[1],i=[];break;case"H":h=t[1],i=[];break;case"v":c+=t[1],i=[];break;case"V":c=t[1],i=[];break;case"m":s=h+=t[1],l=c+=t[2],i=[];break;case"M":s=h=t[1],l=c=t[2],i=[];break;case"c":e=h+t[5],n=c+t[6],u=h+t[3],f=c+t[4],i=m.util.getBoundsOfCurve(h,c,h+t[1],c+t[2],u,f,e,n),h=e,c=n;break;case"C":u=t[3],f=t[4],i=m.util.getBoundsOfCurve(h,c,t[1],t[2],u,f,t[5],t[6]),h=t[5],c=t[6];break;case"s":e=h+t[3],n=c+t[4],null===a[0].match(/[CcSs]/)?(u=h,f=c):(u=2*h-u,f=2*c-f),i=m.util.getBoundsOfCurve(h,c,u,f,h+t[1],c+t[2],e,n),u=h+t[1],f=c+t[2],h=e,c=n;break;case"S":e=t[3],n=t[4],null===a[0].match(/[CcSs]/)?(u=h,f=c):(u=2*h-u,f=2*c-f),i=m.util.getBoundsOfCurve(h,c,u,f,t[1],t[2],e,n),h=e,c=n,u=t[1],f=t[2];break;case"q":e=h+t[3],n=c+t[4],u=h+t[1],f=c+t[2],i=m.util.getBoundsOfCurve(h,c,u,f,u,f,e,n),h=e,c=n;break;case"Q":u=t[1],f=t[2],i=m.util.getBoundsOfCurve(h,c,u,f,u,f,t[3],t[4]),h=t[3],c=t[4];break;case"t":e=h+t[1],n=c+t[2],null===a[0].match(/[QqTt]/)?(u=h,f=c):(u=2*h-u,f=2*c-f),i=m.util.getBoundsOfCurve(h,c,u,f,u,f,e,n),h=e,c=n;break;case"T":e=t[1],n=t[2],null===a[0].match(/[QqTt]/)?(u=h,f=c):(u=2*h-u,f=2*c-f),i=m.util.getBoundsOfCurve(h,c,u,f,u,f,e,n),h=e,c=n;break;case"a":i=m.util.getBoundsOfArc(h,c,t[1],t[2],t[3],t[4],t[5],t[6]+h,t[7]+c),h+=t[6],c+=t[7];break;case"A":i=m.util.getBoundsOfArc(h,c,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),h=t[6],c=t[7];break;case"z":case"Z":h=s,c=l}a=t,i.forEach(function(t){r.push(t.x),o.push(t.y)}),r.push(h),o.push(c)}var g=y(r)||0,v=y(o)||0;return{left:g,top:v,width:(_(r)||0)-g,height:(_(o)||0)-v}}}),m.Path.fromObject=function(n,i,t){var r;if("string"!=typeof n.path)return m.Object._fromObject("Path",n,i,t,"path");m.loadSVGFromURL(n.path,function(t){var e=n.path;r=t[0],delete n.path,r.setOptions(n),r.setSourcePath(e),i&&i(r)})},m.Path.ATTRIBUTE_NAMES=m.SHARED_ATTRIBUTES.concat(["d"]),m.Path.fromElement=function(t,e,n){var i=m.parseAttributes(t,m.Path.ATTRIBUTE_NAMES);e&&e(new m.Path(i.d,r(i,n)))},m.Path.async=!0)}(exports),function(t){"use strict";var u=t.fabric||(t.fabric={}),e=u.util.object.extend;u.PathGroup?u.warn("fabric.PathGroup is already defined"):(u.PathGroup=u.util.createClass(u.Object,{type:"path-group",fill:"",cacheProperties:[],initialize:function(t,e){e=e||{},this.paths=t||[];for(var n=this.paths.length;n--;)this.paths[n].group=this;e.toBeParsed&&(this.parseDimensionsFromPaths(e),delete e.toBeParsed),this.setOptions(e),this.setCoords()},parseDimensionsFromPaths:function(t){for(var e,n,i,r,o,a,s=[],l=[],h=this.paths.length;h--;){r=(i=this.paths[h]).height+i.strokeWidth,o=i.width+i.strokeWidth,e=[{x:i.left,y:i.top},{x:i.left+o,y:i.top},{x:i.left,y:i.top+r},{x:i.left+o,y:i.top+r}],a=this.paths[h].transformMatrix;for(var c=0;c<e.length;c++)n=e[c],a&&(n=u.util.transformPoint(n,a,!1)),s.push(n.x),l.push(n.y)}t.width=Math.max.apply(null,s),t.height=Math.max.apply(null,l)},drawObject:function(t){t.save(),t.translate(-this.width/2,-this.height/2);for(var e=0,n=this.paths.length;e<n;++e)this.paths[e].render(t,!0);t.restore()},shouldCache:function(){var t=this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isCaching());if(this.caching=t)for(var e=0,n=this.paths.length;e<n;e++)if(this.paths[e].willDrawShadow())return this.caching=!1;return t},willDrawShadow:function(){if(this.shadow)return!0;for(var t=0,e=this.paths.length;t<e;t++)if(this.paths[t].willDrawShadow())return!0;return!1},isCaching:function(){return this.caching||this.group&&this.group.isCaching()},isCacheDirty:function(){if(this.callSuper("isCacheDirty"))return!0;if(!this.statefullCache)return!1;for(var t=0,e=this.paths.length;t<e;t++)if(this.paths[t].isCacheDirty(!0)){if(this._cacheCanvas){var n=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-n/2,-i/2,n,i)}return!0}return!1},_set:function(t,e){if("fill"===t&&e&&this.isSameColor())for(var n=this.paths.length;n--;)this.paths[n]._set(t,e);return this.callSuper("_set",t,e)},toObject:function(i){var t=this.paths.map(function(t){var e=t.includeDefaultValues;t.includeDefaultValues=t.group.includeDefaultValues;var n=t.toObject(i);return t.includeDefaultValues=e,n});return e(this.callSuper("toObject",["sourcePath"].concat(i)),{paths:t})},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.paths=this.sourcePath),e},toSVG:function(t){var e=this.getObjects(),n=this.getPointByOrigin("left","top"),i="translate("+n.x+" "+n.y+")",r=this._createBaseSVGMarkup();r.push("<g ",this.getSvgId(),'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransformMatrix(),i,this.getSvgTransform(),'" ',">\n");for(var o=0,a=e.length;o<a;o++)r.push("\t",e[o].toSVG(t));return r.push("</g>\n"),t?t(r.join("")):r.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var n=this.getObjects()[0].get("fill")||"";return"string"==typeof n&&(n=n.toLowerCase(),this.getObjects().every(function(t){var e=t.get("fill")||"";return"string"==typeof e&&e.toLowerCase()===n}))},complexity:function(){return this.paths.reduce(function(t,e){return t+(e&&e.complexity?e.complexity():0)},0)},getObjects:function(){return this.paths}}),u.PathGroup.fromObject=function(i,r){var o=i.paths;delete i.paths,"string"==typeof o?u.loadSVGFromURL(o,function(t){var e=o,n=u.util.groupSVGElements(t,i,e);i.paths=o,r(n)}):u.util.enlivenObjects(o,function(t){var e=new u.PathGroup(t,i);i.paths=o,r(e)})},u.PathGroup.async=!0)}(exports),function(t){"use strict";var a=t.fabric||(t.fabric={}),e=a.util.object.extend,s=a.util.array.min,l=a.util.array.max;if(!a.Group){var i={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};a.Group=a.util.createClass(a.Object,a.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],initialize:function(t,e,n){e=e||{},this._objects=[],n&&this.callSuper("initialize",e),this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),n?(this._updateObjectsCoords(!0),this._updateObjectsACoords()):(this._calcBounds(),this._updateObjectsCoords(),this.callSuper("initialize",e)),this.setCoords(),this.saveCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(!0,!0)},_updateObjectsCoords:function(t){for(var e=this.getCenterPoint(),n=this._objects.length;n--;)this._updateObjectCoords(this._objects[n],e,t)},_updateObjectCoords:function(t,e,n){if(t.__origHasControls=t.hasControls,t.hasControls=!1,!n){var i=t.getLeft(),r=t.getTop();t.set({left:i-e.x,top:r-e.y}),t.setCoords(!0,!0)}},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),a.util.resetObjectTransform(this),t&&(this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_setObjectActive:function(t){t.set("active",!0),t.group=this},removeWithUpdate:function(t){return this._restoreObjectsState(),a.util.resetObjectTransform(this),this.forEachObject(this._setObjectActive,this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group,t.set("active",!1)},delegatedProperties:{fill:!0,stroke:!0,strokeWidth:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(t,e){var n=this._objects.length;if(this.delegatedProperties[t]||"canvas"===t)for(;n--;)this._objects[n].set(t,e);else for(;n--;)this._objects[n].setOnGroup(t,e);this.callSuper("_set",t,e)},toObject:function(i){var t=this.getObjects().map(function(t){var e=t.includeDefaultValues;t.includeDefaultValues=t.group.includeDefaultValues;var n=t.toObject(i);return t.includeDefaultValues=e,n});return e(this.callSuper("toObject",i),{objects:t})},toDatalessObject:function(i){var t=this.getObjects().map(function(t){var e=t.includeDefaultValues;t.includeDefaultValues=t.group.includeDefaultValues;var n=t.toDatalessObject(i);return t.includeDefaultValues=e,n});return e(this.callSuper("toDatalessObject",i),{objects:t})},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isCaching());if(this.caching=t)for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].willDrawShadow())return this.caching=!1;return t},willDrawShadow:function(){if(this.callSuper("willDrawShadow"))return!0;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isCaching:function(){return this.caching||this.group&&this.group.isCaching()},drawObject:function(t){for(var e=0,n=this._objects.length;e<n;e++)this._renderObject(this._objects[e],t)},isCacheDirty:function(){if(this.callSuper("isCacheDirty"))return!0;if(!this.statefullCache)return!1;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].isCacheDirty(!0)){if(this._cacheCanvas){var n=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-n/2,-i/2,n,i)}return!0}return!1},_renderControls:function(t,e){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e);for(var n=0,i=this._objects.length;n<i;n++)this._objects[n]._renderControls(t);t.restore()},_renderObject:function(t,e){if(t.visible){var n=t.hasRotatingPoint;t.hasRotatingPoint=!1,t.render(e),t.hasRotatingPoint=n}},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){var e=t.calcTransformMatrix(),n=a.util.qrDecompose(e),i=new a.Point(n.translateX,n.translateY);return t.flipX=!1,t.flipY=!1,t.set("scaleX",n.scaleX),t.set("scaleY",n.scaleY),t.skewX=n.skewX,t.skewY=n.skewY,t.angle=n.angle,t.setPositionByOrigin(i,"center","center"),t},_restoreObjectState:function(t){return this.realizeTransform(t),t.setCoords(),t.hasControls=t.__origHasControls,delete t.__origHasControls,t.set("active",!1),delete t.group,this},destroy:function(){return this._objects.forEach(function(t){t.set("dirty",!0)}),this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords(!0,!0)}),this},_calcBounds:function(t){for(var e,n,i,r=[],o=[],a=["tr","br","bl","tl"],s=0,l=this._objects.length,h=a.length;s<l;++s)for((e=this._objects[s]).setCoords(!0),i=0;i<h;i++)n=a[i],r.push(e.oCoords[n].x),o.push(e.oCoords[n].y);this.set(this._getBounds(r,o,t))},_getBounds:function(t,e,n){var i=new a.Point(s(t),s(e)),r=new a.Point(l(t),l(e)),o={width:r.x-i.x||0,height:r.y-i.y||0};return n||(o.left=i.x||0,o.top=i.y||0,"center"===this.originX&&(o.left+=o.width/2),"right"===this.originX&&(o.left+=o.width),"center"===this.originY&&(o.top+=o.height/2),"bottom"===this.originY&&(o.top+=o.height)),o},toSVG:function(t){var e=this._createBaseSVGMarkup();e.push("<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'" style="',this.getSvgFilter(),'">\n');for(var n=0,i=this._objects.length;n<i;n++)e.push("\t",this._objects[n].toSVG(t));return e.push("</g>\n"),t?t(e.join("")):e.join("")},get:function(t){if(t in i){if(this[t])return this[t];for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e][t])return!0;return!1}return t in this.delegatedProperties?this._objects[0]&&this._objects[0].get(t):this[t]}}),a.Group.fromObject=function(n,i){a.util.enlivenObjects(n.objects,function(t){var e=a.util.object.clone(n,!0);delete e.objects,i&&i(new a.Group(t,e,!0))})},a.Group.async=!0}}(exports),function(t){"use strict";var a=fabric.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",alignX:"none",alignY:"none",meetOrSlice:"meet",strokeWidth:0,_lastScaleX:1,_lastScaleY:1,minimumScaleTrigger:.5,stateProperties:fabric.Object.prototype.stateProperties.concat("alignX","alignY","meetOrSlice"),objectCaching:!1,initialize:function(t,e,n){e||(e={}),this.filters=[],this.resizeFilters=[],this.callSuper("initialize",e),this._initElement(t,e,n)},getElement:function(){return this._element},setElement:function(t,e,n){var i,r;return this._element=t,this._originalElement=t,this._initConfig(n),0===this.resizeFilters.length?i=e:(r=this,i=function(){r.applyFilters(e,r.resizeFilters,r._filteredEl||r._originalElement,!0)}),0!==this.filters.length?this.applyFilters(i):i&&i(this),this},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}},_renderDashedStroke:function(t){var e=-this.width/2,n=-this.height/2,i=this.width,r=this.height;t.save(),this._setStrokeStyles(t),t.beginPath(),fabric.util.drawDashedLine(t,e,n,e+i,n,this.strokeDashArray),fabric.util.drawDashedLine(t,e+i,n,e+i,n+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e+i,n+r,e,n+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e,n+r,e,n,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var e=[],n=[],i=1,r=1;this.filters.forEach(function(t){t&&("Resize"===t.type&&(i*=t.scaleX,r*=t.scaleY),e.push(t.toObject()))}),this.resizeFilters.forEach(function(t){t&&n.push(t.toObject())});var o=a(this.callSuper("toObject",["crossOrigin","alignX","alignY","meetOrSlice"].concat(t)),{src:this.getSrc(),filters:e,resizeFilters:n});return o.width/=i,o.height/=r,o},toSVG:function(t){var e=this._createBaseSVGMarkup(),n=-this.width/2,i=-this.height/2,r="none";if(this.group&&"path-group"===this.group.type&&(n=this.left,i=this.top),"none"!==this.alignX&&"none"!==this.alignY&&(r="x"+this.alignX+"Y"+this.alignY+" "+this.meetOrSlice),e.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',"<image ",this.getSvgId(),'xlink:href="',this.getSvgSrc(!0),'" x="',n,'" y="',i,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="',r,'"',"></image>\n"),this.stroke||this.strokeDashArray){var o=this.fill;this.fill=null,e.push("<rect ",'x="',n,'" y="',i,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=o}return e.push("</g>\n"),t?t(e.join("")):e.join("")},getSrc:function(t){var e=t?this._element:this._originalElement;return e?fabric.isLikelyNode?e._src:e.src:this.src||""},setSrc:function(t,e,n){fabric.util.loadImage(t,function(t){return this.setElement(t,e,n)},this,n&&n.crossOrigin)},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyFilters:function(t,e,n,i){if(e=e||this.filters,n=n||this._originalElement){var r,o,a=fabric.util.createImage(),s=this.canvas?this.canvas.getRetinaScaling():fabric.devicePixelRatio,l=this.minimumScaleTrigger/s,h=this;if(0===e.length)return this._element=n,t&&t(this),n;var c=fabric.util.createCanvasElement();return c.width=n.width,c.height=n.height,c.getContext("2d").drawImage(n,0,0,n.width,n.height),e.forEach(function(t){t&&(i?(r=h.scaleX<l?h.scaleX:1,o=h.scaleY<l?h.scaleY:1,r*s<1&&(r*=s),o*s<1&&(o*=s)):(r=t.scaleX,o=t.scaleY),t.applyTo(c,r,o),i||"Resize"!==t.type||(h.width*=t.scaleX,h.height*=t.scaleY))}),a.width=c.width,a.height=c.height,fabric.isLikelyNode?(a.src=c.toBuffer(void 0,fabric.Image.pngCompression),h._element=a,!i&&(h._filteredEl=a),t&&t(h)):(a.onload=function(){h._element=a,!i&&(h._filteredEl=a),t&&t(h),a.onload=c=null},a.src=c.toDataURL("image/png")),c}},_render:function(t,e){var n,i,r,o=this._findMargins();n=e?this.left:-this.width/2,i=e?this.top:-this.height/2,"slice"===this.meetOrSlice&&(t.beginPath(),t.rect(n,i,this.width,this.height),t.clip()),!1===this.isMoving&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,r=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):r=this._element,r&&t.drawImage(r,n+o.marginX,i+o.marginY,o.width,o.height),this._stroke(t),this._renderStroke(t)},_needsResize:function(){return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_findMargins:function(){var t,e,n=this.width,i=this.height,r=0,o=0;return"none"===this.alignX&&"none"===this.alignY||(t=[this.width/this._element.width,this.height/this._element.height],e="meet"===this.meetOrSlice?Math.min.apply(null,t):Math.max.apply(null,t),n=this._element.width*e,i=this._element.height*e,"Mid"===this.alignX&&(r=(this.width-n)/2),"Max"===this.alignX&&(r=this.width-n),"Mid"===this.alignY&&(o=(this.height-i)/2),"Max"===this.alignY&&(o=this.height-i)),{width:n,height:i,marginX:r,marginY:o}},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t,e,n){this.setElement(fabric.util.getById(t),n,e),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement()&&this.getElement().width||0,this.height="height"in t?t.height:this.getElement()&&this.getElement().height||0}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(n,i){fabric.util.loadImage(n.src,function(e,t){t?i&&i(null,t):fabric.Image.prototype._initFilters.call(n,n.filters,function(t){n.filters=t||[],fabric.Image.prototype._initFilters.call(n,n.resizeFilters,function(t){return n.resizeFilters=t||[],new fabric.Image(e,n,i)})})},null,n.crossOrigin)},fabric.Image.fromURL=function(t,e,n){fabric.util.loadImage(t,function(t){e&&e(new fabric.Image(t,n))},null,n&&n.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),fabric.Image.fromElement=function(t,e,n){var i,r=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES);r.preserveAspectRatio&&(i=fabric.util.parsePreserveAspectRatioAttribute(r.preserveAspectRatio),a(r,i)),fabric.Image.fromURL(r["xlink:href"],e,a(n?fabric.util.object.clone(n):{},r))},fabric.Image.async=!0,fabric.Image.pngCompression=1)}(exports),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.getAngle()%360;return 0<t?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.setAngle(this._getAngleValueForStraighten()),this},fxStraighten:function(t){var e=function(){},n=(t=t||{}).onComplete||e,i=t.onChange||e,r=this;return fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){r.setAngle(t),i()},onComplete:function(){r.setCoords(),n()},onStart:function(){r.set("active",!1)}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.renderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.renderAll.bind(this)}),this}}),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),fabric.Image.filters.BaseFilter.fromObject=function(t,e){var n=new fabric.Image.filters[t.type](t);return e&&e(n),n},function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Brightness=r(i.BaseFilter,{type:"Brightness",initialize:function(t){t=t||{},this.brightness=t.brightness||0},applyTo:function(t){for(var e=t.getContext("2d"),n=e.getImageData(0,0,t.width,t.height),i=n.data,r=this.brightness,o=0,a=i.length;o<a;o+=4)i[o]+=r,i[o+1]+=r,i[o+2]+=r;e.putImageData(n,0,0)},toObject:function(){return n(this.callSuper("toObject"),{brightness:this.brightness})}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Convolute=r(i.BaseFilter,{type:"Convolute",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,0,0,0,1,0,0,0,0]},applyTo:function(t){for(var e,n,i,r,o,a,s,l,h,c=this.matrix,u=t.getContext("2d"),f=u.getImageData(0,0,t.width,t.height),d=Math.round(Math.sqrt(c.length)),p=Math.floor(d/2),g=f.data,v=f.width,m=f.height,y=u.createImageData(v,m),_=y.data,x=this.opaque?1:0,b=0;b<m;b++)for(var w=0;w<v;w++){o=4*(b*v+w);for(var S=r=i=n=e=0;S<d;S++)for(var C=0;C<d;C++)a=w+C-p,(s=b+S-p)<0||m<s||a<0||v<a||(l=4*(s*v+a),h=c[S*d+C],e+=g[l]*h,n+=g[l+1]*h,i+=g[l+2]*h,r+=g[l+3]*h);_[o]=e,_[o+1]=n,_[o+2]=i,_[o+3]=r+x*(255-r)}u.putImageData(y,0,0)},toObject:function(){return n(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.GradientTransparency=r(i.BaseFilter,{type:"GradientTransparency",initialize:function(t){t=t||{},this.threshold=t.threshold||100},applyTo:function(t){for(var e=t.getContext("2d"),n=e.getImageData(0,0,t.width,t.height),i=n.data,r=this.threshold,o=i.length,a=0,s=i.length;a<s;a+=4)i[a+3]=r+255*(o-a)/o;e.putImageData(n,0,0)},toObject:function(){return n(this.callSuper("toObject"),{threshold:this.threshold})}}),e.Image.filters.GradientTransparency.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var n=t.fabric||(t.fabric={}),e=n.Image.filters,i=n.util.createClass;e.Grayscale=i(e.BaseFilter,{type:"Grayscale",applyTo:function(t){for(var e,n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height),r=i.data,o=i.width*i.height*4,a=0;a<o;)e=(r[a]+r[a+1]+r[a+2])/3,r[a]=e,r[a+1]=e,r[a+2]=e,a+=4;n.putImageData(i,0,0)}}),n.Image.filters.Grayscale.fromObject=function(t,e){return(t=t||{}).type="Grayscale",n.Image.filters.BaseFilter.fromObject(t,e)}}(exports),function(t){"use strict";var n=t.fabric||(t.fabric={}),e=n.Image.filters,i=n.util.createClass;e.Invert=i(e.BaseFilter,{type:"Invert",applyTo:function(t){var e,n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height),r=i.data,o=r.length;for(e=0;e<o;e+=4)r[e]=255-r[e],r[e+1]=255-r[e+1],r[e+2]=255-r[e+2];n.putImageData(i,0,0)}}),n.Image.filters.Invert.fromObject=function(t,e){return(t=t||{}).type="Invert",n.Image.filters.BaseFilter.fromObject(t,e)}}(exports),function(t){"use strict";var c=t.fabric||(t.fabric={}),e=c.util.object.extend,n=c.Image.filters,i=c.util.createClass;n.Mask=i(n.BaseFilter,{type:"Mask",initialize:function(t){t=t||{},this.mask=t.mask,this.channel=-1<[0,1,2,3].indexOf(t.channel)?t.channel:0},applyTo:function(t){if(this.mask){var e,n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height),r=i.data,o=this.mask.getElement(),a=c.util.createCanvasElement(),s=this.channel,l=i.width*i.height*4;a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(o,0,0,t.width,t.height);var h=a.getContext("2d").getImageData(0,0,t.width,t.height).data;for(e=0;e<l;e+=4)r[e+3]=h[e+s];n.putImageData(i,0,0)}},toObject:function(){return e(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),c.Image.filters.Mask.fromObject=function(e,n){c.util.loadImage(e.mask.src,function(t){return e.mask=new c.Image(t,e.mask),c.Image.filters.BaseFilter.fromObject(e,n)})},c.Image.filters.Mask.async=!0}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Noise=r(i.BaseFilter,{type:"Noise",initialize:function(t){t=t||{},this.noise=t.noise||0},applyTo:function(t){for(var e,n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height),r=i.data,o=this.noise,a=0,s=r.length;a<s;a+=4)e=(.5-Math.random())*o,r[a]+=e,r[a+1]+=e,r[a+2]+=e;n.putImageData(i,0,0)},toObject:function(){return n(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Pixelate=r(i.BaseFilter,{type:"Pixelate",initialize:function(t){t=t||{},this.blocksize=t.blocksize||4},applyTo:function(t){var e,n,i,r,o,a,s,l=t.getContext("2d"),h=l.getImageData(0,0,t.width,t.height),c=h.data,u=h.height,f=h.width;for(n=0;n<u;n+=this.blocksize)for(i=0;i<f;i+=this.blocksize){r=c[e=4*n*f+4*i],o=c[e+1],a=c[e+2],s=c[e+3];for(var d=n,p=n+this.blocksize;d<p;d++)for(var g=i,v=i+this.blocksize;g<v;g++)c[e=4*d*f+4*g]=r,c[e+1]=o,c[e+2]=a,c[e+3]=s}l.putImageData(h,0,0)},toObject:function(){return n(this.callSuper("toObject"),{blocksize:this.blocksize})}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.RemoveWhite=r(i.BaseFilter,{type:"RemoveWhite",initialize:function(t){t=t||{},this.threshold=t.threshold||30,this.distance=t.distance||20},applyTo:function(t){for(var e,n,i,r=t.getContext("2d"),o=r.getImageData(0,0,t.width,t.height),a=o.data,s=this.threshold,l=this.distance,h=255-s,c=Math.abs,u=0,f=a.length;u<f;u+=4)e=a[u],n=a[u+1],i=a[u+2],h<e&&h<n&&h<i&&c(e-n)<l&&c(e-i)<l&&c(n-i)<l&&(a[u+3]=0);r.putImageData(o,0,0)},toObject:function(){return n(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),e.Image.filters.RemoveWhite.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var n=t.fabric||(t.fabric={}),e=n.Image.filters,i=n.util.createClass;e.Sepia=i(e.BaseFilter,{type:"Sepia",applyTo:function(t){var e,n,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),o=r.data,a=o.length;for(e=0;e<a;e+=4)n=.3*o[e]+.59*o[e+1]+.11*o[e+2],o[e]=n+100,o[e+1]=n+50,o[e+2]=n+255;i.putImageData(r,0,0)}}),n.Image.filters.Sepia.fromObject=function(t,e){return(t=t||{}).type="Sepia",new n.Image.filters.BaseFilter.fromObject(t,e)}}(exports),function(t){"use strict";var n=t.fabric||(t.fabric={}),e=n.Image.filters,i=n.util.createClass;e.Sepia2=i(e.BaseFilter,{type:"Sepia2",applyTo:function(t){var e,n,i,r,o=t.getContext("2d"),a=o.getImageData(0,0,t.width,t.height),s=a.data,l=s.length;for(e=0;e<l;e+=4)n=s[e],i=s[e+1],r=s[e+2],s[e]=(.393*n+.769*i+.189*r)/1.351,s[e+1]=(.349*n+.686*i+.168*r)/1.203,s[e+2]=(.272*n+.534*i+.131*r)/2.14;o.putImageData(a,0,0)}}),n.Image.filters.Sepia2.fromObject=function(t,e){return(t=t||{}).type="Sepia2",new n.Image.filters.BaseFilter.fromObject(t,e)}}(exports),function(t){"use strict";var p=t.fabric||(t.fabric={}),e=p.util.object.extend,n=p.Image.filters,i=p.util.createClass;n.Tint=i(n.BaseFilter,{type:"Tint",initialize:function(t){t=t||{},this.color=t.color||"#000000",this.opacity=void 0!==t.opacity?t.opacity:new p.Color(this.color).getAlpha()},applyTo:function(t){var e,n,i,r,o,a,s,l,h,c=t.getContext("2d"),u=c.getImageData(0,0,t.width,t.height),f=u.data,d=f.length;for(n=(h=new p.Color(this.color).getSource())[0]*this.opacity,i=h[1]*this.opacity,r=h[2]*this.opacity,l=1-this.opacity,e=0;e<d;e+=4)o=f[e],a=f[e+1],s=f[e+2],f[e]=n+o*l,f[e+1]=i+a*l,f[e+2]=r+s*l;c.putImageData(u,0,0)},toObject:function(){return e(this.callSuper("toObject"),{color:this.color,opacity:this.opacity})}}),p.Image.filters.Tint.fromObject=p.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var s=t.fabric||(t.fabric={}),e=s.util.object.extend,n=s.Image.filters,i=s.util.createClass;n.Multiply=i(n.BaseFilter,{type:"Multiply",initialize:function(t){t=t||{},this.color=t.color||"#000000"},applyTo:function(t){var e,n,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),o=r.data,a=o.length;for(n=new s.Color(this.color).getSource(),e=0;e<a;e+=4)o[e]*=n[0]/255,o[e+1]*=n[1]/255,o[e+2]*=n[2]/255;i.putImageData(r,0,0)},toObject:function(){return e(this.callSuper("toObject"),{color:this.color})}}),s.Image.filters.Multiply.fromObject=s.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var _=t.fabric,e=_.Image.filters,n=_.util.createClass;e.Blend=n(e.BaseFilter,{type:"Blend",initialize:function(t){t=t||{},this.color=t.color||"#000",this.image=t.image||!1,this.mode=t.mode||"multiply",this.alpha=t.alpha||1},applyTo:function(t){var e,n,i,r,o,a,s,l,h,c,u=t.getContext("2d"),f=u.getImageData(0,0,t.width,t.height),d=f.data,p=!1;if(this.image){p=!0;var g=_.util.createCanvasElement();g.width=this.image.width,g.height=this.image.height;var v=new _.StaticCanvas(g);v.add(this.image),c=v.getContext("2d").getImageData(0,0,v.width,v.height).data}else e=(c=new _.Color(this.color).getSource())[0]*this.alpha,n=c[1]*this.alpha,i=c[2]*this.alpha;for(var m=0,y=d.length;m<y;m+=4)switch(r=d[m],o=d[m+1],a=d[m+2],p&&(e=c[m]*this.alpha,n=c[m+1]*this.alpha,i=c[m+2]*this.alpha),this.mode){case"multiply":d[m]=r*e/255,d[m+1]=o*n/255,d[m+2]=a*i/255;break;case"screen":d[m]=1-(1-r)*(1-e),d[m+1]=1-(1-o)*(1-n),d[m+2]=1-(1-a)*(1-i);break;case"add":d[m]=Math.min(255,r+e),d[m+1]=Math.min(255,o+n),d[m+2]=Math.min(255,a+i);break;case"diff":case"difference":d[m]=Math.abs(r-e),d[m+1]=Math.abs(o-n),d[m+2]=Math.abs(a-i);break;case"subtract":s=r-e,l=o-n,h=a-i,d[m]=s<0?0:s,d[m+1]=l<0?0:l,d[m+2]=h<0?0:h;break;case"darken":d[m]=Math.min(r,e),d[m+1]=Math.min(o,n),d[m+2]=Math.min(a,i);break;case"lighten":d[m]=Math.max(r,e),d[m+1]=Math.max(o,n),d[m+2]=Math.max(a,i)}u.putImageData(f,0,0)},toObject:function(){return{color:this.color,image:this.image,mode:this.mode,alpha:this.alpha}}}),_.Image.filters.Blend.fromObject=_.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var m=t.fabric||(t.fabric={}),I=Math.pow,P=Math.floor,E=Math.sqrt,L=Math.abs,y=Math.max,l=Math.round,r=Math.sin,j=Math.ceil,e=m.Image.filters,n=m.util.createClass;e.Resize=n(e.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,applyTo:function(t,e,n){if(1!==e||1!==n){this.rcpScaleX=1/e,this.rcpScaleY=1/n;var i,r=t.width,o=t.height,a=l(r*e),s=l(o*n);"sliceHack"===this.resizeType&&(i=this.sliceByTwo(t,r,o,a,s)),"hermite"===this.resizeType&&(i=this.hermiteFastResize(t,r,o,a,s)),"bilinear"===this.resizeType&&(i=this.bilinearFiltering(t,r,o,a,s)),"lanczos"===this.resizeType&&(i=this.lanczosResize(t,r,o,a,s)),t.width=a,t.height=s,t.getContext("2d").putImageData(i,0,0)}},sliceByTwo:function(t,e,n,i,r){var o,a=t.getContext("2d"),s=.5,l=.5,h=1,c=1,u=!1,f=!1,d=e,p=n,g=m.util.createCanvasElement(),v=g.getContext("2d");for(i=P(i),r=P(r),g.width=y(i,e),g.height=y(r,n),e<i&&(s=2,h=-1),n<r&&(l=2,c=-1),o=a.getImageData(0,0,e,n),t.width=y(i,e),t.height=y(r,n),a.putImageData(o,0,0);!u||!f;)n=p,i*h<P((e=d)*s*h)?d=P(d*s):(d=i,u=!0),r*c<P(p*l*c)?p=P(p*l):(p=r,f=!0),o=a.getImageData(0,0,e,n),v.putImageData(o,0,0),a.clearRect(0,0,d,p),a.drawImage(g,0,0,e,n,0,0,d,p);return a.getImageData(0,0,i,r)},lanczosResize:function(t,p,g,v,m){var n,e=t.getContext("2d"),i=e.getImageData(0,0,p,g),y=e.getImageData(0,0,v,m),_=i.data,x=y.data,b=(n=this.lanczosLobes,function(t){if(n<t)return 0;if(t*=Math.PI,L(t)<1e-16)return 1;var e=t/n;return r(t)*r(e)/t/e}),w=this.rcpScaleX,S=this.rcpScaleY,C=2/this.rcpScaleX,T=2/this.rcpScaleY,k=j(w*this.lanczosLobes/2),O=j(S*this.lanczosLobes/2),A={},M={},D={};return function t(e){var n,i,r,o,a,s,l,h,c,u,f;for(M.x=(e+.5)*w,D.x=P(M.x),n=0;n<m;n++){for(M.y=(n+.5)*S,D.y=P(M.y),c=h=l=s=a=0,i=D.x-k;i<=D.x+k;i++)if(!(i<0||p<=i)){u=P(1e3*L(i-M.x)),A[u]||(A[u]={});for(var d=D.y-O;d<=D.y+O;d++)d<0||g<=d||(f=P(1e3*L(d-M.y)),A[u][f]||(A[u][f]=b(E(I(u*C,2)+I(f*T,2))/1e3)),0<(r=A[u][f])&&(a+=r,s+=r*_[o=4*(d*p+i)],l+=r*_[o+1],h+=r*_[o+2],c+=r*_[o+3]))}x[o=4*(n*v+e)]=s/a,x[o+1]=l/a,x[o+2]=h/a,x[o+3]=c/a}return++e<v?t(e):y}(0)},bilinearFiltering:function(t,e,n,i,r){var o,a,s,l,h,c,u,f,d,p=0,g=this.rcpScaleX,v=this.rcpScaleY,m=t.getContext("2d"),y=4*(e-1),_=m.getImageData(0,0,e,n).data,x=m.getImageData(0,0,i,r),b=x.data;for(s=0;s<r;s++)for(l=0;l<i;l++)for(h=g*l-(o=P(g*l)),c=v*s-(a=P(v*s)),d=4*(a*e+o),u=0;u<4;u++)f=_[d+u]*(1-h)*(1-c)+_[d+4+u]*h*(1-c)+_[d+y+u]*c*(1-h)+_[d+y+4+u]*h*c,b[p++]=f;return x},hermiteFastResize:function(t,e,n,i,r){for(var o=this.rcpScaleX,a=this.rcpScaleY,s=j(o/2),l=j(a/2),h=t.getContext("2d"),c=h.getImageData(0,0,e,n).data,u=h.getImageData(0,0,i,r),f=u.data,d=0;d<r;d++)for(var p=0;p<i;p++){for(var g=4*(p+d*i),v=0,m=0,y=0,_=0,x=0,b=0,w=0,S=(d+.5)*a,C=P(d*a);C<(d+1)*a;C++)for(var T=L(S-(C+.5))/l,k=(p+.5)*o,O=T*T,A=P(p*o);A<(p+1)*o;A++){var M=L(k-(A+.5))/s,D=E(O+M*M);1<D&&D<-1||0<(v=2*D*D*D-3*D*D+1)&&(w+=v*c[(M=4*(A+C*e))+3],y+=v,c[M+3]<255&&(v=v*c[M+3]/250),_+=v*c[M],x+=v*c[M+1],b+=v*c[M+2],m+=v)}f[g]=_/m,f[g+1]=x/m,f[g+2]=b/m,f[g+3]=w/y}return u},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),m.Image.filters.Resize.fromObject=m.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.ColorMatrix=r(i.BaseFilter,{type:"ColorMatrix",initialize:function(t){t||(t={}),this.matrix=t.matrix||[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]},applyTo:function(t){var e,n,i,r,o,a=t.getContext("2d"),s=a.getImageData(0,0,t.width,t.height),l=s.data,h=l.length,c=this.matrix;for(e=0;e<h;e+=4)n=l[e],i=l[e+1],r=l[e+2],o=l[e+3],l[e]=n*c[0]+i*c[1]+r*c[2]+o*c[3]+c[4],l[e+1]=n*c[5]+i*c[6]+r*c[7]+o*c[8]+c[9],l[e+2]=n*c[10]+i*c[11]+r*c[12]+o*c[13]+c[14],l[e+3]=n*c[15]+i*c[16]+r*c[17]+o*c[18]+c[19];a.putImageData(s,0,0)},toObject:function(){return n(this.callSuper("toObject"),{type:this.type,matrix:this.matrix})}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Contrast=r(i.BaseFilter,{type:"Contrast",initialize:function(t){t=t||{},this.contrast=t.contrast||0},applyTo:function(t){for(var e=t.getContext("2d"),n=e.getImageData(0,0,t.width,t.height),i=n.data,r=259*(this.contrast+255)/(255*(259-this.contrast)),o=0,a=i.length;o<a;o+=4)i[o]=r*(i[o]-128)+128,i[o+1]=r*(i[o+1]-128)+128,i[o+2]=r*(i[o+2]-128)+128;e.putImageData(n,0,0)},toObject:function(){return n(this.callSuper("toObject"),{contrast:this.contrast})}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Saturate=r(i.BaseFilter,{type:"Saturate",initialize:function(t){t=t||{},this.saturate=t.saturate||0},applyTo:function(t){for(var e,n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height),r=i.data,o=.01*-this.saturate,a=0,s=r.length;a<s;a+=4)e=Math.max(r[a],r[a+1],r[a+2]),r[a]+=e!==r[a]?(e-r[a])*o:0,r[a+1]+=e!==r[a+1]?(e-r[a+1])*o:0,r[a+2]+=e!==r[a+2]?(e-r[a+2])*o:0;n.putImageData(i,0,0)},toObject:function(){return n(this.callSuper("toObject"),{saturate:this.saturate})}}),e.Image.filters.Saturate.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var d=t.fabric||(t.fabric={}),p=d.util.toFixed,g=d.Object.NUM_FRACTION_DIGITS;d.Text?d.warn("fabric.Text is already defined"):(d.Text=d.util.createClass(d.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.16,textBackgroundColor:"",stateProperties:d.Object.prototype.stateProperties.concat("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing"),cacheProperties:d.Object.prototype.cacheProperties.concat("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),stroke:null,shadow:null,_fontSizeFraction:.25,_fontSizeMult:1.13,charSpacing:0,initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.__skipDimension=!1,this._initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},_initDimensions:function(t){this.__skipDimension||(t||(t=d.util.createCanvasElement().getContext("2d"),this._setTextStyles(t)),this._textLines=this._splitTextIntoLines(),this._clearCache(),this.width=this._getTextWidth(t)||this.cursorWidth||2,this.height=this._getTextHeight(t),this.setCoords())},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){this._setTextStyles(t),this.group&&"path-group"===this.group.type&&t.translate(this.left,this.top),this._renderTextLinesBackground(t),this._renderText(t),this._renderTextDecoration(t)},_renderText:function(t){this._renderTextFill(t),this._renderTextStroke(t)},_setTextStyles:function(t){t.textBaseline="alphabetic",t.font=this._getFontDeclaration()},_getTextHeight:function(){return this._getHeightOfSingleLine()+(this._textLines.length-1)*this._getHeightOfLine()},_getTextWidth:function(t){for(var e=this._getLineWidth(t,0),n=1,i=this._textLines.length;n<i;n++){var r=this._getLineWidth(t,n);e<r&&(e=r)}return e},_renderChars:function(t,e,n,i,r){var o,a,s=t.slice(0,-4);if(this[s].toLive){var l=-this.width/2+this[s].offsetX||0,h=-this.height/2+this[s].offsetY||0;e.save(),e.translate(l,h),i-=l,r-=h}if(0!==this.charSpacing)for(var c=this._getWidthOfCharSpacing(),u=0,f=(n=n.split("")).length;u<f;u++)o=n[u],a=e.measureText(o).width+c,e[t](o,i,r),i+=0<a?a:0;else e[t](n,i,r);this[s].toLive&&e.restore()},_renderTextLine:function(t,e,n,i,r,o){r-=this.fontSize*this._fontSizeFraction;var a=this._getLineWidth(e,o);if("justify"!==this.textAlign||this.width<a)this._renderChars(t,e,n,i,r,o);else for(var s,l=n.split(/\s+/),h=0,c=this._getWidthOfWords(e,l.join(" "),o,0),u=this.width-c,f=l.length-1,d=0<f?u/f:0,p=0,g=0,v=l.length;g<v;g++){for(;" "===n[h]&&h<n.length;)h++;s=l[g],this._renderChars(t,e,s,i+p,r,o,h),p+=this._getWidthOfWords(e,s,o,h)+d,h+=s.length}},_getWidthOfWords:function(t,e){var n=t.measureText(e).width;return 0!==this.charSpacing&&(n+=e.split("").length*this._getWidthOfCharSpacing()),0<n?n:0},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},isEmptyStyles:function(){return!0},_renderTextCommon:function(t,e){for(var n=0,i=this._getLeftOffset(),r=this._getTopOffset(),o=0,a=this._textLines.length;o<a;o++){var s=this._getHeightOfLine(t,o),l=s/this.lineHeight,h=this._getLineWidth(t,o),c=this._getLineLeftOffset(h);this._renderTextLine(e,t,this._textLines[o],i+c,r+n+l,o),n+=s}},_renderTextFill:function(t){!this.fill&&this.isEmptyStyles()||this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_getHeightOfLine:function(){return this._getHeightOfSingleLine()*this.lineHeight},_getHeightOfSingleLine:function(){return this.fontSize*this._fontSizeMult},_renderTextLinesBackground:function(t){if(this.textBackgroundColor){var e,n,i,r=0,o=t.fillStyle;t.fillStyle=this.textBackgroundColor;for(var a=0,s=this._textLines.length;a<s;a++)e=this._getHeightOfLine(t,a),0<(n=this._getLineWidth(t,a))&&(i=this._getLineLeftOffset(n),t.fillRect(this._getLeftOffset()+i,this._getTopOffset()+r,n,e/this.lineHeight)),r+=e;t.fillStyle=o,this._removeShadow(t)}},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.saveState({propertySet:"_dimensionAffectingProps"}),this.dirty=!0),t},_getLineWidth:function(t,e){if(this.__lineWidths[e])return-1===this.__lineWidths[e]?this.width:this.__lineWidths[e];var n,i=this._textLines[e];return n=""===i?0:this._measureLine(t,e),(this.__lineWidths[e]=n)&&"justify"===this.textAlign&&1<i.split(/\s+/).length&&(this.__lineWidths[e]=-1),n},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},_measureLine:function(t,e){var n,i=this._textLines[e],r=t.measureText(i).width,o=0;return 0!==this.charSpacing&&(o=(i.split("").length-1)*this._getWidthOfCharSpacing()),0<(n=r+o)?n:0},_renderTextDecoration:function(h){if(this.textDecoration){var c=this.height/2,u=this,t=[];-1<this.textDecoration.indexOf("underline")&&t.push(.85),-1<this.textDecoration.indexOf("line-through")&&t.push(.43),-1<this.textDecoration.indexOf("overline")&&t.push(-.12),0<t.length&&function(t){var e,n,i,r,o,a,s,l=0;for(e=0,n=u._textLines.length;e<n;e++){for(o=u._getLineWidth(h,e),a=u._getLineLeftOffset(o),s=u._getHeightOfLine(h,e),i=0,r=t.length;i<r;i++)h.fillRect(u._getLeftOffset()+a,l+(u._fontSizeMult-1+t[i])*u.fontSize-c,o,u.fontSize/15);l+=s}}(t)}},_getFontDeclaration:function(){return[d.isLikelyNode?this.fontWeight:this.fontStyle,d.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",d.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(t,e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&(this._setTextStyles(t),this._initDimensions(t)),this.callSuper("render",t,e)))},_splitTextIntoLines:function(){return this.text.split(this._reNewline)},toObject:function(t){var e=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","textDecoration","textAlign","textBackgroundColor","charSpacing"].concat(t);return this.callSuper("toObject",e)},toSVG:function(t){this.ctx||(this.ctx=d.util.createCanvasElement().getContext("2d"));var e=this._createBaseSVGMarkup(),n=this._getSVGLeftTopOffsets(this.ctx),i=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e,i),t?t(e.join("")):e.join("")},_getSVGLeftTopOffsets:function(t){var e=this._getHeightOfLine(t,0);return{textLeft:-this.width/2+(this.group&&"path-group"===this.group.type?this.left:0),textTop:0+(this.group&&"path-group"===this.group.type?-this.top:0),lineTop:e}},_wrapSVGTextAndBg:function(t,e){var n=this.getSvgFilter(),i=""===n?"":' style="'+n+'"';t.push("\t<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"',i,">\n",e.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(!0),'" >\n',e.textSpans.join(""),"\t\t</text>\n","\t</g>\n")},getSvgStyles:function(t){return d.Object.prototype.getSvgStyles.call(this,t)+" white-space: pre;"},_getSVGTextAndBg:function(t,e){var n=[],i=[],r=0;this._setSVGBg(i);for(var o=0,a=this._textLines.length;o<a;o++)this.textBackgroundColor&&this._setSVGTextLineBg(i,o,e,t,r),this._setSVGTextLineText(o,n,r,e,t,i),r+=this._getHeightOfLine(this.ctx,o);return{textSpans:n,textBgRects:i}},_setSVGTextLineText:function(t,e,n,i,r){var o=this.fontSize*(this._fontSizeMult-this._fontSizeFraction)-r+n-this.height/2;"justify"!==this.textAlign?e.push('\t\t\t<tspan x="',p(i+this._getLineLeftOffset(this._getLineWidth(this.ctx,t)),g),'" ','y="',p(o,g),'" ',this._getFillAttributes(this.fill),">",d.util.string.escapeXml(this._textLines[t]),"</tspan>\n"):this._setSVGTextLineJustifed(t,e,o,i)},_setSVGTextLineJustifed:function(t,e,n,i){var r=d.util.createCanvasElement().getContext("2d");this._setTextStyles(r);var o,a,s=this._textLines[t].split(/\s+/),l=this._getWidthOfWords(r,s.join("")),h=this.width-l,c=s.length-1,u=0<c?h/c:0,f=this._getFillAttributes(this.fill);for(i+=this._getLineLeftOffset(this._getLineWidth(r,t)),t=0,a=s.length;t<a;t++)o=s[t],e.push('\t\t\t<tspan x="',p(i,g),'" ','y="',p(n,g),'" ',f,">",d.util.string.escapeXml(o),"</tspan>\n"),i+=this._getWidthOfWords(r,o)+u},_setSVGTextLineBg:function(t,e,n,i,r){t.push("\t\t<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',p(n+this._getLineLeftOffset(this._getLineWidth(this.ctx,e)),g),'" y="',p(r-this.height/2,g),'" width="',p(this._getLineWidth(this.ctx,e),g),'" height="',p(this._getHeightOfLine(this.ctx,e)/this.lineHeight,g),'"></rect>\n')},_setSVGBg:function(t){this.backgroundColor&&t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',p(-this.width/2,g),'" y="',p(-this.height/2,g),'" width="',p(this.width,g),'" height="',p(this.height,g),'"></rect>\n')},_getFillAttributes:function(t){var e=t&&"string"==typeof t?new d.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_set:function(t,e){this.callSuper("_set",t,e),-1<this._dimensionAffectingProps.indexOf(t)&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),d.Text.ATTRIBUTE_NAMES=d.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),d.Text.DEFAULT_SVG_FONT_SIZE=16,d.Text.fromElement=function(t,e){if(!t)return null;var n=d.parseAttributes(t,d.Text.ATTRIBUTE_NAMES);(e=d.util.object.extend(e?d.util.object.clone(e):{},n)).top=e.top||0,e.left=e.left||0,"dx"in n&&(e.left+=n.dx),"dy"in n&&(e.top+=n.dy),"fontSize"in e||(e.fontSize=d.Text.DEFAULT_SVG_FONT_SIZE),e.originX||(e.originX="left");var i="";"textContent"in t?i=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(i=t.firstChild.data),i=i.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var r=new d.Text(i,e),o=r.getHeight()/r.height,a=((r.height+r.strokeWidth)*r.lineHeight-r.height)*o,s=r.getHeight()+a,l=0;return"left"===r.originX&&(l=r.getWidth()/2),"right"===r.originX&&(l=-r.getWidth()/2),r.set({left:r.getLeft()+l,top:r.getTop()-s/2+r.fontSize*(.18+r._fontSizeFraction)/r.lineHeight}),r},d.Text.fromObject=function(t,e,n){return d.Object._fromObject("Text",t,e,n,"text")},d.util.createAccessors(d.Text))}(exports),FXc=fabric.util.object.clone,fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,styles:null,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],initialize:function(t,e){this.styles=e&&e.styles||{},this.callSuper("initialize",t,e),this.initBehavior()},_clearCache:function(){this.callSuper("_clearCache"),this.__widthOfSpace=[]},isEmptyStyles:function(){if(!this.styles)return!0;var t=this.styles;for(var e in t)for(var n in t[e])for(var i in t[e][n])return!1;return!0},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},getSelectionStyles:function(t,e){if(2===arguments.length){for(var n=[],i=t;i<e;i++)n.push(this.getSelectionStyles(i));return n}var r=this.get2DCursorLocation(t);return this._getStyleDeclaration(r.lineIndex,r.charIndex)||{}},setSelectionStyles:function(t){if(this.selectionStart===this.selectionEnd)this._extendStyles(this.selectionStart,t);else for(var e=this.selectionStart;e<this.selectionEnd;e++)this._extendStyles(e,t);return this._forceClearCache=!0,this},_extendStyles:function(t,e){var n=this.get2DCursorLocation(t);this._getLineStyle(n.lineIndex)||this._setLineStyle(n.lineIndex,{}),this._getStyleDeclaration(n.lineIndex,n.charIndex)||this._setStyleDeclaration(n.lineIndex,n.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(n.lineIndex,n.charIndex),e)},_initDimensions:function(t){t||this.clearContextTop(),this.callSuper("_initDimensions",t)},render:function(t,e){this.clearContextTop(),this.callSuper("render",t,e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t),this.ctx=t},clearContextTop:function(){if(this.active&&this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this.canvas.contextTop;t.save(),t.transform.apply(t,this.canvas.viewportTransform),this.transform(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this._clearTextArea(t),t.restore()}},renderCursorOrSelection:function(){if(this.active&&this.isEditing){var t,e,n=this.text.split("");this.canvas&&this.canvas.contextTop?((e=this.canvas.contextTop).save(),e.transform.apply(e,this.canvas.viewportTransform),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this._clearTextArea(e)):(e=this.ctx).save(),this.selectionStart===this.selectionEnd?(t=this._getCursorBoundaries(n,"cursor"),this.renderCursor(t,e)):(t=this._getCursorBoundaries(n,"selection"),this.renderSelection(n,t,e)),e.restore()}},_clearTextArea:function(t){var e=this.width+4,n=this.height+4;t.clearRect(-e/2,-n/2,e,n)},get2DCursorLocation:function(t){void 0===t&&(t=this.selectionStart);for(var e=this._textLines.length,n=0;n<e;n++){if(t<=this._textLines[n].length)return{lineIndex:n,charIndex:t};t-=this._textLines[n].length+1}return{lineIndex:n-1,charIndex:this._textLines[n-1].length<t?this._textLines[n-1].length:t}},getCurrentCharStyle:function(t,e){var n=this._getStyleDeclaration(t,0===e?0:e-1);return{fontSize:n&&n.fontSize||this.fontSize,fill:n&&n.fill||this.fill,textBackgroundColor:n&&n.textBackgroundColor||this.textBackgroundColor,textDecoration:n&&n.textDecoration||this.textDecoration,fontFamily:n&&n.fontFamily||this.fontFamily,fontWeight:n&&n.fontWeight||this.fontWeight,fontStyle:n&&n.fontStyle||this.fontStyle,stroke:n&&n.stroke||this.stroke,strokeWidth:n&&n.strokeWidth||this.strokeWidth}},getCurrentCharFontSize:function(t,e){var n=this._getStyleDeclaration(t,0===e?0:e-1);return n&&n.fontSize?n.fontSize:this.fontSize},getCurrentCharColor:function(t,e){var n=this._getStyleDeclaration(t,0===e?0:e-1);return n&&n.fill?n.fill:this.cursorColor},_getCursorBoundaries:function(t,e){var n=Math.round(this._getLeftOffset()),i=this._getTopOffset(),r=this._getCursorBoundariesOffsets(t,e);return{left:n,top:i,leftOffset:r.left+r.lineLeft,topOffset:r.top}},_getCursorBoundariesOffsets:function(t,e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;for(var n,i=0,r=0,o=0,a=0,s=0,l=0;l<this.selectionStart;l++)"\n"===t[l]?(s=0,a+=this._getHeightOfLine(this.ctx,r),r++,o=0):(s+=this._getWidthOfChar(this.ctx,t[l],r,o),o++),i=this._getLineLeftOffset(this._getLineWidth(this.ctx,r));return"cursor"===e&&(a+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,r)/this.lineHeight-this.getCurrentCharFontSize(r,o)*(1-this._fontSizeFraction)),0!==this.charSpacing&&o===this._textLines[r].length&&(s-=this._getWidthOfCharSpacing()),n={top:a,left:0<s?s:0,lineLeft:i},this.cursorOffsetCache=n,this.cursorOffsetCache},renderCursor:function(t,e){var n=this.get2DCursorLocation(),i=n.lineIndex,r=n.charIndex,o=this.getCurrentCharFontSize(i,r),a=t.leftOffset,s=this.scaleX*this.canvas.getZoom(),l=this.cursorWidth/s;e.fillStyle=this.getCurrentCharColor(i,r),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+a-l/2,t.top+t.topOffset,l,o)},renderSelection:function(t,e,n){n.fillStyle=this.selectionColor;for(var i=this.get2DCursorLocation(this.selectionStart),r=this.get2DCursorLocation(this.selectionEnd),o=i.lineIndex,a=r.lineIndex,s=o;s<=a;s++){var l,h=this._getLineLeftOffset(this._getLineWidth(n,s))||0,c=this._getHeightOfLine(this.ctx,s),u=0,f=this._textLines[s];if(s===o){for(var d=0,p=f.length;d<p;d++)d>=i.charIndex&&(s!==a||d<r.charIndex)&&(u+=this._getWidthOfChar(n,f[d],s,d)),d<i.charIndex&&(h+=this._getWidthOfChar(n,f[d],s,d));d===f.length&&(u-=this._getWidthOfCharSpacing())}else if(o<s&&s<a)u+=this._getLineWidth(n,s)||5;else if(s===a){for(var g=0,v=r.charIndex;g<v;g++)u+=this._getWidthOfChar(n,f[g],s,g);r.charIndex===f.length&&(u-=this._getWidthOfCharSpacing())}l=c,(this.lineHeight<1||s===a&&1<this.lineHeight)&&(c/=this.lineHeight),n.fillRect(e.left+h,e.top+e.topOffset,0<u?u:0,c),e.topOffset+=l}},_renderChars:function(t,e,n,i,r,o,a){if(this.isEmptyStyles())return this._renderCharsFast(t,e,n,i,r);a=a||0;var s,l,h=this._getHeightOfLine(e,o),c="";e.save(),r-=h/this.lineHeight*this._fontSizeFraction;for(var u=a,f=n.length+a;u<=f;u++)s=s||this.getCurrentCharStyle(o,u),l=this.getCurrentCharStyle(o,u+1),(this._hasStyleChanged(s,l)||u===f)&&(this._renderChar(t,e,o,u-1,c,i,r,h),c="",s=l),c+=n[u-a];e.restore()},_renderCharsFast:function(t,e,n,i,r){"fillText"===t&&this.fill&&this.callSuper("_renderChars",t,e,n,i,r),"strokeText"===t&&(this.stroke&&0<this.strokeWidth||this.skipFillStrokeCheck)&&this.callSuper("_renderChars",t,e,n,i,r)},_renderChar:function(t,e,n,i,r,o,a,s){var l,h,c,u,f,d,p,g,v,m=this._getStyleDeclaration(n,i);if(m?(h=this._getHeightOfChar(e,r,n,i),u=m.stroke,c=m.fill,d=m.textDecoration):h=this.fontSize,u=(u||this.stroke)&&"strokeText"===t,c=(c||this.fill)&&"fillText"===t,m&&e.save(),l=this._applyCharStylesGetWidth(e,r,n,i,m||null),d=d||this.textDecoration,m&&m.textBackgroundColor&&this._removeShadow(e),0!==this.charSpacing){g=this._getWidthOfCharSpacing();for(var y,_=l=0,x=(p=r.split("")).length;_<x;_++)y=p[_],c&&e.fillText(y,o+l,a),u&&e.strokeText(y,o+l,a),l+=0<(v=e.measureText(y).width+g)?v:0}else c&&e.fillText(r,o,a),u&&e.strokeText(r,o,a);(d||""!==d)&&(f=this._fontSizeFraction*s/this.lineHeight,this._renderCharDecoration(e,d,o,a,f,l,h)),m&&e.restore(),e.translate(l,0)},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.fontSize!==e.fontSize||t.textBackgroundColor!==e.textBackgroundColor||t.textDecoration!==e.textDecoration||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth},_renderCharDecoration:function(t,e,n,i,r,o,a){if(e){var s,l,h=a/15,c={underline:i+a/10,"line-through":i-a*(this._fontSizeFraction+this._fontSizeMult-1)+h,overline:i-(this._fontSizeMult-this._fontSizeFraction)*a},u=["underline","line-through","overline"];for(s=0;s<u.length;s++)l=u[s],-1<e.indexOf(l)&&t.fillRect(n,c[l],o,h)}},_renderTextLine:function(t,e,n,i,r,o){this.isEmptyStyles()||(r+=this.fontSize*(this._fontSizeFraction+.03)),this.callSuper("_renderTextLine",t,e,n,i,r,o)},_renderTextDecoration:function(t){if(this.isEmptyStyles())return this.callSuper("_renderTextDecoration",t)},_renderTextLinesBackground:function(t){this.callSuper("_renderTextLinesBackground",t);var e,n,i,r,o,a,s,l,h,c,u=0,f=this._getLeftOffset(),d=this._getTopOffset(),p="";t.save();for(var g=0,v=this._textLines.length;g<v;g++)if(e=this._getHeightOfLine(t,g),""!==(r=this._textLines[g])&&this.styles&&this._getLineStyle(g)){n=this._getLineWidth(t,g),i=this._getLineLeftOffset(n),s=l=h=c=0;for(var m=0,y=r.length;m<y;m++)p!==(a=this._getStyleDeclaration(g,m)||{}).textBackgroundColor&&(c&&h&&(t.fillStyle=p,t.fillRect(s,l,h,c)),s=l=h=c=0,p=a.textBackgroundColor||""),a.textBackgroundColor?(o=r[m],p===a.textBackgroundColor&&(p=a.textBackgroundColor,s||(s=f+i+this._getWidthOfCharsAt(t,g,m)),l=d+u,h+=this._getWidthOfChar(t,o,g,m),c=e/this.lineHeight)):p="";c&&h&&(t.fillStyle=p,t.fillRect(s,l,h,c),s=l=h=c=0),u+=e}else u+=e;t.restore()},_getCacheProp:function(t,e){return t+e.fontSize+e.fontWeight+e.fontStyle},_getFontCache:function(t){return fabric.charWidthsCache[t]||(fabric.charWidthsCache[t]={}),fabric.charWidthsCache[t]},_applyCharStylesGetWidth:function(t,e,n,i,r){var o,a,s,l=r||this._getStyleDeclaration(n,i),h=FXc(l);if(this._applyFontStyles(h),s=this._getFontCache(h.fontFamily),a=this._getCacheProp(e,h),!l&&s[a]&&this.caching)return s[a];"string"==typeof h.shadow&&(h.shadow=new fabric.Shadow(h.shadow));var c=h.fill||this.fill;return t.fillStyle=c.toLive?c.toLive(t,this):c,h.stroke&&(t.strokeStyle=h.stroke&&h.stroke.toLive?h.stroke.toLive(t,this):h.stroke),t.lineWidth=h.strokeWidth||this.strokeWidth,t.font=this._getFontDeclaration.call(h),h.shadow&&(h.scaleX=this.scaleX,h.scaleY=this.scaleY,h.canvas=this.canvas,h.getObjectScaling=this.getObjectScaling,this._setShadow.call(h,t)),this.caching&&s[a]?s[a]:(o=t.measureText(e).width,this.caching&&(s[a]=o),o)},_applyFontStyles:function(t){t.fontFamily||(t.fontFamily=this.fontFamily),t.fontSize||(t.fontSize=this.fontSize),t.fontWeight||(t.fontWeight=this.fontWeight),t.fontStyle||(t.fontStyle=this.fontStyle)},_getStyleDeclaration:function(t,e,n){return n?this.styles[t]&&this.styles[t][e]?FXc(this.styles[t][e]):{}:this.styles[t]&&this.styles[t][e]?this.styles[t][e]:null},_setStyleDeclaration:function(t,e,n){this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return this.styles[t]},_setLineStyle:function(t,e){this.styles[t]=e},_deleteLineStyle:function(t){delete this.styles[t]},_getWidthOfChar:function(t,e,n,i){if(!this._isMeasuring&&"justify"===this.textAlign&&this._reSpacesAndTabs.test(e))return this._getWidthOfSpace(t,n);t.save();var r=this._applyCharStylesGetWidth(t,e,n,i);return 0!==this.charSpacing&&(r+=this._getWidthOfCharSpacing()),t.restore(),0<r?r:0},_getHeightOfChar:function(t,e,n){var i=this._getStyleDeclaration(e,n);return i&&i.fontSize?i.fontSize:this.fontSize},_getWidthOfCharsAt:function(t,e,n){var i,r,o=0;for(i=0;i<n;i++)r=this._textLines[e][i],o+=this._getWidthOfChar(t,r,e,i);return o},_measureLine:function(t,e){this._isMeasuring=!0;var n=this._getWidthOfCharsAt(t,e,this._textLines[e].length);return 0!==this.charSpacing&&(n-=this._getWidthOfCharSpacing()),this._isMeasuring=!1,0<n?n:0},_getWidthOfSpace:function(t,e){if(this.__widthOfSpace[e])return this.__widthOfSpace[e];var n=this._textLines[e],i=this._getWidthOfWords(t,n,e,0),r=this.width-i,o=n.length-n.replace(this._reSpacesAndTabs,"").length,a=Math.max(r/o,t.measureText(" ").width);return this.__widthOfSpace[e]=a},_getWidthOfWords:function(t,e,n,i){for(var r=0,o=0;o<e.length;o++){var a=e[o];a.match(/\s/)||(r+=this._getWidthOfChar(t,a,n,o+i))}return r},_getHeightOfLine:function(t,e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var n=this._textLines[e],i=this._getHeightOfChar(t,e,0),r=1,o=n.length;r<o;r++){var a=this._getHeightOfChar(t,e,r);i<a&&(i=a)}return this.__lineHeights[e]=i*this.lineHeight*this._fontSizeMult,this.__lineHeights[e]},_getTextHeight:function(t){for(var e,n=0,i=0,r=this._textLines.length;i<r;i++)e=this._getHeightOfLine(t,i),n+=i===r-1?e/this.lineHeight:e;return n},toObject:function(t){return fabric.util.object.extend(this.callSuper("toObject",t),{styles:FXc(this.styles,!0)})}}),fabric.IText.fromObject=function(t,e,n){return fabric.Object._fromObject("IText",t,e,n,"text")},a0c=fabric.util.object.clone,fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1,this.callSuper("onDeselect")},initAddedHandler:function(){var e=this;this.on("added",function(){var t=e.canvas;t&&(t._hasITextHandlers||(t._hasITextHandlers=!0,e._initCanvasHandlers(t)),t._iTextInstances=t._iTextInstances||[],t._iTextInstances.push(e))})},initRemovedHandler:function(){var e=this;this.on("removed",function(){var t=e.canvas;t&&(t._iTextInstances=t._iTextInstances||[],fabric.util.removeFromArray(t._iTextInstances,e),0===t._iTextInstances.length&&(t._hasITextHandlers=!1,e._removeCanvasHandlers(t)))})},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.__isMousedown=!1})}.bind(this),t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,n,i){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:n,onComplete:function(){r.isAborted||t[i]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,n=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},n)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&this.canvas&&this.canvas.clearContext(this.canvas.contextTop||this.ctx)},selectAll:function(){this.selectionStart=0,this.selectionEnd=this.text.length,this._fireSelectionChanged(),this._updateTextarea()},getSelectedText:function(){return this.text.slice(this.selectionStart,this.selectionEnd)},findWordBoundaryLeft:function(t){var e=0,n=t-1;if(this._reSpace.test(this.text.charAt(n)))for(;this._reSpace.test(this.text.charAt(n));)e++,n--;for(;/\S/.test(this.text.charAt(n))&&-1<n;)e++,n--;return t-e},findWordBoundaryRight:function(t){var e=0,n=t;if(this._reSpace.test(this.text.charAt(n)))for(;this._reSpace.test(this.text.charAt(n));)e++,n++;for(;/\S/.test(this.text.charAt(n))&&n<this.text.length;)e++,n++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,n=t-1;!/\n/.test(this.text.charAt(n))&&-1<n;)e++,n--;return t-e},findLineBoundaryRight:function(t){for(var e=0,n=t;!/\n/.test(this.text.charAt(n))&&n<this.text.length;)e++,n++;return t+e},getNumNewLinesInSelectedText:function(){for(var t=this.getSelectedText(),e=0,n=0,i=t.length;n<i;n++)"\n"===t[n]&&e++;return e},searchWordBoundary:function(t,e){for(var n=this._reSpace.test(this.text.charAt(t))?t-1:t,i=this.text.charAt(n),r=/[ \n\.,;!\?\-]/;!r.test(i)&&0<n&&n<this.text.length;)n+=e,i=this.text.charAt(n);return r.test(i)&&"\n"!==i&&(n+=1===e?0:1),n},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),n=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),n=this.findLineBoundaryRight(t);this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea()},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.selected=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.renderAll()),this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),n=this.selectionStart,i=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&n!==i||n!==e&&i!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===i||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},_updateTextarea:function(){if(this.hiddenTextarea&&!this.inCompositionMode&&(this.cursorOffsetCache={},this.hiddenTextarea.value=this.text,this.hiddenTextarea.selectionStart=this.selectionStart,this.hiddenTextarea.selectionEnd=this.selectionEnd,this.selectionStart===this.selectionEnd)){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top,this.hiddenTextarea.style.fontSize=t.fontSize}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.text.split(""),e=this._getCursorBoundaries(t,"cursor"),n=this.get2DCursorLocation(),i=n.lineIndex,r=n.charIndex,o=this.getCurrentCharFontSize(i,r),a=e.leftOffset,s=this.calcTransformMatrix(),l={x:e.left+a,y:e.top+e.topOffset+o},h=this.canvas.upperCanvasEl,c=h.width-o,u=h.height-o;return l=fabric.util.transformPoint(l,s),(l=fabric.util.transformPoint(l,this.canvas.viewportTransform)).x<0&&(l.x=0),l.x>c&&(l.x=c),l.y<0&&(l.y=0),l.y>u&&(l.y=u),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.overCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text;return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&(this.hiddenTextarea.blur&&this.hiddenTextarea.blur(),this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null),this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},_removeCharsFromTo:function(t,e){for(;e!==t;)this._removeSingleCharAndStyle(t+1),e--;this.selectionStart=t,this.selectionEnd=t},_removeSingleCharAndStyle:function(t){var e="\n"===this.text[t-1],n=e?t:t-1;this.removeStyleObject(e,n),this.text=this.text.slice(0,t-1)+this.text.slice(t),this._textLines=this._splitTextIntoLines()},insertChars:function(t,e){var n;if(1<this.selectionEnd-this.selectionStart&&this._removeCharsFromTo(this.selectionStart,this.selectionEnd),e||!this.isEmptyStyles())for(var i=0,r=t.length;i<r;i++)e&&(n=fabric.util.object.clone(fabric.copiedTextStyle[i],!0)),this.insertChar(t[i],i<r-1,n);else this.insertChar(t,!1)},insertChar:function(t,e,n){var i="\n"===this.text[this.selectionStart];this.text=this.text.slice(0,this.selectionStart)+t+this.text.slice(this.selectionEnd),this._textLines=this._splitTextIntoLines(),this.insertStyleObjects(t,i,n),this.selectionStart+=t.length,this.selectionEnd=this.selectionStart,e||(this._updateTextarea(),this.setCoords(),this._fireSelectionChanged(),this.fire("changed"),this.restartCursorIfNeeded(),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.renderAll()))},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(t,e,n){this.shiftLineStyles(t,1);var i={},r={};if(this.styles[t]&&this.styles[t][e-1]&&(i=this.styles[t][e-1]),n&&i)r[0]=a0c(i),this.styles[t+1]=r;else{var o=!1;for(var a in this.styles[t]){var s=parseInt(a,10);e<=s&&(o=!0,r[s-e]=this.styles[t][a],delete this.styles[t][a])}o&&(this.styles[t+1]=r)}this._forceClearCache=!0},insertCharStyleObject:function(t,e,n){var i=this.styles[t],r=a0c(i);for(var o in 0!==e||n||(e=1),r){var a=parseInt(o,10);e<=a&&(i[a+1]=r[a],r[a-1]||delete i[a])}var s=n||a0c(i[e-1]);s&&(this.styles[t][e]=s),this._forceClearCache=!0},insertStyleObjects:function(t,e,n){var i=this.get2DCursorLocation(),r=i.lineIndex,o=i.charIndex;this._getLineStyle(r)||this._setLineStyle(r,{}),"\n"===t?this.insertNewlineStyleObject(r,o,e):this.insertCharStyleObject(r,o,n)},shiftLineStyles:function(t,e){var n=a0c(this.styles);for(var i in n)(r=parseInt(i,10))<=t&&delete n[r];for(var i in this.styles){var r;t<(r=parseInt(i,10))&&(this.styles[r+e]=n[r],n[r-e]||delete this.styles[r])}},removeStyleObject:function(t,e){var n=this.get2DCursorLocation(e),i=n.lineIndex,r=n.charIndex;this._removeStyleObject(t,n,i,r)},_getTextOnPreviousLine:function(t){return this._textLines[t-1]},_removeStyleObject:function(t,e,n,i){if(t){var r=this._getTextOnPreviousLine(e.lineIndex),o=r?r.length:0;for(i in this.styles[n-1]||(this.styles[n-1]={}),this.styles[n])this.styles[n-1][parseInt(i,10)+o]=this.styles[n][i];this.shiftLineStyles(e.lineIndex,-1)}else{var a=this.styles[n];a&&delete a[i];var s=a0c(a);for(var l in s){var h=parseInt(l,10);i<=h&&0!==h&&(a[h-1]=s[h],delete a[h])}}},insertNewline:function(){this.insertChars("\n")},setSelectionStartEndWithShift:function(t,e,n){n<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=n):t<n&&n<e?"right"===this._selectionDirection?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=n)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}}),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(t){this.__newClickTime=+new Date;var e=this.canvas.getPointer(t.e);this.isTripleClick(e,t.e)?(this.fire("tripleclick",t),this._stopEvent(t.e)):this.isDoubleClick(e)&&(this.fire("dblclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isDoubleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y&&this.__lastIsEditing},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("dblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},initMousedownHandler:function(){this.on("mousedown",function(t){if(this.editable&&(!t.e.button||1===t.e.button)){var e=this.canvas.getPointer(t.e);this.__mousedownX=e.x,this.__mousedownY=e.y,this.__isMousedown=!0,this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())}})},_isObjectMoved:function(t){var e=this.canvas.getPointer(t);return this.__mousedownX!==e.x||this.__mousedownY!==e.y},initMouseupHandler:function(){this.on("mouseup",function(t){this.__isMousedown=!1,!this.editable||this._isObjectMoved(t.e)||t.e.button&&1!==t.e.button||(this.__lastSelected&&!this.__corner&&(this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()),this.selected=!0)})},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),n=this.selectionStart,i=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(n,i,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,n=this.getLocalPointer(t),i=0,r=0,o=0,a=0,s=0,l=this._textLines.length;s<l;s++){e=this._textLines[s],o+=this._getHeightOfLine(this.ctx,s)*this.scaleY;var h=this._getLineWidth(this.ctx,s);r=this._getLineLeftOffset(h)*this.scaleX;for(var c=0,u=e.length;c<u;c++){if(i=r,r+=this._getWidthOfChar(this.ctx,e[c],s,this.flipX?u-c:c)*this.scaleX,!(o<=n.y||r<=n.x))return this._getNewSelectionStartFromOffset(n,i,r,a+s,u);a++}if(n.y<o)return this._getNewSelectionStartFromOffset(n,i,r,a+s-1,u)}return this.text.length},_getNewSelectionStartFromOffset:function(t,e,n,i,r){var o=i+(t.x-e<n-t.x?0:1);return this.flipX&&(o=r-o),o>this.text.length&&(o=this.text.length),o}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; line-height: 1px; paddingｰtop: "+t.fontSize+";",fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.cut.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{8:"removeChars",9:"exitEditing",27:"exitEditing",13:"insertNewline",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown",46:"forwardDelete"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){if(t.keyCode in this.keysMap)this[this.keysMap[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown&&(t.ctrlKey||t.metaKey)))return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),33<=t.keyCode&&t.keyCode<=40?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.renderAll()}},onKeyUp:function(t){this.isEditing&&!this._copyDone?t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.renderAll()):this._copyDone=!1},onInput:function(t){if(this.isEditing&&!this.inCompositionMode){var e,n,i,r=this.selectionStart||0,o=this.selectionEnd||0,a=this.text.length,s=this.hiddenTextarea.value.length;a<s?(i="left"===this._selectionDirection?o:r,e=s-a,n=this.hiddenTextarea.value.slice(i,i+e)):(e=s-a+o-r,n=this.hiddenTextarea.value.slice(r,r+e)),this.insertChars(n),t.stopPropagation()}},onCompositionStart:function(){this.inCompositionMode=!0,this.prevCompositionLength=0,this.compositionStart=this.selectionStart},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){var e=t.data;this.selectionStart=this.compositionStart,this.selectionEnd=this.selectionEnd===this.selectionStart?this.compositionStart+this.prevCompositionLength:this.selectionEnd,this.insertChars(e,!1),this.prevCompositionLength=e.length},forwardDelete:function(t){if(this.selectionStart===this.selectionEnd){if(this.selectionStart===this.text.length)return;this.moveCursorRight(t)}this.removeChars(t)},copy:function(t){if(this.selectionStart!==this.selectionEnd){var e=this.getSelectedText(),n=this._getClipboardData(t);n&&n.setData("text",e),fabric.copiedText=e,fabric.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd),t.stopImmediatePropagation(),t.preventDefault(),this._copyDone=!0}},paste:function(t){var e=null,n=this._getClipboardData(t),i=!0;n?(e=n.getData("text").replace(/\r/g,""),fabric.copiedTextStyle&&fabric.copiedText===e||(i=!1)):e=fabric.copiedText,e&&this.insertChars(e,i),t.stopImmediatePropagation(),t.preventDefault()},cut:function(t){this.selectionStart!==this.selectionEnd&&(this.copy(t),this.removeChars(t))},_getClipboardData:function(t){return t&&t.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(t,e){for(var n,i=this._textLines[t].slice(0,e),r=this._getLineWidth(this.ctx,t),o=this._getLineLeftOffset(r),a=0,s=i.length;a<s;a++)n=i[a],o+=this._getWidthOfChar(this.ctx,n,t,a);return o},getDownCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(r===this._textLines.length-1||t.metaKey||34===t.keyCode)return this.text.length-n;var o=i.charIndex,a=this._getWidthBeforeCursor(r,o),s=this._getIndexOnLine(r+1,a);return this._textLines[r].slice(o).length+s+2},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return-n;var o=i.charIndex,a=this._getWidthBeforeCursor(r,o),s=this._getIndexOnLine(r-1,a),l=this._textLines[r].slice(0,o);return-this._textLines[r-1].length+s-l.length},_getIndexOnLine:function(t,e){for(var n,i=this._getLineWidth(this.ctx,t),r=this._textLines[t],o=this._getLineLeftOffset(i),a=0,s=0,l=r.length;s<l;s++){var h=r[s],c=this._getWidthOfChar(this.ctx,h,t,s);if(e<(o+=c)){n=!0;var u=o-c,f=o,d=Math.abs(u-e);a=Math.abs(f-e)<d?s:s-1;break}}return n||(a=r.length-1),a},moveCursorDown:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var n=this["get"+t+"CursorOffset"](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,n){var i;if(t.altKey)i=this["findWordBoundary"+n](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===n?-1:1,!0;i=this["findLineBoundary"+n](this[e])}if(void 0!==typeof i&&this[e]!==i)return this[e]=i,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var n="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?n+="Shift":n+="outShift",this[n](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this.text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t){this.selectionStart===this.selectionEnd?this._removeCharsNearCursor(t):this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.set("dirty",!0),this.setSelectionEnd(this.selectionStart),this._removeExtraneousStyles(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},_removeCharsNearCursor:function(t){if(0!==this.selectionStart)if(t.metaKey){var e=this.findLineBoundaryLeft(this.selectionStart);this._removeCharsFromTo(e,this.selectionStart),this.setSelectionStart(e)}else if(t.altKey){var n=this.findWordBoundaryLeft(this.selectionStart);this._removeCharsFromTo(n,this.selectionStart),this.setSelectionStart(n)}else this._removeSingleCharAndStyle(this.selectionStart),this.setSelectionStart(this.selectionStart-1)}}),Y4c=fabric.util.toFixed,Z4c=fabric.Object.NUM_FRACTION_DIGITS,fabric.util.object.extend(fabric.IText.prototype,{_setSVGTextLineText:function(t,e,n,i,r,o){this._getLineStyle(t)?this._setSVGTextLineChars(t,e,n,i,o):fabric.Text.prototype._setSVGTextLineText.call(this,t,e,n,i,r)},_setSVGTextLineChars:function(t,e,n,i,r){for(var o=this._textLines[t],a=0,s=this._getLineLeftOffset(this._getLineWidth(this.ctx,t))-this.width/2,l=this._getSVGLineTopOffset(t),h=this._getHeightOfLine(this.ctx,t),c=0,u=o.length;c<u;c++){var f=this._getStyleDeclaration(t,c)||{};e.push(this._createTextCharSpan(o[c],f,s,l.lineTop+l.offset,a));var d=this._getWidthOfChar(this.ctx,o[c],t,c);f.textBackgroundColor&&r.push(this._createTextCharBg(f,s,l.lineTop,h,d,a)),a+=d}},_getSVGLineTopOffset:function(t){for(var e,n=0,i=0;i<t;i++)n+=this._getHeightOfLine(this.ctx,i);return e=this._getHeightOfLine(this.ctx,i),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},_createTextCharBg:function(t,e,n,i,r,o){return['\t\t<rect fill="',t.textBackgroundColor,'" x="',Y4c(e+o,Z4c),'" y="',Y4c(n-this.height/2,Z4c),'" width="',Y4c(r,Z4c),'" height="',Y4c(i/this.lineHeight,Z4c),'"></rect>\n'].join("")},_createTextCharSpan:function(t,e,n,i,r){var o=this.getSvgStyles.call(fabric.util.object.extend({visible:!0,fill:this.fill,stroke:this.stroke,type:"text",getSvgFilter:fabric.Object.prototype.getSvgFilter},e));return['\t\t\t<tspan x="',Y4c(n+r,Z4c),'" y="',Y4c(i-this.height/2,Z4c),'" ',e.fontFamily?'font-family="'+e.fontFamily.replace(/"/g,"'")+'" ':"",e.fontSize?'font-size="'+e.fontSize+'" ':"",e.fontStyle?'font-style="'+e.fontStyle+'" ':"",e.fontWeight?'font-weight="'+e.fontWeight+'" ':"",e.textDecoration?'text-decoration="'+e.textDecoration+'" ':"",'style="',o,'">',fabric.util.string.escapeXml(t),"</tspan>\n"].join("")}}),function(t){"use strict";var i=t.fabric||(t.fabric={});i.Textbox=i.util.createClass(i.IText,i.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingY:!0,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:i.Text.prototype._dimensionAffectingProps.concat("width"),initialize:function(t,e){this.callSuper("initialize",t,e),this.setControlsVisibility(i.Textbox.getTextboxControlVisibility()),this.ctx=this.objectCaching?this._cacheContext:i.util.createCanvasElement().getContext("2d")},_initDimensions:function(t){this.__skipDimension||(t||(t=i.util.createCanvasElement().getContext("2d"),this._setTextStyles(t),this.clearContextTop()),this.dynamicMinWidth=0,this._textLines=this._splitTextIntoLines(t),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this._clearCache(),this.height=this._getTextHeight(t),this.setCoords())},_generateStyleMap:function(){for(var t=0,e=0,n=0,i={},r=0;r<this._textLines.length;r++)"\n"===this.text[n]&&0<r?(e=0,n++,t++):" "===this.text[n]&&0<r&&(e++,n++),i[r]={line:t,offset:e},n+=this._textLines[r].length,e+=this._textLines[r].length;return i},_getStyleDeclaration:function(t,e,n){if(this._styleMap){var i=this._styleMap[t];if(!i)return n?{}:null;t=i.line,e=i.offset+e}return this.callSuper("_getStyleDeclaration",t,e,n)},_setStyleDeclaration:function(t,e,n){var i=this._styleMap[t];t=i.line,e=i.offset+e,this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){var n=this._styleMap[t];t=n.line,e=n.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return this.styles[e.line]},_setLineStyle:function(t,e){var n=this._styleMap[t];this.styles[n.line]=e},_deleteLineStyle:function(t){var e=this._styleMap[t];delete this.styles[e.line]},_wrapText:function(t,e){var n,i=e.split(this._reNewline),r=[];for(n=0;n<i.length;n++)r=r.concat(this._wrapLine(t,i[n],n));return r},_measureText:function(t,e,n,i){var r=0;i=i||0;for(var o=0,a=e.length;o<a;o++)r+=this._getWidthOfChar(t,e[o],n,o+i);return r},_wrapLine:function(t,e,n){for(var i=0,r=[],o="",a=e.split(" "),s="",l=0,h=0,c=0,u=0,f=!0,d=this._getWidthOfCharSpacing(),p=0;p<a.length;p++)s=a[p],h=this._measureText(t,s,n,l),l+=s.length,(i+=c+h-d)>=this.width&&!f?(r.push(o),i=h,f=!(o="")):i+=d,f||(o+=" "),o+=s,c=this._measureText(t," ",n,l),l++,f=!1,u<h&&(u=h);return p&&r.push(o),u>this.dynamicMinWidth&&(this.dynamicMinWidth=u-d),r},_splitTextIntoLines:function(t){t=t||this.ctx;var e=this.textAlign;this._styleMap=null,t.save(),this._setTextStyles(t),this.textAlign="left";var n=this._wrapText(t,this.text);return this.textAlign=e,t.restore(),this._textLines=n,this._styleMap=this._generateStyleMap(),n},setOnGroup:function(t,e){"scaleX"===t&&(this.set("scaleX",Math.abs(1/e)),this.set("width",this.get("width")*e/(void 0===this.__oldScaleX?1:this.__oldScaleX)),this.__oldScaleX=e)},get2DCursorLocation:function(t){void 0===t&&(t=this.selectionStart);for(var e=this._textLines.length,n=0,i=0;i<e;i++){var r=this._textLines[i].length;if(t<=n+r)return{lineIndex:i,charIndex:t-n};n+=r,"\n"!==this.text[n]&&" "!==this.text[n]||n++}return{lineIndex:e-1,charIndex:this._textLines[e-1].length}},_getCursorBoundariesOffsets:function(t,e){for(var n=0,i=0,r=this.get2DCursorLocation(),o=this._textLines[r.lineIndex].split(""),a=this._getLineLeftOffset(this._getLineWidth(this.ctx,r.lineIndex)),s=0;s<r.charIndex;s++)i+=this._getWidthOfChar(this.ctx,o[s],r.lineIndex,s);for(s=0;s<r.lineIndex;s++)n+=this._getHeightOfLine(this.ctx,s);return"cursor"===e&&(n+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,r.lineIndex)/this.lineHeight-this.getCurrentCharFontSize(r.lineIndex,r.charIndex)*(1-this._fontSizeFraction)),{top:n,left:i,lineLeft:a}},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},toObject:function(t){return this.callSuper("toObject",["minWidth"].concat(t))}}),i.Textbox.fromObject=function(t,e,n){return i.Object._fromObject("Textbox",t,e,n,"text")},i.Textbox.getTextboxControlVisibility=function(){return{tl:!1,tr:!1,br:!1,bl:!1,ml:!0,mt:!1,mr:!0,mb:!1,mtr:!0}}}(exports),f7c=fabric.Canvas.prototype._setObjectScale,fabric.Canvas.prototype._setObjectScale=function(t,e,n,i,r,o,a){var s=e.target;if(!(s instanceof fabric.Textbox))return f7c.call(fabric.Canvas.prototype,t,e,n,i,r,o,a);var l=s.width*(t.x/e.scaleX/(s.width+s.strokeWidth));return l>=s.getMinWidth()?(s.set("width",l),!0):void 0},fabric.Group.prototype._refreshControlsVisibility=function(){if(void 0!==fabric.Textbox)for(var t=this._objects.length;t--;)if(this._objects[t]instanceof fabric.Textbox)return void this.setControlsVisibility(fabric.Textbox.getTextboxControlVisibility())},fabric.util.object.extend(fabric.Textbox.prototype,{_removeExtraneousStyles:function(){for(var t in this._styleMap)this._textLines[t]||delete this.styles[this._styleMap[t].line]},insertCharStyleObject:function(t,e,n){var i=this._styleMap[t];t=i.line,e=i.offset+e,fabric.IText.prototype.insertCharStyleObject.apply(this,[t,e,n])},insertNewlineStyleObject:function(t,e,n){var i=this._styleMap[t];t=i.line,e=i.offset+e,fabric.IText.prototype.insertNewlineStyleObject.apply(this,[t,e,n])},shiftLineStyles:function(t,e){t=this._styleMap[t].line,fabric.IText.prototype.shiftLineStyles.call(this,t,e)},_getTextOnPreviousLine:function(t){for(var e=this._textLines[t-1];this._styleMap[t-2]&&this._styleMap[t-2].line===this._styleMap[t-1].line;)e=this._textLines[t-2]+e,t--;return e},removeStyleObject:function(t,e){var n=this.get2DCursorLocation(e),i=this._styleMap[n.lineIndex],r=i.line,o=i.offset+n.charIndex;this._removeStyleObject(t,n,r,o)}}),K7c=fabric.IText.prototype._getNewSelectionStartFromOffset,fabric.IText.prototype._getNewSelectionStartFromOffset=function(t,e,n,i,r){i=K7c.call(this,t,e,n,i,r);for(var o=0,a=0,s=0;s<this._textLines.length&&!(i<=(o+=this._textLines[s].length)+a);s++)"\n"!==this.text[o+a]&&" "!==this.text[o+a]||a++;return i-s+a},function(){if("undefined"==typeof document||"undefined"==typeof window){var DOMParser=__webpack_require__(1031).DOMParser,URL=__webpack_require__(875),HTTP=__webpack_require__(885),HTTPS=__webpack_require__(1046),Canvas=__webpack_require__(874),Image=__webpack_require__(874).Image;fabric.util.loadImage=function(e,n,i){function t(t){t?(r.src=new Buffer(t,"binary"),r._src=e,n&&n.call(i,r)):(r=null,n&&n.call(i,null,!0))}var r=new Image;e&&(e instanceof Buffer||0===e.indexOf("data"))?(r.src=r._src=e,n&&n.call(i,r)):e&&0!==e.indexOf("http")?requestFs(e,t):e?request(e,"binary",t):n&&n.call(i,e)},fabric.loadSVGFromURL=function(t,e,n){0!==(t=t.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim()).indexOf("http")?requestFs(t,function(t){fabric.loadSVGFromString(t.toString(),e,n)}):request(t,"",function(t){fabric.loadSVGFromString(t,e,n)})},fabric.loadSVGFromString=function(t,n,e){var i=(new DOMParser).parseFromString(t);fabric.parseSVGDocument(i.documentElement,function(t,e){n&&n(t,e)},e)},fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body),callback&&callback()})},fabric.createCanvasForNode=function(t,e,n,i){i=i||n;var r=fabric.document.createElement("canvas"),o=new Canvas(t||600,e||600,i),a=new Canvas(t||600,e||600,i);r.style={},r.width=o.width,r.height=o.height,(n=n||{}).nodeCanvas=o,n.nodeCacheCanvas=a;var s=new(fabric.Canvas||fabric.StaticCanvas)(r,n);return s.nodeCanvas=o,s.nodeCacheCanvas=a,s.contextContainer=o.getContext("2d"),s.contextCache=a.getContext("2d"),s.Font=Canvas.Font,s};var originaInitStatic=fabric.StaticCanvas.prototype._initStatic;fabric.StaticCanvas.prototype._initStatic=function(t,e){t=t||fabric.document.createElement("canvas"),this.nodeCanvas=new Canvas(t.width,t.height),this.nodeCacheCanvas=new Canvas(t.width,t.height),originaInitStatic.call(this,t,e),this.contextContainer=this.nodeCanvas.getContext("2d"),this.contextCache=this.nodeCacheCanvas.getContext("2d"),this.Font=Canvas.Font},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){return this.nodeCanvas.createJPEGStream(t)},fabric.StaticCanvas.prototype._initRetinaScaling=function(){if(this._isRetinaScaling())return this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.nodeCanvas.width=this.width*fabric.devicePixelRatio,this.nodeCanvas.height=this.height*fabric.devicePixelRatio,this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio),this},fabric.Canvas&&(fabric.Canvas.prototype._initRetinaScaling=fabric.StaticCanvas.prototype._initRetinaScaling);var origSetBackstoreDimension=fabric.StaticCanvas.prototype._setBackstoreDimension;fabric.StaticCanvas.prototype._setBackstoreDimension=function(t,e){return origSetBackstoreDimension.call(this,t,e),this.nodeCanvas[t]=e,this},fabric.Canvas&&(fabric.Canvas.prototype._setBackstoreDimension=fabric.StaticCanvas.prototype._setBackstoreDimension)}function request(t,i,r){var e=URL.parse(t);e.port||(e.port=0===e.protocol.indexOf("https:")?443:80);var n=(0===e.protocol.indexOf("https:")?HTTPS:HTTP).request({hostname:e.hostname,port:e.port,path:e.path,method:"GET"},function(e){var n="";i&&e.setEncoding(i),e.on("end",function(){r(n)}),e.on("data",function(t){200===e.statusCode&&(n+=t)})});n.on("error",function(t){t.errno===process.ECONNREFUSED?fabric.log("ECONNREFUSED: connection refused to "+e.hostname+":"+e.port):fabric.log(t.message),r(null)}),n.end()}function requestFs(t,n){__webpack_require__(1047).readFile(t,function(t,e){if(t)throw fabric.log(t),t;n(e)})}}()}).call(exports,__webpack_require__(797).Buffer,__webpack_require__(125))},function(t,e){},function(t,e,n){"use strict";var E=n(1032),L=n(1033);function O(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=o,e.resolve=function(t,e){return o(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?o(t,!1,!0).resolveObject(e):e},e.format=function(t){L.isString(t)&&(t=o(t));return t instanceof O?t.format():O.prototype.format.call(t)},e.Url=O;var j=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,R=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),B=["'"].concat(r),F=["%","/","?",";","#"].concat(B),N=["/","?","#"],z=/^[+a-z0-9A-Z_-]{0,63}$/,H=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,W={javascript:!0,"javascript:":!0},G={javascript:!0,"javascript:":!0},U={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},X=n(1034);function o(t,e,n){if(t&&L.isObject(t)&&t instanceof O)return t;var i=new O;return i.parse(t,e,n),i}O.prototype.parse=function(t,e,n){if(!L.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),r=-1!==i&&i<t.indexOf("#")?"?":"#",o=t.split(r);o[0]=o[0].replace(/\\/g,"/");var a=t=o.join(r);if(a=a.trim(),!n&&1===t.split("#").length){var s=R.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?X.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=j.exec(a);if(l){var h=(l=l[0]).toLowerCase();this.protocol=h,a=a.substr(l.length)}if(n||l||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===a.substr(0,2);!c||l&&G[l]||(a=a.substr(2),this.slashes=!0)}if(!G[l]&&(c||l&&!U[l])){for(var u,f,d=-1,p=0;p<N.length;p++){-1!==(g=a.indexOf(N[p]))&&(-1===d||g<d)&&(d=g)}-1!==(f=-1===d?a.lastIndexOf("@"):a.lastIndexOf("@",d))&&(u=a.slice(0,f),a=a.slice(f+1),this.auth=decodeURIComponent(u)),d=-1;for(p=0;p<F.length;p++){var g;-1!==(g=a.indexOf(F[p]))&&(-1===d||g<d)&&(d=g)}-1===d&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var m=this.hostname.split(/\./),y=(p=0,m.length);p<y;p++){var _=m[p];if(_&&!_.match(z)){for(var x="",b=0,w=_.length;b<w;b++)127<_.charCodeAt(b)?x+="x":x+=_[b];if(!x.match(z)){var S=m.slice(0,p),C=m.slice(p+1),T=_.match(H);T&&(S.push(T[1]),C.unshift(T[2])),C.length&&(a="/"+C.join(".")+a),this.hostname=S.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=E.toASCII(this.hostname));var k=this.port?":"+this.port:"",O=this.hostname||"";this.host=O+k,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!W[h])for(p=0,y=B.length;p<y;p++){var A=B[p];if(-1!==a.indexOf(A)){var M=encodeURIComponent(A);M===A&&(M=escape(A)),a=a.split(A).join(M)}}var D=a.indexOf("#");-1!==D&&(this.hash=a.substr(D),a=a.slice(0,D));var I=a.indexOf("?");if(-1!==I?(this.search=a.substr(I),this.query=a.substr(I+1),e&&(this.query=X.parse(this.query)),a=a.slice(0,I)):e&&(this.search="",this.query={}),a&&(this.pathname=a),U[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){k=this.pathname||"";var P=this.search||"";this.path=k+P}return this.href=this.format(),this},O.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&L.isObject(this.query)&&Object.keys(this.query).length&&(o=X.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||U[e])&&!1!==r?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),e+r+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+i},O.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},O.prototype.resolveObject=function(t){if(L.isString(t)){var e=new O;e.parse(t,!1,!0),t=e}for(var n=new O,i=Object.keys(this),r=0;r<i.length;r++){var o=i[r];n[o]=this[o]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),s=0;s<a.length;s++){var l=a[s];"protocol"!==l&&(n[l]=t[l])}return U[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!U[t.protocol]){for(var h=Object.keys(t),c=0;c<h.length;c++){var u=h[c];n[u]=t[u]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||G[t.protocol])n.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var d=n.pathname||"",p=n.search||"";n.path=d+p}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=v||g||n.host&&t.pathname,y=m,_=n.pathname&&n.pathname.split("/")||[],x=(f=t.pathname&&t.pathname.split("/")||[],n.protocol&&!U[n.protocol]);if(x&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),m=m&&(""===f[0]||""===_[0])),v)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,_=f;else if(f.length)_||(_=[]),_.pop(),_=_.concat(f),n.search=t.search,n.query=t.query;else if(!L.isNullOrUndefined(t.search)){if(x)n.hostname=n.host=_.shift(),(T=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift());return n.search=t.search,n.query=t.query,L.isNull(n.pathname)&&L.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var b=_.slice(-1)[0],w=(n.host||t.host||1<_.length)&&("."===b||".."===b)||""===b,S=0,C=_.length;0<=C;C--)"."===(b=_[C])?_.splice(C,1):".."===b?(_.splice(C,1),S++):S&&(_.splice(C,1),S--);if(!m&&!y)for(;S--;S)_.unshift("..");!m||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),w&&"/"!==_.join("/").substr(-1)&&_.push("");var T,k=""===_[0]||_[0]&&"/"===_[0].charAt(0);x&&(n.hostname=n.host=k?"":_.length?_.shift():"",(T=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift()));return(m=m||n.host&&_.length)&&!k&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),L.isNull(n.pathname)&&L.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},O.prototype.parseHost=function(){var t=this.host,e=i.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},,,,,,,,,function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,n,r){(function(l){var h=r(1037),t=r(887),c=r(1044),e=r(1045),u=r(875),i=n;i.request=function(t,e){t="string"==typeof t?u.parse(t):c(t);var n=-1===l.location.protocol.search(/^https?:$/)?"http:":"",i=t.protocol||n,r=t.hostname||t.host,o=t.port,a=t.path||"/";r&&-1!==r.indexOf(":")&&(r="["+r+"]"),t.url=(r?i+"//"+r:"")+(o?":"+o:"")+a,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var s=new h(t);return e&&s.on("response",e),s},i.get=function(t,e){var n=i.request(t,e);return n.end(),n},i.ClientRequest=h,i.IncomingMessage=t.IncomingMessage,i.Agent=function(){},i.Agent.defaultMaxSockets=4,i.globalAgent=new i.Agent,i.STATUS_CODES=e,i.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(n,r(48))},function(t,s,e){(function(t){s.fetch=a(t.fetch)&&a(t.ReadableStream),s.writableStream=a(t.WritableStream),s.abortController=a(t.AbortController),s.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),s.blobConstructor=!0}catch(t){}var e;function n(){if(void 0!==e)return e;if(t.XMLHttpRequest){e=new t.XMLHttpRequest;try{e.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){e=null}}else e=null;return e}function i(t){var e=n();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var r=void 0!==t.ArrayBuffer,o=r&&a(t.ArrayBuffer.prototype.slice);function a(t){return"function"==typeof t}s.arraybuffer=s.fetch||r&&i("arraybuffer"),s.msstream=!s.fetch&&o&&i("ms-stream"),s.mozchunkedarraybuffer=!s.fetch&&r&&i("moz-chunked-arraybuffer"),s.overrideMimeType=s.fetch||!!n()&&a(n().overrideMimeType),s.vbArray=a(t.VBArray),e=null}).call(s,e(48))},function(t,n,i){(function(l,h,s){var c=i(886),t=i(788),u=i(888),f=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},e=n.IncomingMessage=function(t,e,n){var i=this;if(u.Readable.call(i),i._mode=n,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",function(){l.nextTick(function(){i.emit("close")})}),"fetch"===n){if(i._fetchResponse=e,i.url=e.url,i.statusCode=e.status,i.statusMessage=e.statusText,e.headers.forEach(function(t,e){i.headers[e.toLowerCase()]=t,i.rawHeaders.push(e,t)}),c.writableStream){var r=new WritableStream({write:function(n){return new Promise(function(t,e){i._destroyed||(i.push(new h(n))?t():i._resumeFetch=t)})},close:function(){i._destroyed||i.push(null)},abort:function(t){i._destroyed||i.emit("error",t)}});try{return void e.body.pipeTo(r)}catch(t){}}var o=e.body.getReader();!function e(){o.read().then(function(t){i._destroyed||(t.done?i.push(null):(i.push(new h(t.value)),e()))}).catch(function(t){i._destroyed||i.emit("error",t)})}()}else{if(i._xhr=t,i._pos=0,i.url=t.responseURL,i.statusCode=t.status,i.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var n=e[1].toLowerCase();"set-cookie"===n?(void 0===i.headers[n]&&(i.headers[n]=[]),i.headers[n].push(e[2])):void 0!==i.headers[n]?i.headers[n]+=", "+e[2]:i.headers[n]=e[2],i.rawHeaders.push(e[1],e[2])}}),i._charset="x-user-defined",!c.overrideMimeType){var a=i.rawHeaders["mime-type"];if(a){var s=a.match(/;\s*charset=([^;])(;|$)/);s&&(i._charset=s[1].toLowerCase())}i._charset||(i._charset="utf-8")}}};t(e,u.Readable),e.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},e.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==f.DONE)break;try{n=new s.VBArray(t.responseBody).toArray()}catch(t){}if(null!==n){e.push(new h(n));break}case"text":try{n=t.responseText}catch(t){e._mode="text:vbarray";break}if(n.length>e._pos){var i=n.substr(e._pos);if("x-user-defined"===e._charset){for(var r=new h(i.length),o=0;o<i.length;o++)r[o]=255&i.charCodeAt(o);e.push(r)}else e.push(i,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==f.DONE||!t.response)break;n=t.response,e.push(new h(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==f.LOADING||!n)break;e.push(new h(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==f.LOADING)break;var a=new s.MSStreamReader;a.onprogress=function(){a.result.byteLength>e._pos&&(e.push(new h(new Uint8Array(a.result.slice(e._pos)))),e._pos=a.result.byteLength)},a.onload=function(){e.push(null)},a.readAsArrayBuffer(n)}e._xhr.readyState===f.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(n,i(125),i(797).Buffer,i(48))},function(t,e,n){(((e=t.exports=n(889)).Stream=e).Readable=e).Writable=n(893),e.Duplex=n(798),e.Transform=n(895),e.PassThrough=n(1042)},function(E,t,L){"use strict";(function(t,v){var m=L(833);E.exports=f;var a,y=L(884);f.ReadableState=o;L(890).EventEmitter;var _=function(t,e){return t.listeners(e).length},r=L(891),h=L(834).Buffer,c=t.Uint8Array||function(){};var e=L(812);e.inherits=L(788);var n=L(1038),x=void 0;x=n&&n.debuglog?n.debuglog("stream"):function(){};var s,l=L(1039),i=L(892);e.inherits(f,r);var u=["error","close","destroy","pause","resume"];function o(t,e){t=t||{};var n=e instanceof(a=a||L(798));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,r=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(r||0===r)?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s||(s=L(894).StringDecoder),this.decoder=new s(t.encoding),this.encoding=t.encoding)}function f(t){if(a=a||L(798),!(this instanceof f))return new f(t);this._readableState=new o(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),r.call(this)}function d(t,e,n,i,r){var o,a,s,l=t._readableState;null===e?(l.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,w(t)}(t,l)):(r||(o=function(t,e){var n;i=e,h.isBuffer(i)||i instanceof c||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var i;return n}(l,e)),o?t.emit("error",o):l.objectMode||e&&0<e.length?("string"==typeof e||l.objectMode||Object.getPrototypeOf(e)===h.prototype||(a=e,e=h.from(a)),i?l.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):p(t,l,e,!0):l.ended?t.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,l.decoder&&!n?(e=l.decoder.write(e),l.objectMode||0!==e.length?p(t,l,e,!1):C(t,l)):p(t,l,e,!1))):i||(l.reading=!1));return!(s=l).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}function p(t,e,n,i){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&w(t)),C(t,e)}Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),f.prototype.destroy=i.destroy,f.prototype._undestroy=i.undestroy,f.prototype._destroy=function(t,e){this.push(null),e(t)},f.prototype.push=function(t,e){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=h.from(t,e),e=""),n=!0),d(this,t,e,!1,n)},f.prototype.unshift=function(t){return d(this,t,null,!0,!1)},f.prototype.isPaused=function(){return!1===this._readableState.flowing},f.prototype.setEncoding=function(t){return s||(s=L(894).StringDecoder),this._readableState.decoder=new s(t),this._readableState.encoding=t,this};var g=8388608;function b(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=(g<=(n=t)?n=g:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0));var n}function w(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(x("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?m.nextTick(S,t):S(t))}function S(t){x("emit readable"),t.emit("readable"),A(t)}function C(t,e){e.readingMore||(e.readingMore=!0,m.nextTick(T,t,e))}function T(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(x("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function k(t){x("readable nexttick read 0"),t.read(0)}function O(t,e){e.reading||(x("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),A(t),e.flowing&&!e.reading&&t.read(0)}function A(t){var e=t._readableState;for(x("flow",e.flowing);e.flowing&&null!==t.read(););}function M(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var i;t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):i=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,i=1,r=n.data;t-=r.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?r+=o:r+=o.slice(0,t),0===(t-=a)){a===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n).data=o.slice(a);break}++i}return e.length-=i,r}(t,e):function(t,e){var n=h.allocUnsafe(t),i=e.head,r=1;i.data.copy(n),t-=i.data.length;for(;i=i.next;){var o=i.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0===(t-=a)){a===o.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i).data=o.slice(a);break}++r}return e.length-=r,n}(t,e);return i}(t,e.buffer,e.decoder),n);var n}function D(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,m.nextTick(I,e,t))}function I(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function P(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}f.prototype.read=function(t){x("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return x("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?D(this):w(this),null;if(0===(t=b(t,e))&&e.ended)return 0===e.length&&D(this),null;var i,r=e.needReadable;return x("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&x("length less than watermark",r=!0),e.ended||e.reading?x("reading or ended",r=!1):r&&(x("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=b(n,e))),null===(i=0<t?M(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&D(this)),null!==i&&this.emit("data",i),i},f.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},f.prototype.pipe=function(n,t){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=n;break;case 1:r.pipes=[r.pipes,n];break;default:r.pipes.push(n)}r.pipesCount+=1,x("pipe count=%d opts=%j",r.pipesCount,t);var e=(!t||!1!==t.end)&&n!==v.stdout&&n!==v.stderr?a:g;function o(t,e){x("onunpipe"),t===i&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,x("cleanup"),n.removeListener("close",d),n.removeListener("finish",p),n.removeListener("drain",l),n.removeListener("error",f),n.removeListener("unpipe",o),i.removeListener("end",a),i.removeListener("end",g),i.removeListener("data",u),h=!0,!r.awaitDrain||n._writableState&&!n._writableState.needDrain||l())}function a(){x("onend"),n.end()}r.endEmitted?m.nextTick(e):i.once("end",e),n.on("unpipe",o);var s,l=(s=i,function(){var t=s._readableState;x("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&_(s,"data")&&(t.flowing=!0,A(s))});n.on("drain",l);var h=!1;var c=!1;function u(t){x("ondata"),(c=!1)!==n.write(t)||c||((1===r.pipesCount&&r.pipes===n||1<r.pipesCount&&-1!==P(r.pipes,n))&&!h&&(x("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,c=!0),i.pause())}function f(t){x("onerror",t),g(),n.removeListener("error",f),0===_(n,"error")&&n.emit("error",t)}function d(){n.removeListener("finish",p),g()}function p(){x("onfinish"),n.removeListener("close",d),g()}function g(){x("unpipe"),i.unpipe(n)}return i.on("data",u),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?y(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(n,"error",f),n.once("close",d),n.once("finish",p),n.emit("pipe",i),r.flowing||(x("pipe resume"),i.resume()),n},f.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var i=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,n);return this}var a=P(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},f.prototype.addListener=f.prototype.on=function(t,e){var n=r.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&w(this):m.nextTick(k,this))}return n},f.prototype.resume=function(){var t,e,n=this._readableState;return n.flowing||(x("resume"),n.flowing=!0,t=this,(e=n).resumeScheduled||(e.resumeScheduled=!0,m.nextTick(O,t,e))),this},f.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(e){var n=this,i=this._readableState,r=!1;for(var t in e.on("end",function(){if(x("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),e.on("data",function(t){(x("wrapped data"),i.decoder&&(t=i.decoder.write(t)),i.objectMode&&null==t)||(i.objectMode||t&&t.length)&&(n.push(t)||(r=!0,e.pause()))}),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var o=0;o<u.length;o++)e.on(u[o],this.emit.bind(this,u[o]));return this._read=function(t){x("wrapped _read",t),r&&(r=!1,e.resume())},this},f._fromList=M}).call(t,L(48),L(125))},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function l(t){return"function"==typeof t}function h(t){return"object"==typeof t&&null!==t}function c(t){return void 0===t}((t.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,n,i,r,o,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||h(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var s=new Error('Uncaught, unspecified "error" event. ('+e+")");throw s.context=e,s}if(c(n=this._events[t]))return!1;if(l(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),n.apply(this,r)}else if(h(n))for(r=Array.prototype.slice.call(arguments,1),i=(a=n.slice()).length,o=0;o<i;o++)a[o].apply(this,r);return!0},i.prototype.on=i.prototype.addListener=function(t,e){var n;if(!l(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,l(e.listener)?e.listener:e),this._events[t]?h(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,h(this._events[t])&&!this._events[t].warned&&(n=c(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.once=function(t,e){if(!l(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var n,i,r,o;if(!l(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=(n=this._events[t]).length,i=-1,n===e||l(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(h(n)){for(o=r;0<o--;)if(n[o]===e||n[o].listener&&n[o].listener===e){i=o;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(l(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?l(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(l(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){t.exports=n(890).EventEmitter},function(t,e,n){"use strict";var o=n(833);function a(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,i=this._readableState&&this._readableState.destroyed,r=this._writableState&&this._writableState.destroyed;return i||r?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||o.nextTick(a,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(o.nextTick(a,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(S,t,C){"use strict";(function(t,e,n){var m=C(833);function u(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var i=t.entry;t.entry=null;for(;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}S.exports=c;var s,f=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?e:m.nextTick;c.WritableState=h;var i=C(812);i.inherits=C(788);var r={deprecate:C(1041)},o=C(891),y=C(834).Buffer,_=n.Uint8Array||function(){};var a,l=C(892);function x(){}function h(t,e){s=s||C(798),t=t||{};var n=e instanceof s;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,r=t.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(r||0===r)?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,i=n.sync,r=n.writecb;if(u=n,u.writing=!1,u.writecb=null,u.length-=u.writelen,u.writelen=0,e)a=t,s=n,l=i,h=e,c=r,--s.pendingcb,l?(m.nextTick(c,h),m.nextTick(w,a,s),a._writableState.errorEmitted=!0,a.emit("error",h)):(c(h),a._writableState.errorEmitted=!0,a.emit("error",h),w(a,s));else{var o=g(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||p(t,n),i?f(d,t,n,o,r):d(t,n,o,r)}var a,s,l,h,c;var u}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function c(t){if(s=s||C(798),!(a.call(c,this)||this instanceof s))return new c(t);this._writableState=new h(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function b(t,e,n,i,r,o,a){e.writelen=i,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function d(t,e,n,i){var r,o;n||(r=t,0===(o=e).length&&o.needDrain&&(o.needDrain=!1,r.emit("drain"))),e.pendingcb--,i(),w(t,e)}function p(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,r=new Array(i),o=e.corkedRequestsFree;o.entry=n;for(var a=0,s=!0;n;)(r[a]=n).isBuf||(s=!1),n=n.next,a+=1;r.allBuffers=s,b(t,e,!0,e.length,r,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new u(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,h=n.encoding,c=n.callback;if(b(t,e,!1,e.objectMode?1:l.length,l,h,c),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function g(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function v(e,n){e._final(function(t){n.pendingcb--,t&&e.emit("error",t),n.prefinished=!0,e.emit("prefinish"),w(e,n)})}function w(t,e){var n,i,r=g(e);return r&&(n=t,(i=e).prefinished||i.finalCalled||("function"==typeof n._final?(i.pendingcb++,i.finalCalled=!0,m.nextTick(v,n,i)):(i.prefinished=!0,n.emit("prefinish"))),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}i.inherits(c,o),h.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(h.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(t){return!!a.call(this,t)||this===c&&(t&&t._writableState instanceof h)}})):a=function(t){return t instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},c.prototype.write=function(t,e,n){var i,r,o,a,s,l,h,c,u,f,d,p=this._writableState,g=!1,v=!p.objectMode&&(i=t,y.isBuffer(i)||i instanceof _);return v&&!y.isBuffer(t)&&(r=t,t=y.from(r)),"function"==typeof e&&(n=e,e=null),v?e="buffer":e||(e=p.defaultEncoding),"function"!=typeof n&&(n=x),p.ended?(u=this,f=n,d=new Error("write after end"),u.emit("error",d),m.nextTick(f,d)):(v||(o=this,a=p,l=n,c=!(h=!0),null===(s=t)?c=new TypeError("May not write null values to stream"):"string"==typeof s||void 0===s||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c&&(o.emit("error",c),m.nextTick(l,c),h=!1),h))&&(p.pendingcb++,g=function(t,e,n,i,r,o){if(!n){var a=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=y.from(e,n));return e}(e,i,r);i!==a&&(n=!0,r="buffer",i=a)}var s=e.objectMode?1:i.length;e.length+=s;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,s,i,r,o);return l}(this,p,v,t,e,n)),g},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||p(this,t))},c.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},c.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,e=t=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(t,e,n){e.ending=!0,w(t,e),n&&(e.finished?m.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,i,n)},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),c.prototype.destroy=l.destroy,c.prototype._undestroy=l.undestroy,c.prototype._destroy=function(t,e){this.end(),e(t)}}).call(t,C(125),C(319).setImmediate,C(48))},function(t,e,n){"use strict";var i=n(834).Buffer,r=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=h,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=u,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var i=n.charCodeAt(n.length-1);if(55296<=i&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function u(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}(e.StringDecoder=o).prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var i=e.length-1;if(i<n)return 0;var r=a(e[i]);if(0<=r)return 0<r&&(t.lastNeed=r-1),r;if(--i<n||-2===r)return 0;if(0<=(r=a(e[i])))return 0<r&&(t.lastNeed=r-2),r;if(--i<n||-2===r)return 0;if(0<=(r=a(e[i])))return 0<r&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var i=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=o;var i=n(798),r=n(812);function o(t){if(!(this instanceof o))return new o(t);i.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=e&&this.push(e),i(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var n=this;"function"==typeof this._flush?this._flush(function(t,e){s(n,t,e)}):s(this,null,null)}function s(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=n(788),r.inherits(o,i),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,i.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;i.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){var i=!1;var r=n(304)(n(1060),n(1063),function(t){i||n(1058)},"data-v-6e5110fa",null);r.options.__file="/Users/zhouqichao/Desktop/sxkj/shangu_online/src/components/views/businessAnalyze/children/heatMap.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] heatMap.vue: functional components are not supported with templates, they should use render functions."),t.exports=r.exports},function(t,e,n){var i=n(304)(n(1074),n(1075),null,null,null);i.options.__file="/Users/zhouqichao/Desktop/sxkj/shangu_online/src/components/charts/heatMapChart.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] heatMapChart.vue: functional components are not supported with templates, they should use render functions."),t.exports=i.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var i=n(1022);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(589)("744be6ab",i,!1,{})},function(t,e,n){(t.exports=n(588)()).push([t.i,"\n.drawCameraArea {\n    position: absolute;\n    z-index: 100;\n    border: 1px solid red;\n}\n.store-hot {\n    background-color: #fff;\n    position: relative;\n}\n\n/*头部标题*/\n.store-hot-header {\n    overflow: hidden;\n    background: #fff;\n    border-bottom: 0.5px solid #DEE1E2;\n}\n.store-hot-header p {\n    height: 50px;\n    line-height: 50px;\n}\n.store-hot .store-hot-header-title {\n    width: 100px;\n    float: left;\n    padding-left: 30px;\n    font-size: 16px;\n}\n\n/*热力区域*/\n.store-hot .store-hot-content {\n    margin-bottom: 30px;\n}\n.store-hot .store-hot-content .store-hot-content-area {\n    border: 1px solid #DDD;\n    margin: 0 30px;\n    padding-bottom: 30px;\n    position: relative;\n    /*min-width: 1090px;*/\n}\n.store-hot .store-hot-content .store-hot-content-area-option {\n    height: 50px;\n    line-height: 50px;\n    color: #0098CC;\n    padding-left: 49%;\n}\n.store-hot .store-hot-content .store-hot-content-area-option span {\n    cursor: pointer;\n}\n.store-hot .store-hot-content .store-hot-content-area-content {\n    overflow: hidden;\n    width: 976px;\n    margin: 0 auto;\n}\n.store-hot .store-hot-content .store-hot-content-area-content-map {\n    width: 700px;\n    float: left;\n}\n\n/* store area data */\n.store-hot .store-hot-content .store-hot-content-area-content .all-area-data {\n    width: 260px;\n    height: 376px;\n    border: 1px solid #DDD;\n    float: right;\n    padding: 0 15px;\n}\n.store-hot .store-hot-content .all-area-data .ivu-switch-checked {\n    border-color: #17B4D7;\n    background-color: #17B4D7;\n}\n.store-hot .store-hot-content .all-area-data .ivu-row {\n    height: 32px;\n    line-height: 32px;\n}\n.store-hot .store-hot-content .all-area-data .ivu-row .ivu-col-span-7, .all-area-data .ivu-row .ivu-col-span-6 {\n    text-align: center;\n}\n.all-area-data .ivu-row .ivu-col-span-6.upColor {\n    color: #F4858F;\n}\n.all-area-data .ivu-row .ivu-col-span-6.downColor {\n    color: #83CFBD;\n}\n.store-hot .store-hot-content .all-area-data .all-area-data-title {\n    font-size: 14px;\n    height: 40px;\n    line-height: 40px;\n}\n.store-hot .heatMapChart-content {\n    position: relative;\n    min-height: 30px;\n    padding: 30px 0;\n}\n.store-hot .store-hot-content #heatMapChart {\n    margin: 30px auto 0;\n}\n.store-hot .store-hot-content #heatmap {\n    width: 100%;\n    /*border: 1px solid #ccc;*/\n    /*background: url(../../../../assets/images/storeHot.jpg) center center no-repeat;*/\n    background-size: cover;\n    z-index: 10;\n}\n.store-hot .store-hot-content #heatmap .heatmap-canvas {\n    width: 100%;\n    height: 100% !important;\n}\n.store-hot .store-hot-content-type {\n    position: absolute;\n    top: 10px;\n    right: 22px;\n}\n.store-hot .store-hot-content-title {\n    width: 100%;\n    height: 50px;\n    line-height: 50px;\n    text-align: left;\n    padding-left: 30px;\n    font-size: 16px;\n}\n.store-hot .store-hot-content-title.detail-info {\n    border-bottom: 0.5px solid #DEE1E2;\n}\n\n/*时间选择轴*/\n.store-hot-content .sliderBar {\n    padding: 0 30px;\n}\n.store-hot-content .ivu-slider-button {\n    width: 6px;\n    height: 6px;\n    border: 0;\n    background-color: #FF401E;\n    margin-top: -10px;\n}\n.store-hot-content .ivu-slider-bar {\n    background: #F87676;\n}\n\n/*详细数据*/\n.store-hot .camera-tab.ivu-tabs {\n    padding-top: 14px;\n}\n.store-hot .downData {\n    color: #5FBBA7;\n}\n.store-hot .upData {\n    color: #F76D6D;\n}\n.store-hot .detail-data .ivu-tabs .ivu-tabs-bar {\n    padding-left: 80px;\n}\n.store-hot .detail-data .ivu-tabs-bar {\n    border-bottom: 0;\n}\n.store-hot .detail-data .ivu-tabs-ink-bar {\n    height: 0;\n}\n.store-people-pandect-content {\n    padding-bottom: 16px;\n}\n.store-hot-area-tabs {\n    overflow: hidden;\n    margin: 16px 30px 0 30px;\n    padding: 20px 0;\n    border: 1px solid #F1F1F1;\n}\n.store-hot-area-tabs.hotDataChild {\n    margin-top: 35px;\n}\n.store-hot-area-tabs-content-title {\n    height: 30px;\n    line-height: 30px;\n    font-size: 16px;\n    padding-left: 30px;\n}\n.store-hot-area-tabs-content-list {\n    width: 20%;\n    float: left;\n    border-right: 1px solid #DDDDDD;\n}\n.store-hot-area-tabs-content-list:last-child {\n    border-right: 0;\n}\n.store-hot-area-tabs-content-list p {\n    font-size: 12px;\n    height: 30px;\n    line-height: 30px;\n    text-align: center;\n}\n.store-hot-area-tabs-content-list p.store-hot-area-tabs-content-list-data {\n    font-size: 30px;\n    height: 40px;\n    line-height: 40px;\n    text-align: center;\n    font-family: 'Helvetica Neue', Tahoma, Helvetica, Arial, 'Microsoft YaHei';\n}\n.store-hot .detail-data .heatMapChart-content .loadingContent {\n    height: 300px;\n    line-height: 300px;\n}\n\n/* modal public style*/\n.add-modal .ivu-modal-header {\n    border-bottom: 0;\n    padding: 20px 30px 4px;\n}\n.add-modal .ivu-modal-close {\n    right: 30px;\n}\n.add-modal .ivu-modal-footer {\n    border-top: 0;\n    padding: 24px 18px 44px;\n}\n.add-modal-content {\n    /*padding: 0 14px;*/\n    overflow: hidden;\n}\n.add-modal-content .content {\n    width: 700px;\n    height: auto;\n    border: 1px solid #ddd;\n    float: left;\n}\n.add-modal-content .library {\n    width: 350px;\n    height: 400px;\n    border: 1px solid #ddd;\n    float: right;\n    padding: 0 20px;\n    overflow: auto;\n    scrollbar-face-color: #DDD;\n    scrollbar-highlight-color: #0099CC;\n}\n.add-modal-content .library::-webkit-scrollbar {\n    background-color: #DDD;\n    width: 3px;\n}\n.add-modal-content .library::-webkit-scrollbar-thumb {\n    background-color: #0099CC;\n    border-radius: 2px;\n}\n.add-modal-content .library .ivu-checkbox-checked .ivu-checkbox-inner {\n    border-color: #0099CC;\n    background-color: #0099CC;\n}\n.add-modal-content .library .title {\n    font-size: 14px;\n    height: 30px;\n    line-height: 30px;\n}\n\n/* add SKU */\n.add-SKU-modal-content .goods-library .goods-library-title {\n    font-size: 12px;\n    height: 30px;\n    line-height: 30px;\n}\n.add-SKU-modal-content .goods-library .goods-library-content p {\n    margin-top: 10px;\n    margin-bottom: 4px;\n    font-size: 12px;\n}\n.add-SKU-modal-content .goods-library .goods-library-content .ivu-checkbox-group {\n    padding-left: 10px;\n}\n.add-SKU-modal-content .goods-library .ivu-checkbox-group .ivu-checkbox-group-item {\n    margin-right: 14px;\n}\n\n/* add floor plan */\n.material-library-row-content {\n    overflow: hidden;\n}\n.material-library-row-content .material-library-row-content-col {\n    float: left;\n}\n.material-library-row-content .material-library-row-content-col p {\n    height: 30px;\n    line-height: 30px;\n    text-align: center;\n}\n\n/* show sku */\n.show-current-goods-sku {\n    position: fixed;\n    z-index: 10000;\n    display: none;\n    width: 180px;\n    height: 220px;\n    background-color: #fff;\n    box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.20);\n    border-radius: 4px;\n}\n.show-current-goods-sku .area-sku-list-title {\n    text-align: center;\n    font-size: 14px;\n}\n.show-current-goods-sku-list {\n    width: 50%;\n    float: left;\n    line-height: 30px;\n    font-size: 14px;\n}\n\n/*热区左上角密集度显示*/\n.store-hot-content-area-content .intensity {\n    width: 300px;\n    height: 42px;\n    padding: 6px;\n    position: absolute;\n    top: 6px;\n    left: 2%;\n    z-index: 999;\n    overflow: hidden;\n    background-color: #fff;\n}\n.store-hot-content-area-content .intensity li {\n    float: left;\n    list-style: none;\n    width: 14.2%;\n    text-align: center;\n}\n.store-hot-content-area-content .intensity li .intensity-style {\n    height: 10px;\n    width: 100%;\n    margin-top: 3px;\n}\n.store-hot-content-area-content .intensity li .intensity-style-one {\n    background-color: rgb(255,0,0);\n}\n.store-hot-content-area-content .intensity li .intensity-style-two {\n    background-color: #ff7300;\n}\n.store-hot-content-area-content .intensity li .intensity-style-three {\n    background-color: rgb(255,255,0);\n}\n.store-hot-content-area-content .intensity li .intensity-style-four {\n    background-color: rgb(0,255,0);\n}\n.store-hot-content-area-content .intensity li .intensity-style-five {\n    background-color: rgb(0,0,255);\n}\n.store-hot-content-area-content .intensity li .intensity-num {\n    font-size: 12px;\n}\n",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(305),r=n.n(i),o=n(306),a=n.n(o),s=n(86),l=n.n(s),h=n(783),c=n.n(h),u=n(309),f=n.n(u),d=n(312),p=n(1),g=n.n(p),v=n(1024),m=n.n(v),y=n(1070),_=n.n(y),x=n(1077),b=n.n(x),w=n(1087),S=n(121),C=n(81);e.default={mixins:[w.a],data:function(){return{dateRange:{text:"",value:"0",range:[g()().subtract(0,"days"),g()().subtract(0,"days")],dateType:"day",compare:[g()().subtract(1,"days"),g()().subtract(1,"days")]},requestParamKeys:C.a.ATTR_HEAT_MAP_ALL,isRenderStoreHeapMap:!1}},computed:f()({},Object(d.c)(["heatmapDateRangeList","getHeatmapDateRangeTextByValue","getHeatmapDateRangeValueByText"]),{selectTimeRangeUTC:function(){return S.a.timeRangeUtc.apply(S.a,c()(this.dateRange.range))},compareTimeRangeUTC:function(){return S.a.timeRangeUtc.apply(S.a,c()(this.dateRange.compare))},bindDateRangeText:{get:function(){return this.dateRange.range[0].format("YYYY-MM-DD")+" ~ "+this.dateRange.range[1].format("YYYY-MM-DD")},set:function(t){this.dateRange.range=S.a.getDateRangeMomentByValue(t,!1),this.dateRange.compare=S.a.getDateRangeMomentByValue(t,!0)}}}),components:{AppStoreHeatmap:m.a,AppCameraDetailInfo:_.a,AppCameraHeatMap:b.a},created:function(){this.getDataAndRefresh()},mounted:function(){var t=[this.$store.dispatch("loadStateList")];l.a.all(t).then(function(){return console.log("Done!!!!")})},methods:{getHeatMapAllData:function(){var e=this;return a()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getInStoreHeatmap(e.selectTimeRangeUTC,e.compareTimeRangeUTC,e.requestParamKeys);case 2:case"end":return t.stop()}},t,e)}))()},getDataAndRefresh:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"0";return a()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.bindDateRangeText=n,t.next=3,e.getHeatMapAllData();case 3:e.isRenderStoreHeapMap&&e.$bus.$emit("getHeatMapDataByHour"),e.isRenderStoreHeapMap=!0;case 5:case"end":return t.stop()}},t,e)}))()}}}},function(t,e,n){var i=!1;var r=n(304)(n(1027),n(1069),function(t){i||n(1025)},"data-v-49463024",null);r.options.__file="/Users/zhouqichao/Desktop/sxkj/shangu_online/src/components/views/businessAnalyze/children/storeHeatmap.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] storeHeatmap.vue: functional components are not supported with templates, they should use render functions."),t.exports=r.exports},function(t,e,n){var i=n(1026);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(589)("045fdd7d",i,!1,{})},function(t,e,n){(t.exports=n(588)()).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},function(t,T,k){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),function(o){var t=k(767),i=k.n(t),e=k(83),r=k.n(e),n=k(86),a=k.n(n),s=k(305),l=k.n(s),h=k(306),c=k.n(h),u=k(873),f=k.n(u),d=k(1048),p=k.n(d),g=k(1053),v=k.n(g),m=k(896),y=k.n(m),_=k(307),x=k(82),b=(k(121),k(1064)),w=k.n(b),S=k(81),C=k(813);T.default={mixins:[C.a],data:function(){return{storeCanvas:"",storeInfo:{online_json_canvas:"",height:0,width:0,store_img:"",store_sku:""},addSKUModal:{state:!1},addFloorPlanModal:{state:!1},targetSKUList:[],requestParamKeys:[S.a.ATTR_HEAT_MAP_G_HOUR],heatMapDataByHour:[],storeHeatSlider:[0,24],canvasHeight:0,canvasWidth:700,heatData:[]}},props:["storeAttributeData","dateRange"],computed:{hasStoreImage:function(){return!o.isEmpty(this.storeInfo.store_img)},hasJsonCanvas:function(){return!o.isEmpty(this.jsonCanvas)},jsonCanvas:{get:function(){return this.storeInfo.online_json_canvas},set:function(t){this.storeInfo.online_json_canvas=t}},store_sku:function(){return this.storeInfo.store_sku?JSON.parse(this.storeInfo.store_sku):{}},formatHeatMapDataByHour:{get:function(){return this.heatData},set:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,24],t=o.isEmpty(this.heatMapDataByHour)?[]:this.heatMapDataByHour[0][S.a.ATTR_HEAT_MAP_G_HOUR],e=!o.isEmpty(t)&&!o.isEmpty(t[0]),i=(e&&t[0].length,e?t[0][0].length:0);t=o.pickBy(t,function(t,e){return Number(e)>=Number(n[0])&&Number(e)<=Number(n[1])});var r=o.chain(t).map(function(t){return o.flatten(t)}).unzipWith(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return o.sum(e)}).chunk(i).value();this.heatData=[{heat_map:r}]}}},components:{AppAddSkuModal:p.a,AppFloorPlanModal:v.a,AppHeatMap:y.a,AppHeatMapArea:w.a},watch:{},created:function(){this.initHeatMapData(),this.$bus.$on("getHeatMapDataByHour",this.initHeatMapData)},mounted:function(){var t=this;this.storeCanvas=new f.a.fabric.Canvas("background-plan"),this.canvasMouseMove(),this.initData().then(function(){t.drawStoreCanvas()})},methods:{initHeatMapData:function(){this.storeHeatSlider=[0,24],this.getHeatMapDataByHour(),this.formatHeatMapDataByHour=this.storeHeatSlider},initData:function(){var e=this;return c()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getStoreHotList();case 2:case"end":return t.stop()}},t,e)}))()},getCanvasHeight:function(){var n=this;return this.hasStoreImage?new a.a(function(t){var e=new Image;e.onload=function(){t(o.floor(e.height*n.canvasWidth/e.width))},e.src=x.a.ImgSrc+n.storeInfo.store_img}):0},selectHourTime:function(t){this.formatHeatMapDataByHour=t},getHeatMapDataByHour:function(){this.heatMapDataByHour=this.getDataByKeys()},setJsonOnlineCanvas:function(){var t=JSON.parse(this.jsonCanvas);t.backgroundImage.src=x.a.ImgSrc+this.storeInfo.store_img,this.jsonCanvas=r()(t)},loadCanvas:function(){var n=this;return c()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getCanvasHeight();case 2:if(n.canvasHeight=t.sent,!n.hasJsonCanvas){t.next=8;break}return n.setJsonOnlineCanvas(),t.abrupt("return",new a.a(function(t){n.storeCanvas.loadFromJSON(n.jsonCanvas,function(){n.storeCanvas.setHeight(n.canvasHeight),n.storeCanvas.setWidth(n.canvasWidth),n.storeCanvas.renderAll(),t()})}));case 8:if(!n.hasStoreImage){t.next=10;break}return t.abrupt("return",new a.a(function(e){f.a.fabric.Image.fromURL(x.a.ImgSrc+n.storeInfo.store_img,function(t){n.storeCanvas.add(t),n.storeCanvas.setHeight(n.canvasHeight),n.storeCanvas.setWidth(n.canvasWidth),n.jsonCanvas=r()(n.storeCanvas),n.storeCanvas.renderAll(),e()})}));case 10:case"end":return t.stop()}},t,n)}))()},drawStoreCanvas:function(){var e=this;return c()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadCanvas();case 2:e.setStoreCanvas();case 3:case"end":return t.stop()}},t,e)}))()},setStoreCanvas:function(){var t=document.getElementsByClassName("upper-canvas")[0];t&&(t.style.zIndex=21),o.forEach(this.storeCanvas._objects,function(t){t.lockMovementX=!0,t.lockMovementY=!0,t.hasControls=!1})},getStoreHotList:function(){var n=this;return c()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_._22(i()(n.storeInfo));case 2:(e=t.sent)&&200===e.code&&(n.storeInfo=e.data);case 4:case"end":return t.stop()}},t,n)}))()},adjustFloorPlan:function(){this.addFloorPlanModal.state=!0},adjustSKU:function(){this.addSKUModal.state=!0},format:function(t){return t+":00"},canvasMouseMove:function(){var e=this;this.storeCanvas.on("mouse:move",function(t){null!==t.target&&t.target?(e.$refs.SKUData.style.display="block",e.$refs.SKUData.style.top=t.e.clientY+10+"px",e.$refs.SKUData.style.left=t.e.clientX+10+"px",e.showMouseMoveSKU(t.target.id)):e.$refs.SKUData.style.display="none"})},showMouseMoveSKU:function(t){this.targetSKUList=this.store_sku[t.toString()]||[]},reDrawStoreAndObject:function(t){this.jsonCanvas=t,this.storeCanvas.clear(),this.drawStoreCanvas(),this.addSKUModal.state=!0}}}}.call(T,k(122))},function(t,e,n){"use strict";e.byteLength=function(t){return 3*t.length/4-u(t)},e.toByteArray=function(t){var e,n,i,r,o,a=t.length;r=u(t),o=new c(3*a/4-r),n=0<r?a-4:a;var s=0;for(e=0;e<n;e+=4)i=h[t.charCodeAt(e)]<<18|h[t.charCodeAt(e+1)]<<12|h[t.charCodeAt(e+2)]<<6|h[t.charCodeAt(e+3)],o[s++]=i>>16&255,o[s++]=i>>8&255,o[s++]=255&i;2===r?(i=h[t.charCodeAt(e)]<<2|h[t.charCodeAt(e+1)]>>4,o[s++]=255&i):1===r&&(i=h[t.charCodeAt(e)]<<10|h[t.charCodeAt(e+1)]<<4|h[t.charCodeAt(e+2)]>>2,o[s++]=i>>8&255,o[s++]=255&i);return o},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,r="",o=[],a=0,s=n-i;a<s;a+=16383)o.push(f(t,a,s<a+16383?s:a+16383));1===i?(e=t[n-1],r+=l[e>>2],r+=l[e<<4&63],r+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],r+=l[e>>10],r+=l[e>>4&63],r+=l[e<<2&63],r+="=");return o.push(r),o.join("")};for(var l=[],h=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=i.length;r<o;++r)l[r]=i[r],h[i.charCodeAt(r)]=r;function u(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function f(t,e,n){for(var i,r,o=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(l[(r=i)>>18&63]+l[r>>12&63]+l[r>>6&63]+l[63&r]);return o.join("")}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,h=l>>1,c=-7,u=n?r-1:0,f=n?-1:1,d=t[e+u];for(u+=f,o=d&(1<<-c)-1,d>>=-c,c+=s;0<c;o=256*o+t[e+u],u+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;0<c;a=256*a+t[e+u],u+=f,c-=8);if(0===o)o=1-h;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,i),o-=h}return(d?-1:1)*a*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var a,s,l,h=8*o-r-1,c=(1<<h)-1,u=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+u?f/l:f*Math.pow(2,1-u))*l&&(a++,l/=2),c<=a+u?(s=0,a=c):1<=a+u?(s=(e*l-1)*Math.pow(2,r),a+=u):(s=e*Math.pow(2,u-1)*Math.pow(2,r),a=0));8<=r;t[n+d]=255&s,d+=p,s/=256,r-=8);for(a=a<<r|s,h+=r;0<h;t[n+d]=255&a,d+=p,a/=256,h-=8);t[n+d-p]|=128*g}},function(t,e){},function(t,e){},function(t,I,P){(function(p,g){var v;!function(t){"object"==typeof I&&I&&I.nodeType,"object"==typeof p&&p&&p.nodeType;var e="object"==typeof g&&g;e.global!==e&&e.window!==e&&e.self;var n,m=2147483647,y=36,_=1,x=26,r=38,o=700,b=72,w=128,S="-",i=/^xn--/,a=/[^\x20-\x7E]/,s=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=y-_,C=Math.floor,T=String.fromCharCode;function k(t){throw new RangeError(l[t])}function c(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function u(t,e){var n=t.split("@"),i="";return 1<n.length&&(i=n[0]+"@",t=n[1]),i+c((t=t.replace(s,".")).split("."),e).join(".")}function O(t){for(var e,n,i=[],r=0,o=t.length;r<o;)55296<=(e=t.charCodeAt(r++))&&e<=56319&&r<o?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}function A(t){return c(t,function(t){var e="";return 65535<t&&(e+=T((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=T(t)}).join("")}function M(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function D(t,e,n){var i=0;for(t=n?C(t/o):t>>1,t+=C(t/e);h*x>>1<t;i+=y)t=C(t/h);return C(i+(h+1)*t/(t+r))}function f(t){var e,n,i,r,o,a,s,l,h,c,u,f=[],d=t.length,p=0,g=w,v=b;for((n=t.lastIndexOf(S))<0&&(n=0),i=0;i<n;++i)128<=t.charCodeAt(i)&&k("not-basic"),f.push(t.charCodeAt(i));for(r=0<n?n+1:0;r<d;){for(o=p,a=1,s=y;d<=r&&k("invalid-input"),u=t.charCodeAt(r++),(y<=(l=u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:y)||l>C((m-p)/a))&&k("overflow"),p+=l*a,!(l<(h=s<=v?_:v+x<=s?x:s-v));s+=y)a>C(m/(c=y-h))&&k("overflow"),a*=c;v=D(p-o,e=f.length+1,0==o),C(p/e)>m-g&&k("overflow"),g+=C(p/e),p%=e,f.splice(p++,0,g)}return A(f)}function d(t){var e,n,i,r,o,a,s,l,h,c,u,f,d,p,g,v=[];for(f=(t=O(t)).length,e=w,o=b,a=n=0;a<f;++a)(u=t[a])<128&&v.push(T(u));for(i=r=v.length,r&&v.push(S);i<f;){for(s=m,a=0;a<f;++a)e<=(u=t[a])&&u<s&&(s=u);for(s-e>C((m-n)/(d=i+1))&&k("overflow"),n+=(s-e)*d,e=s,a=0;a<f;++a)if((u=t[a])<e&&++n>m&&k("overflow"),u==e){for(l=n,h=y;!(l<(c=h<=o?_:o+x<=h?x:h-o));h+=y)g=l-c,p=y-c,v.push(T(M(c+g%p,0))),l=C(g/p);v.push(T(M(l,0))),o=D(n,d,i==r),n=0,++i}++n,++e}return v.join("")}n={version:"1.4.1",ucs2:{decode:O,encode:A},decode:f,encode:d,toASCII:function(t){return u(t,function(t){return a.test(t)?"xn--"+d(t):t})},toUnicode:function(t){return u(t,function(t){return i.test(t)?f(t.slice(4).toLowerCase()):t})}},void 0===(v=function(){return n}.call(I,P,I,p))||(p.exports=v)}()}).call(I,P(129)(t),P(48))},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(1035),e.encode=e.stringify=n(1036)},function(t,e,n){"use strict";t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var r={};if("string"!=typeof t||0===t.length)return r;var o=/\+/g;t=t.split(e);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var s,l,h=t.length;0<a&&a<h&&(h=a);for(var c=0;c<h;++c){var u,f,d,p,g=t[c].replace(o,"%20"),v=g.indexOf(n);0<=v?(u=g.substr(0,v),f=g.substr(v+1)):(u=g,f=""),d=decodeURIComponent(u),p=decodeURIComponent(f),s=r,l=d,Object.prototype.hasOwnProperty.call(s,l)?m(r[d])?r[d].push(p):r[d]=[r[d],p]:r[d]=p}return r};var m=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(n,i,r,t){return i=i||"&",r=r||"=",null===n&&(n=void 0),"object"==typeof n?s(l(n),function(t){var e=encodeURIComponent(o(t))+r;return a(n[t])?s(n[t],function(t){return e+encodeURIComponent(o(t))}).join(i):e+encodeURIComponent(o(n[t]))}).join(i):t?encodeURIComponent(o(t))+r+encodeURIComponent(o(n)):""};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i));return n}var l=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(o,t,s){(function(l,h,c){var u=s(886),t=s(788),e=s(887),a=s(888),f=s(1043),n=e.IncomingMessage,d=e.readyStates;var i=o.exports=function(e){var t,n=this;a.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+new l(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){n.setHeader(t,e.headers[t])});var i,r,o=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!u.abortController)t=!(o=!1);else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!u.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}n._mode=(i=t,r=o,u.fetch&&r?"fetch":u.mozchunkedarraybuffer?"moz-chunked-arraybuffer":u.msstream?"ms-stream":u.arraybuffer&&i?"arraybuffer":u.vbArray&&i?"text:vbarray":"text"),n.on("finish",function(){n._onFinish()})};t(i,a.Writable),i.prototype.setHeader=function(t,e){var n=t.toLowerCase();-1===r.indexOf(n)&&(this._headers[n]={name:t,value:e})},i.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},i.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},i.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,i=e._headers,n=null;"GET"!==t.method&&"HEAD"!==t.method&&(n=u.arraybuffer?f(l.concat(e._body)):u.blobConstructor?new h.Blob(e._body.map(function(t){return f(t)}),{type:(i["content-type"]||{}).value||""}):l.concat(e._body).toString());var r=[];if(Object.keys(i).forEach(function(t){var e=i[t].name,n=i[t].value;Array.isArray(n)?n.forEach(function(t){r.push([e,t])}):r.push([e,n])}),"fetch"===e._mode){var o=null;if(u.abortController){var a=new AbortController;o=a.signal,e._fetchAbortController=a,"requestTimeout"in t&&0!==t.requestTimeout&&h.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},t.requestTimeout)}h.fetch(e._opts.url,{method:e._opts.method,headers:r,body:n||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:o}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)})}else{var s=e._xhr=new h.XMLHttpRequest;try{s.open(e._opts.method,e._opts.url,!0)}catch(t){return void c.nextTick(function(){e.emit("error",t)})}"responseType"in s&&(s.responseType=e._mode.split(":")[0]),"withCredentials"in s&&(s.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(s.timeout=t.requestTimeout,s.ontimeout=function(){e.emit("requestTimeout")}),r.forEach(function(t){s.setRequestHeader(t[0],t[1])}),e._response=null,s.onreadystatechange=function(){switch(s.readyState){case d.LOADING:case d.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(s.onprogress=function(){e._onXHRProgress()}),s.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{s.send(n)}catch(t){return void c.nextTick(function(){e.emit("error",t)})}}}},i.prototype._onXHRProgress=function(){(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},i.prototype._connect=function(){var e=this;e._destroyed||(e._response=new n(e._xhr,e._fetchResponse,e._mode),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},i.prototype._write=function(t,e,n){this._body.push(t),n()},i.prototype.abort=i.prototype.destroy=function(){this._destroyed=!0,this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},i.prototype.end=function(t,e,n){"function"==typeof t&&(n=t,t=void 0),a.Writable.prototype.end.call(this,t,e,n)},i.prototype.flushHeaders=function(){},i.prototype.setTimeout=function(){},i.prototype.setNoDelay=function(){},i.prototype.setSocketKeepAlive=function(){};var r=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(t,s(797).Buffer,s(48),s(125))},function(t,e){},function(t,e,n){"use strict";var s=n(834).Buffer,i=n(1040);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,r=s.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,n=r,i=a,e.copy(n,i),a+=o.data.length,o=o.next;return r},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(n){function i(t){try{if(!n.localStorage)return!1}catch(t){return!1}var e=n.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(e,n(48))},function(t,e,n){"use strict";t.exports=o;var i=n(895),r=n(812);function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}r.inherits=n(788),r.inherits(o,i),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){var r=n(797).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(r.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,i=0;i<n;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t};var r=Object.prototype.hasOwnProperty},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,n){var i=n(885),r=n(875),o=t.exports;for(var a in i)i.hasOwnProperty(a)&&(o[a]=i[a]);function s(t){if("string"==typeof t&&(t=r.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}o.request=function(t,e){return t=s(t),i.request.call(this,t,e)},o.get=function(t,e){return t=s(t),i.get.call(this,t,e)}},function(t,e){},function(t,e,n){var i=!1;var r=n(304)(n(1051),n(1052),function(t){i||n(1049)},"data-v-59c24f88",null);r.options.__file="/Users/zhouqichao/Desktop/sxkj/shangu_online/src/components/views/businessAnalyze/children/addSkuModal.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] addSkuModal.vue: functional components are not supported with templates, they should use render functions."),t.exports=r.exports},function(t,e,n){var i=n(1050);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(589)("2c9fd1f0",i,!1,{})},function(t,e,n){(t.exports=n(588)()).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},function(t,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),function(t){var e=u(83),i=u.n(e),n=u(305),r=u.n(n),o=u(306),a=u.n(o),s=u(307),l=u(873),h=u.n(l);u(121);c.default={data:function(){return{skuCanvas:"",searchValue:"",storeSku:[],TModal:[],currSelectedTargetId:-1,prevSelectedTargetId:-1,selectedSku:{}}},props:["addSKUModal","storeInfo","jsonCanvas","canvasWidth","canvasHeight"],computed:{isTargetSelected:function(){return 0<=this.prevSelectedTargetId},isCurrTargetValid:function(){return 0<=this.currSelectedTargetId},currTargetSku:{get:function(){return this.selectedSku[this.currSelectedTargetId.toString()]},set:function(t){this.isCurrTargetValid&&(this.selectedSku[this.currSelectedTargetId.toString()]=t)}}},watch:{addSKUModal:{handler:"drawSkuCanvas",deep:!0}},mounted:function(){this.skuCanvas=new h.a.fabric.Canvas("sku"),this.initData(),this.getSkuList()},methods:{initData:function(){this.prevSelectedTargetId=-1,this.currSelectedTargetId=-1,this.selectedSku=this.storeInfo.store_sku?JSON.parse(this.storeInfo.store_sku):{},this.TModal=[]},getSkuList:function(){var n=this;return a()(r.a.mark(function t(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s._20();case 2:(e=t.sent)&&200===e.code&&(n.storeSku=e.data);case 4:case"end":return t.stop()}},t,n)}))()},drawSkuCanvas:function(){var t=this;this.addSKUModal.state&&(this.initData(),this.skuCanvas.loadFromJSON(this.jsonCanvas,function(){t.skuCanvas.setWidth(t.canvasWidth),t.skuCanvas.setHeight(t.canvasHeight),t.skuCanvas.renderAll(),t.setObjectAction(),t.setEventListener()}))},setObjectAction:function(){t.forEach(this.skuCanvas._objects,function(t){t.hasControls=!1,t.lockMovementX=t.lockMovementY=!0})},setEventListener:function(){this.addObjectSelectListener()},searchGoodsLibrary:function(){},confirmAddSKU:function(){this.currTargetSku=this.TModal,this.saveStoreInfo()},saveStoreInfo:function(){var n=this;return a()(r.a.mark(function t(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s._62({store_sku:i()(n.selectedSku)});case 2:(e=t.sent)&&200===e.code&&(n.storeInfo.store_sku=i()(n.selectedSku),n.$Message.success("添加成功"),n.addSKUModal.state=!1);case 4:case"end":return t.stop()}},t,n)}))()},addObjectSelectListener:function(){var e=this;this.skuCanvas.on("mouse:down",function(t){null!==t.target&&(e.prevSelectedTargetId=e.currSelectedTargetId,e.savePrevTargetSku(),e.currSelectedTargetId=t.target.id,e.showCurrTargetSku())})},savePrevTargetSku:function(){this.isTargetSelected&&(this.selectedSku[this.prevSelectedTargetId.toString()]=this.TModal,this.TModal=[])},showCurrTargetSku:function(){this.TModal=this.currTargetSku},cancelAddSKU:function(){this.addSKUModal.state=!1}}}}.call(c,u(122))},function(t,e,n){t.exports={render:function(){var n=this,t=n.$createElement,i=n._self._c||t;return i("Modal",{staticClass:"add-SKU add-modal",attrs:{title:"添加SKU",width:"1130","mask-closable":!1},model:{value:n.addSKUModal.state,callback:function(t){n.$set(n.addSKUModal,"state",t)},expression:"addSKUModal.state"}},[i("div",{staticClass:"add-SKU-modal-content add-modal-content"},[i("div",{staticClass:"add-SKU-content content"},[i("canvas",{attrs:{id:"sku"}})]),n._v(" "),i("div",{staticClass:"goods-library library"},[i("p",{staticClass:"PingFangSC-Medium-font title"},[n._v("商品库")]),n._v(" "),i("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"搜索"},on:{"on-enter":n.searchGoodsLibrary},model:{value:n.searchValue,callback:function(t){n.searchValue=t},expression:"searchValue"}}),n._v(" "),n._l(n.storeSku,function(t,e){return i("div",{staticClass:"goods-library-content"},[i("p",[n._v(n._s(e))]),n._v(" "),i("CheckboxGroup",{model:{value:n.TModal,callback:function(t){n.TModal=t},expression:"TModal"}},n._l(t,function(t,e){return i("Checkbox",{key:e,attrs:{label:t}})}))],1)})],2)]),n._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"primary"},on:{click:n.confirmAddSKU}},[n._v("确认")]),n._v(" "),i("Button",{staticStyle:{"margin-left":"30px","margin-right":"40%"},attrs:{type:"ghost"},on:{click:n.cancelAddSKU}},[n._v("取消")])],1)])},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){var i=!1;var r=n(304)(n(1056),n(1057),function(t){i||n(1054)},"data-v-27fd231e",null);r.options.__file="/Users/zhouqichao/Desktop/sxkj/shangu_online/src/components/views/businessAnalyze/children/floorPlanModal.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] floorPlanModal.vue: functional components are not supported with templates, they should use render functions."),t.exports=r.exports},function(t,e,n){var i=n(1055);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(589)("5369f7eb",i,!1,{})},function(t,e,n){(t.exports=n(588)()).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},function(t,f,d){"use strict";Object.defineProperty(f,"__esModule",{value:!0}),function(t){var e=d(795),a=d.n(e),n=d(83),o=d.n(n),i=d(305),s=d.n(i),r=d(306),l=d.n(r),h=d(873),c=d.n(h),u=d(307);d(121);f.default={data:function(){return{floorPlanCanvas:"",storeMaterial:[],addSKUModal:{state:!1}}},props:["addFloorPlanModal","jsonCanvas","storeInfo","canvasHeight","canvasWidth"],computed:{existCanvasObjects:function(){return!t.isEmpty(this.floorPlanCanvas)&&!t.isEmpty(this.floorPlanCanvas._objects)},canvasObjects:function(){return this.existCanvasObjects?this.floorPlanCanvas._objects:[]},targetId:{get:function(){return this.existCanvasObjects?t.maxBy(this.canvasObjects,"id").id+1:0}}},watch:{addFloorPlanModal:{handler:"drawFloorPlan",deep:!0}},created:function(){},mounted:function(){var t;c.a.fabric.Object.prototype.toObject=(t=c.a.fabric.Object.prototype.toObject,function(){return c.a.fabric.util.object.extend(t.call(this),{id:this.id})}),this.floorPlanCanvas=new c.a.fabric.Canvas("floor-plan"),this.getMaterial()},methods:{initData:function(){},drawFloorPlan:function(){var t=this;this.addFloorPlanModal.state&&(this.floorPlanCanvas.loadFromJSON(this.jsonCanvas,function(){t.floorPlanCanvas.setWidth(t.canvasWidth),t.floorPlanCanvas.setHeight(t.canvasHeight),t.floorPlanCanvas.renderAll()}),this.setEventListener())},setEventListener:function(){this.dbClickDeleteObject()},dbClickDeleteObject:function(){var n=this;this.floorPlanCanvas.on("mouse:down",function(e){document.onkeydown=function(t){8===t.keyCode&&e.target&&n.floorPlanCanvas.remove(e.target)}})},getMaterial:function(){var n=this;return l()(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u._13();case 2:(e=t.sent)&&200===e.code&&(n.storeMaterial=e.data);case 4:case"end":return t.stop()}},t,n)}))()},confirmAddFloorPlan:function(){this.saveHotStoreInfo()},cancelAddFloorPlan:function(){this.addFloorPlanModal.state=!1},getUpdateJsonSku:function(){var e=this.storeInfo.store_sku?JSON.parse(this.storeInfo.store_sku):{},n={};return t.forEach(this.floorPlanCanvas._objects,function(t){n[t.id.toString()]=e[t.id.toString()]||[]}),o()(n)},saveHotStoreInfo:function(){var r=this;return l()(s.a.mark(function t(){var e,n,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=o()(r.floorPlanCanvas),n=r.getUpdateJsonSku(),t.next=4,u._62({online_json_canvas:e,store_sku:n});case 4:(i=t.sent)&&200===i.code?(r.$emit("modifyStoreCanvas",o()(r.floorPlanCanvas)),r.storeInfo.store_sku=n,r.$Message.success("添加成功")):r.$Message.error("添加失败"),r.addFloorPlanModal.state=!1;case 7:case"end":return t.stop()}},t,r)}))()},allowDrop:function(t){t.preventDefault()},dragStart:function(t){this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.img=new Image,this.img.src=t.target.currentSrc},drop:function(t){for(var e in this.allowDrop(t),this.addCanvasObject(t),this.floorPlanCanvas._objects)this.floorPlanCanvas.item(e).lockUniScaling=!0;this.limitObjectArea()},getDropPoint:function(t){var e=t.layerX-this.offsetX,n=t.layerY-this.offsetY,i=document.getElementById("floor-plan"),r=this.img.height,o=this.img.width;return e<0?e=0:e+o>i.width&&(e=i.width-o),n<0?n=0:n+r>i.height&&(n=i.height-r),[e,n]},addCanvasObject:function(t){var e=this.getDropPoint(t),n=a()(e,2),i=n[0],r=n[1],o=new c.a.fabric.Image(this.img,{left:i,top:r});o.id=this.targetId,this.floorPlanCanvas.add(o)},limitObjectArea:function(){var i=document.getElementById("floor-plan");this.floorPlanCanvas.on("object:moving",function(t){var e=t.target.aCoords.br.y-t.target.aCoords.tr.y,n=t.target.aCoords.br.x-t.target.aCoords.bl.x;t.target.left<0?t.target.left=0:t.target.left+n>i.width&&(t.target.left=i.width-n),t.target.top<0?t.target.top=0:t.target.top+e>i.height&&(t.target.top=i.height-e)})}}}}.call(f,d(122))},function(t,e,n){t.exports={render:function(){var n=this,t=n.$createElement,i=n._self._c||t;return i("Modal",{staticClass:"add-floor-plan add-modal",attrs:{title:"添加平面图",width:"1130","mask-closable":!1},model:{value:n.addFloorPlanModal.state,callback:function(t){n.$set(n.addFloorPlanModal,"state",t)},expression:"addFloorPlanModal.state"}},[i("div",{staticClass:"add-FloorPlan-modal-content add-modal-content"},[i("div",{staticClass:"floor-plan-content content",on:{drop:function(t){n.drop(t)},dragover:n.allowDrop}},[i("canvas",{attrs:{id:"floor-plan"}})]),n._v(" "),i("div",{staticClass:"material-library library"},[i("p",{staticClass:"PingFangSC-Medium-font title"},[n._v("素材库")]),n._v(" "),i("div",{staticClass:"material-library-content"},[i("div",{staticClass:"material-library-row-content"},n._l(n.storeMaterial,function(t,e){return i("div",{staticClass:"material-library-row-content-col",attrs:{draggable:"true"},on:{dragstart:function(t){return"button"in t||!n._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?"button"in t&&0!==t.button?null:void n.dragStart(t):null}}},[i("img",{attrs:{src:t}}),n._v(" "),i("p",[n._v(n._s(e))])])}))])])]),n._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"primary"},on:{click:n.confirmAddFloorPlan}},[n._v("下一步")]),n._v(" "),i("Button",{staticStyle:{"margin-left":"30px","margin-right":"40%"},attrs:{type:"ghost"},on:{click:n.cancelAddFloorPlan}},[n._v("取消\n        ")])],1)])},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){var i=n(1059);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(589)("11f04b86",i,!1,{})},function(t,e,n){(t.exports=n(588)()).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},function(t,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(h,e){var t=o(1062),n=o.n(t),i=o(121);r.default={data:function(){return{intervalList:[0,30,1800,3600,7200],colorList:["rgb(0,0,255)","rgb(0,255,0)","rgb(255,255,0)","rgb(255,115,0)","rgb(255,0,0)"],heatmapInstance:null,storeHeatmap:{max:0,heatmapPoints:[]},cellNoX:0,cellNoY:0,cellWidth:0,cellHeight:0,hotzoneData:null,gradient:{},height:0,heatmapId:"heatmap"+this.local_camera_id}},props:["heatMapImgHeight","heatData","dateRange","local_camera_id"],watch:{heatData:{handler:"drawHeatMap",deep:!0}},computed:{days:function(){return i.a.dayDiff(this.dateRange.range)}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.drawHeatMap()})},methods:{initData:function(){this.hotzoneData=this.getHotzoneData(),h.isEmpty(this.hotzoneData)||(this.gradient=this.getGradient(),this.height=this.getHeight(),this.cellNoX=this.getCellNoX(),this.cellNoY=this.getCellNoY(),this.cellWidth=this.getCellWidth(),this.cellHeight=this.getCellHeight(),this.storeHeatmap.heatmapPoints=this.getHeatMapPoints())},createHeatMapInstance:function(){var t=e("#"+this.heatmapId);t.empty(),t.length&&(t.css({height:this.heatMapImgHeight,width:"700px"}),this.heatmapInstance=n.a.create({container:t[0],radius:15,blur:.8,gradient:this.gradient}))},setHeatMapInstance:function(){var t={max:this.storeHeatmap.max,min:1,data:this.storeHeatmap.heatmapPoints};this.heatmapInstance.setData(t)},drawHeatMap:function(){this.initData(),this.createHeatMapInstance(),this.setHeatMapInstance()},getHeatMapPoints:function(){var t=[];for(var e in this.hotzoneData){var n=this.cellHeight*e;for(var i in this.hotzoneData[e])for(var r=this.cellWidth*i,o=this.local_camera_id?10*this.hotzoneData[e][i]/this.days:this.hotzoneData[e][i]/this.days,a=0;a<this.cellHeight;a+=8)for(var s=0;s<this.cellWidth;s+=8){var l={x:h.floor(r+8*Math.random()+s),y:h.floor(n+8*Math.random()+a),value:h.floor(o)};0<l.value&&t.push(l)}}return t},getHeatMapMax:function(){return h.last(this.intervalList)},getHotzoneData:function(){return this.heatData[0].heat_map},getHeight:function(){return this.heatMapImgHeight},getScaleHeatInterval:function(){var e=this;return h.map(this.intervalList,function(t){return(t/e.storeHeatmap.max).toFixed(3)})},getGradient:function(){this.storeHeatmap.max=this.getHeatMapMax();var t=this.getScaleHeatInterval();return h.zipObject(t,this.colorList)},getCellNoX:function(){return this.hotzoneData[0].length},getCellNoY:function(){return this.hotzoneData.length},getCellWidth:function(){return h.floor(700/this.cellNoX)},getCellHeight:function(){return h.floor(this.height/this.cellNoY)}}}}.call(r,o(122),o(1061))},function(Ve,qe,t){var $e;!function(t,e){"use strict";"object"==typeof Ve&&"object"==typeof Ve.exports?Ve.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(S,t){"use strict";var e=[],C=S.document,i=Object.getPrototypeOf,s=e.slice,g=e.concat,l=e.push,r=e.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,h=a.call(Object),m={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},_=function(t){return null!=t&&t===t.window},c={type:!0,src:!0,noModule:!0};function x(t,e,n){var i,r=(e=e||C).createElement("script");if(r.text=t,n)for(i in c)n[i]&&(r[i]=n[i]);e.head.appendChild(r).parentNode.removeChild(r)}function b(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?n[o.call(t)]||"object":typeof t}var T=function(t,e){return new T.fn.init(t,e)},u=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function f(t){var e=!!t&&"length"in t&&t.length,n=b(t);return!y(t)&&!_(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}T.fn=T.prototype={jquery:"3.3.1",constructor:T,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=T.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return T.each(this,t)},map:function(n){return this.pushStack(T.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:e.sort,splice:e.splice},T.extend=T.fn.extend=function(){var t,e,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],a!==(i=t[e])&&(h&&i&&(T.isPlainObject(i)||(r=Array.isArray(i)))?(r?(r=!1,o=n&&Array.isArray(n)?n:[]):o=n&&T.isPlainObject(n)?n:{},a[e]=T.extend(h,o,i)):void 0!==i&&(a[e]=i));return a},T.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==o.call(t))&&(!(e=i(t))||"function"==typeof(n=v.call(e,"constructor")&&e.constructor)&&a.call(n)===h)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){x(t)},each:function(t,e){var n,i=0;if(f(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(u,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(f(Object(t))?T.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:r.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,a=!n;r<o;r++)!e(t[r],r)!==a&&i.push(t[r]);return i},map:function(t,e,n){var i,r,o=0,a=[];if(f(t))for(i=t.length;o<i;o++)null!=(r=e(t[o],o,n))&&a.push(r);else for(o in t)null!=(r=e(t[o],o,n))&&a.push(r);return g.apply([],a)},guid:1,support:m}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=e[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){n["[object "+e+"]"]=e.toLowerCase()});var d=function(n){var t,d,x,o,r,p,u,g,b,l,h,w,S,a,C,v,s,c,m,T="sizzle"+1*new Date,y=n.document,k=0,i=0,f=at(),_=at(),O=at(),A=function(t,e){return t===e&&(h=!0),0},M={}.hasOwnProperty,e=[],D=e.pop,I=e.push,P=e.push,E=e.slice,L=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+R+"*("+B+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+R+"*\\]",N=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",z=new RegExp(R+"+","g"),H=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),W=new RegExp("^"+R+"*,"+R+"*"),G=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),U=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),X=new RegExp(N),Y=new RegExp("^"+B+"$"),V={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},q=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Q=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),tt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},it=function(){w()},rt=yt(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{P.apply(e=E.call(y.childNodes),y.childNodes),e[y.childNodes.length].nodeType}catch(t){P={apply:e.length?function(t,e){I.apply(t,E.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function ot(t,e,n,i){var r,o,a,s,l,h,c,u=e&&e.ownerDocument,f=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==f&&9!==f&&11!==f)return n;if(!i&&((e?e.ownerDocument||e:y)!==S&&w(e),e=e||S,C)){if(11!==f&&(l=Z.exec(t)))if(r=l[1]){if(9===f){if(!(a=e.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(u&&(a=u.getElementById(r))&&m(e,a)&&a.id===r)return n.push(a),n}else{if(l[2])return P.apply(n,e.getElementsByTagName(t)),n;if((r=l[3])&&d.getElementsByClassName&&e.getElementsByClassName)return P.apply(n,e.getElementsByClassName(r)),n}if(d.qsa&&!O[t+" "]&&(!v||!v.test(t))){if(1!==f)u=e,c=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(et,nt):e.setAttribute("id",s=T),o=(h=p(t)).length;o--;)h[o]="#"+s+" "+mt(h[o]);c=h.join(","),u=J.test(t)&&gt(e.parentNode)||e}if(c)try{return P.apply(n,u.querySelectorAll(c)),n}catch(t){}finally{s===T&&e.removeAttribute("id")}}}return g(t.replace(H,"$1"),e,n,i)}function at(){var i=[];return function t(e,n){return i.push(e+" ")>x.cacheLength&&delete t[i.shift()],t[e+" "]=n}}function st(t){return t[T]=!0,t}function lt(t){var e=S.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=e}function ct(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ut(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ft(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function dt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&rt(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pt(a){return st(function(o){return o=+o,st(function(t,e){for(var n,i=a([],t.length,o),r=i.length;r--;)t[n=i[r]]&&(t[n]=!(e[n]=t[n]))})})}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in d=ot.support={},r=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},w=ot.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:y;return i!==S&&9===i.nodeType&&i.documentElement&&(a=(S=i).documentElement,C=!r(S),y!==S&&(n=S.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",it,!1):n.attachEvent&&n.attachEvent("onunload",it)),d.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),d.getElementsByTagName=lt(function(t){return t.appendChild(S.createComment("")),!t.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(S.getElementsByClassName),d.getById=lt(function(t){return a.appendChild(t).id=T,!S.getElementsByName||!S.getElementsByName(T).length}),d.getById?(x.filter.ID=function(t){var e=t.replace(Q,tt);return function(t){return t.getAttribute("id")===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&C){var n=e.getElementById(t);return n?[n]:[]}}):(x.filter.ID=function(t){var n=t.replace(Q,tt);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&C){var n,i,r,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),x.find.TAG=d.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):d.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=d.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&C)return e.getElementsByClassName(t)},s=[],v=[],(d.qsa=K.test(S.querySelectorAll))&&(lt(function(t){a.appendChild(t).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+R+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+R+"*(?:value|"+j+")"),t.querySelectorAll("[id~="+T+"-]").length||v.push("~="),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+T+"+*").length||v.push(".#.+[+~]")}),lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=S.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+R+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&lt(function(t){d.disconnectedMatch=c.call(t,"*"),c.call(t,"[s!='']:x"),s.push("!=",N)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),e=K.test(a.compareDocumentPosition),m=e||K.test(a.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return h=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!d.sortDetached&&e.compareDocumentPosition(t)===n?t===S||t.ownerDocument===y&&m(y,t)?-1:e===S||e.ownerDocument===y&&m(y,e)?1:l?L(l,t)-L(l,e):0:4&n?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!r||!o)return t===S?-1:e===S?1:r?-1:o?1:l?L(l,t)-L(l,e):0;if(r===o)return ct(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?ct(a[i],s[i]):a[i]===y?-1:s[i]===y?1:0}),S},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==S&&w(t),e=e.replace(U,"='$1']"),d.matchesSelector&&C&&!O[e+" "]&&(!s||!s.test(e))&&(!v||!v.test(e)))try{var n=c.call(t,e);if(n||d.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return 0<ot(e,S,null,[t]).length},ot.contains=function(t,e){return(t.ownerDocument||t)!==S&&w(t),m(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==S&&w(t);var n=x.attrHandle[e.toLowerCase()],i=n&&M.call(x.attrHandle,e.toLowerCase())?n(t,e,!C):void 0;return void 0!==i?i:d.attributes||!C?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},ot.escape=function(t){return(t+"").replace(et,nt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,n=[],i=0,r=0;if(h=!d.detectDuplicates,l=!d.sortStable&&t.slice(0),t.sort(A),h){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return l=null,t},o=ot.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=o(e);return n},(x=ot.selectors={cacheLength:50,createPseudo:st,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Q,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(Q,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return V.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&X.test(n)&&(e=p(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Q,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=f[t+" "];return e||(e=new RegExp("(^|"+R+")"+t+"("+R+"|$)"))&&f(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(t){var e=ot.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===r:"!="===i?e!==r:"^="===i?r&&0===e.indexOf(r):"*="===i?r&&-1<e.indexOf(r):"$="===i?r&&e.slice(-r.length)===r:"~="===i?-1<(" "+e.replace(z," ")+" ").indexOf(r):"|="===i&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,t,e,g,v){var m="nth"!==p.slice(0,3),y="last"!==p.slice(-4),_="of-type"===t;return 1===g&&0===v?function(t){return!!t.parentNode}:function(t,e,n){var i,r,o,a,s,l,h=m!==y?"nextSibling":"previousSibling",c=t.parentNode,u=_&&t.nodeName.toLowerCase(),f=!n&&!_,d=!1;if(c){if(m){for(;h;){for(a=t;a=a[h];)if(_?a.nodeName.toLowerCase()===u:1===a.nodeType)return!1;l=h="only"===p&&!l&&"nextSibling"}return!0}if(l=[y?c.firstChild:c.lastChild],y&&f){for(d=(s=(i=(r=(o=(a=c)[T]||(a[T]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===k&&i[1])&&i[2],a=s&&c.childNodes[s];a=++s&&a&&a[h]||(d=s=0)||l.pop();)if(1===a.nodeType&&++d&&a===t){r[p]=[k,s,d];break}}else if(f&&(d=s=(i=(r=(o=(a=t)[T]||(a[T]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===k&&i[1]),!1===d)for(;(a=++s&&a&&a[h]||(d=s=0)||l.pop())&&((_?a.nodeName.toLowerCase()!==u:1!==a.nodeType)||!++d||(f&&((r=(o=a[T]||(a[T]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]=[k,d]),a!==t)););return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(t,o){var e,a=x.pseudos[t]||x.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return a[T]?a(o):1<a.length?(e=[t,t,"",o],x.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,e){for(var n,i=a(t,o),r=i.length;r--;)t[n=L(t,i[r])]=!(e[n]=i[r])}):function(t){return a(t,0,e)}):a}},pseudos:{not:st(function(t){var i=[],r=[],s=u(t.replace(H,"$1"));return s[T]?st(function(t,e,n,i){for(var r,o=s(t,null,i,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,e,n){return i[0]=t,s(i,null,n,r),i[0]=null,!r.pop()}}),has:st(function(e){return function(t){return 0<ot(e,t).length}}),contains:st(function(e){return e=e.replace(Q,tt),function(t){return-1<(t.textContent||t.innerText||o(t)).indexOf(e)}}),lang:st(function(n){return Y.test(n||"")||ot.error("unsupported lang: "+n),n=n.replace(Q,tt).toLowerCase(),function(t){var e;do{if(e=C?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===a},focus:function(t){return t===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:dt(!1),disabled:dt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return q.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,n){return[n<0?n+e:n]}),even:pt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:pt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:pt(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:pt(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[t]=ut(t);for(t in{submit:!0,reset:!0})x.pseudos[t]=ft(t);function vt(){}function mt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function yt(s,t,e){var l=t.dir,h=t.next,c=h||l,u=e&&"parentNode"===c,f=i++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||u)return s(t,e,n);return!1}:function(t,e,n){var i,r,o,a=[k,f];if(n){for(;t=t[l];)if((1===t.nodeType||u)&&s(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||u)if(r=(o=t[T]||(t[T]={}))[t.uniqueID]||(o[t.uniqueID]={}),h&&h===t.nodeName.toLowerCase())t=t[l]||t;else{if((i=r[c])&&i[0]===k&&i[1]===f)return a[2]=i[2];if((r[c]=a)[2]=s(t,e,n))return!0}return!1}}function _t(r){return 1<r.length?function(t,e,n){for(var i=r.length;i--;)if(!r[i](t,e,n))return!1;return!0}:r[0]}function xt(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,h=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),h&&e.push(s)));return a}function bt(d,p,g,v,m,t){return v&&!v[T]&&(v=bt(v)),m&&!m[T]&&(m=bt(m,t)),st(function(t,e,n,i){var r,o,a,s=[],l=[],h=e.length,c=t||function(t,e,n){for(var i=0,r=e.length;i<r;i++)ot(t,e[i],n);return n}(p||"*",n.nodeType?[n]:n,[]),u=!d||!t&&p?c:xt(c,s,d,n,i),f=g?m||(t?d:h||v)?[]:e:u;if(g&&g(u,f,n,i),v)for(r=xt(f,l),v(r,[],n,i),o=r.length;o--;)(a=r[o])&&(f[l[o]]=!(u[l[o]]=a));if(t){if(m||d){if(m){for(r=[],o=f.length;o--;)(a=f[o])&&r.push(u[o]=a);m(null,f=[],r,i)}for(o=f.length;o--;)(a=f[o])&&-1<(r=m?L(t,a):s[o])&&(t[r]=!(e[r]=a))}}else f=xt(f===e?f.splice(h,f.length):f),m?m(null,e,f,i):P.apply(e,f)})}function wt(t){for(var r,e,n,i=t.length,o=x.relative[t[0].type],a=o||x.relative[" "],s=o?1:0,l=yt(function(t){return t===r},a,!0),h=yt(function(t){return-1<L(r,t)},a,!0),c=[function(t,e,n){var i=!o&&(n||e!==b)||((r=e).nodeType?l(t,e,n):h(t,e,n));return r=null,i}];s<i;s++)if(e=x.relative[t[s].type])c=[yt(_t(c),e)];else{if((e=x.filter[t[s].type].apply(null,t[s].matches))[T]){for(n=++s;n<i&&!x.relative[t[n].type];n++);return bt(1<s&&_t(c),1<s&&mt(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(H,"$1"),e,s<n&&wt(t.slice(s,n)),n<i&&wt(t=t.slice(n)),n<i&&mt(t))}c.push(e)}return _t(c)}return vt.prototype=x.filters=x.pseudos,x.setFilters=new vt,p=ot.tokenize=function(t,e){var n,i,r,o,a,s,l,h=_[t+" "];if(h)return e?0:h.slice(0);for(a=t,s=[],l=x.preFilter;a;){for(o in n&&!(i=W.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(r=[])),n=!1,(i=G.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(H," ")}),a=a.slice(n.length)),x.filter)!(i=V[o].exec(a))||l[o]&&!(i=l[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?ot.error(t):_(t,s).slice(0)},u=ot.compile=function(t,e){var n,v,m,y,_,i,r=[],o=[],a=O[t+" "];if(!a){for(e||(e=p(t)),n=e.length;n--;)(a=wt(e[n]))[T]?r.push(a):o.push(a);(a=O(t,(v=o,y=0<(m=r).length,_=0<v.length,i=function(t,e,n,i,r){var o,a,s,l=0,h="0",c=t&&[],u=[],f=b,d=t||_&&x.find.TAG("*",r),p=k+=null==f?1:Math.random()||.1,g=d.length;for(r&&(b=e===S||e||r);h!==g&&null!=(o=d[h]);h++){if(_&&o){for(a=0,e||o.ownerDocument===S||(w(o),n=!C);s=v[a++];)if(s(o,e||S,n)){i.push(o);break}r&&(k=p)}y&&((o=!s&&o)&&l--,t&&c.push(o))}if(l+=h,y&&h!==l){for(a=0;s=m[a++];)s(c,u,e,n);if(t){if(0<l)for(;h--;)c[h]||u[h]||(u[h]=D.call(i));u=xt(u)}P.apply(i,u),r&&!t&&0<u.length&&1<l+m.length&&ot.uniqueSort(i)}return r&&(k=p,b=f),c},y?st(i):i))).selector=t}return a},g=ot.select=function(t,e,n,i){var r,o,a,s,l,h="function"==typeof t&&t,c=!i&&p(t=h.selector||t);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===e.nodeType&&C&&x.relative[o[1].type]){if(!(e=(x.find.ID(a.matches[0].replace(Q,tt),e)||[])[0]))return n;h&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=V.needsContext.test(t)?0:o.length;r--&&(a=o[r],!x.relative[s=a.type]);)if((l=x.find[s])&&(i=l(a.matches[0].replace(Q,tt),J.test(o[0].type)&&gt(e.parentNode)||e))){if(o.splice(r,1),!(t=i.length&&mt(o)))return P.apply(n,i),n;break}}return(h||u(t,c))(i,e,!C,n,!e||J.test(t)&&gt(e.parentNode)||e),n},d.sortStable=T.split("").sort(A).join("")===T,d.detectDuplicates=!!h,w(),d.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(S.createElement("fieldset"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ht("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),d.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ht("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ht(j,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),ot}(S);T.find=d,T.expr=d.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=d.uniqueSort,T.text=d.getText,T.isXMLDoc=d.isXML,T.contains=d.contains,T.escapeSelector=d.escape;var p=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&T(t).is(n))break;i.push(t)}return i},w=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},k=T.expr.match.needsContext;function O(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(t,n,i){return y(n)?T.grep(t,function(t,e){return!!n.call(t,e,t)!==i}):n.nodeType?T.grep(t,function(t){return t===n!==i}):"string"!=typeof n?T.grep(t,function(t){return-1<r.call(n,t)!==i}):T.filter(n,t,i)}T.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?T.find.matchesSelector(i,t)?[i]:[]:T.find.matches(t,T.grep(e,function(t){return 1===t.nodeType}))},T.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(T(t).filter(function(){for(e=0;e<i;e++)if(T.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)T.find(t,r[e],n);return 1<i?T.uniqueSort(n):n},filter:function(t){return this.pushStack(M(this,t||[],!1))},not:function(t){return this.pushStack(M(this,t||[],!0))},is:function(t){return!!M(this,"string"==typeof t&&k.test(t)?T(t):t||[],!1).length}});var D,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||D,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:I.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:C,!0)),A.test(i[1])&&T.isPlainObject(e))for(i in e)y(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=C.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(T):T.makeArray(t,this)}).prototype=T.fn,D=T(C);var P=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};function L(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(T.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],a="string"!=typeof t&&T(t);if(!k.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&T.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?T.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?r.call(T(t),this[0]):r.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return p(t,"parentNode")},parentsUntil:function(t,e,n){return p(t,"parentNode",n)},next:function(t){return L(t,"nextSibling")},prev:function(t){return L(t,"previousSibling")},nextAll:function(t){return p(t,"nextSibling")},prevAll:function(t){return p(t,"previousSibling")},nextUntil:function(t,e,n){return p(t,"nextSibling",n)},prevUntil:function(t,e,n){return p(t,"previousSibling",n)},siblings:function(t){return w((t.parentNode||{}).firstChild,t)},children:function(t){return w(t.firstChild)},contents:function(t){return O(t,"iframe")?t.contentDocument:(O(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},function(i,r){T.fn[i]=function(t,e){var n=T.map(this,r,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=T.filter(e,n)),1<this.length&&(E[i]||T.uniqueSort(n),P.test(i)&&n.reverse()),this.pushStack(n)}});var j=/[^\x20\t\r\n\f]+/g;function R(t){return t}function B(t){throw t}function F(t,e,n,i){var r;try{t&&y(r=t.promise)?r.call(t).done(e).fail(n):t&&y(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}T.Callbacks=function(i){var t,n;i="string"==typeof i?(t=i,n={},T.each(t.match(j)||[],function(t,e){n[e]=!0}),n):T.extend({},i);var r,e,o,a,s=[],l=[],h=-1,c=function(){for(a=a||i.once,o=r=!0;l.length;h=-1)for(e=l.shift();++h<s.length;)!1===s[h].apply(e[0],e[1])&&i.stopOnFalse&&(h=s.length,e=!1);i.memory||(e=!1),r=!1,a&&(s=e?[]:"")},u={add:function(){return s&&(e&&!r&&(h=s.length-1,l.push(e)),function n(t){T.each(t,function(t,e){y(e)?i.unique&&u.has(e)||s.push(e):e&&e.length&&"string"!==b(e)&&n(e)})}(arguments),e&&!r&&c()),this},remove:function(){return T.each(arguments,function(t,e){for(var n;-1<(n=T.inArray(e,s,n));)s.splice(n,1),n<=h&&h--}),this},has:function(t){return t?-1<T.inArray(t,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=l=[],s=e="",this},disabled:function(){return!s},lock:function(){return a=l=[],e||r||(s=e=""),this},locked:function(){return!!a},fireWith:function(t,e){return a||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),r||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},T.extend({Deferred:function(t){var o=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return a.then(null,t)},pipe:function(){var r=arguments;return T.Deferred(function(i){T.each(o,function(t,e){var n=y(r[e[4]])&&r[e[4]];s[e[1]](function(){var t=n&&n.apply(this,arguments);t&&y(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[e[0]+"With"](this,n?[t]:arguments)})}),r=null}).promise()},then:function(e,n,i){var l=0;function h(r,o,a,s){return function(){var n=this,i=arguments,t=function(){var t,e;if(!(r<l)){if((t=a.apply(n,i))===o.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,y(e)?s?e.call(t,h(l,o,R,s),h(l,o,B,s)):(l++,e.call(t,h(l,o,R,s),h(l,o,B,s),h(l,o,R,o.notifyWith))):(a!==R&&(n=void 0,i=[t]),(s||o.resolveWith)(n,i))}},e=s?t:function(){try{t()}catch(t){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(t,e.stackTrace),l<=r+1&&(a!==B&&(n=void 0,i=[t]),o.rejectWith(n,i))}};r?e():(T.Deferred.getStackHook&&(e.stackTrace=T.Deferred.getStackHook()),S.setTimeout(e))}}return T.Deferred(function(t){o[0][3].add(h(0,t,y(i)?i:R,t.notifyWith)),o[1][3].add(h(0,t,y(e)?e:R)),o[2][3].add(h(0,t,y(n)?n:B))}).promise()},promise:function(t){return null!=t?T.extend(t,a):a}},s={};return T.each(o,function(t,e){var n=e[2],i=e[5];a[e[1]]=n.add,i&&n.add(function(){r=i},o[3-t][2].disable,o[3-t][3].disable,o[0][2].lock,o[0][3].lock),n.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=n.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(t){var n=arguments.length,e=n,i=Array(e),r=s.call(arguments),o=T.Deferred(),a=function(e){return function(t){i[e]=this,r[e]=1<arguments.length?s.call(arguments):t,--n||o.resolveWith(i,r)}};if(n<=1&&(F(t,o.done(a(e)).resolve,o.reject,!n),"pending"===o.state()||y(r[e]&&r[e].then)))return o.then();for(;e--;)F(r[e],a(e),o.reject);return o.promise()}});var N=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,e){S.console&&S.console.warn&&t&&N.test(t.name)&&S.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){S.setTimeout(function(){throw t})};var z=T.Deferred();function H(){C.removeEventListener("DOMContentLoaded",H),S.removeEventListener("load",H),T.ready()}T.fn.ready=function(t){return z.then(t).catch(function(t){T.readyException(t)}),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0)!==t&&0<--T.readyWait||z.resolveWith(C,[T])}}),T.ready.then=z.then,"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?S.setTimeout(T.ready):(C.addEventListener("DOMContentLoaded",H),S.addEventListener("load",H));var W=function(t,e,n,i,r,o,a){var s=0,l=t.length,h=null==n;if("object"===b(n))for(s in r=!0,n)W(t,e,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,y(i)||(a=!0),h&&(a?(e.call(t,i),e=null):(h=e,e=function(t,e,n){return h.call(T(t),n)})),e))for(;s<l;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:h?e.call(t):l?e(t[0],n):o},G=/^-ms-/,U=/-([a-z])/g;function X(t,e){return e.toUpperCase()}function Y(t){return t.replace(G,"ms-").replace(U,X)}var V=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function q(){this.expando=T.expando+q.uid++}q.uid=1,q.prototype={cache:function(t){var e=t[this.expando];return e||(e={},V(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[Y(e)]=n;else for(i in e)r[Y(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Y(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(Y):(e=Y(e))in i?[e]:e.match(j)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||T.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var $=new q,K=new q,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Q(t,e,n){var i,r;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(J,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===(r=n)||"false"!==r&&("null"===r?null:r===+r+""?+r:Z.test(r)?JSON.parse(r):r)}catch(t){}K.set(t,e,n)}else n=void 0;return n}T.extend({hasData:function(t){return K.hasData(t)||$.hasData(t)},data:function(t,e,n){return K.access(t,e,n)},removeData:function(t,e){K.remove(t,e)},_data:function(t,e,n){return $.access(t,e,n)},_removeData:function(t,e){$.remove(t,e)}}),T.fn.extend({data:function(n,t){var e,i,r,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(r=K.get(o),1===o.nodeType&&!$.get(o,"hasDataAttrs"))){for(e=a.length;e--;)a[e]&&0===(i=a[e].name).indexOf("data-")&&(i=Y(i.slice(5)),Q(o,i,r[i]));$.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof n?this.each(function(){K.set(this,n)}):W(this,function(t){var e;if(o&&void 0===t)return void 0!==(e=K.get(o,n))?e:void 0!==(e=Q(o,n))?e:void 0;this.each(function(){K.set(this,n,t)})},null,t,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){K.remove(this,t)})}}),T.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=$.get(t,e),n&&(!i||Array.isArray(n)?i=$.access(t,e,T.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=T.queue(t,e),i=n.length,r=n.shift(),o=T._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,function(){T.dequeue(t,e)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return $.get(t,n)||$.access(t,n,{empty:T.Callbacks("once memory").add(function(){$.remove(t,[e+"queue",n])})})}}),T.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?T.queue(this[0],e):void 0===n?this:this.each(function(){var t=T.queue(this,e,n);T._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&T.dequeue(this,e)})},dequeue:function(t){return this.each(function(){T.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=T.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=$.get(o[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],it=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&T.contains(t.ownerDocument,t)&&"none"===T.css(t,"display")},rt=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in r=n.apply(t,i||[]),e)t.style[o]=a[o];return r};function ot(t,e,n,i){var r,o,a=20,s=i?function(){return i.cur()}:function(){return T.css(t,e,"")},l=s(),h=n&&n[3]||(T.cssNumber[e]?"":"px"),c=(T.cssNumber[e]||"px"!==h&&+l)&&et.exec(T.css(t,e));if(c&&c[3]!==h){for(l/=2,h=h||c[3],c=+l||1;a--;)T.style(t,e,c+h),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;c*=2,T.style(t,e,c+h),n=n||[]}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=h,i.start=c,i.end=r)),r}var at={};function st(t,e){for(var n,i,r,o,a,s,l,h=[],c=0,u=t.length;c<u;c++)(i=t[c]).style&&(n=i.style.display,e?("none"===n&&(h[c]=$.get(i,"display")||null,h[c]||(i.style.display="")),""===i.style.display&&it(i)&&(h[c]=(l=a=o=void 0,a=(r=i).ownerDocument,s=r.nodeName,(l=at[s])||(o=a.body.appendChild(a.createElement(s)),l=T.css(o,"display"),o.parentNode.removeChild(o),"none"===l&&(l="block"),at[s]=l)))):"none"!==n&&(h[c]="none",$.set(i,"display",n)));for(c=0;c<u;c++)null!=h[c]&&(t[c].style.display=h[c]);return t}T.fn.extend({show:function(){return st(this,!0)},hide:function(){return st(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){it(this)?T(this).show():T(this).hide()})}});var lt=/^(?:checkbox|radio)$/i,ht=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ct=/^$|^module$|\/(?:java|ecma)script/i,ut={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ft(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&O(t,e)?T.merge([t],n):n}function dt(t,e){for(var n=0,i=t.length;n<i;n++)$.set(t[n],"globalEval",!e||$.get(e[n],"globalEval"))}ut.optgroup=ut.option,ut.tbody=ut.tfoot=ut.colgroup=ut.caption=ut.thead,ut.th=ut.td;var pt,gt,vt=/<|&#?\w+;/;function mt(t,e,n,i,r){for(var o,a,s,l,h,c,u=e.createDocumentFragment(),f=[],d=0,p=t.length;d<p;d++)if((o=t[d])||0===o)if("object"===b(o))T.merge(f,o.nodeType?[o]:o);else if(vt.test(o)){for(a=a||u.appendChild(e.createElement("div")),s=(ht.exec(o)||["",""])[1].toLowerCase(),l=ut[s]||ut._default,a.innerHTML=l[1]+T.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;T.merge(f,a.childNodes),(a=u.firstChild).textContent=""}else f.push(e.createTextNode(o));for(u.textContent="",d=0;o=f[d++];)if(i&&-1<T.inArray(o,i))r&&r.push(o);else if(h=T.contains(o.ownerDocument,o),a=ft(u.appendChild(o),"script"),h&&dt(a),n)for(c=0;o=a[c++];)ct.test(o.type||"")&&n.push(o);return u}pt=C.createDocumentFragment().appendChild(C.createElement("div")),(gt=C.createElement("input")).setAttribute("type","radio"),gt.setAttribute("checked","checked"),gt.setAttribute("name","t"),pt.appendChild(gt),m.checkClone=pt.cloneNode(!0).cloneNode(!0).lastChild.checked,pt.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!pt.cloneNode(!0).lastChild.defaultValue;var yt=C.documentElement,_t=/^key/,xt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,bt=/^([^.]*)(?:\.(.+)|)/;function wt(){return!0}function St(){return!1}function Ct(){try{return C.activeElement}catch(t){}}function Tt(t,e,n,i,r,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(i=i||n,n=void 0),e)Tt(t,s,n,i,e[s],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=St;else if(!r)return t;return 1===o&&(a=r,(r=function(t){return T().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=T.guid++)),t.each(function(){T.event.add(this,e,r,i,n)})}T.event={global:{},add:function(e,t,n,i,r){var o,a,s,l,h,c,u,f,d,p,g,v=$.get(e);if(v)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&T.find.matchesSelector(yt,r),n.guid||(n.guid=T.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return void 0!==T&&T.event.triggered!==t.type?T.event.dispatch.apply(e,arguments):void 0}),h=(t=(t||"").match(j)||[""]).length;h--;)d=g=(s=bt.exec(t[h])||[])[1],p=(s[2]||"").split(".").sort(),d&&(u=T.event.special[d]||{},d=(r?u.delegateType:u.bindType)||d,u=T.event.special[d]||{},c=T.extend({type:d,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&T.expr.match.needsContext.test(r),namespace:p.join(".")},o),(f=l[d])||((f=l[d]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,i,p,a)||e.addEventListener&&e.addEventListener(d,a)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,c):f.push(c),T.event.global[d]=!0)},remove:function(t,e,n,i,r){var o,a,s,l,h,c,u,f,d,p,g,v=$.hasData(t)&&$.get(t);if(v&&(l=v.events)){for(h=(e=(e||"").match(j)||[""]).length;h--;)if(d=g=(s=bt.exec(e[h])||[])[1],p=(s[2]||"").split(".").sort(),d){for(u=T.event.special[d]||{},f=l[d=(i?u.delegateType:u.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!r&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,u.remove&&u.remove.call(t,c));a&&!f.length&&(u.teardown&&!1!==u.teardown.call(t,p,v.handle)||T.removeEvent(t,d,v.handle),delete l[d])}else for(d in l)T.event.remove(t,d+e[h],n,i,!0);T.isEmptyObject(l)&&$.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,a,s=T.event.fix(t),l=new Array(arguments.length),h=($.get(this,"events")||{})[s.type]||[],c=T.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=T.event.handlers.call(this,s,h),e=0;(r=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(i=((T.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,i,r,o,a,s=[],l=e.delegateCount,h=t.target;if(l&&h.nodeType&&!("click"===t.type&&1<=t.button))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[r=(i=e[n]).selector+" "]&&(a[r]=i.needsContext?-1<T(r,this).index(h):T.find(r,this,null,[h]).length),a[r]&&o.push(i);o.length&&s.push({elem:h,handlers:o})}return h=this,l<e.length&&s.push({elem:h,handlers:e.slice(l)}),s},addProp:function(e,t){Object.defineProperty(T.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ct()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ct()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&O(this,"input"))return this.click(),!1},_default:function(t){return O(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?wt:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&_t.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&xt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},T.event.addProp),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,r){T.event.special[t]={delegateType:r,bindType:r,handle:function(t){var e,n=t.relatedTarget,i=t.handleObj;return n&&(n===this||T.contains(this,n))||(t.type=i.origType,e=i.handler.apply(this,arguments),t.type=r),e}}}),T.fn.extend({on:function(t,e,n,i){return Tt(this,t,e,n,i)},one:function(t,e,n,i){return Tt(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,T(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=St),this.each(function(){T.event.remove(this,t,n,e)})}});var kt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ot=/<script|<style|<link/i,At=/checked\s*(?:[^=]|=\s*.checked.)/i,Mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Dt(t,e){return O(t,"table")&&O(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function It(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Pt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Et(t,e){var n,i,r,o,a,s,l,h;if(1===e.nodeType){if($.hasData(t)&&(o=$.access(t),a=$.set(e,o),h=o.events))for(r in delete a.handle,a.events={},h)for(n=0,i=h[r].length;n<i;n++)T.event.add(e,r,h[r][n]);K.hasData(t)&&(s=K.access(t),l=T.extend({},s),K.set(e,l))}}function Lt(n,i,r,o){i=g.apply([],i);var t,e,a,s,l,h,c=0,u=n.length,f=u-1,d=i[0],p=y(d);if(p||1<u&&"string"==typeof d&&!m.checkClone&&At.test(d))return n.each(function(t){var e=n.eq(t);p&&(i[0]=d.call(this,t,e.html())),Lt(e,i,r,o)});if(u&&(e=(t=mt(i,n[0].ownerDocument,!1,n,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(s=(a=T.map(ft(t,"script"),It)).length;c<u;c++)l=t,c!==f&&(l=T.clone(l,!0,!0),s&&T.merge(a,ft(l,"script"))),r.call(n[c],l,c);if(s)for(h=a[a.length-1].ownerDocument,T.map(a,Pt),c=0;c<s;c++)l=a[c],ct.test(l.type||"")&&!$.access(l,"globalEval")&&T.contains(h,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?T._evalUrl&&T._evalUrl(l.src):x(l.textContent.replace(Mt,""),h,l))}return n}function jt(t,e,n){for(var i,r=e?T.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||T.cleanData(ft(i)),i.parentNode&&(n&&T.contains(i.ownerDocument,i)&&dt(ft(i,"script")),i.parentNode.removeChild(i));return t}T.extend({htmlPrefilter:function(t){return t.replace(kt,"<$1></$2>")},clone:function(t,e,n){var i,r,o,a,s,l,h,c=t.cloneNode(!0),u=T.contains(t.ownerDocument,t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(a=ft(c),i=0,r=(o=ft(t)).length;i<r;i++)s=o[i],l=a[i],void 0,"input"===(h=l.nodeName.toLowerCase())&&lt.test(s.type)?l.checked=s.checked:"input"!==h&&"textarea"!==h||(l.defaultValue=s.defaultValue);if(e)if(n)for(o=o||ft(t),a=a||ft(c),i=0,r=o.length;i<r;i++)Et(o[i],a[i]);else Et(t,c);return 0<(a=ft(c,"script")).length&&dt(a,!u&&ft(t,"script")),c},cleanData:function(t){for(var e,n,i,r=T.event.special,o=0;void 0!==(n=t[o]);o++)if(V(n)){if(e=n[$.expando]){if(e.events)for(i in e.events)r[i]?T.event.remove(n,i):T.removeEvent(n,i,e.handle);n[$.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),T.fn.extend({detach:function(t){return jt(this,t,!0)},remove:function(t){return jt(this,t)},text:function(t){return W(this,function(t){return void 0===t?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Lt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Dt(this,t).appendChild(t)})},prepend:function(){return Lt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Dt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Lt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Lt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(ft(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return T.clone(this,t,e)})},html:function(t){return W(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ot.test(t)&&!ut[(ht.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(T.cleanData(ft(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return Lt(this,arguments,function(t){var e=this.parentNode;T.inArray(this,n)<0&&(T.cleanData(ft(this)),e&&e.replaceChild(t,this))},n)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){T.fn[t]=function(t){for(var e,n=[],i=T(t),r=i.length-1,o=0;o<=r;o++)e=o===r?this:this.clone(!0),T(i[o])[a](e),l.apply(n,e.get());return this.pushStack(n)}});var Rt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Bt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=S),e.getComputedStyle(t)},Ft=new RegExp(nt.join("|"),"i");function Nt(t,e,n){var i,r,o,a,s=t.style;return(n=n||Bt(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||T.contains(t.ownerDocument,t)||(a=T.style(t,e)),!m.pixelBoxStyles()&&Rt.test(a)&&Ft.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function zt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",yt.appendChild(s).appendChild(l);var t=S.getComputedStyle(l);n="1%"!==t.top,a=12===e(t.marginLeft),l.style.right="60%",o=36===e(t.right),i=36===e(t.width),l.style.position="absolute",r=36===l.offsetWidth||"absolute",yt.removeChild(s),l=null}}function e(t){return Math.round(parseFloat(t))}var n,i,r,o,a,s=C.createElement("div"),l=C.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===l.style.backgroundClip,T.extend(m,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),a},scrollboxSize:function(){return t(),r}}))}();var Ht=/^(none|table(?!-c[ea]).+)/,Wt=/^--/,Gt={position:"absolute",visibility:"hidden",display:"block"},Ut={letterSpacing:"0",fontWeight:"400"},Xt=["Webkit","Moz","ms"],Yt=C.createElement("div").style;function Vt(t){var e=T.cssProps[t];return e||(e=T.cssProps[t]=function(t){if(t in Yt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Xt.length;n--;)if((t=Xt[n]+e)in Yt)return t}(t)||t),e}function qt(t,e,n){var i=et.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function $t(t,e,n,i,r,o){var a="width"===e?1:0,s=0,l=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=T.css(t,n+nt[a],!0,r)),i?("content"===n&&(l-=T.css(t,"padding"+nt[a],!0,r)),"margin"!==n&&(l-=T.css(t,"border"+nt[a]+"Width",!0,r))):(l+=T.css(t,"padding"+nt[a],!0,r),"padding"!==n?l+=T.css(t,"border"+nt[a]+"Width",!0,r):s+=T.css(t,"border"+nt[a]+"Width",!0,r));return!i&&0<=o&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))),l}function Kt(t,e,n){var i=Bt(t),r=Nt(t,e,i),o="border-box"===T.css(t,"boxSizing",!1,i),a=o;if(Rt.test(r)){if(!n)return r;r="auto"}return a=a&&(m.boxSizingReliable()||r===t.style[e]),("auto"===r||!parseFloat(r)&&"inline"===T.css(t,"display",!1,i))&&(r=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(r=parseFloat(r)||0)+$t(t,e,n||(o?"border":"content"),a,i,r)+"px"}function Zt(t,e,n,i,r){return new Zt.prototype.init(t,e,n,i,r)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Nt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=Y(e),l=Wt.test(e),h=t.style;if(l||(e=Vt(s)),a=T.cssHooks[e]||T.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:h[e];"string"===(o=typeof n)&&(r=et.exec(n))&&r[1]&&(n=ot(t,e,r),o="number"),null!=n&&n==n&&("number"===o&&(n+=r&&r[3]||(T.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==e.indexOf("background")||(h[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(l?h.setProperty(e,n):h[e]=n))}},css:function(t,e,n,i){var r,o,a,s=Y(e);return Wt.test(e)||(e=Vt(s)),(a=T.cssHooks[e]||T.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=Nt(t,e,i)),"normal"===r&&e in Ut&&(r=Ut[e]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),T.each(["height","width"],function(t,s){T.cssHooks[s]={get:function(t,e,n){if(e)return!Ht.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Kt(t,s,n):rt(t,Gt,function(){return Kt(t,s,n)})},set:function(t,e,n){var i,r=Bt(t),o="border-box"===T.css(t,"boxSizing",!1,r),a=n&&$t(t,s,n,o,r);return o&&m.scrollboxSize()===r.position&&(a-=Math.ceil(t["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(r[s])-$t(t,s,"border",!1,r)-.5)),a&&(i=et.exec(e))&&"px"!==(i[3]||"px")&&(t.style[s]=e,e=T.css(t,s)),qt(0,e,a)}}}),T.cssHooks.marginLeft=zt(m.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Nt(t,"marginLeft"))||t.getBoundingClientRect().left-rt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(r,o){T.cssHooks[r+o]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[r+nt[e]+o]=i[e]||i[e-2]||i[0];return n}},"margin"!==r&&(T.cssHooks[r+o].set=qt)}),T.fn.extend({css:function(t,e){return W(this,function(t,e,n){var i,r,o={},a=0;if(Array.isArray(e)){for(i=Bt(t),r=e.length;a<r;a++)o[e[a]]=T.css(t,e[a],!1,i);return o}return void 0!==n?T.style(t,e,n):T.css(t,e)},t,e,1<arguments.length)}}),((T.Tween=Zt).prototype={constructor:Zt,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(T.cssNumber[n]?"":"px")},cur:function(){var t=Zt.propHooks[this.prop];return t&&t.get?t.get(this):Zt.propHooks._default.get(this)},run:function(t){var e,n=Zt.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Zt.propHooks._default.set(this),this}}).init.prototype=Zt.prototype,(Zt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=T.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[T.cssProps[t.prop]]&&!T.cssHooks[t.prop]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=Zt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},T.fx=Zt.prototype.init,T.fx.step={};var Jt,Qt,te,ee,ne=/^(?:toggle|show|hide)$/,ie=/queueHooks$/;function re(){Qt&&(!1===C.hidden&&S.requestAnimationFrame?S.requestAnimationFrame(re):S.setTimeout(re,T.fx.interval),T.fx.tick())}function oe(){return S.setTimeout(function(){Jt=void 0}),Jt=Date.now()}function ae(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=nt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function se(t,e,n){for(var i,r=(le.tweeners[e]||[]).concat(le.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,e,t))return i}function le(o,t,e){var n,a,i=0,r=le.prefilters.length,s=T.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=Jt||oe(),e=Math.max(0,h.startTime+h.duration-t),n=1-(e/h.duration||0),i=0,r=h.tweens.length;i<r;i++)h.tweens[i].run(n);return s.notifyWith(o,[h,n,e]),n<1&&r?e:(r||s.notifyWith(o,[h,1,0]),s.resolveWith(o,[h]),!1)},h=s.promise({elem:o,props:T.extend({},t),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},e),originalProperties:t,originalOptions:e,startTime:Jt||oe(),duration:e.duration,tweens:[],createTween:function(t,e){var n=T.Tween(o,h.opts,t,e,h.opts.specialEasing[t]||h.opts.easing);return h.tweens.push(n),n},stop:function(t){var e=0,n=t?h.tweens.length:0;if(a)return this;for(a=!0;e<n;e++)h.tweens[e].run(1);return t?(s.notifyWith(o,[h,1,0]),s.resolveWith(o,[h,t])):s.rejectWith(o,[h,t]),this}}),c=h.props;for(!function(t,e){var n,i,r,o,a;for(n in t)if(r=e[i=Y(n)],o=t[n],Array.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(a=T.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}(c,h.opts.specialEasing);i<r;i++)if(n=le.prefilters[i].call(h,o,c,h.opts))return y(n.stop)&&(T._queueHooks(h.elem,h.opts.queue).stop=n.stop.bind(n)),n;return T.map(c,se,h),y(h.opts.start)&&h.opts.start.call(o,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),T.fx.timer(T.extend(l,{elem:o,anim:h,queue:h.opts.queue})),h}T.Animation=T.extend(le,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ot(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(j);for(var n,i=0,r=t.length;i<r;i++)n=t[i],le.tweeners[n]=le.tweeners[n]||[],le.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,o,a,s,l,h,c,u="width"in e||"height"in e,f=this,d={},p=t.style,g=t.nodeType&&it(t),v=$.get(t,"fxshow");for(i in n.queue||(null==(a=T._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,T.queue(t,"fx").length||a.empty.fire()})})),e)if(r=e[i],ne.test(r)){if(delete e[i],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!v||void 0===v[i])continue;g=!0}d[i]=v&&v[i]||T.style(t,i)}if((l=!T.isEmptyObject(e))||!T.isEmptyObject(d))for(i in u&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(h=v&&v.display)&&(h=$.get(t,"display")),"none"===(c=T.css(t,"display"))&&(h?c=h:(st([t],!0),h=t.style.display||h,c=T.css(t,"display"),st([t]))),("inline"===c||"inline-block"===c&&null!=h)&&"none"===T.css(t,"float")&&(l||(f.done(function(){p.display=h}),null==h&&(c=p.display,h="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,d)l||(v?"hidden"in v&&(g=v.hidden):v=$.access(t,"fxshow",{display:h}),o&&(v.hidden=!g),g&&st([t],!0),f.done(function(){for(i in g||st([t]),$.remove(t,"fxshow"),d)T.style(t,i,d[i])})),l=se(g?v[i]:0,i,f),i in v||(v[i]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?le.prefilters.unshift(t):le.prefilters.push(t)}}),T.speed=function(t,e,n){var i=t&&"object"==typeof t?T.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return T.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in T.fx.speeds?i.duration=T.fx.speeds[i.duration]:i.duration=T.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&T.dequeue(this,i.queue)},i},T.fn.extend({fadeTo:function(t,e,n,i){return this.filter(it).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){var r=T.isEmptyObject(e),o=T.speed(t,n,i),a=function(){var t=le(this,T.extend({},e),o);(r||$.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(r,t,o){var a=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof r&&(o=t,t=r,r=void 0),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",n=T.timers,i=$.get(this);if(e)i[e]&&i[e].stop&&a(i[e]);else for(e in i)i[e]&&i[e].stop&&ie.test(e)&&a(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=r&&n[e].queue!==r||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||T.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=$.get(this),n=e[a+"queue"],i=e[a+"queueHooks"],r=T.timers,o=n?n.length:0;for(e.finish=!0,T.queue(this,a,[]),i&&i.stop&&i.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===a&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),T.each(["toggle","show","hide"],function(t,i){var r=T.fn[i];T.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(ae(i,!0),t,e,n)}}),T.each({slideDown:ae("show"),slideUp:ae("hide"),slideToggle:ae("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){T.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),T.timers=[],T.fx.tick=function(){var t,e=0,n=T.timers;for(Jt=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||T.fx.stop(),Jt=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){Qt||(Qt=!0,re())},T.fx.stop=function(){Qt=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(i,t){return i=T.fx&&T.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=S.setTimeout(t,i);e.stop=function(){S.clearTimeout(n)}})},te=C.createElement("input"),ee=C.createElement("select").appendChild(C.createElement("option")),te.type="checkbox",m.checkOn=""!==te.value,m.optSelected=ee.selected,(te=C.createElement("input")).value="t",te.type="radio",m.radioValue="t"===te.value;var he,ce=T.expr.attrHandle;T.fn.extend({attr:function(t,e){return W(this,T.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){T.removeAttr(this,t)})}}),T.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?T.prop(t,e,n):(1===o&&T.isXMLDoc(t)||(r=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?he:void 0)),void 0!==n?null===n?void T.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=T.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&O(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(j);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),he={set:function(t,e,n){return!1===e?T.removeAttr(t,n):t.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),function(t,e){var a=ce[e]||T.find.attr;ce[e]=function(t,e,n){var i,r,o=e.toLowerCase();return n||(r=ce[o],ce[o]=i,i=null!=a(t,e,n)?o:null,ce[o]=r),i}});var ue=/^(?:input|select|textarea|button)$/i,fe=/^(?:a|area)$/i;function de(t){return(t.match(j)||[]).join(" ")}function pe(t){return t.getAttribute&&t.getAttribute("class")||""}function ge(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(j)||[]}T.fn.extend({prop:function(t,e){return W(this,T.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[T.propFix[t]||t]})}}),T.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&T.isXMLDoc(t)||(e=T.propFix[e]||e,r=T.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):ue.test(t.nodeName)||fe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(T.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,l=0;if(y(e))return this.each(function(t){T(this).addClass(e.call(this,t,pe(this)))});if((t=ge(e)).length)for(;n=this[l++];)if(r=pe(n),i=1===n.nodeType&&" "+de(r)+" "){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=de(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,l=0;if(y(e))return this.each(function(t){T(this).removeClass(e.call(this,t,pe(this)))});if(!arguments.length)return this.attr("class","");if((t=ge(e)).length)for(;n=this[l++];)if(r=pe(n),i=1===n.nodeType&&" "+de(r)+" "){for(a=0;o=t[a++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");r!==(s=de(i))&&n.setAttribute("class",s)}return this},toggleClass:function(r,e){var o=typeof r,a="string"===o||Array.isArray(r);return"boolean"==typeof e&&a?e?this.addClass(r):this.removeClass(r):y(r)?this.each(function(t){T(this).toggleClass(r.call(this,t,pe(this),e),e)}):this.each(function(){var t,e,n,i;if(a)for(e=0,n=T(this),i=ge(r);t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==r&&"boolean"!==o||((t=pe(this))&&$.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===r?"":$.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+de(pe(n))+" ").indexOf(e))return!0;return!1}});var ve=/\r/g;T.fn.extend({val:function(n){var i,t,r,e=this[0];return arguments.length?(r=y(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?n.call(this,t,T(this).val()):n)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=T.map(e,function(t){return null==t?"":t+""})),(i=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):e?(i=T.valHooks[e.type]||T.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&void 0!==(t=i.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(ve,""):null==t?"":t:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:de(T.text(t))}},select:{get:function(t){var e,n,i,r=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:r.length;for(i=o<0?l:a?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!O(n.parentNode,"optgroup"))){if(e=T(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=T.makeArray(e),a=r.length;a--;)((i=r[a]).selected=-1<T.inArray(T.valHooks.option.get(i),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<T.inArray(T(t).val(),e)}},m.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),m.focusin="onfocusin"in S;var me=/^(?:focusinfocus|focusoutblur)$/,ye=function(t){t.stopPropagation()};T.extend(T.event,{trigger:function(t,e,n,i){var r,o,a,s,l,h,c,u,f=[n||C],d=v.call(t,"type")?t.type:t,p=v.call(t,"namespace")?t.namespace.split("."):[];if(o=u=a=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!me.test(d+T.event.triggered)&&(-1<d.indexOf(".")&&(d=(p=d.split(".")).shift(),p.sort()),l=d.indexOf(":")<0&&"on"+d,(t=t[T.expando]?t:new T.Event(d,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:T.makeArray(e,[t]),c=T.event.special[d]||{},i||!c.trigger||!1!==c.trigger.apply(n,e))){if(!i&&!c.noBubble&&!_(n)){for(s=c.delegateType||d,me.test(s+d)||(o=o.parentNode);o;o=o.parentNode)f.push(o),a=o;a===(n.ownerDocument||C)&&f.push(a.defaultView||a.parentWindow||S)}for(r=0;(o=f[r++])&&!t.isPropagationStopped();)u=o,t.type=1<r?s:c.bindType||d,(h=($.get(o,"events")||{})[t.type]&&$.get(o,"handle"))&&h.apply(o,e),(h=l&&o[l])&&h.apply&&V(o)&&(t.result=h.apply(o,e),!1===t.result&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(f.pop(),e)||!V(n)||l&&y(n[d])&&!_(n)&&((a=n[l])&&(n[l]=null),T.event.triggered=d,t.isPropagationStopped()&&u.addEventListener(d,ye),n[d](),t.isPropagationStopped()&&u.removeEventListener(d,ye),T.event.triggered=void 0,a&&(n[l]=a)),t.result}},simulate:function(t,e,n){var i=T.extend(new T.Event,n,{type:t,isSimulated:!0});T.event.trigger(i,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each(function(){T.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return T.event.trigger(t,e,n,!0)}}),m.focusin||T.each({focus:"focusin",blur:"focusout"},function(n,i){var r=function(t){T.event.simulate(i,t.target,T.event.fix(t))};T.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=$.access(t,i);e||t.addEventListener(n,r,!0),$.access(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=$.access(t,i)-1;e?$.access(t,i,e):(t.removeEventListener(n,r,!0),$.remove(t,i))}}});var _e=S.location,xe=Date.now(),be=/\?/;T.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new S.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+t),e};var we=/\[\]$/,Se=/\r?\n/g,Ce=/^(?:submit|button|image|reset|file)$/i,Te=/^(?:input|select|textarea|keygen)/i;function ke(n,t,i,r){var e;if(Array.isArray(t))T.each(t,function(t,e){i||we.test(n)?r(n,e):ke(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,i,r)});else if(i||"object"!==b(t))r(n,t);else for(e in t)ke(n+"["+e+"]",t[e],i,r)}T.param=function(t,e){var n,i=[],r=function(t,e){var n=y(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,function(){r(this.name,this.value)});else for(n in t)ke(n,t[n],e,r);return i.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&Te.test(this.nodeName)&&!Ce.test(t)&&(this.checked||!lt.test(t))}).map(function(t,e){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,function(t){return{name:e.name,value:t.replace(Se,"\r\n")}}):{name:e.name,value:n.replace(Se,"\r\n")}}).get()}});var Oe=/%20/g,Ae=/#.*$/,Me=/([?&])_=[^&]*/,De=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ie=/^(?:GET|HEAD)$/,Pe=/^\/\//,Ee={},Le={},je="*/".concat("*"),Re=C.createElement("a");function Be(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,r=t.toLowerCase().match(j)||[];if(y(e))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function Fe(e,r,o,a){var s={},l=e===Le;function h(t){var i;return s[t]=!0,T.each(e[t]||[],function(t,e){var n=e(r,o,a);return"string"!=typeof n||l||s[n]?l?!(i=n):void 0:(r.dataTypes.unshift(n),h(n),!1)}),i}return h(r.dataTypes[0])||!s["*"]&&h("*")}function Ne(t,e){var n,i,r=T.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&T.extend(!0,t,i),t}Re.href=_e.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_e.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_e.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":je,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ne(Ne(t,T.ajaxSettings),e):Ne(T.ajaxSettings,t)},ajaxPrefilter:Be(Ee),ajaxTransport:Be(Le),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var c,u,f,n,d,i,p,g,r,o,v=T.ajaxSetup({},e),m=v.context||v,y=v.context&&(m.nodeType||m.jquery)?T(m):T.event,_=T.Deferred(),x=T.Callbacks("once memory"),b=v.statusCode||{},a={},s={},l="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(p){if(!n)for(n={};e=De.exec(f);)n[e[1].toLowerCase()]=e[2];e=n[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return p?f:null},setRequestHeader:function(t,e){return null==p&&(t=s[t.toLowerCase()]=s[t.toLowerCase()]||t,a[t]=e),this},overrideMimeType:function(t){return null==p&&(v.mimeType=t),this},statusCode:function(t){var e;if(t)if(p)w.always(t[w.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||l;return c&&c.abort(e),h(0,e),this}};if(_.promise(w),v.url=((t||v.url||_e.href)+"").replace(Pe,_e.protocol+"//"),v.type=e.method||e.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(j)||[""],null==v.crossDomain){i=C.createElement("a");try{i.href=v.url,i.href=i.href,v.crossDomain=Re.protocol+"//"+Re.host!=i.protocol+"//"+i.host}catch(t){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=T.param(v.data,v.traditional)),Fe(Ee,v,e,w),p)return w;for(r in(g=T.event&&v.global)&&0==T.active++&&T.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ie.test(v.type),u=v.url.replace(Ae,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Oe,"+")):(o=v.url.slice(u.length),v.data&&(v.processData||"string"==typeof v.data)&&(u+=(be.test(u)?"&":"?")+v.data,delete v.data),!1===v.cache&&(u=u.replace(Me,"$1"),o=(be.test(u)?"&":"?")+"_="+xe+++o),v.url=u+o),v.ifModified&&(T.lastModified[u]&&w.setRequestHeader("If-Modified-Since",T.lastModified[u]),T.etag[u]&&w.setRequestHeader("If-None-Match",T.etag[u])),(v.data&&v.hasContent&&!1!==v.contentType||e.contentType)&&w.setRequestHeader("Content-Type",v.contentType),w.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+je+"; q=0.01":""):v.accepts["*"]),v.headers)w.setRequestHeader(r,v.headers[r]);if(v.beforeSend&&(!1===v.beforeSend.call(m,w,v)||p))return w.abort();if(l="abort",x.add(v.complete),w.done(v.success),w.fail(v.error),c=Fe(Le,v,e,w)){if(w.readyState=1,g&&y.trigger("ajaxSend",[w,v]),p)return w;v.async&&0<v.timeout&&(d=S.setTimeout(function(){w.abort("timeout")},v.timeout));try{p=!1,c.send(a,h)}catch(t){if(p)throw t;h(-1,t)}}else h(-1,"No Transport");function h(t,e,n,i){var r,o,a,s,l,h=e;p||(p=!0,d&&S.clearTimeout(d),c=void 0,f=i||"",w.readyState=0<t?4:0,r=200<=t&&t<300||304===t,n&&(s=function(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(v,w,n)),s=function(t,e,n,i){var r,o,a,s,l,h={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)h[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=h[l+" "+o]||h["* "+o]))for(r in h)if((s=r.split(" "))[1]===o&&(a=h[l+" "+s[0]]||h["* "+s[0]])){!0===a?a=h[r]:!0!==h[r]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(v,s,w,r),r?(v.ifModified&&((l=w.getResponseHeader("Last-Modified"))&&(T.lastModified[u]=l),(l=w.getResponseHeader("etag"))&&(T.etag[u]=l)),204===t||"HEAD"===v.type?h="nocontent":304===t?h="notmodified":(h=s.state,o=s.data,r=!(a=s.error))):(a=h,!t&&h||(h="error",t<0&&(t=0))),w.status=t,w.statusText=(e||h)+"",r?_.resolveWith(m,[o,h,w]):_.rejectWith(m,[w,h,a]),w.statusCode(b),b=void 0,g&&y.trigger(r?"ajaxSuccess":"ajaxError",[w,v,r?o:a]),x.fireWith(m,[w,h]),g&&(y.trigger("ajaxComplete",[w,v]),--T.active||T.event.trigger("ajaxStop")))}return w},getJSON:function(t,e,n){return T.get(t,e,n,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],function(t,r){T[r]=function(t,e,n,i){return y(e)&&(i=i||n,n=e,e=void 0),T.ajax(T.extend({url:t,type:r,dataType:i,data:e,success:n},T.isPlainObject(t)&&t))}}),T._evalUrl=function(t){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},T.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return y(n)?this.each(function(t){T(this).wrapInner(n.call(this,t))}):this.each(function(){var t=T(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=y(e);return this.each(function(t){T(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new S.XMLHttpRequest}catch(t){}};var ze={0:200,1223:204},He=T.ajaxSettings.xhr();m.cors=!!He&&"withCredentials"in He,m.ajax=He=!!He,T.ajaxTransport(function(r){var o,a;if(m.cors||He&&!r.crossDomain)return{send:function(t,e){var n,i=r.xhr();if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)i.setRequestHeader(n,t[n]);o=function(t){return function(){o&&(o=a=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===t?i.abort():"error"===t?"number"!=typeof i.status?e(0,"error"):e(i.status,i.statusText):e(ze[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=o(),a=i.onerror=i.ontimeout=o("error"),void 0!==i.onabort?i.onabort=a:i.onreadystatechange=function(){4===i.readyState&&S.setTimeout(function(){o&&a()})},o=o("abort");try{i.send(r.hasContent&&r.data||null)}catch(t){if(o)throw t}},abort:function(){o&&o()}}}),T.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),T.ajaxTransport("script",function(n){var i,r;if(n.crossDomain)return{send:function(t,e){i=T("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(t){i.remove(),r=null,t&&e("error"===t.type?404:200,t.type)}),C.head.appendChild(i[0])},abort:function(){r&&r()}}});var We,Ge=[],Ue=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ge.pop()||T.expando+"_"+xe++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",function(t,e,n){var i,r,o,a=!1!==t.jsonp&&(Ue.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ue.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ue,"$1"+i):!1!==t.jsonp&&(t.url+=(be.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||T.error(i+" was not called"),o[0]},t.dataTypes[0]="json",r=S[i],S[i]=function(){o=arguments},n.always(function(){void 0===r?T(S).removeProp(i):S[i]=r,t[i]&&(t.jsonpCallback=e.jsonpCallback,Ge.push(i)),o&&y(r)&&r(o[0]),o=r=void 0}),"script"}),m.createHTMLDocument=((We=C.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===We.childNodes.length),T.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(m.createHTMLDocument?((i=(e=C.implementation.createHTMLDocument("")).createElement("base")).href=C.location.href,e.head.appendChild(i)):e=C),o=!n&&[],(r=A.exec(t))?[e.createElement(r[1])]:(r=mt([t],e,o),o&&o.length&&T(o).remove(),T.merge([],r.childNodes)));var i,r,o},T.fn.load=function(t,e,n){var i,r,o,a=this,s=t.indexOf(" ");return-1<s&&(i=de(t.slice(s)),t=t.slice(0,s)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),0<a.length&&T.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?T("<div>").append(T.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){T.fn[e]=function(t){return this.on(e,t)}}),T.expr.pseudos.animated=function(e){return T.grep(T.timers,function(t){return e===t.elem}).length},T.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,h=T.css(t,"position"),c=T(t),u={};"static"===h&&(t.style.position="relative"),s=c.offset(),o=T.css(t,"top"),l=T.css(t,"left"),("absolute"===h||"fixed"===h)&&-1<(o+l).indexOf("auto")?(a=(i=c.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),y(e)&&(e=e.call(t,n,T.extend({},s))),null!=e.top&&(u.top=e.top-s.top+a),null!=e.left&&(u.left=e.left-s.left+r),"using"in e?e.using.call(t,u):c.css(u)}},T.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){T.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===T.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),r.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-T.css(i,"marginTop",!0),left:e.left-r.left-T.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||yt})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var o="pageYOffset"===r;T.fn[e]=function(t){return W(this,function(t,e,n){var i;if(_(t)?i=t:9===t.nodeType&&(i=t.defaultView),void 0===n)return i?i[r]:t[e];i?i.scrollTo(o?i.pageXOffset:n,o?n:i.pageYOffset):t[e]=n},e,t,arguments.length)}}),T.each(["top","left"],function(t,n){T.cssHooks[n]=zt(m.pixelPosition,function(t,e){if(e)return e=Nt(t,n),Rt.test(e)?T(t).position()[n]+"px":e})}),T.each({Height:"height",Width:"width"},function(a,s){T.each({padding:"inner"+a,content:s,"":"outer"+a},function(i,o){T.fn[o]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),r=i||(!0===t||!0===e?"margin":"border");return W(this,function(t,e,n){var i;return _(t)?0===o.indexOf("outer")?t["inner"+a]:t.document.documentElement["client"+a]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+a],i["scroll"+a],t.body["offset"+a],i["offset"+a],i["client"+a])):void 0===n?T.css(t,e,r):T.style(t,e,n,r)},s,n?t:void 0,n)}})}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){T.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),T.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),T.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),T.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return i=s.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(s.call(arguments)))}).guid=t.guid=t.guid||T.guid++,r},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=O,T.isFunction=y,T.isWindow=_,T.camelCase=Y,T.type=b,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===($e=function(){return T}.apply(qe,[]))||(Ve.exports=$e);var Xe=S.jQuery,Ye=S.$;return T.noConflict=function(t){return S.$===T&&(S.$=Ye),t&&S.jQuery===T&&(S.jQuery=Xe),T},t||(S.jQuery=S.$=T),T})},function(t,e,n){var i,r,o;o=function(){var t,u,e,o={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},a=(t=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},u=o.defaultRadius,t.prototype={_organiseData:function(t,e){var n=t[this._xField],i=t[this._yField],r=this._radi,o=this._data,a=this._max,s=this._min,l=t[this._valueField]||1,h=t.radius||this._cfgRadius||u;o[n]||(o[n]=[],r[n]=[]),o[n][i]?o[n][i]+=l:(o[n][i]=l,r[n][i]=h);var c=o[n][i];return a<c?(e?this.setDataMax(c):this._max=c,!1):c<s?(e?this.setDataMin(c):this._min=c,!1):{x:n,y:i,value:l,radius:h,min:s,max:a}},_unOrganizeData:function(){var t=[],e=this._data,n=this._radi;for(var i in e)for(var r in e[i])t.push({x:i,y:r,radius:n[i][r],value:e[i][r]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(0<arguments[0].length)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var n=this._organiseData(arguments[0],!0);n&&(0===this._data.length&&(this._min=this._max=n.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[n]}))}return this},setData:function(t){var e=t.data,n=e.length;this._data=[],this._radi=[];for(var i=0;i<n;i++)this._organiseData(e[i],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},t),n=function(){var o=function(t){var e=t.gradient||t.defaultGradient,n=document.createElement("canvas"),i=n.getContext("2d");n.width=256,n.height=1;var r=i.createLinearGradient(0,0,256,1);for(var o in e)r.addColorStop(o,e[o]);return i.fillStyle=r,i.fillRect(0,0,256,1),i.getImageData(0,0,256,1).data},g=function(t,e){var n=document.createElement("canvas"),i=n.getContext("2d"),r=t,o=t;if(n.width=n.height=2*t,1==e)i.beginPath(),i.arc(r,o,t,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{var a=i.createRadialGradient(r,o,t*e,r,o,t);a.addColorStop(0,"rgba(0,0,0,1)"),a.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=a,i.fillRect(0,0,2*t,2*t)}return n};function t(t){var e=t.container,n=this.shadowCanvas=document.createElement("canvas"),i=this.canvas=t.canvas||document.createElement("canvas"),r=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(t.container)||{});i.className="heatmap-canvas",this._width=i.width=n.width=t.width||+r.width.replace(/px/,""),this._height=i.height=n.height=t.height||+r.height.replace(/px/,""),this.shadowCtx=n.getContext("2d"),this.ctx=i.getContext("2d"),i.style.cssText=n.style.cssText="position:absolute;left:0;top:0;",e.style.position="relative",e.appendChild(i),this._palette=o(t),this._templates={},this._setStyles(t)}return t.prototype={renderPartial:function(t){0<t.data.length&&(this._drawAlpha(t),this._colorize())},renderAll:function(t){this._clear(),0<t.data.length&&(this._drawAlpha(function(t){for(var e=[],n=t.min,i=t.max,r=t.radi,o=(t=t.data,Object.keys(t)),a=o.length;a--;)for(var s=o[a],l=Object.keys(t[s]),h=l.length;h--;){var c=l[h],u=t[s][c],f=r[s][c];e.push({x:s,y:c,value:u,radius:f})}return{min:n,max:i,data:e}}(t)),this._colorize())},_updateGradient:function(t){this._palette=o(t)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=t.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=t.height||this._height,this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var e=this._min=t.min,n=this._max=t.max,i=(t=t.data||[]).length,r=1-this._blur;i--;){var o,a=t[i],s=a.x,l=a.y,h=a.radius,c=Math.min(a.value,n),u=s-h,f=l-h,d=this.shadowCtx;this._templates[h]?o=this._templates[h]:this._templates[h]=o=g(h,r);var p=(c-e)/(n-e);d.globalAlpha=p<.01?.01:p,d.drawImage(o,u,f),u<this._renderBoundaries[0]&&(this._renderBoundaries[0]=u),f<this._renderBoundaries[1]&&(this._renderBoundaries[1]=f),u+2*h>this._renderBoundaries[2]&&(this._renderBoundaries[2]=u+2*h),f+2*h>this._renderBoundaries[3]&&(this._renderBoundaries[3]=f+2*h)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],n=this._renderBoundaries[2]-t,i=this._renderBoundaries[3]-e,r=this._width,o=this._height,a=this._opacity,s=this._maxOpacity,l=this._minOpacity,h=this._useGradientOpacity;t<0&&(t=0),e<0&&(e=0),r<t+n&&(n=r-t),o<e+i&&(i=o-e);for(var c=this.shadowCtx.getImageData(t,e,n,i),u=c.data,f=u.length,d=this._palette,p=3;p<f;p+=4){var g,v=u[p],m=4*v;if(m)g=0<a?a:v<s?v<l?l:v:s,u[p-3]=d[m],u[p-2]=d[m+1],u[p-1]=d[m+2],u[p]=h?d[m+3]:g}c.data=u,this.ctx.putImageData(c,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e=this.shadowCtx.getImageData(t.x,t.y,1,1).data[3],n=this._max,i=this._min;return Math.abs(n-i)*(e/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},t}(),s=(e=!1,"canvas2d"===o.defaultRenderer&&(e=n),e),l={merge:function(){for(var t={},e=arguments.length,n=0;n<e;n++){var i=arguments[n];for(var r in i)t[r]=i[r]}return t}},i=function(){var i=function(){function t(){this.cStore={}}return t.prototype={on:function(t,e,n){var i=this.cStore;i[t]||(i[t]=[]),i[t].push(function(t){return e.call(n,t)})},emit:function(t,e){var n=this.cStore;if(n[t])for(var i=n[t].length,r=0;r<i;r++){(0,n[t][r])(e)}}},t}(),r=function(e){var t=e._renderer,n=e._coordinator,i=e._store;n.on("renderpartial",t.renderPartial,t),n.on("renderall",t.renderAll,t),n.on("extremachange",function(t){e._config.onExtremaChange&&e._config.onExtremaChange({min:t.min,max:t.max,gradient:e._config.gradient||e._config.defaultGradient})}),i.setCoordinator(n)};function t(){var t=this._config=l.merge(o,arguments[0]||{});if(this._coordinator=new i,t.plugin){var e=t.plugin;if(!o.plugins[e])throw new Error("Plugin '"+e+"' not found. Maybe it was not registered.");var n=o.plugins[e];this._renderer=new n.renderer(t),this._store=new n.store(t)}else this._renderer=new s(t),this._store=new a(t);r(this)}return t.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=l.merge(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},t}();return{create:function(t){return new i(t)},register:function(t,e){o.plugins[t]=e}}},void 0!==t&&t.exports?t.exports=o():void 0===(r="function"==typeof(i=o)?i.call(e,n,e,t):i)||(t.exports=r)},function(t,e,n){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{style:"height:"+this.storeHeatmap.heatMapImgHeight+";",attrs:{id:this.heatmapId}})])},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){var i=!1;var r=n(304)(n(1067),n(1068),function(t){i||n(1065)},"data-v-3faf9fa0",null);r.options.__file="/Users/zhouqichao/Desktop/sxkj/shangu_online/src/components/views/businessAnalyze/children/heatMapArea.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] heatMapArea.vue: functional components are not supported with templates, they should use render functions."),t.exports=r.exports},function(t,e,n){var i=n(1066);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(589)("49837e9e",i,!1,{})},function(t,e,n){(t.exports=n(588)()).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},function(t,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),function(t){var e=r(813),n=r(81),o=r(121);r(307);i.default={mixins:[e.a],data:function(){return{areaDataList:[{active:!0,title:"店内人流",name:n.a.ATTR_TRACE_COUNT,data:"-",lastData:"-",isup:!0},{active:!0,title:"平均停留时长",name:n.a.ATTR_AVG_STAY_TIME,data:"-",lastData:"-",isup:!0},{active:!1,title:"男性顾客",name:"male",data:"-",lastData:"-",isup:!0},{active:!1,title:"女性顾客",name:"female",data:"-",lastData:"-",isup:!0},{active:!1,title:"驻足率",name:"stay_rate",data:"-",lastData:"-",isup:!0},{active:!1,title:"儿童顾客",name:"child",data:"-",lastData:"-",isup:!0},{active:!1,title:"青年顾客",name:"young",data:"-",lastData:"-",isup:!0},{active:!1,title:"中年顾客",name:"midlife",data:"-",lastData:"-",isup:!0}]}},props:["storeAttributeData","dateRange"],computed:{requestParamKeys:function(){return t.chain(this.areaDataList).filter({active:!0}).map(function(t){return t.name}).value()},isActiveValid:function(){return!t.isEmpty(this.activeData)},activeData:function(){return t.isEmpty(this.requestAreaData)?{}:this.requestAreaData[0]},compareActiveData:function(){return t.isEmpty(this.requestAreaData)?{}:this.requestAreaData[1]},compareData:function(){var i=this;if(t.isEmpty(this.activeData)||t.isEmpty(this.compareActiveData))return{};var r={};return t.forEach(this.activeData,function(t,e){var n=i.compareActiveData[e];r[e]=o.a.calculateGrowthRate(t,n[e])}),r},requestAreaData:function(){return this.getDataByKeys()}},mounted:function(){},methods:{}}}.call(i,r(122))},function(t,e,n){t.exports={render:function(){var n=this,t=n.$createElement,i=n._self._c||t;return i("div",{staticClass:"all-area-data"},[i("p",{staticClass:"PingFangSC-Medium-font all-area-data-title"},[n._v("全部区域详细数据")]),n._v(" "),i("Row",{staticStyle:{"font-size":"12px"}},[i("Col",{attrs:{span:"7",offset:"17"}},[n._v("较前"+n._s(n.dateRange.value)+"天")])],1),n._v(" "),n._l(n.areaDataList,function(t,e){return i("Row",{key:e,staticStyle:{"font-size":"14px"}},[i("Col",{attrs:{span:"11"}},[n._v(" "+n._s(t.title)+"：")]),n._v(" "),t.active?i("Col",{staticClass:"PingFangSC-Medium-font",attrs:{span:"6"}},[n._v("\n        "+n._s(n.activeData[t.name])+"\n        ")]):i("Col",{staticClass:"PingFangSC-Medium-font",attrs:{span:"6"}},[n._v("\n        "+n._s(t.data)+"\n        ")]),n._v(" "),t.active?i("Col",{class:{upColor:t.isup,downColor:!t.isup},attrs:{span:"7"}},[n._v("\n        "+n._s(n.compareData[t.name])+"\n        ")]):i("Col",{class:{upColor:t.isup,downColor:!t.isup},attrs:{span:"7"}},[n._v("\n        "+n._s(t.lastData)+"\n        ")])],1)})],2)},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){t.exports={render:function(){var n=this,t=n.$createElement,i=n._self._c||t;return i("div",[i("div",{staticClass:"store-hot-content"},[i("p",{staticClass:"store-hot-content-title PingFangSC-Medium-font"},[n._v("热力区域")]),n._v(" "),i("div",{staticClass:"store-hot-content-area"},[i("p",{staticClass:"store-hot-content-area-option"},[i("span",{staticStyle:{"margin-right":"60px"},on:{click:n.adjustFloorPlan}},[n._v("调整平面图")]),n._v(" "),i("span",{on:{click:n.adjustSKU}},[n._v("调整货架SKU")])]),n._v(" "),i("div",{staticClass:"store-hot-content-area-content"},[n._m(0),n._v(" "),i("div",{ref:"hotAreaCon",staticClass:"store-hot-content-area-content-map",staticStyle:{position:"relative"}},[n._m(1),n._v(" "),n.canvasHeight?i("div",[i("AppHeatMap",{attrs:{storeAttributeData:n.storeAttributeData,heatMapImgHeight:n.canvasHeight,heatData:n.formatHeatMapDataByHour,dateRange:n.dateRange}})],1):n._e()]),n._v(" "),i("appHeatMapArea",{attrs:{storeAttributeData:n.storeAttributeData,dateRange:n.dateRange}})],1),n._v(" "),i("Slider",{staticClass:"sliderBar",attrs:{step:1,min:0,max:24,"show-stops":"",range:"","tip-format":n.format},on:{"on-change":n.selectHourTime},model:{value:n.storeHeatSlider,callback:function(t){n.storeHeatSlider=t},expression:"storeHeatSlider"}}),n._v(" "),i("Row",{staticStyle:{width:"100%",padding:"0 30px",height:"1px","margin-top":"-15px"}},n._l(24,function(t){return i("Col",{key:t,staticStyle:{height:"4px",position:"relative","border-left":"1px solid #ccc"},attrs:{span:"1"}},[i("span",{staticStyle:{position:"absolute",top:"4px",left:"-10px"}},[n._v(n._s(t-1)+":00")]),n._v(" "),24===t?i("span",{staticStyle:{position:"absolute",top:"4px",right:"-20px"}},[n._v(n._s(t)+":00")]):n._e()])}))],1)]),n._v(" "),i("div",{ref:"SKUData",staticClass:"show-current-goods-sku"},[i("p",{staticClass:"PingFangSC-Medium-font area-sku-list-title"},[n._v("区域SKU列表")]),n._v(" "),i("div",{staticStyle:{overflow:"hidden",padding:"0 18px"}},n._l(n.targetSKUList,function(t,e){return i("p",{key:e,staticClass:"show-current-goods-sku-list"},[n._v("\n                "+n._s(t)+"\n            ")])}))]),n._v(" "),i("AppAddSkuModal",{attrs:{canvasHeight:n.canvasHeight,canvasWidth:n.canvasWidth,jsonCanvas:n.jsonCanvas,addSKUModal:n.addSKUModal,storeInfo:n.storeInfo}}),n._v(" "),i("AppFloorPlanModal",{attrs:{canvasHeight:n.canvasHeight,canvasWidth:n.canvasWidth,addFloorPlanModal:n.addFloorPlanModal,jsonCanvas:n.jsonCanvas,storeInfo:n.storeInfo},on:{modifyStoreCanvas:function(t){n.reDrawStoreAndObject(t)}}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"intensity"},[n("li",[t._v("稀疏")]),t._v(" "),n("li",[n("p",{staticClass:"intensity-style intensity-style-five"}),t._v(" "),n("p",{staticClass:"intensity-num"},[t._v("0-30")])]),t._v(" "),n("li",[n("p",{staticClass:"intensity-style intensity-style-four"}),t._v(" "),n("p",{staticClass:"intensity-num"},[t._v("30-50")])]),t._v(" "),n("li",[n("p",{staticClass:"intensity-style intensity-style-three"}),t._v(" "),n("p",{staticClass:"intensity-num"},[t._v("50-95")])]),t._v(" "),n("li",[n("p",{staticClass:"intensity-style intensity-style-two"}),t._v(" "),n("p",{staticClass:"intensity-num"},[t._v("95-150")])]),t._v(" "),n("li",[n("p",{staticClass:"intensity-style intensity-style-one"}),t._v(" "),n("p",{staticClass:"intensity-num"},[t._v("150+")])]),t._v(" "),n("li",[t._v("密集")]),t._v(" "),n("li",[t._v("(分钟)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{position:"absolute",top:"0",left:"0"}},[e("canvas",{attrs:{id:"background-plan"}})])}]},t.exports.render._withStripped=!0},function(t,e,n){var i=!1;var r=n(304)(n(1073),n(1076),function(t){i||n(1071)},"data-v-40f07106",null);r.options.__file="/Users/zhouqichao/Desktop/sxkj/shangu_online/src/components/views/businessAnalyze/children/cameraDetailInfo.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] cameraDetailInfo.vue: functional components are not supported with templates, they should use render functions."),t.exports=r.exports},function(t,e,n){var i=n(1072);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(589)("4cbaa746",i,!1,{})},function(t,e,n){(t.exports=n(588)()).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},function(t,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),function(e){var t=f(305),i=f.n(t),n=f(306),r=f.n(n),o=f(307),a=f(897),s=f.n(a),l=f(813),h=f(81),c=f(121);u.default={mixins:[l.a],data:function(){return{requestCameras:[],chartSelector:{currentLabel:"分时段趋势图",format:{"分时段趋势图":function(t){return t},"时段累计图":function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(n){var i=Array(n.length);return e.forEach(n,function(t,e){i[e]=0<e?n[e]+i[e-1]:n[e]}),i})}},cameraDetailData:[{name:"zone_customer",title:"区域顾客数",data:"-",weekBefore:"-",filter:function(t){return t},ifup:!0,active:!1},{name:h.a.ATTR_TRACE_COUNT_G_CAMERA,title:"区域客流数",data:"-",weekBefore:"-",filter:function(t){return t},ifup:!0,active:!0},{name:h.a.ATTR_STAY_TIME_G_CAMERA,title:"区域停留时长",data:"-",weekBefore:"-",filter:function(t){return c.a.formatSeconds(t)},ifup:!0,active:!0},{name:"zone_male",title:"区域男性顾客",data:"-",weekBefore:"-",filter:function(t){return t},ifup:!0,active:!1},{name:"zone_female",title:"区域女性顾客",data:"-",weekBefore:"-",filter:function(t){return t},ifup:!1,active:!1}],cameraDetailDataChild:[{name:"zone_stop_rate",title:"区域驻足率",data:"-",weekBefore:"-",ifup:!0},{name:"zone_child",title:"儿童顾客",data:"-",weekBefore:"-",ifup:!0},{name:"zone_young",title:"青年顾客",data:"-",weekBefore:"-",ifup:!0},{name:"zone_midlife",title:"中年顾客",data:"-",weekBefore:"-",ifup:!0},{name:"zone_old",title:"老年顾客",data:"-",weekBefore:"-",ifup:!0}]}},computed:{dataByCamera:function(){return this.getDataByKeys()},cameraInfoList:{get:function(){return e.map(this.requestCameras,function(t){return{id:t.id.toString(),name:t.name,local_camera_id:t.local_camera_id.toString()}})}},requestParamKeys:function(){return e.chain(this.cameraDetailData).filter({active:!0}).map(function(t){return t.name}).value()},isActiveValid:function(){return!e.isEmpty(this.activeData)},activeData:function(){return e.isEmpty(this.dataByCamera)?{}:this.dataByCamera[0]},compareActiveData:function(){return e.isEmpty(this.dataByCamera)?{}:this.dataByCamera[1]},compareData:function(){var r=this;if(e.isEmpty(this.activeData)||e.isEmpty(this.compareActiveData))return{};var o={};return e.forEach(this.activeData,function(t,i){o[i]={},e.forEach(t,function(t,e){var n=r.compareActiveData[i];o[i][e]=c.a.calculateGrowthRate(t,n[e])})}),o}},components:{heatMapChart:s.a},props:["storeAttributeData","dateRange"],watch:{},mounted:function(){this.initData()},methods:{initData:function(){this.getCameraList()},getCameraList:function(){var n=this;return r()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.W();case 2:(e=t.sent)&&e.data&&(n.requestCameras=e.data);case 4:case"end":return t.stop()}},t,n)}))()}}}}.call(u,f(122))},function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(t){var e=s(767),n=s.n(e),i=s(813),r=s(81),o=s(599);s(673),s(669),s(670),s(671),a.default={mixins:[i.a],props:{className:{type:String,default:"heatMapChart"},id:{type:String,default:"heatMapChart"},width:{type:String,default:"100%"},height:{type:String,default:"100%"},chartSelector:{},storeAttributeData:{}},data:function(){return{myChart:"",requestParamKeys:[r.a.ATTR_TRACE_COUNT_G_HOUR_G_CAMERA]}},computed:{heatMapChartData:function(){return this.chartSelector.format[this.chartSelector.currentLabel](t.at(this.heatMapChartDataRaw,t.sortedUniq(n()(this.heatMapChartDataRaw))))},heatMapChartDataAll:function(){return this.getDataByKeys()},heatMapChartDataRaw:function(){return t.isEmpty(this.heatMapChartDataAll)?[]:this.heatMapChartDataAll[0][r.a.ATTR_TRACE_COUNT_G_HOUR_G_CAMERA][this.id]}},watch:{chartSelector:{handler:"initChart",deep:!0}},mounted:function(){this.initChart()},methods:{menuSizeChange:function(){this.myChart.resize()},initChart:function(){var t=document.getElementById(this.id),e=o.init(t);this.myChart=e;for(var n=[],i=0;i<24;i++)n[i]=i+":00";var r={backgroundColor:"white",tooltip:{trigger:"axis",formatter:function(t){t[0].name=t[0].name.split(":")[0];var e='<p style="height: 22px;line-height: 22px;">'+t[0].name+":00-"+t[0].name+':59</p><div style="background-color:#F5F7F9;font-size:12px;padding:6px;">';return t.forEach(function(t){e+='<p style="height: 22px;line-height: 22px;"><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+t.color+'"></span>',e+=t.seriesName+"：",e+=isNaN(t.value)?0:t.value+"</p>"}),e+="</div>"},backgroundColor:"rgba(255,255,255,1)",padding:[10,10],extraCssText:"box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);",axisPointer:{lineStyle:{color:"#ccc"}},textStyle:{color:"#000",lineHeight:"100px"}},grid:{left:"30px",right:"30px",bottom:"40px",top:"10px"},xAxis:[{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#57617B"}},textStyle:{fontSize:10,color:"#4A4A4A"},data:n}],yAxis:[{type:"value",axisLine:{show:!1,lineStyle:{color:"#57617B"}},axisTick:{show:!1},axisLabel:{show:!1,margin:10,textStyle:{fontSize:14}},splitLine:{lineStyle:{color:"#F1F4F8"}},max:function(t){return t.max+Math.ceil(t.max/5)}}],series:[{name:"区域客流数",type:"line",smooth:!0,symbol:"circle",symbolSize:5,showSymbol:!1,lineStyle:{normal:{width:2}},itemStyle:{normal:{color:"rgb(237,163,58)",borderColor:"rgba(237,163,58, 1)",borderWidth:1}},data:this.heatMapChartData}]};e.setOption(r),window.addEventListener("resize",function(){e.resize()})}}}}.call(a,s(122))},function(t,e,n){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,style:{height:this.height,width:"100%"},attrs:{id:this.id}})},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){t.exports={render:function(){var i=this,t=i.$createElement,r=i._self._c||t;return r("div",{staticClass:"detail-data"},[r("p",{staticClass:"store-hot-content-title PingFangSC-Medium-font detail-info"},[i._v("详细数据")]),i._v(" "),r("Tabs",{staticClass:"camera-tab",attrs:{animated:!1}},i._l(i.cameraInfoList,function(n,t){return r("TabPane",{key:t,attrs:{label:n.name+" - "+n.local_camera_id,name:n.local_camera_id}},[r("div",{staticClass:"store-hot-area-tabs"},i._l(i.cameraDetailData,function(t,e){return r("div",{key:e,staticClass:"store-hot-area-tabs-content-list"},[r("div",[r("p",[i._v(i._s(t.title))]),i._v(" "),t.active&&i.isActiveValid?r("p",{staticClass:"store-hot-area-tabs-content-list-data"},[i._v("\n                            "+i._s(t.filter(i.activeData[t.name][n.local_camera_id.toString()]))+"\n                            ")]):r("p",{staticClass:"store-hot-area-tabs-content-list-data"},[i._v(i._s(t.data))]),i._v(" "),r("p",[i._v("较前"+i._s(i.dateRange.value)+"天\n                            "),t.active&&i.isActiveValid&&i.compareData?r("span",{class:t.ifup?"upData":"downData"},[i._v("\n                                "+i._s(i.compareData[t.name][n.local_camera_id.toString()])+"\n                            ")]):r("span",{class:t.ifup?"upData":"downData"},[i._v("\n                                "+i._s("-")+"\n                            ")])])])])})),i._v(" "),r("div",{staticClass:"store-hot-area-tabs hotDataChild"},i._l(i.cameraDetailDataChild,function(t,e){return r("div",{key:e,staticClass:"store-hot-area-tabs-content-list store-hot-data-children"},[r("div",[r("p",[i._v(i._s(t.title))]),i._v(" "),t.active?r("p",{staticClass:"store-hot-area-tabs-content-list-data"},[i._v("\n                            "+i._s(t.data)+"\n                            "),r("span",{staticStyle:{"font-size":"12px"}},[i._v("分")])]):r("p",{staticClass:"store-hot-area-tabs-content-list-data"},[i._v(i._s(t.data))]),i._v(" "),r("p",[i._v("较前"+i._s(i.dateRange.value)+"天\n                            "),r("span",{class:t.ifup?"upData":"downData"},[i._v("\n                                "+i._s(t.weekBefore)+"\n                            ")])])])])})),i._v(" "),r("div",{staticClass:"heatMapChart-content"},[r("Radio-group",{staticClass:"store-hot-content-type",model:{value:i.chartSelector.currentLabel,callback:function(t){i.$set(i.chartSelector,"currentLabel",t)},expression:"chartSelector.currentLabel"}},i._l(i.chartSelector.format,function(t,e){return r("Radio",{key:e,attrs:{label:e}})})),i._v(" "),r("heatMapChart",{staticClass:"heatMapChart",attrs:{height:"350px",width:"100%",id:n.local_camera_id,chartSelector:i.chartSelector,storeAttributeData:i.storeAttributeData}})],1)])}))],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){var i=!1;var r=n(304)(n(1080),n(1086),function(t){i||n(1078)},"data-v-13cc5004",null);r.options.__file="/Users/zhouqichao/Desktop/sxkj/shangu_online/src/components/views/businessAnalyze/children/cameraHeatmap.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] cameraHeatmap.vue: functional components are not supported with templates, they should use render functions."),t.exports=r.exports},function(t,e,n){var i=n(1079);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(589)("c5877680",i,!1,{})},function(t,e,n){(t.exports=n(588)()).push([t.i,"\n.camera-heatmap-container[data-v-13cc5004] {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    padding: 0 10px;\n}\n.camera-heatmap__draw[data-v-13cc5004] {\n    width: 700px;\n    padding: 0;\n    margin: 0 0;\n}\n\n\n",""])},function(t,m,y){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),function(o){var t=y(305),i=y.n(t),e=y(306),r=y.n(e),n=y(86),a=y.n(n),s=y(307),l=y(897),h=y.n(l),c=y(813),u=y(896),f=y.n(u),d=y(81),p=y(82),g=(y(121),y(1081)),v=y.n(g);m.default={mixins:[c.a],data:function(){return{requestCameras:null,canvasWidth:700,canvasHeight:0,selected_local_camera_id:-1}},computed:{cameraInfoList:{get:function(){return o.map(this.requestCameras,function(t){return{id:t.id.toString(),name:t.name,local_camera_id:t.local_camera_id.toString(),big_image:p.a.ImgSrc+t.big_image,canvasHeight:392}})}},heatDataList:function(){var t=this.storeAttributeData[0][d.a.ATTR_HEAT_MAP_ORIGIN_G_CAMERA],n={};return o.forEach(t,function(t,e){n[e]=[{heat_map:t}]}),n}},components:{heatMapChart:h.a,AppHeatMap:f.a,CameraHeatmapData:v.a},props:["storeAttributeData","dateRange"],watch:{},mounted:function(){this.initData()},methods:{drawHeatMap:function(t){this.selected_local_camera_id=t},getCanvasHeight:function(i){var r=this;return o.isEmpty(i)?0:new a.a(function(t){var e="?"+(new Date).getTime(),n=new Image;n.onload=function(){t(o.floor(n.height*r.canvasWidth/n.width))},n.src=p.a.ImgSrc+i+e})},initData:function(){var e=this;return r()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCameraList();case 2:e.selected_local_camera_id=e.cameraInfoList[0].local_camera_id;case 3:case"end":return t.stop()}},t,e)}))()},getCameraList:function(){var n=this;return r()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.W();case 2:(e=t.sent)&&e.data&&(n.requestCameras=e.data);case 4:case"end":return t.stop()}},t,n)}))()}}}}.call(m,y(122))},function(t,e,n){var i=!1;var r=n(304)(n(1084),n(1085),function(t){i||n(1082)},"data-v-8c1bb870",null);r.options.__file="/Users/zhouqichao/Desktop/sxkj/shangu_online/src/components/views/businessAnalyze/children/cameraHeatmapData.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] cameraHeatmapData.vue: functional components are not supported with templates, they should use render functions."),t.exports=r.exports},function(t,e,n){var i=n(1083);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(589)("ee456b6c",i,!1,{})},function(t,e,n){(t.exports=n(588)()).push([t.i,"\n.camera-heatmap__data[data-v-8c1bb870] {\n    height: 392px;\n    width: calc(100% - 720px);\n}\n.camera-heatmap__data__grid[data-v-8c1bb870] {\n    display: flex;\n    flex-wrap: wrap;\n    flex-direction: row;\n    height: 50%;\n    align-items: center;\n    border: 1px solid #DDD;\n}\n.grid-border[data-v-8c1bb870] {\n    border-top: none;\n}\n.camera-heatmap__data__box[data-v-8c1bb870] {\n    width: 50%;\n    height: 80%;\n    border-right: 1px solid #DDD;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n}\n.camera-heatmap__data__box[data-v-8c1bb870]:last-child {\n    border-right: none;\n}\n.camera-heatmap__data__box p.data-title[data-v-8c1bb870],\n.camera-heatmap__data__box p.data-compare[data-v-8c1bb870] {\n    text-align: center;\n    height: 20%;\n}\n.camera-heatmap__data__box p.data-value[data-v-8c1bb870] {\n    font-size: 30px;\n    font-family: 'Helvetica Neue', Tahoma, Helvetica, Arial, 'Microsoft YaHei';\n    text-align: center;\n    height: 40%;\n}\n.data-compare .up-data[data-v-8c1bb870] {\n    color: #F76D6D;\n}\n.data-compare .down-data[data-v-8c1bb870] {\n    color: #5FBBA7;\n}\n\n\n\n",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(s){var l=n(121),t=n(81);e.default={data:function(){return{firstBoard:[{title:"区域客流数",value:"-",isActive:!0,path:t.a.ATTR_TRACE_COUNT_G_CAMERA,proportion:"-",isUp:!0},{title:"区域顾客数",value:"-",isActive:!1,path:"",proportion:"-",isUp:!0}],secondBoard:[{title:"区域总停留时长",value:"-",isActive:!0,path:t.a.ATTR_STAY_TIME_G_CAMERA,proportion:"-",isUp:!0},{title:"区域平均停留时长",value:"-",isActive:!0,path:t.a.ATTR_AVG_STAY_TIME_G_CAMERA,proportion:"-",isUp:!0}]}},computed:{days:function(){return l.a.dayDiff(this.dateRange.range)},firstBoardValues:function(){var a=this;return s.forEach(this.firstBoard,function(t,e){var n=s.join(["0",t.path,a.selected_local_camera_id],"."),i=s.join(["1",t.path,a.selected_local_camera_id],"."),r=s.result(a.storeAttributeData,n,"-"),o=s.result(a.storeAttributeData,i,"-");t.value=r,t.proportion=l.a.calculateGrowthRate(t.value,o,!0),t.isUp=0<=t.proportion,t.proportion+="%"}),this.firstBoard},secondBoardValues:function(){var o=this;return s.forEach(this.secondBoard,function(t,e){var n=s.join(["0",t.path,o.selected_local_camera_id],"."),i=s.join(["1",t.path,o.selected_local_camera_id],".");t.value=s.result(o.storeAttributeData,n,"-");var r=s.result(o.storeAttributeData,i,"-");t.proportion=l.a.calculateGrowthRate(t.value,r,!0),t.value=l.a.formatSeconds(t.value),t.isUp=0<=t.proportion,t.proportion+="%"}),this.secondBoard}},props:["storeAttributeData","dateRange","selected_local_camera_id"]}}.call(e,n(122))},function(t,e,n){t.exports={render:function(){var n=this,t=n.$createElement,i=n._self._c||t;return i("div",{staticClass:"camera-heatmap__data"},[i("div",{staticClass:"camera-heatmap__data__grid"},n._l(n.firstBoardValues,function(t,e){return i("div",{key:e,staticClass:"camera-heatmap__data__box"},[i("p",{staticClass:"data-title"},[n._v(n._s(t.title))]),n._v(" "),i("p",{staticClass:"data-value"},[n._v(n._s(t.value))]),n._v(" "),i("p",{staticClass:"data-compare"},[i("span",[n._v("较前"+n._s(n.days)+"天")]),n._v(" "),i("span",{class:t.isUp?"up-data":"down-data"},[n._v("\n                    "+n._s(t.proportion)+"\n                ")])])])})),n._v(" "),i("div",{staticClass:"camera-heatmap__data__grid grid-border"},n._l(n.secondBoardValues,function(t,e){return i("div",{key:e,staticClass:"camera-heatmap__data__box"},[i("p",{staticClass:"data-title"},[n._v(n._s(t.title))]),n._v(" "),i("p",{staticClass:"data-value"},[n._v(n._s(t.value))]),n._v(" "),i("p",{staticClass:"data-compare"},[i("span",[n._v("较前"+n._s(n.days)+"天")]),n._v(" "),i("span",{class:t.isUp?"up-data":"down-data"},[n._v("\n                    "+n._s(t.proportion)+"\n                ")])])])}))])},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){t.exports={render:function(){var n=this,t=n.$createElement,i=n._self._c||t;return i("div",{staticClass:"detail-data"},[i("p",{staticClass:"store-hot-content-title PingFangSC-Medium-font detail-info"},[n._v("详细数据")]),n._v(" "),i("Tabs",{staticClass:"camera-tab",attrs:{animated:!1},on:{"on-click":function(t){n.drawHeatMap(t)}}},n._l(n.cameraInfoList,function(t,e){return i("TabPane",{key:e,attrs:{label:t.name+" - "+t.local_camera_id,name:t.local_camera_id}},[i("div",{staticClass:"camera-heatmap-container"},[i("div",{staticClass:"camera-heatmap__draw"},[t.canvasHeight&&n.selected_local_camera_id===t.local_camera_id?i("div",{style:"background: url("+t.big_image+"); background-repeat: no-repeat;background-size: 700px 392px"},[i("AppHeatMap",{attrs:{storeAttributeData:n.storeAttributeData,heatMapImgHeight:t.canvasHeight,heatData:n.heatDataList[t.local_camera_id],local_camera_id:t.local_camera_id,dateRange:n.dateRange}})],1):n._e()]),n._v(" "),i("CameraHeatmapData",{attrs:{storeAttributeData:n.storeAttributeData,dateRange:n.dateRange,selected_local_camera_id:n.selected_local_camera_id}})],1)])}))],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,r,h){"use strict";(function(o){h.d(r,"a",function(){return i});var t=h(305),a=h.n(t),e=h(306),s=h.n(e),n=h(772),l=h(81),i={extends:n.a,created:function(){},computed:{},methods:{getInStoreHeatmap:function(e,n){var i=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[l.a.ATTR_HEAT_MAP,l.a.ATTR_AVG_STAY_TIME,l.a.ATTR_TRACE_COUNT,l.a.ATTR_TRACE_COUNT_G_HOUR,l.a.ATTR_AVG_STAY_TIME_G_CAMERA,l.a.ATTR_TRACE_COUNT_G_CAMERA];return s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.isString(r)?[r]:r,t.next=3,i.getStoreAttributeDataAction([e,n],r);case 3:case"end":return t.stop()}},t,i)}))()}}}}).call(r,h(122))},function(t,e,n){t.exports={render:function(){var n=this,t=n.$createElement,i=n._self._c||t;return i("div",{staticClass:"store-hot"},[i("div",{staticClass:"store-hot-header"},[i("p",{staticClass:"store-hot-header-title PingFangSC-Medium-font"},[n._v("店铺热区")]),n._v(" "),i("p",{staticStyle:{float:"right","margin-right":"28px"}},[n._v(n._s(n.bindDateRangeText))]),n._v(" "),i("p",{staticStyle:{width:"100px",float:"right","margin-right":"28px"}},[i("Select",{on:{"on-change":n.getDataAndRefresh},model:{value:n.dateRange.value,callback:function(t){n.$set(n.dateRange,"value",t)},expression:"dateRange.value"}},n._l(n.heatmapDateRangeList,function(t,e){return i("Option",{key:e,attrs:{value:t.value}},[n._v("\n                    "+n._s(t.text)+"\n                ")])}))],1)]),n._v(" "),n.isRenderStoreHeapMap?i("div",[i("AppStoreHeatmap",{attrs:{storeAttributeData:n.storeAttributeData,dateRange:n.dateRange}})],1):n._e(),n._v(" "),i("div",{staticClass:"interval"}),n._v(" "),n.isRenderStoreHeapMap?i("div",[i("AppCameraHeatMap",{attrs:{storeAttributeData:n.storeAttributeData,dateRange:n.dateRange}})],1):n._e()])},staticRenderFns:[]},t.exports.render._withStripped=!0},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var i=!1;var r=n(304)(n(1023),n(1088),function(t){i||n(1021)},null,null);r.options.__file="/Users/zhouqichao/Desktop/sxkj/shangu_online/src/components/views/businessAnalyze/children/storeHot.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] storeHot.vue: functional components are not supported with templates, they should use render functions."),t.exports=r.exports}]));