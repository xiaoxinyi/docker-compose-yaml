webpackJsonp([22],{1314:function(e,n,t){var s=t(1315);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t(589)("37b91000",s,!1,{})},1315:function(e,n,t){(e.exports=t(588)()).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* === title === */\n.edit-salesClerk .title[data-v-3bb73b86] {\n    font-size: 16px;\n    width: 100%;\n    height: 50px;\n    line-height: 50px;\n    padding-left: 30px;\n}\n\n/* salesClerk base info */\n.edit-salesClerk .salesClerk-base-info[data-v-3bb73b86], .edit-salesClerk .salesClerk-detail-info[data-v-3bb73b86] {\n    background-color: #F5F5F7;\n}\n.salesClerk-base-info-content[data-v-3bb73b86], .salesClerk-detail-info-content[data-v-3bb73b86] {\n    width: 50%;\n    margin: 30px auto;\n}\n.salesClerk-base-info-content .edit-password[data-v-3bb73b86] {\n    cursor: pointer;\n    color: #0098cc;\n}\n.edit-salesClerk .store-manage[data-v-3bb73b86] {\n    width: 100%;\n    height: 90px;\n    overflow: auto;\n    border: 1px solid #C8C8C8;\n    padding: 10px 20px;\n}\n\n/* salesClerk detail info */\n.salesClerk-detail-info-content .edit-clerk-icon[data-v-3bb73b86] {\n    overflow: hidden;\n    margin-bottom: 30px;\n}\n.salesClerk-detail-info-content .edit-clerk-icon-fl[data-v-3bb73b86] {\n    float: left;\n    margin-left: 27px;\n}\n.salesClerk-detail-info-content .edit-clerk-icon-img[data-v-3bb73b86] {\n    margin-left: 40px;\n}\n.salesClerk-detail-info-content .edit-clerk-icon-content[data-v-3bb73b86] {\n    margin-left: 40px;\n}\n.salesClerk-detail-info-content .edit-clerk-icon-content .ivu-btn.ivu-btn-primary[data-v-3bb73b86] {\n    font-size: 12px;\n    color: #fff;\n    margin-top: 10px;\n}\n.salesClerk-detail-info-content .edit-clerk-icon-content .ivu-btn.ivu-btn-primary[data-v-3bb73b86]:last-child {\n    margin-top: 20px;\n    margin-bottom: 20px;\n}\n\n/* edit salesClerk submit button */\n.salesClerk-detail-info-content .submitEdit[data-v-3bb73b86] {\n    margin-left: 36%;\n}\n.salesClerk-detail-info-content .cancelEdit[data-v-3bb73b86] {\n    margin-left: 30px;\n}\nlabel.ivu-checkbox-wrapper-disabled[data-v-3bb73b86] {\n    pointer-events: none!important;\n}\n",""])},1316:function(e,p,m){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),function(o){var e=m(305),a=m.n(e),n=m(306),t=m.n(n),s=m(767),r=m.n(s),d=m(307),l=m(82),i=m(799),c=m(829);p.default={mixins:[i.a,c.a],data:function(){var s=this;return{allStoresIdListSelected:[],allStoresFromAreaSelected:{},allPositionsInDepartmentSelected:[],ifEditPassword:!1,positionModal:!1,firstAreaList:[],ifselected:!0,allInitPermissions:[],uploadData:{type:"retailwell",cate:"employee"},storeValue:"",storeAddressTree:[],openAddStoresModal:!1,openAddStorePermissionsModal:!1,staticURI:"",uploadAvatar:"",allDepartments:[],allPositions:[],options:{disabledDate:function(e){return e&&e.valueOf()>Date.now()}},employeeOperationType:"",employeeEdited:{department_id:"",position_id:"",username:"",sex:"1",password:"",rePassword:"",phone:"",stores:[],address:"",identity:"",email:"",employed_time:new Date,director:"",store_permissions:[],position_permissions:[],storesOfPermissionsAdded:[],storesManaged:[],avatar:""},employeeOriginalDepartmentId:null,employeeOriginalPositionId:null,ruleValidate:{username:[{required:!0,message:"姓名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:6,message:"密码长度最小为6位",trigger:"blur"}],rePassword:[{required:!0,validator:function(e,n,t){""===n?t(new Error("请再次输入密码")):n!==s.employeeEdited.password?t(new Error("两次密码不一致")):t()},trigger:"blur"}],phone:[{required:!0,validator:function(e,n,t){""===n?t(new Error("请输入手机号")):/^1[3|4|5|7|8][0-9]{9}$/.test(n)?t():t(new Error("手机号格式不正确"))},trigger:"blur"}]},storeGroupIds:[],allInitStores:[],allOriginalStoresData:[],storeSelected:{},storeIdSelected:void 0,storesAddedIsSaved:!1,showEditPasswordTip:!1,activeDepartment:{},activeDepartmentId:0}},mounted:function(){"creatEmployee"===this.$route.params.type&&this.receiveCreateEmployee(),"editEmployee"===this.$route.params.type&&this.receiveEditEmployee()},computed:{allStoresSelected:function(){var e=this,t=[];return this.allStoresIdListSelected.forEach(function(n){e.allOriginalStoresData.forEach(function(e){n===e.store_id&&t.push(e)})}),t}},methods:{receiveEditEmployee:function(){var n=this;this.employeeOperationType="编辑员工",this.showEditPasswordTip=!0,this.ifEditPassword=!1,this.$route.params.allDepartments&&(this.allDepartments=this.$route.params.allDepartments),this.allPositions=this.$route.params.allPositions,this.storeAddressTree=this.$route.params.storeAddressTree,this.staticURI=l.a.ImgSrc,this.uploadAvatar=l.a.ImgHttp+"/upload",this.allInitStores=this.$route.params.allInitStores,this.allOriginalStoresData=this.$route.params.allOriginalStoresData,this.allInitPermissions=this.$route.params.allInitPermissions,this.firstAreaList=this.$route.params.firstAreaList;var t=o.cloneDeep(this.$route.params.employee);t.password="",t.rePassword="",this.allStoresIdListSelected=r()(t.permissions.stores),this.allStoresIdListSelected=o.map(this.allStoresIdListSelected,function(e){return Number(e)}),t.employed_time&&(t.employed_time=new Date(1e3*t.employed_time)),t.storesManaged=t.stores;var s=this.allPositions.find(function(e){return e.id===t.position_id});o.each(t.storesManaged,function(e){e.store_permissions=s.store_permissions}),this.employeeOriginalDepartmentId=o.cloneDeep(t.department_id),this.employeeOriginalPositionId=o.cloneDeep(t.position_id),r()(t.permissions.stores).forEach(function(n){t.storesManaged.forEach(function(e){Number(n)===e.store_id&&(e.permissionsSelected=t.permissions.stores[n])})}),t.storesOfPermissionsAdded=[],this.employeeEdited=t;var e=this.allDepartments.find(function(e){return e.id===n.employeeEdited.department_id});this.selectDepartment(e);var i=this.allPositions.find(function(e){return e.id===n.employeeEdited.position_id});this.selectPosition(i)},receiveCreateEmployee:function(){this.employeeOperationType="添加员工",this.$route.params.allDepartments&&(this.allDepartments=this.$route.params.allDepartments),this.ifEditPassword=!0,0<this.allDepartments.length&&(this.employeeEdited.department_id=this.allDepartments[0].id),this.storeAddressTree=this.$route.params.storeAddressTree,this.staticURI=l.a.ImgSrc,this.uploadAvatar=l.a.ImgHttp+"/upload",this.allInitStores=this.$route.params.allInitStores,this.allOriginalStoresData=this.$route.params.allOriginalStoresData,this.allInitPermissions=this.$route.params.allInitPermissions,this.allPositions=this.$route.params.allPositions,this.firstAreaList=this.$route.params.firstAreaList,this.activeDepartment=this.$route.params.activeDepartment,this.activeDepartmentId=this.$route.params.activeDepartmentId,this.allDepartments.length?this.activeDepartmentId?this.selectDepartment(this.activeDepartment):this.selectDepartment(this.allDepartments[0]):this.$Message.error("请先添加部门！")},addStore:function(n){if(n.position_id){var e=this.allPositions.find(function(e){return e.id===n.position_id});n.position_permissions.length||this.addPositionPermissionsToNewEmployee(e),this.openAddStoresModal=!0,this.selectArea(this.firstAreaList)}else this.$Message.error({content:"请先选择岗位",duration:3})},selectArea:function(e){this.ifselected=!1,this.getAllStoresFromAreaSelected(e),this.updateStoresSelectedCheckboxState(),this.ifselected=!0},selectDepartment:function(e){var n=this;this.$nextTick(function(){n.employeeEdited.department_id=e.id}),this.employeeEdited.position_id="",this.formatAllInitPermissions(),this.allInitPermissions.forEach(function(e){e.disabled=!0,e.functions.forEach(function(e){e.selected=!1,e.disabled=!0})}),this.extendPermissionsOfDepartmentSelected(e),this.getCheckboxAbledCounts(),this.renderCheckboxState(),this.getAllPositionsInDepartmentSelected(e.id),"添加员工"===this.employeeOperationType&&this.selectPosition(this.allPositionsInDepartmentSelected[0]),this.$nextTick(function(){n.employeeOriginalDepartmentId!==n.employeeEdited.department_id&&n.selectPosition(n.allPositionsInDepartmentSelected[0])})},selectPosition:function(n){var e=this;n&&(this.employeeEdited.position_id=n.id,this.$nextTick(function(){e.employeeOriginalPositionId!==e.employeeEdited.position_id?e.employeeEdited.storesManaged.length&&(o.each(e.employeeEdited.storesManaged,function(e){e.permissionsSelected=n.store_permissions,e.store_permissions=n.store_permissions}),e.employeeEdited.store_permissions=n.store_permissions,e.employeeEdited.position_permissions=n.permissions):e.addPositionPermissionsToNewEmployee(n)}))},addPositionPermissionsToNewEmployee:function(e){this.employeeEdited.storesManaged.length?(this.employeeEdited.position_permissions=e.permissions,this.employeeEdited.store_permissions=e.store_permissions):e.store_permissions.length&&(this.employeeEdited.position_permissions=e.permissions,this.employeeEdited.store_permissions=e.store_permissions)},getAllPositionsInDepartmentSelected:function(n){var t=[];this.allPositions.forEach(function(e){n===e.departmentAttached.id&&t.push(e)}),this.allPositionsInDepartmentSelected=t,this.allPositionsInDepartmentSelected.length?this.showFirstPositionInDepartmentSelected():this.positionModal=!0},showFirstPositionInDepartmentSelected:function(){this.employeeEdited.position_id=this.allPositionsInDepartmentSelected[0].id},editPassword:function(){this.ifEditPassword=!0,this.showEditPasswordTip=!1},confirmPositionModal:function(){this.positionModal=!1,this.$router.push("/salesclerkManage/clerkManage/department")},cancelPositionModal:function(){this.positionModal=!1},handleCheckAll:function(e){var s=this;this.ifselected=!1,e.checkAll=!e.checkAll,e.indeterminate=!1,e.disabled||(e.checkAll?(e.permissionIds=[],e.functions.forEach(function(n){n.disabled||(n.selected=!0,e.permissionIds.push(n.id),s.employeeEdited.storesOfPermissionsAdded.forEach(function(e){e.store_id===s.storeIdSelected&&(e.permissionsSelected.includes(n.id)||e.permissionsSelected.push(n.id))}))})):(e.permissionIds=[],e.functions.forEach(function(t){t.disabled||(t.selected=!1,s.employeeEdited.storesOfPermissionsAdded.forEach(function(e){if(e.store_id===s.storeIdSelected){var n=e.permissionsSelected.indexOf(t.id);-1!==n&&e.permissionsSelected.splice(n,1)}}))}))),this.renderCheckboxState(),this.updatePermissionsSelectedFromStoreSelected(this.storeIdSelected),this.ifselected=!0},handleCheckSingle:function(e,t){var s=this;this.ifselected=!1;var n=e.permissionIds.indexOf(t.id);-1!==n?(t.selected=!1,e.permissionIds.splice(n,1),this.employeeEdited.storesOfPermissionsAdded.forEach(function(e){if(e.store_id===s.storeIdSelected){var n=e.permissionsSelected.indexOf(t.id);-1!==n&&e.permissionsSelected.splice(n,1)}})):(t.selected=!0,e.permissionIds.push(t.id),this.employeeEdited.storesOfPermissionsAdded.forEach(function(e){e.store_id===s.storeIdSelected&&e.permissionsSelected.push(t.id)})),e.permissionIds.length===e.checkboxAbledCount?e.checkAll=!0:e.checkAll=!1,0<e.permissionIds.length&&e.permissionIds.length<e.checkboxAbledCount?e.indeterminate=!0:e.indeterminate=!1,this.renderCheckboxState(),this.updatePermissionsSelectedFromStoreSelected(this.storeIdSelected),this.ifselected=!0},deleteStoreSelected:function(n){var e=this.allStoresIdListSelected.findIndex(function(e){return e===n});this.allStoresIdListSelected.splice(e,1),this.allStoresFromAreaSelected.storeGroupIds.length||(this.allStoresFromAreaSelected.indeterminate=!1),this.updateStoresSelectedCheckboxState()},handleCheckAllStore:function(n){var t=this;this.ifselected=!1,n.checkAll=!n.checkAll,n.indeterminate=!1,n.checkAll?(n.storeGroupIds=[],n.stores.forEach(function(e){e.selected=!0,n.storeGroupIds.push(e.store_id),t.allStoresIdListSelected.includes(e.store_id)||t.allStoresIdListSelected.push(e.store_id)})):(n.storeGroupIds=[],n.stores.forEach(function(e){e.selected=!1;var n=t.allStoresIdListSelected.indexOf(e.store_id);-1!==n&&t.allStoresIdListSelected.splice(n,1)})),this.renderStoreCheckboxState(n),this.ifselected=!0},handleCheckSingleStore:function(e,n){this.ifselected=!1;var t=e.storeGroupIds.indexOf(n.store_id);if(-1!==t){n.selected=!1,e.storeGroupIds.splice(t,1);var s=this.allStoresIdListSelected.indexOf(n.store_id);-1!==s&&this.allStoresIdListSelected.splice(s,1)}else n.selected=!0,e.storeGroupIds.push(n.store_id),this.allStoresIdListSelected.includes(n.store_id)||this.allStoresIdListSelected.push(n.store_id);e.storeGroupIds.length===e.stores.length?(e.checkAll=!0,e.indeterminate=!1):0<e.storeGroupIds.length&&e.storeGroupIds.length<e.stores.length?(e.checkAll=!1,e.indeterminate=!0):e.indeterminate=!1,e.storeGroupIds.length||(e.indeterminate=!1),this.renderStoreCheckboxState(e),this.ifselected=!0},renderStoreCheckboxState:function(e){e.storeGroupIds.length===e.stores.length?(e.checkAll=!0,e.indeterminate=!1):0<e.storeGroupIds.length&&e.storeGroupIds.length<e.stores.length?(e.checkAll=!1,e.indeterminate=!0):(e.checkAll=!1,e.indeterminate=!1)},uploadAvatarSuccess:function(e,n){e&&"success"===e.error?(this.$Message.success("头像上传成功！"),this.employeeEdited.avatar=e.uri):this.$Message.error("头像上传失败！")},handleFormatError:function(e){this.$Notice.warning({title:"图片格式不正确",desc:'图片"'+e.name+'"格式不正确，请重新上传jpeg/jpg/png等格式图片!'})},deleteStore:function(n){var e=o.findIndex(this.employeeEdited.storesManaged,function(e){return e.store_id===n});this.employeeEdited.storesManaged.splice(e,1);var t=o.findIndex(this.allStoresIdListSelected,function(e){return e===n});this.allStoresIdListSelected.splice(t,1)},submit:function(){var n,r=this;this.$refs.employeeEdited.validate((n=t()(a.a.mark(function e(n){var t,s,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=17;break}if(t=[],r.employeeEdited.storesManaged.length?r.employeeEdited.storesManaged.forEach(function(e){t.push({id:e.store_id,name:e.store_name,permissions:e.permissionsSelected})}):r.$Message.error({content:"未添加店铺",duration:3}),s=void 0,s=r.employeeEdited.employed_time?parseInt(Number(r.employeeEdited.employed_time.getTime())/1e3):parseInt((new Date).getTime()/1e3),"添加员工"!==r.employeeOperationType){e.next=10;break}return e.next=8,d.m(r.employeeEdited.position_id,r.employeeEdited.department_id,r.employeeEdited.username,r.employeeEdited.password,r.employeeEdited.sex,r.employeeEdited.phone,t,r.employeeEdited.avatar,r.employeeEdited.address,r.employeeEdited.identity,r.employeeEdited.email,s,r.employeeEdited.director);case 8:(i=e.sent)&&200===i.code&&(r.$Message.success("添加员工成功!"),r.$router.push({name:"department"}));case 10:if("编辑员工"!==r.employeeOperationType){e.next=15;break}return e.next=13,d._55(r.employeeEdited.id,r.employeeEdited.position_id,r.employeeEdited.department_id,r.employeeEdited.username,r.employeeEdited.password,r.employeeEdited.sex,r.employeeEdited.phone,t,r.employeeEdited.avatar,r.employeeEdited.address,r.employeeEdited.identity,r.employeeEdited.email,s,r.employeeEdited.director);case 13:(o=e.sent)&&200===o.code&&(r.$Message.success("编辑员工成功!"),r.$router.push({name:"department"}));case 15:e.next=18;break;case 17:r.$Message.error("表单验证失败!");case 18:case"end":return e.stop()}},e,r)})),function(e){return n.apply(this,arguments)}))},cancelEdit:function(){this.$router.push({name:"department"})},updatePermissionsSelectedFromStoreSelected:function(n){var t=this.employeeEdited.storesOfPermissionsAdded.find(function(e){return e.store_id===n});this.allInitPermissions.forEach(function(e){e.checkAll?e.functions.forEach(function(e){t.permissionsSelected.includes(e.id)||t.permissionsSelected.push(e.id)}):e.functions.forEach(function(e){if(t.permissionsSelected.includes(e.id)){var n=t.permissionsSelected.indexOf(e.id);t.permissionsSelected.splice(n,1)}}),e.functions.forEach(function(e){if(e.selected&&!t.permissionsSelected.includes(e.id)&&t.permissionsSelected.push(e.id),!e.selected&&t.permissionsSelected.includes(e.id)){var n=t.permissionsSelected.indexOf(e.id);t.permissionsSelected.splice(n,1)}})})},cancelSaveEditStore:function(){this.employeeEdited.storesManaged.length||(this.allStoresFromAreaSelected={},this.allStoresIdListSelected=[],this.employeeEdited.storesManaged=[]),this.openAddStorePermissionsModal=!1},cancelEditStore:function(){this.storesAddedIsSaved||(this.allStoresFromAreaSelected={},this.allStoresIdListSelected=[]),this.openAddStoresModal=!1},save:function(){this.employeeEdited.storesManaged=o.cloneDeep(this.employeeEdited.storesOfPermissionsAdded),this.employeeEdited.storesOfPermissionsAdded.length=0,this.storesAddedIsSaved=!0,this.$Message.success("保存成功"),this.openAddStorePermissionsModal=!1}}}}.call(p,m(122))},1317:function(e,n,t){e.exports={render:function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("div",{staticClass:"edit-salesClerk"},[i("div",{staticClass:"edit-salesClerk-content"},[i("p",{staticClass:"salesClerk-base-info title PingFangSC-Medium-font"},[s._v(s._s(s.employeeOperationType)+"基础信息")]),s._v(" "),i("Form",{ref:"employeeEdited",attrs:{model:s.employeeEdited,rules:s.ruleValidate,"label-width":100}},[i("div",{staticClass:"salesClerk-base-info-content"},[i("FormItem",{attrs:{label:"部门：",prop:"departmentId"}},[i("Select",{attrs:{placeholder:"请选择部门"},model:{value:s.employeeEdited.department_id,callback:function(e){s.$set(s.employeeEdited,"department_id",e)},expression:"employeeEdited.department_id"}},s._l(s.allDepartments,function(n,e){return i("Option",{key:e,attrs:{value:n.id},nativeOn:{click:function(e){e.preventDefault(),s.selectDepartment(n)}}},[s._v("\n                            "+s._s(n.name)+"\n                        ")])}))],1),s._v(" "),i("FormItem",{attrs:{label:"选择岗位：",prop:"position_id"}},[i("Select",{attrs:{placeholder:"请选择岗位"},model:{value:s.employeeEdited.position_id,callback:function(e){s.$set(s.employeeEdited,"position_id",e)},expression:"employeeEdited.position_id"}},s._l(s.allPositionsInDepartmentSelected,function(n,e){return i("Option",{key:Math.random(),attrs:{value:n.id},nativeOn:{click:function(e){e.preventDefault(),s.selectPosition(n)}}},[s._v("\n                            "+s._s(n.name)+"\n                        ")])}))],1),s._v(" "),i("FormItem",{attrs:{label:"姓名：",prop:"username"}},[i("Input",{attrs:{placeholder:"请填写姓名"},model:{value:s.employeeEdited.username,callback:function(e){s.$set(s.employeeEdited,"username",e)},expression:"employeeEdited.username"}})],1),s._v(" "),i("FormItem",{attrs:{label:"性别：",prop:"sex"}},[i("RadioGroup",{model:{value:s.employeeEdited.sex,callback:function(e){s.$set(s.employeeEdited,"sex",e)},expression:"employeeEdited.sex"}},[i("Radio",{attrs:{label:"1"}},[s._v("男")]),s._v(" "),i("Radio",{attrs:{label:"0"}},[s._v("女")])],1)],1),s._v(" "),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:s.showEditPasswordTip,expression:"showEditPasswordTip"}],attrs:{label:"密码："}},[i("p",{staticClass:"edit-password",on:{click:s.editPassword}},[s._v("编辑密码")])]),s._v(" "),"添加员工"===s.employeeOperationType&&s.ifEditPassword?i("FormItem",{attrs:{label:"密码：",prop:"password"}},[i("Input",{attrs:{type:"password",placeholder:"请填写密码"},model:{value:s.employeeEdited.password,callback:function(e){s.$set(s.employeeEdited,"password",e)},expression:"employeeEdited.password"}})],1):s._e(),s._v(" "),"编辑员工"===s.employeeOperationType&&s.ifEditPassword?i("FormItem",{attrs:{label:"新密码：",prop:"password"}},[i("Input",{attrs:{type:"password",placeholder:"请填写密码"},model:{value:s.employeeEdited.password,callback:function(e){s.$set(s.employeeEdited,"password",e)},expression:"employeeEdited.password"}})],1):s._e(),s._v(" "),s.ifEditPassword?i("FormItem",{attrs:{label:"确认密码：",prop:"rePassword"}},[i("Input",{attrs:{type:"password",placeholder:"请确认密码"},model:{value:s.employeeEdited.rePassword,callback:function(e){s.$set(s.employeeEdited,"rePassword",e)},expression:"employeeEdited.rePassword"}})],1):s._e(),s._v(" "),i("FormItem",{attrs:{label:"手机号码：",prop:"phone"}},[i("Input",{attrs:{placeholder:"请填写手机号码"},model:{value:s.employeeEdited.phone,callback:function(e){s.$set(s.employeeEdited,"phone",e)},expression:"employeeEdited.phone"}})],1),s._v(" "),i("FormItem",{attrs:{label:"管理店铺：",prop:"store"}},[i("div",{staticClass:"store-manage"},[s._l(s.employeeEdited.storesManaged,function(n,e){return s.employeeEdited.storesManaged.length?i("Tag",{key:e,attrs:{closable:""},on:{"on-close":function(e){s.deleteStore(n.store_id)}}},[s._v(s._s(n.store_name)+"\n                        ")]):s._e()}),s._v(" "),i("Button",{attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:function(e){s.addStore(s.employeeEdited)}}},[s._v("\n                            添加店铺\n                        ")])],2)])],1),s._v(" "),i("p",{staticClass:"salesClerk-detail-info title PingFangSC-Medium-font"},[s._v(s._s(s.employeeOperationType)+"详细信息")]),s._v(" "),i("div",{staticClass:"salesClerk-detail-info-content"},[i("div",{staticClass:"edit-clerk-icon"},[i("span",{staticClass:"edit-clerk-icon-fl edit-clerk-icon-title"},[s._v("修改照片：")]),s._v(" "),s.employeeEdited.avatar?i("img",{staticClass:"edit-clerk-icon-fl edit-clerk-icon-img",attrs:{src:s.staticURI+s.employeeEdited.avatar,width:"100px"}}):i("img",{staticClass:"edit-clerk-icon-fl edit-clerk-icon-img",attrs:{src:t(782),width:"100px"}}),s._v(" "),i("div",{staticClass:"edit-clerk-icon-content edit-clerk-icon-fl"},[i("Button",{attrs:{type:"primary"}},[s._v("拍照上传")]),s._v(" "),i("Upload",{ref:"upload",attrs:{"on-success":s.uploadAvatarSuccess,action:s.uploadAvatar,format:["jpg","jpeg","png"],"on-format-error":s.handleFormatError,name:"image",data:s.uploadData,"show-upload-list":!1}},[i("Button",{attrs:{type:"primary"}},[s._v("本地上传")])],1),s._v(" "),i("p",[s._v("(上传格式如：jpg、jpeg、png、pdf)")])],1)]),s._v(" "),i("FormItem",{attrs:{label:"地址：",prop:"address"}},[i("Input",{attrs:{placeholder:"请填写地址"},model:{value:s.employeeEdited.address,callback:function(e){s.$set(s.employeeEdited,"address",e)},expression:"employeeEdited.address"}})],1),s._v(" "),i("FormItem",{attrs:{label:"身份证号：",prop:"identity"}},[i("Input",{attrs:{placeholder:"请填写身份证号"},model:{value:s.employeeEdited.identity,callback:function(e){s.$set(s.employeeEdited,"identity",e)},expression:"employeeEdited.identity"}})],1),s._v(" "),i("FormItem",{attrs:{label:"邮箱：",prop:"email"}},[i("Input",{attrs:{placeholder:"请填写邮箱"},model:{value:s.employeeEdited.email,callback:function(e){s.$set(s.employeeEdited,"email",e)},expression:"employeeEdited.email"}})],1),s._v(" "),i("FormItem",{attrs:{label:"入职时间：",prop:"time"}},[i("DatePicker",{attrs:{type:"date",placeholder:"选择日期",options:s.options},model:{value:s.employeeEdited.employed_time,callback:function(e){s.$set(s.employeeEdited,"employed_time",e)},expression:"employeeEdited.employed_time"}})],1),s._v(" "),i("FormItem",{attrs:{label:"主管：",prop:"supervisor"}},[i("Input",{attrs:{placeholder:"请填写主管"},model:{value:s.employeeEdited.director,callback:function(e){s.$set(s.employeeEdited,"director",e)},expression:"employeeEdited.director"}})],1),s._v(" "),i("FormItem",[i("Button",{staticClass:"submitEdit",attrs:{type:"primary"},on:{click:s.submit}},[s._v("保存")]),s._v(" "),i("Button",{staticClass:"cancelEdit",attrs:{type:"ghost"},on:{click:s.cancelEdit}},[s._v("取消")])],1)],1)])],1),s._v(" "),i("Modal",{staticClass:"edit-store-modal",attrs:{title:"添加店铺",width:"800"},model:{value:s.openAddStoresModal,callback:function(e){s.openAddStoresModal=e},expression:"openAddStoresModal"}},[i("div",{staticClass:"edit-store-modal-content"},[i("div",{staticClass:"edit-store-modal-content-tree"},[i("p",{staticClass:"edit-store-modal-content-tree-title PingFangSC-Medium-font"},[s._v("区域")]),s._v(" "),i("Tree",{attrs:{data:s.storeAddressTree},on:{"on-select-change":s.selectArea}})],1),s._v(" "),i("div",{staticClass:"edit-store-modal-content-info"},[i("div",{staticClass:"edit-store-modal-content-info-store"},[i("Input",{attrs:{placeholder:"请输入..."},model:{value:s.storeValue,callback:function(e){s.storeValue=e},expression:"storeValue"}}),s._v(" "),i("Checkbox",{attrs:{value:s.allStoresFromAreaSelected.checkAll,indeterminate:s.allStoresFromAreaSelected.indeterminate},nativeOn:{click:function(e){e.preventDefault(),s.handleCheckAllStore(s.allStoresFromAreaSelected)}}},[s._v("\n                        全选\n                    ")]),s._v(" "),s._l(s.allStoresFromAreaSelected.stores,function(n,e){return i("div",{directives:[{name:"show",rawName:"v-show",value:s.ifselected,expression:"ifselected"}],key:e},[i("CheckboxGroup",{staticStyle:{float:"left"},model:{value:s.allStoresFromAreaSelected.storeGroupIds,callback:function(e){s.$set(s.allStoresFromAreaSelected,"storeGroupIds",e)},expression:"allStoresFromAreaSelected.storeGroupIds"}},[i("Checkbox",{key:Math.random(),attrs:{value:n.selected,label:n.store_id},nativeOn:{click:function(e){e.preventDefault(),s.handleCheckSingleStore(s.allStoresFromAreaSelected,n)}}},[s._v("\n                                "+s._s(n.sotre_name)+"\n                            ")])],1)],1)})],2),s._v(" "),i("div",{staticClass:"edit-store-modal-content-info-store-selected"},[i("p",{staticClass:"edit-store-modal-content-info-store-selected-title PingFangSC-Medium-font"},[s._v("已添加店铺")]),s._v(" "),i("div",{staticClass:"edit-store-modal-content-info-store-selected-content"},s._l(s.allStoresSelected,function(n,e){return n.sotre_name?i("div",{key:e,staticClass:"store-button-content"},[i("span",{staticClass:"store-button"},[s._v(s._s(n.sotre_name))]),s._v(" "),i("i",{staticClass:"deletelabel",on:{click:function(e){s.deleteStoreSelected(n.store_id)}}})]):s._e()}))])])]),s._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"primary"},on:{click:s.next}},[s._v("下一步")]),s._v(" "),i("Button",{staticStyle:{"margin-left":"30px","margin-right":"40%"},attrs:{type:"ghost"},on:{click:s.cancelEditStore}},[s._v("取消")])],1)]),s._v(" "),i("Modal",{staticClass:"edit-store-modal",attrs:{title:"添加店铺权限",width:"800"},model:{value:s.openAddStorePermissionsModal,callback:function(e){s.openAddStorePermissionsModal=e},expression:"openAddStorePermissionsModal"}},[i("div",{staticClass:"edit-store-modal-content"},[i("div",{staticClass:"edit-store-modal-content-save"},[i("p",{staticClass:"edit-store-modal-content-save-title PingFangSC-Medium-font"},[s._v("已添加店铺")]),s._v(" "),s.employeeEdited.storesOfPermissionsAdded.length?i("Menu",{attrs:{"active-name":s.employeeEdited.storesOfPermissionsAdded[0].store_id,theme:"light",width:"auto"},on:{"on-select":s.selectStore}},s._l(s.employeeEdited.storesOfPermissionsAdded,function(e,n){return i("MenuItem",{key:n,attrs:{name:e.store_id}},[s._v("\n                        "+s._s(e.store_name)+"\n                    ")])})):s._e()],1),s._v(" "),i("div",{staticClass:"edit-store-modal-content-save-permission"},[i("div",{staticClass:"store-permission"},[i("p",{staticClass:"title"},[s._v("店铺权限")]),s._v(" "),s._l(s.allInitPermissions,function(t,e){return"0"===t.type?i("div",{key:e,staticClass:"data-center"},[i("div",{directives:[{name:"show",rawName:"v-show",value:s.ifselected,expression:"ifselected"}]},[i("Checkbox",{attrs:{indeterminate:t.indeterminate,value:t.checkAll,disabled:t.disabled},nativeOn:{click:function(e){e.preventDefault(),s.handleCheckAll(t)}}},[s._v("\n                                "+s._s(t.func_group_name)+"\n                            ")]),s._v(" "),i("p",{staticClass:"severed"}),s._v(" "),i("CheckboxGroup",{model:{value:t.permissionIds,callback:function(e){s.$set(t,"permissionIds",e)},expression:"permissionGroup.permissionIds"}},s._l(t.functions,function(n,e){return i("Checkbox",{key:Math.random(),attrs:{disabled:n.disabled,value:n.selected,label:n.id},nativeOn:{click:function(e){e.preventDefault(),s.handleCheckSingle(t,n)}}},[s._v("\n                                    "+s._s(n.func_name)+"\n                                ")])}))],1)]):s._e()})],2)])]),s._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"primary"},on:{click:s.save}},[s._v("保存")]),s._v(" "),i("Button",{staticStyle:{"margin-left":"30px","margin-right":"40%"},attrs:{type:"ghost"},on:{click:s.cancelSaveEditStore}},[s._v("取消\n            ")])],1)]),s._v(" "),i("Modal",{staticClass:"edit-store-modal",attrs:{title:"岗位提示",width:"400"},model:{value:s.positionModal,callback:function(e){s.positionModal=e},expression:"positionModal"}},[i("p",{staticClass:"clerk-departing-modal-info"},[s._v("当前部门下没有添加任何岗位，是否返回添加？")]),s._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"primary"},on:{click:s.confirmPositionModal}},[s._v("确定")]),s._v(" "),i("Button",{staticStyle:{"margin-left":"30px","margin-right":"108px"},attrs:{type:"ghost"},on:{click:s.cancelPositionModal}},[s._v("取消\n            ")])],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},1407:function(e,n,t){var s=!1;var i=t(304)(t(1316),t(1317),function(e){s||t(1314)},"data-v-3bb73b86",null);i.options.__file="/Users/zhouqichao/Desktop/sxkj/shangu_online/src/components/views/salesclerkManage/children/editSalesclerk.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] editSalesclerk.vue: functional components are not supported with templates, they should use render functions."),e.exports=i.exports},767:function(e,n,t){e.exports={default:t(769),__esModule:!0}},769:function(e,n,t){t(770),e.exports=t(31).Object.keys},770:function(e,n,t){var s=t(124),i=t(123);t(771)("keys",function(){return function(e){return i(s(e))}})},771:function(e,n,t){var i=t(49),o=t(31),r=t(84);e.exports=function(e,n){var t=(o.Object||{})[e]||Object[e],s={};s[e]=n(t),i(i.S+i.F*r(function(){t(1)}),"Object",s)}},782:function(e,n){e.exports="data:image/png;base64,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"},799:function(e,n,t){"use strict";t.d(n,"a",function(){return f});var s=t(309),i=t.n(s),o=t(83),r=t.n(o),a=t(305),d=t.n(a),l=t(306),c=t.n(l),p=t(307),m=t(82),u=t(121),h=t(81),f={data:function(){return{}},methods:{getUserInfoByTokenAction:function(){var t=this;return c()(d.a.mark(function e(){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p._33();case 2:(n=e.sent)&&200===n.code?t.setSession(n):(clearInterval(m.a.clearSetInterval),window.sessionStorage.clear(),u.a.clearAllCookie(h.a.COOKIE_NAME),t.$router.push({path:"/login"}));case 4:case"end":return e.stop()}},e,t)}))()},setSession:function(e){m.a.authToken=e.data.auth_token.toString(),e.data.position&&window.sessionStorage.setItem("position",e.data.position),window.sessionStorage.setItem("token",e.data.auth_token.toString()),0<e.data.stores.length&&window.sessionStorage.setItem("storeToken",e.data.stores[0].store_token),window.sessionStorage.setItem("managementPermissions",e.data.permissions.management.toString()),null!==e.data.permissions.stores?window.sessionStorage.setItem("storesPermissions",r()(e.data.permissions.stores)):m.a.TabMenuShow=!1,e.data.stores&&(window.sessionStorage.setItem("storesList",r()(e.data.stores)),1===e.data.stores.length&&0<e.data.stores.length&&window.sessionStorage.setItem("storeId",e.data.stores[0].store_id)),window.sessionStorage.setItem("userName",e.data.username),this.$store.state.sessionStorageInfo=i()({},window.sessionStorage)}}}},829:function(e,n,t){"use strict";(function(o){n.a={methods:{getCheckboxAbledCounts:function(){this.allInitPermissions.forEach(function(n){n.functions.forEach(function(e){e.disabled||(n.checkboxAbledCount+=1)})})},formatAllInitPermissions:function(){this.allInitPermissions.forEach(function(e){e.checkAll=!1,e.disabled=!1,e.indeterminate=!1,e.permissionIds=[],e.checkboxAbledCount=0,e.functions.forEach(function(e){e.selected=!1,e.disabled=!1})})},getAllStoresFromAreaSelected:function(n){this.allStoresFromAreaSelected=this.allInitStores.find(function(e){return e.title===n[0].title})},updateStoresSelectedCheckboxState:function(){var n=this;this.allStoresFromAreaSelected.storeGroupIds=[],this.allStoresIdListSelected.length?this.allStoresFromAreaSelected.stores.forEach(function(e){n.allStoresIdListSelected.includes(e.store_id)?(e.selected=!0,n.allStoresFromAreaSelected.storeGroupIds.push(e.store_id),n.allStoresFromAreaSelected.stores.every(function(e){return n.allStoresIdListSelected.includes(e.store_id)})&&n.allStoresFromAreaSelected.stores.length===n.allStoresFromAreaSelected.storeGroupIds.length?(n.allStoresFromAreaSelected.checkAll=!0,n.allStoresFromAreaSelected.indeterminate=!1):(n.allStoresFromAreaSelected.checkAll=!1,n.allStoresFromAreaSelected.indeterminate=!0)):(e.selected=!1,n.allStoresFromAreaSelected.checkAll=!1)}):(this.allStoresFromAreaSelected.checkAll=!1,this.allStoresFromAreaSelected.indeterminate=!1)},next:function(){var s=this;this.allStoresSelected.length?(this.openAddStoresModal=!1,this.openAddStorePermissionsModal=!0,this.employeeEdited.storesOfPermissionsAdded=[],this.allStoresSelected.forEach(function(n){var e=[];if(s.employeeEdited.storesManaged.length){var t=o.find(s.employeeEdited.storesManaged,function(e){return e.store_id===n.store_id});e=void 0!==t?t.permissionsSelected:s.employeeEdited.store_permissions}s.employeeEdited.storesOfPermissionsAdded.push({store_name:n.sotre_name,store_id:n.store_id,store_permissions:s.employeeEdited.store_permissions,permissionsSelected:o.cloneDeep(e)})}),this.selectStore(this.employeeEdited.storesOfPermissionsAdded[0].store_id)):this.$Notice.warning({title:"添加店铺",desc:"请先添加店铺"})},selectStore:function(n){this.ifselected=!1,this.storeIdSelected=n;var e=this.employeeEdited.storesOfPermissionsAdded.find(function(e){return e.store_id===n});this.resetAllInitPermissions(),this.allInitPermissions.forEach(function(e){e.disabled=!0,e.functions.forEach(function(e){e.disabled=!0})}),this.extendPermissionsOfPositionSelected(e),this.getCheckboxAbledCounts(),this.renderCheckboxState(),this.ifselected=!0},resetAllInitPermissions:function(){o.each(this.allInitPermissions,function(e){e.checkAll=!1,e.disabled=!1,e.indeterminate=!1,e.permissionIds=[],e.checkboxAbledCount=0,o.each(e.functions,function(e){e.selected=!1,e.disabled=!1})})},extendPermissionsOfPositionSelected:function(e){o.each(this.allInitPermissions,function(t){o.each(t.functions,function(n){o.each(e.store_permissions,function(e){n.id===e&&(n.disabled=!1)}),o.each(e.permissionsSelected,function(e){n.id===e&&(n.selected=!0,t.permissionIds.push(n.id))})})})},renderCheckboxState:function(){this.allInitPermissions.forEach(function(e){0!==e.checkboxAbledCount?e.permissionIds.length===e.checkboxAbledCount?(e.indeterminate=!1,e.disabled=!1,e.checkAll=!0):0<e.permissionIds.length&&e.permissionIds.length<e.checkboxAbledCount?(e.indeterminate=!0,e.disabled=!1):(e.disabled=!1,e.indeterminate=!1):(e.disabled=!0,e.checkAll=!1)})},extendPermissionsOfDepartmentSelected:function(s){var i=this;this.allInitPermissions.forEach(function(t){t.functions.forEach(function(e){if(s.totalPermissions.length){var n=[];o.isEmpty(i.positionEdited)?(n=s.totalPermissions).includes(e.id)&&(e.disabled=!1,e.selected=!0,t.permissionIds.push(e.id)):(n=o.intersection(s.totalPermissions,i.positionEdited.permissions),s.totalPermissions.includes(e.id)&&(e.disabled=!1),n.includes(e.id)&&(e.selected=!0,t.permissionIds.push(e.id)))}})})}}}}).call(n,t(122))}});