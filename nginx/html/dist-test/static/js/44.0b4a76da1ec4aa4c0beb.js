webpackJsonp([44],{1334:function(e,t,n){var o=n(1335);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(589)("6915909a",o,!1,{})},1335:function(e,t,n){(e.exports=n(588)()).push([e.i,"\n.delete-job-modal .delete-job-modal-info {\n    height: 60px;\n    line-height: 60px;\n    text-align: center;\n}\n.delete-job-modal .ivu-modal-header {\n    border-bottom: 0;\n    padding: 14px 30px;\n}\n.delete-job-modal .ivu-modal-body {\n    padding: 0 16px;\n}\n.delete-job-modal .ivu-modal-footer {\n    border-top: 0;\n}\n",""])},1336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s,i,a,r=n(305),l=n.n(r),c=n(306),d=n.n(c),u=n(307);t.default={data:function(){var n=this;return{jobId:"",jobList:[],allDepartments:[],allInitPermissions:[],allPermissions:[],deleteJobInfo:"",deleteJobModal:!1,columnsJob:[{title:"岗位名称",key:"name",align:"left"},{title:"部门",key:"departmentName",align:"left"},{title:"岗位描述",key:"description",align:"left"},{title:"操作",key:"action",align:"center",width:140,render:function(e,t){return e("div",[e("Button",{props:{type:"text",size:"large",icon:"edit"},on:{click:function(){console.log("param.row"),console.log(t.row),n.editPosition(t.row)}}}),e("Button",{props:{type:"text",size:"large",icon:"android-delete"},on:{click:function(){n.deleteJobInfo=t.row.name,n.jobId=t.row.id,n.deleteJobModal=!0}}})])}}],allPositions:[]}},mounted:function(){this.getAllInitPermissions(),this.getAllPositions(),this.getAllDepartments()},methods:{getAllInitPermissions:(a=d()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.S();case 2:(t=e.sent)&&200===t.code&&(this.allInitPermissions=t.data);case 4:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)}),formatAllInitPermissions:function(){this.allInitPermissions.forEach(function(e){e.checkAll=!1,e.disabled=!1,e.indeterminate=!1,e.permissionIds=[],e.checkboxAbledCount=0,e.functions.forEach(function(e){e.selected=!1,e.disabled=!1})})},getAllDepartments:(i=d()(l.a.mark(function e(){var n,t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,u.Q();case 3:(t=e.sent)&&200===t.code&&(t.data.forEach(function(e){var t={id:e.id,name:e.name,totalPermissions:e.total_permissions};n.push(t)}),this.allDepartments=n);case 5:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),getAllPositions:(s=d()(l.a.mark(function e(){var n,t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,u.T(0);case 3:(t=e.sent)&&200===t.code&&(t.data.forEach(function(e){var t={id:e.id,name:e.name,permissions:e.position_permissions,description:e.description,departmentName:e.department_name,departmentAttached:{id:e.department_id,name:e.department_name,permissions:e.department_permissions}};n.push(t)}),this.allPositions=n);case 5:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)}),getCheckboxAbledCounts:function(){this.allInitPermissions.forEach(function(t){t.functions.forEach(function(e){e.disabled||(t.checkboxAbledCount+=1)})})},creatPosition:function(){this.getAllInitPermissions(),this.formatAllInitPermissions(),this.getCheckboxAbledCounts(),this.$router.push({name:"creatDepartment",params:{type:"creatPosition",allDepartments:this.allDepartments,allInitPermissions:this.allInitPermissions}})},editPosition:function(e){this.$router.push({name:"creatDepartment",params:{type:"editPosition",positionEdited:e,allDepartments:this.allDepartments,allInitPermissions:this.allInitPermissions}})},cancelDeleteJob:function(){this.deleteJobModal=!1},deleteJob:(o=d()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.C(this.jobId);case 2:(t=e.sent)&&(200===t.code?this.$Message.success("删除成功"):405===t.code&&this.$Message.success("该岗位下存在员工，不可删除"),this.deleteJobModal=!1,this.getAllPositions());case 4:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})}}},1337:function(e,t,n){e.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"job-manage"},[n("Button",{attrs:{type:"primary"},on:{click:t.creatPosition}},[t._v("新建自定义岗位")]),t._v(" "),n("Table",{attrs:{stripe:"",columns:t.columnsJob,data:t.allPositions}}),t._v(" "),n("Modal",{staticClass:"delete-job-modal",attrs:{title:"岗位删除",width:"300"},model:{value:t.deleteJobModal,callback:function(e){t.deleteJobModal=e},expression:"deleteJobModal"}},[n("p",{staticClass:"delete-job-modal-info"},[t._v("你确定要将“"+t._s(t.deleteJobInfo)+"”岗位删除吗？")]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary"},on:{click:t.deleteJob}},[t._v("确定")]),t._v(" "),n("Button",{staticStyle:{"margin-left":"30px","margin-right":"56px"},attrs:{type:"ghost"},on:{click:t.cancelDeleteJob}},[t._v("取消")])],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},1412:function(e,t,n){var o=!1;var s=n(304)(n(1336),n(1337),function(e){o||n(1334)},null,null);s.options.__file="/Users/zhouqichao/Desktop/sxkj/shangu_online/src/components/views/salesclerkManage/children/job.vue",s.esModule&&Object.keys(s.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] job.vue: functional components are not supported with templates, they should use render functions."),e.exports=s.exports}});